var aP=Object.defineProperty;var xA=s=>{throw TypeError(s)};var oP=(s,e,t)=>e in s?aP(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var F=(s,e,t)=>oP(s,typeof e!="symbol"?e+"":e,t),Gy=(s,e,t)=>e.has(s)||xA("Cannot "+t);var k=(s,e,t)=>(Gy(s,e,"read from private field"),t?t.call(s):e.get(s)),ie=(s,e,t)=>e.has(s)?xA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),U=(s,e,t,n)=>(Gy(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),pe=(s,e,t)=>(Gy(s,e,"access private method"),t);var cf=(s,e,t,n)=>({set _(i){U(s,e,i,t)},get _(){return k(s,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function lP(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var zy={exports:{}},uf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA;function cP(){if(vA)return uf;vA=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,r){var a=null;if(r!==void 0&&(a=""+r),i.key!==void 0&&(a=""+i.key),"key"in i){r={};for(var l in i)l!=="key"&&(r[l]=i[l])}else r=i;return i=r.ref,{$$typeof:s,type:n,key:a,ref:i!==void 0?i:null,props:r}}return uf.Fragment=e,uf.jsx=t,uf.jsxs=t,uf}var bA;function uP(){return bA||(bA=1,zy.exports=cP()),zy.exports}var he=uP(),$y={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EA;function hP(){if(EA)return $e;EA=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function p(C){return C===null||typeof C!="object"?null:(C=g&&C[g]||C["@@iterator"],typeof C=="function"?C:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function w(C,j,re){this.props=C,this.context=j,this.refs=b,this.updater=re||y}w.prototype.isReactComponent={},w.prototype.setState=function(C,j){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,j,"setState")},w.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function A(){}A.prototype=w.prototype;function S(C,j,re){this.props=C,this.context=j,this.refs=b,this.updater=re||y}var T=S.prototype=new A;T.constructor=S,v(T,w.prototype),T.isPureReactComponent=!0;var D=Array.isArray,L={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function M(C,j,re,le,ae,ve){return re=ve.ref,{$$typeof:s,type:C,key:j,ref:re!==void 0?re:null,props:ve}}function I(C,j){return M(C.type,j,void 0,void 0,void 0,C.props)}function N(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function P(C){var j={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(re){return j[re]})}var z=/\/+/g;function te(C,j){return typeof C=="object"&&C!==null&&C.key!=null?P(""+C.key):j.toString(36)}function ye(){}function me(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ye,ye):(C.status="pending",C.then(function(j){C.status==="pending"&&(C.status="fulfilled",C.value=j)},function(j){C.status==="pending"&&(C.status="rejected",C.reason=j)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function K(C,j,re,le,ae){var ve=typeof C;(ve==="undefined"||ve==="boolean")&&(C=null);var xe=!1;if(C===null)xe=!0;else switch(ve){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(C.$$typeof){case s:case e:xe=!0;break;case d:return xe=C._init,K(xe(C._payload),j,re,le,ae)}}if(xe)return ae=ae(C),xe=le===""?"."+te(C,0):le,D(ae)?(re="",xe!=null&&(re=xe.replace(z,"$&/")+"/"),K(ae,j,re,"",function(Ne){return Ne})):ae!=null&&(N(ae)&&(ae=I(ae,re+(ae.key==null||C&&C.key===ae.key?"":(""+ae.key).replace(z,"$&/")+"/")+xe)),j.push(ae)),1;xe=0;var ze=le===""?".":le+":";if(D(C))for(var ke=0;ke<C.length;ke++)le=C[ke],ve=ze+te(le,ke),xe+=K(le,j,re,ve,ae);else if(ke=p(C),typeof ke=="function")for(C=ke.call(C),ke=0;!(le=C.next()).done;)le=le.value,ve=ze+te(le,ke++),xe+=K(le,j,re,ve,ae);else if(ve==="object"){if(typeof C.then=="function")return K(me(C),j,re,le,ae);throw j=String(C),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return xe}function G(C,j,re){if(C==null)return C;var le=[],ae=0;return K(C,le,"","",function(ve){return j.call(re,ve,ae++)}),le}function J(C){if(C._status===-1){var j=C._result;j=j(),j.then(function(re){(C._status===0||C._status===-1)&&(C._status=1,C._result=re)},function(re){(C._status===0||C._status===-1)&&(C._status=2,C._result=re)}),C._status===-1&&(C._status=0,C._result=j)}if(C._status===1)return C._result.default;throw C._result}var se=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function X(){}return $e.Children={map:G,forEach:function(C,j,re){G(C,function(){j.apply(this,arguments)},re)},count:function(C){var j=0;return G(C,function(){j++}),j},toArray:function(C){return G(C,function(j){return j})||[]},only:function(C){if(!N(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},$e.Component=w,$e.Fragment=t,$e.Profiler=i,$e.PureComponent=S,$e.StrictMode=n,$e.Suspense=u,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,$e.act=function(){throw Error("act(...) is not supported in production builds of React.")},$e.cache=function(C){return function(){return C.apply(null,arguments)}},$e.cloneElement=function(C,j,re){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var le=v({},C.props),ae=C.key,ve=void 0;if(j!=null)for(xe in j.ref!==void 0&&(ve=void 0),j.key!==void 0&&(ae=""+j.key),j)!B.call(j,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&j.ref===void 0||(le[xe]=j[xe]);var xe=arguments.length-2;if(xe===1)le.children=re;else if(1<xe){for(var ze=Array(xe),ke=0;ke<xe;ke++)ze[ke]=arguments[ke+2];le.children=ze}return M(C.type,ae,void 0,void 0,ve,le)},$e.createContext=function(C){return C={$$typeof:a,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:r,_context:C},C},$e.createElement=function(C,j,re){var le,ae={},ve=null;if(j!=null)for(le in j.key!==void 0&&(ve=""+j.key),j)B.call(j,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ae[le]=j[le]);var xe=arguments.length-2;if(xe===1)ae.children=re;else if(1<xe){for(var ze=Array(xe),ke=0;ke<xe;ke++)ze[ke]=arguments[ke+2];ae.children=ze}if(C&&C.defaultProps)for(le in xe=C.defaultProps,xe)ae[le]===void 0&&(ae[le]=xe[le]);return M(C,ve,void 0,void 0,null,ae)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(C){return{$$typeof:l,render:C}},$e.isValidElement=N,$e.lazy=function(C){return{$$typeof:d,_payload:{_status:-1,_result:C},_init:J}},$e.memo=function(C,j){return{$$typeof:h,type:C,compare:j===void 0?null:j}},$e.startTransition=function(C){var j=L.T,re={};L.T=re;try{var le=C(),ae=L.S;ae!==null&&ae(re,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(X,se)}catch(ve){se(ve)}finally{L.T=j}},$e.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},$e.use=function(C){return L.H.use(C)},$e.useActionState=function(C,j,re){return L.H.useActionState(C,j,re)},$e.useCallback=function(C,j){return L.H.useCallback(C,j)},$e.useContext=function(C){return L.H.useContext(C)},$e.useDebugValue=function(){},$e.useDeferredValue=function(C,j){return L.H.useDeferredValue(C,j)},$e.useEffect=function(C,j){return L.H.useEffect(C,j)},$e.useId=function(){return L.H.useId()},$e.useImperativeHandle=function(C,j,re){return L.H.useImperativeHandle(C,j,re)},$e.useInsertionEffect=function(C,j){return L.H.useInsertionEffect(C,j)},$e.useLayoutEffect=function(C,j){return L.H.useLayoutEffect(C,j)},$e.useMemo=function(C,j){return L.H.useMemo(C,j)},$e.useOptimistic=function(C,j){return L.H.useOptimistic(C,j)},$e.useReducer=function(C,j,re){return L.H.useReducer(C,j,re)},$e.useRef=function(C){return L.H.useRef(C)},$e.useState=function(C){return L.H.useState(C)},$e.useSyncExternalStore=function(C,j,re){return L.H.useSyncExternalStore(C,j,re)},$e.useTransition=function(){return L.H.useTransition()},$e.version="19.0.0",$e}var wA;function yv(){return wA||(wA=1,$y.exports=hP()),$y.exports}var Q=yv();const Eg=lP(Q);var Vy={exports:{}},hf={},Yy={exports:{}},Ky={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AA;function fP(){return AA||(AA=1,function(s){function e(G,J){var se=G.length;G.push(J);e:for(;0<se;){var X=se-1>>>1,C=G[X];if(0<i(C,J))G[X]=J,G[se]=C,se=X;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var J=G[0],se=G.pop();if(se!==J){G[0]=se;e:for(var X=0,C=G.length,j=C>>>1;X<j;){var re=2*(X+1)-1,le=G[re],ae=re+1,ve=G[ae];if(0>i(le,se))ae<C&&0>i(ve,le)?(G[X]=ve,G[ae]=se,X=ae):(G[X]=le,G[re]=se,X=re);else if(ae<C&&0>i(ve,se))G[X]=ve,G[ae]=se,X=ae;else break e}}return J}function i(G,J){var se=G.sortIndex-J.sortIndex;return se!==0?se:G.id-J.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();s.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,p=3,y=!1,v=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function T(G){for(var J=t(h);J!==null;){if(J.callback===null)n(h);else if(J.startTime<=G)n(h),J.sortIndex=J.expirationTime,e(u,J);else break;J=t(h)}}function D(G){if(b=!1,T(G),!v)if(t(u)!==null)v=!0,me();else{var J=t(h);J!==null&&K(D,J.startTime-G)}}var L=!1,B=-1,M=5,I=-1;function N(){return!(s.unstable_now()-I<M)}function P(){if(L){var G=s.unstable_now();I=G;var J=!0;try{e:{v=!1,b&&(b=!1,A(B),B=-1),y=!0;var se=p;try{t:{for(T(G),g=t(u);g!==null&&!(g.expirationTime>G&&N());){var X=g.callback;if(typeof X=="function"){g.callback=null,p=g.priorityLevel;var C=X(g.expirationTime<=G);if(G=s.unstable_now(),typeof C=="function"){g.callback=C,T(G),J=!0;break t}g===t(u)&&n(u),T(G)}else n(u);g=t(u)}if(g!==null)J=!0;else{var j=t(h);j!==null&&K(D,j.startTime-G),J=!1}}break e}finally{g=null,p=se,y=!1}J=void 0}}finally{J?z():L=!1}}}var z;if(typeof S=="function")z=function(){S(P)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ye=te.port2;te.port1.onmessage=P,z=function(){ye.postMessage(null)}}else z=function(){w(P,0)};function me(){L||(L=!0,z())}function K(G,J){B=w(function(){G(s.unstable_now())},J)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_continueExecution=function(){v||y||(v=!0,me())},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return p},s.unstable_getFirstCallbackNode=function(){return t(u)},s.unstable_next=function(G){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var se=p;p=J;try{return G()}finally{p=se}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var se=p;p=G;try{return J()}finally{p=se}},s.unstable_scheduleCallback=function(G,J,se){var X=s.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?X+se:X):se=X,G){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=se+C,G={id:d++,callback:J,priorityLevel:G,startTime:se,expirationTime:C,sortIndex:-1},se>X?(G.sortIndex=se,e(h,G),t(u)===null&&G===t(h)&&(b?(A(B),B=-1):b=!0,K(D,se-X))):(G.sortIndex=C,e(u,G),v||y||(v=!0,me())),G},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(G){var J=p;return function(){var se=p;p=J;try{return G.apply(this,arguments)}finally{p=se}}}}(Ky)),Ky}var TA;function dP(){return TA||(TA=1,Yy.exports=fP()),Yy.exports}var jy={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SA;function gP(){if(SA)return Nn;SA=1;var s=yv();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function r(u,h,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:h,implementation:d}}var a=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Nn.createPortal=function(u,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return r(u,h,null,d)},Nn.flushSync=function(u){var h=a.T,d=n.p;try{if(a.T=null,n.p=2,u)return u()}finally{a.T=h,n.p=d,n.d.f()}},Nn.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(u,h))},Nn.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},Nn.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var d=h.as,g=l(d,h.crossOrigin),p=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?n.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:p,fetchPriority:y}):d==="script"&&n.d.X(u,{crossOrigin:g,integrity:p,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Nn.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=l(h.as,h.crossOrigin);n.d.M(u,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(u)},Nn.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,g=l(d,h.crossOrigin);n.d.L(u,d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Nn.preloadModule=function(u,h){if(typeof u=="string")if(h){var d=l(h.as,h.crossOrigin);n.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(u)},Nn.requestFormReset=function(u){n.d.r(u)},Nn.unstable_batchedUpdates=function(u,h){return u(h)},Nn.useFormState=function(u,h,d){return a.H.useFormState(u,h,d)},Nn.useFormStatus=function(){return a.H.useHostTransitionStatus()},Nn.version="19.0.0",Nn}var _A;function mP(){if(_A)return jy.exports;_A=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),jy.exports=gP(),jy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA;function pP(){if(RA)return hf;RA=1;var s=dP(),e=yv(),t=mP();function n(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}var r=Symbol.for("react.element"),a=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),p=Symbol.for("react.consumer"),y=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),D=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(o){return o===null||typeof o!="object"?null:(o=L&&o[L]||o["@@iterator"],typeof o=="function"?o:null)}var M=Symbol.for("react.client.reference");function I(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===M?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case u:return"Fragment";case l:return"Portal";case d:return"Profiler";case h:return"StrictMode";case b:return"Suspense";case w:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case y:return(o.displayName||"Context")+".Provider";case p:return(o._context.displayName||"Context")+".Consumer";case v:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case A:return c=o.displayName||null,c!==null?c:I(o.type)||"Memo";case S:c=o._payload,o=o._init;try{return I(o(c))}catch{}}return null}var N=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=Object.assign,z,te;function ye(o){if(z===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);z=c&&c[1]||"",te=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+z+o+te}var me=!1;function K(o,c){if(!o||me)return"";me=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(oe){var ne=oe}Reflect.construct(o,[],ge)}else{try{ge.call()}catch(oe){ne=oe}o.call(ge.prototype)}}else{try{throw Error()}catch(oe){ne=oe}(ge=o())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(oe){if(oe&&ne&&typeof oe.stack=="string")return[oe.stack,ne.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),R=E[0],O=E[1];if(R&&O){var H=R.split(`
`),Y=O.split(`
`);for(x=m=0;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;for(;x<Y.length&&!Y[x].includes("DetermineComponentFrameRoot");)x++;if(m===H.length||x===Y.length)for(m=H.length-1,x=Y.length-1;1<=m&&0<=x&&H[m]!==Y[x];)x--;for(;1<=m&&0<=x;m--,x--)if(H[m]!==Y[x]){if(m!==1||x!==1)do if(m--,x--,0>x||H[m]!==Y[x]){var ce=`
`+H[m].replace(" at new "," at ");return o.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",o.displayName)),ce}while(1<=m&&0<=x);break}}}finally{me=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?ye(f):""}function G(o){switch(o.tag){case 26:case 27:case 5:return ye(o.type);case 16:return ye("Lazy");case 13:return ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return o=K(o.type,!1),o;case 11:return o=K(o.type.render,!1),o;case 1:return o=K(o.type,!0),o;default:return""}}function J(o){try{var c="";do c+=G(o),o=o.return;while(o);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function se(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function X(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function C(o){if(se(o)!==o)throw Error(n(188))}function j(o){var c=o.alternate;if(!c){if(c=se(o),c===null)throw Error(n(188));return c!==o?null:o}for(var f=o,m=c;;){var x=f.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){f=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===f)return C(x),o;if(E===m)return C(x),c;E=E.sibling}throw Error(n(188))}if(f.return!==m.return)f=x,m=E;else{for(var R=!1,O=x.child;O;){if(O===f){R=!0,f=x,m=E;break}if(O===m){R=!0,m=x,f=E;break}O=O.sibling}if(!R){for(O=E.child;O;){if(O===f){R=!0,f=E,m=x;break}if(O===m){R=!0,m=E,f=x;break}O=O.sibling}if(!R)throw Error(n(189))}}if(f.alternate!==m)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:c}function re(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=re(o),c!==null)return c;o=o.sibling}return null}var le=Array.isArray,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},xe=[],ze=-1;function ke(o){return{current:o}}function Ne(o){0>ze||(o.current=xe[ze],xe[ze]=null,ze--)}function Ke(o,c){ze++,xe[ze]=o.current,o.current=c}var fn=ke(null),On=ke(null),At=ke(null),dn=ke(null);function Si(o,c){switch(Ke(At,c),Ke(On,o),Ke(fn,null),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)&&(c=c.namespaceURI)?jw(c):0;break;default:if(o=o===8?c.parentNode:c,c=o.tagName,o=o.namespaceURI)o=jw(o),c=qw(o,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Ne(fn),Ke(fn,c)}function Fe(){Ne(fn),Ne(On),Ne(At)}function It(o){o.memoizedState!==null&&Ke(dn,o);var c=fn.current,f=qw(c,o.type);c!==f&&(Ke(On,o),Ke(fn,f))}function on(o){On.current===o&&(Ne(fn),Ne(On)),dn.current===o&&(Ne(dn),sf._currentValue=ve)}var fs=Object.prototype.hasOwnProperty,An=s.unstable_scheduleCallback,ks=s.unstable_cancelCallback,ti=s.unstable_shouldYield,Zl=s.unstable_requestPaint,Tn=s.unstable_now,Jl=s.unstable_getCurrentPriorityLevel,_i=s.unstable_ImmediatePriority,De=s.unstable_UserBlockingPriority,Be=s.unstable_NormalPriority,Me=s.unstable_LowPriority,Ie=s.unstable_IdlePriority,kt=s.log,Ht=s.unstable_setDisableYieldValue,lt=null,Ot=null;function Xd(o){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(lt,o,void 0,(o.current.flags&128)===128)}catch{}}function Ri(o){if(typeof kt=="function"&&Ht(o),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(lt,o)}catch{}}var ds=Math.clz32?Math.clz32:jI,YI=Math.log,KI=Math.LN2;function jI(o){return o>>>=0,o===0?32:31-(YI(o)/KI|0)|0}var Zd=128,Jd=4194304;function To(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function e0(o,c){var f=o.pendingLanes;if(f===0)return 0;var m=0,x=o.suspendedLanes,E=o.pingedLanes,R=o.warmLanes;o=o.finishedLanes!==0;var O=f&134217727;return O!==0?(f=O&~x,f!==0?m=To(f):(E&=O,E!==0?m=To(E):o||(R=O&~R,R!==0&&(m=To(R))))):(O=f&~x,O!==0?m=To(O):E!==0?m=To(E):o||(R=f&~R,R!==0&&(m=To(R)))),m===0?0:c!==0&&c!==m&&(c&x)===0&&(x=m&-m,R=c&-c,x>=R||x===32&&(R&4194176)!==0)?c:m}function dh(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function qI(o,c){switch(o){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ub(){var o=Zd;return Zd<<=1,(Zd&4194176)===0&&(Zd=128),o}function Hb(){var o=Jd;return Jd<<=1,(Jd&62914560)===0&&(Jd=4194304),o}function Nm(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function gh(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function QI(o,c,f,m,x,E){var R=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var O=o.entanglements,H=o.expirationTimes,Y=o.hiddenUpdates;for(f=R&~f;0<f;){var ce=31-ds(f),ge=1<<ce;O[ce]=0,H[ce]=-1;var ne=Y[ce];if(ne!==null)for(Y[ce]=null,ce=0;ce<ne.length;ce++){var oe=ne[ce];oe!==null&&(oe.lane&=-536870913)}f&=~ge}m!==0&&Gb(o,m,0),E!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=E&~(R&~c))}function Gb(o,c,f){o.pendingLanes|=c,o.suspendedLanes&=~c;var m=31-ds(c);o.entangledLanes|=c,o.entanglements[m]=o.entanglements[m]|1073741824|f&4194218}function zb(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var m=31-ds(f),x=1<<m;x&c|o[m]&c&&(o[m]|=c),f&=~x}}function $b(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Vb(){var o=ae.p;return o!==0?o:(o=window.event,o===void 0?32:fA(o.type))}function WI(o,c){var f=ae.p;try{return ae.p=o,c()}finally{ae.p=f}}var ha=Math.random().toString(36).slice(2),Mn="__reactFiber$"+ha,Jn="__reactProps$"+ha,ec="__reactContainer$"+ha,Bm="__reactEvents$"+ha,XI="__reactListeners$"+ha,ZI="__reactHandles$"+ha,Yb="__reactResources$"+ha,mh="__reactMarker$"+ha;function Fm(o){delete o[Mn],delete o[Jn],delete o[Bm],delete o[XI],delete o[ZI]}function So(o){var c=o[Mn];if(c)return c;for(var f=o.parentNode;f;){if(c=f[ec]||f[Mn]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=Xw(o);o!==null;){if(f=o[Mn])return f;o=Xw(o)}return c}o=f,f=o.parentNode}return null}function tc(o){if(o=o[Mn]||o[ec]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function ph(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(n(33))}function nc(o){var c=o[Yb];return c||(c=o[Yb]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function gn(o){o[mh]=!0}var Kb=new Set,jb={};function _o(o,c){sc(o,c),sc(o+"Capture",c)}function sc(o,c){for(jb[o]=c,o=0;o<c.length;o++)Kb.add(c[o])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),JI=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qb={},Qb={};function eO(o){return fs.call(Qb,o)?!0:fs.call(qb,o)?!1:JI.test(o)?Qb[o]=!0:(qb[o]=!0,!1)}function t0(o,c,f){if(eO(c))if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+f)}}function n0(o,c,f){if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+f)}}function ur(o,c,f,m){if(m===null)o.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(c,f,""+m)}}function Ls(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Wb(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function tO(o){var c=Wb(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),m=""+o[c];if(!o.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,E=f.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return x.call(this)},set:function(R){m=""+R,E.call(this,R)}}),Object.defineProperty(o,c,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(R){m=""+R},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function s0(o){o._valueTracker||(o._valueTracker=tO(o))}function Xb(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),m="";return o&&(m=Wb(o)?o.checked?"true":"false":o.value),o=m,o!==f?(c.setValue(o),!0):!1}function i0(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var nO=/[\n"\\]/g;function Ds(o){return o.replace(nO,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Um(o,c,f,m,x,E,R,O){o.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.type=R:o.removeAttribute("type"),c!=null?R==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Ls(c)):o.value!==""+Ls(c)&&(o.value=""+Ls(c)):R!=="submit"&&R!=="reset"||o.removeAttribute("value"),c!=null?Hm(o,R,Ls(c)):f!=null?Hm(o,R,Ls(f)):m!=null&&o.removeAttribute("value"),x==null&&E!=null&&(o.defaultChecked=!!E),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?o.name=""+Ls(O):o.removeAttribute("name")}function Zb(o,c,f,m,x,E,R,O){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(o.type=E),c!=null||f!=null){if(!(E!=="submit"&&E!=="reset"||c!=null))return;f=f!=null?""+Ls(f):"",c=c!=null?""+Ls(c):f,O||c===o.value||(o.value=c),o.defaultValue=c}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=O?o.checked:!!m,o.defaultChecked=!!m,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(o.name=R)}function Hm(o,c,f){c==="number"&&i0(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function ic(o,c,f,m){if(o=o.options,c){c={};for(var x=0;x<f.length;x++)c["$"+f[x]]=!0;for(f=0;f<o.length;f++)x=c.hasOwnProperty("$"+o[f].value),o[f].selected!==x&&(o[f].selected=x),x&&m&&(o[f].defaultSelected=!0)}else{for(f=""+Ls(f),c=null,x=0;x<o.length;x++){if(o[x].value===f){o[x].selected=!0,m&&(o[x].defaultSelected=!0);return}c!==null||o[x].disabled||(c=o[x])}c!==null&&(c.selected=!0)}}function Jb(o,c,f){if(c!=null&&(c=""+Ls(c),c!==o.value&&(o.value=c),f==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=f!=null?""+Ls(f):""}function e1(o,c,f,m){if(c==null){if(m!=null){if(f!=null)throw Error(n(92));if(le(m)){if(1<m.length)throw Error(n(93));m=m[0]}f=m}f==null&&(f=""),c=f}f=Ls(c),o.defaultValue=f,m=o.textContent,m===f&&m!==""&&m!==null&&(o.value=m)}function rc(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var sO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function t1(o,c,f){var m=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":m?o.setProperty(c,f):typeof f!="number"||f===0||sO.has(c)?c==="float"?o.cssFloat=f:o[c]=(""+f).trim():o[c]=f+"px"}function n1(o,c,f){if(c!=null&&typeof c!="object")throw Error(n(62));if(o=o.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var x in c)m=c[x],c.hasOwnProperty(x)&&f[x]!==m&&t1(o,x,m)}else for(var E in c)c.hasOwnProperty(E)&&t1(o,E,c[E])}function Gm(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function r0(o){return rO.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var zm=null;function $m(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ac=null,oc=null;function s1(o){var c=tc(o);if(c&&(o=c.stateNode)){var f=o[Jn]||null;e:switch(o=c.stateNode,c.type){case"input":if(Um(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ds(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var m=f[c];if(m!==o&&m.form===o.form){var x=m[Jn]||null;if(!x)throw Error(n(90));Um(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<f.length;c++)m=f[c],m.form===o.form&&Xb(m)}break e;case"textarea":Jb(o,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&ic(o,!!f.multiple,c,!1)}}}var Vm=!1;function i1(o,c,f){if(Vm)return o(c,f);Vm=!0;try{var m=o(c);return m}finally{if(Vm=!1,(ac!==null||oc!==null)&&(z0(),ac&&(c=ac,o=oc,oc=ac=null,s1(c),o)))for(c=0;c<o.length;c++)s1(o[c])}}function yh(o,c){var f=o.stateNode;if(f===null)return null;var m=f[Jn]||null;if(m===null)return null;f=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,c,typeof f));return f}var Ym=!1;if(cr)try{var xh={};Object.defineProperty(xh,"passive",{get:function(){Ym=!0}}),window.addEventListener("test",xh,xh),window.removeEventListener("test",xh,xh)}catch{Ym=!1}var fa=null,Km=null,a0=null;function r1(){if(a0)return a0;var o,c=Km,f=c.length,m,x="value"in fa?fa.value:fa.textContent,E=x.length;for(o=0;o<f&&c[o]===x[o];o++);var R=f-o;for(m=1;m<=R&&c[f-m]===x[E-m];m++);return a0=x.slice(o,1<m?1-m:void 0)}function o0(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function l0(){return!0}function a1(){return!1}function es(o){function c(f,m,x,E,R){this._reactName=f,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=R,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(f=o[O],this[O]=f?f(E):E[O]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?l0:a1,this.isPropagationStopped=a1,this}return P(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=l0)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=l0)},persist:function(){},isPersistent:l0}),c}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},c0=es(Ro),vh=P({},Ro,{view:0,detail:0}),aO=es(vh),jm,qm,bh,u0=P({},vh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wm,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==bh&&(bh&&o.type==="mousemove"?(jm=o.screenX-bh.screenX,qm=o.screenY-bh.screenY):qm=jm=0,bh=o),jm)},movementY:function(o){return"movementY"in o?o.movementY:qm}}),o1=es(u0),oO=P({},u0,{dataTransfer:0}),lO=es(oO),cO=P({},vh,{relatedTarget:0}),Qm=es(cO),uO=P({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),hO=es(uO),fO=P({},Ro,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),dO=es(fO),gO=P({},Ro,{data:0}),l1=es(gO),mO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xO(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=yO[o])?!!c[o]:!1}function Wm(){return xO}var vO=P({},vh,{key:function(o){if(o.key){var c=mO[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=o0(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?pO[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wm,charCode:function(o){return o.type==="keypress"?o0(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?o0(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),bO=es(vO),EO=P({},u0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c1=es(EO),wO=P({},vh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wm}),AO=es(wO),TO=P({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),SO=es(TO),_O=P({},u0,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),RO=es(_O),kO=P({},Ro,{newState:0,oldState:0}),LO=es(kO),DO=[9,13,27,32],Xm=cr&&"CompositionEvent"in window,Eh=null;cr&&"documentMode"in document&&(Eh=document.documentMode);var CO=cr&&"TextEvent"in window&&!Eh,u1=cr&&(!Xm||Eh&&8<Eh&&11>=Eh),h1=" ",f1=!1;function d1(o,c){switch(o){case"keyup":return DO.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function g1(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var lc=!1;function IO(o,c){switch(o){case"compositionend":return g1(c);case"keypress":return c.which!==32?null:(f1=!0,h1);case"textInput":return o=c.data,o===h1&&f1?null:o;default:return null}}function OO(o,c){if(lc)return o==="compositionend"||!Xm&&d1(o,c)?(o=r1(),a0=Km=fa=null,lc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return u1&&c.locale!=="ko"?null:c.data;default:return null}}var MO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m1(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!MO[o.type]:c==="textarea"}function p1(o,c,f,m){ac?oc?oc.push(m):oc=[m]:ac=m,c=j0(c,"onChange"),0<c.length&&(f=new c0("onChange","change",null,f,m),o.push({event:f,listeners:c}))}var wh=null,Ah=null;function PO(o){zw(o,0)}function h0(o){var c=ph(o);if(Xb(c))return o}function y1(o,c){if(o==="change")return c}var x1=!1;if(cr){var Zm;if(cr){var Jm="oninput"in document;if(!Jm){var v1=document.createElement("div");v1.setAttribute("oninput","return;"),Jm=typeof v1.oninput=="function"}Zm=Jm}else Zm=!1;x1=Zm&&(!document.documentMode||9<document.documentMode)}function b1(){wh&&(wh.detachEvent("onpropertychange",E1),Ah=wh=null)}function E1(o){if(o.propertyName==="value"&&h0(Ah)){var c=[];p1(c,Ah,o,$m(o)),i1(PO,c)}}function NO(o,c,f){o==="focusin"?(b1(),wh=c,Ah=f,wh.attachEvent("onpropertychange",E1)):o==="focusout"&&b1()}function BO(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return h0(Ah)}function FO(o,c){if(o==="click")return h0(c)}function UO(o,c){if(o==="input"||o==="change")return h0(c)}function HO(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var gs=typeof Object.is=="function"?Object.is:HO;function Th(o,c){if(gs(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),m=Object.keys(c);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var x=f[m];if(!fs.call(c,x)||!gs(o[x],c[x]))return!1}return!0}function w1(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function A1(o,c){var f=w1(o);o=0;for(var m;f;){if(f.nodeType===3){if(m=o+f.textContent.length,o<=c&&m>=c)return{node:f,offset:c-o};o=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=w1(f)}}function T1(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?T1(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function S1(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=i0(o.document);c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=i0(o.document)}return c}function ep(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function GO(o,c){var f=S1(c);c=o.focusedElem;var m=o.selectionRange;if(f!==c&&c&&c.ownerDocument&&T1(c.ownerDocument.documentElement,c)){if(m!==null&&ep(c)){if(o=m.start,f=m.end,f===void 0&&(f=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(f,c.value.length);else if(f=(o=c.ownerDocument||document)&&o.defaultView||window,f.getSelection){f=f.getSelection();var x=c.textContent.length,E=Math.min(m.start,x);m=m.end===void 0?E:Math.min(m.end,x),!f.extend&&E>m&&(x=m,m=E,E=x),x=A1(c,E);var R=A1(c,m);x&&R&&(f.rangeCount!==1||f.anchorNode!==x.node||f.anchorOffset!==x.offset||f.focusNode!==R.node||f.focusOffset!==R.offset)&&(o=o.createRange(),o.setStart(x.node,x.offset),f.removeAllRanges(),E>m?(f.addRange(o),f.extend(R.node,R.offset)):(o.setEnd(R.node,R.offset),f.addRange(o)))}}for(o=[],f=c;f=f.parentNode;)f.nodeType===1&&o.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)f=o[c],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var zO=cr&&"documentMode"in document&&11>=document.documentMode,cc=null,tp=null,Sh=null,np=!1;function _1(o,c,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;np||cc==null||cc!==i0(m)||(m=cc,"selectionStart"in m&&ep(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Sh&&Th(Sh,m)||(Sh=m,m=j0(tp,"onSelect"),0<m.length&&(c=new c0("onSelect","select",null,c,f),o.push({event:c,listeners:m}),c.target=cc)))}function ko(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var uc={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionrun:ko("Transition","TransitionRun"),transitionstart:ko("Transition","TransitionStart"),transitioncancel:ko("Transition","TransitionCancel"),transitionend:ko("Transition","TransitionEnd")},sp={},R1={};cr&&(R1=document.createElement("div").style,"AnimationEvent"in window||(delete uc.animationend.animation,delete uc.animationiteration.animation,delete uc.animationstart.animation),"TransitionEvent"in window||delete uc.transitionend.transition);function Lo(o){if(sp[o])return sp[o];if(!uc[o])return o;var c=uc[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in R1)return sp[o]=c[f];return o}var k1=Lo("animationend"),L1=Lo("animationiteration"),D1=Lo("animationstart"),$O=Lo("transitionrun"),VO=Lo("transitionstart"),YO=Lo("transitioncancel"),C1=Lo("transitionend"),I1=new Map,O1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ni(o,c){I1.set(o,c),_o(c,[o])}var Cs=[],hc=0,ip=0;function f0(){for(var o=hc,c=ip=hc=0;c<o;){var f=Cs[c];Cs[c++]=null;var m=Cs[c];Cs[c++]=null;var x=Cs[c];Cs[c++]=null;var E=Cs[c];if(Cs[c++]=null,m!==null&&x!==null){var R=m.pending;R===null?x.next=x:(x.next=R.next,R.next=x),m.pending=x}E!==0&&M1(f,x,E)}}function d0(o,c,f,m){Cs[hc++]=o,Cs[hc++]=c,Cs[hc++]=f,Cs[hc++]=m,ip|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function rp(o,c,f,m){return d0(o,c,f,m),g0(o)}function da(o,c){return d0(o,null,null,c),g0(o)}function M1(o,c,f){o.lanes|=f;var m=o.alternate;m!==null&&(m.lanes|=f);for(var x=!1,E=o.return;E!==null;)E.childLanes|=f,m=E.alternate,m!==null&&(m.childLanes|=f),E.tag===22&&(o=E.stateNode,o===null||o._visibility&1||(x=!0)),o=E,E=E.return;x&&c!==null&&o.tag===3&&(E=o.stateNode,x=31-ds(f),E=E.hiddenUpdates,o=E[x],o===null?E[x]=[c]:o.push(c),c.lane=f|536870912)}function g0(o){if(50<Wh)throw Wh=0,hy=null,Error(n(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var fc={},P1=new WeakMap;function Is(o,c){if(typeof o=="object"&&o!==null){var f=P1.get(o);return f!==void 0?f:(c={value:o,source:c,stack:J(c)},P1.set(o,c),c)}return{value:o,source:c,stack:J(c)}}var dc=[],gc=0,m0=null,p0=0,Os=[],Ms=0,Do=null,hr=1,fr="";function Co(o,c){dc[gc++]=p0,dc[gc++]=m0,m0=o,p0=c}function N1(o,c,f){Os[Ms++]=hr,Os[Ms++]=fr,Os[Ms++]=Do,Do=o;var m=hr;o=fr;var x=32-ds(m)-1;m&=~(1<<x),f+=1;var E=32-ds(c)+x;if(30<E){var R=x-x%5;E=(m&(1<<R)-1).toString(32),m>>=R,x-=R,hr=1<<32-ds(c)+x|f<<x|m,fr=E+o}else hr=1<<E|f<<x|m,fr=o}function ap(o){o.return!==null&&(Co(o,1),N1(o,1,0))}function op(o){for(;o===m0;)m0=dc[--gc],dc[gc]=null,p0=dc[--gc],dc[gc]=null;for(;o===Do;)Do=Os[--Ms],Os[Ms]=null,fr=Os[--Ms],Os[Ms]=null,hr=Os[--Ms],Os[Ms]=null}var $n=null,Sn=null,rt=!1,si=null,ki=!1,lp=Error(n(519));function Io(o){var c=Error(n(418,""));throw kh(Is(c,o)),lp}function B1(o){var c=o.stateNode,f=o.type,m=o.memoizedProps;switch(c[Mn]=o,c[Jn]=m,f){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(f=0;f<Zh.length;f++)Je(Zh[f],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":Je("invalid",c),Zb(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),s0(c);break;case"select":Je("invalid",c);break;case"textarea":Je("invalid",c),e1(c,m.value,m.defaultValue,m.children),s0(c)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||m.suppressHydrationWarning===!0||Kw(c.textContent,f)?(m.popover!=null&&(Je("beforetoggle",c),Je("toggle",c)),m.onScroll!=null&&Je("scroll",c),m.onScrollEnd!=null&&Je("scrollend",c),m.onClick!=null&&(c.onclick=q0),c=!0):c=!1,c||Io(o)}function F1(o){for($n=o.return;$n;)switch($n.tag){case 3:case 27:ki=!0;return;case 5:case 13:ki=!1;return;default:$n=$n.return}}function _h(o){if(o!==$n)return!1;if(!rt)return F1(o),rt=!0,!1;var c=!1,f;if((f=o.tag!==3&&o.tag!==27)&&((f=o.tag===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||ky(o.type,o.memoizedProps)),f=!f),f&&(c=!0),c&&Sn&&Io(o),F1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(f=o.data,f==="/$"){if(c===0){Sn=ri(o.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;o=o.nextSibling}Sn=null}}else Sn=$n?ri(o.stateNode.nextSibling):null;return!0}function Rh(){Sn=$n=null,rt=!1}function kh(o){si===null?si=[o]:si.push(o)}var Lh=Error(n(460)),U1=Error(n(474)),cp={then:function(){}};function H1(o){return o=o.status,o==="fulfilled"||o==="rejected"}function y0(){}function G1(o,c,f){switch(f=o[f],f===void 0?o.push(c):f!==c&&(c.then(y0,y0),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,o===Lh?Error(n(483)):o;default:if(typeof c.status=="string")c.then(y0,y0);else{if(o=Tt,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=c,o.status="pending",o.then(function(m){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=m}},function(m){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,o===Lh?Error(n(483)):o}throw Dh=c,Lh}}var Dh=null;function z1(){if(Dh===null)throw Error(n(459));var o=Dh;return Dh=null,o}var mc=null,Ch=0;function x0(o){var c=Ch;return Ch+=1,mc===null&&(mc=[]),G1(mc,o,c)}function Ih(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function v0(o,c){throw c.$$typeof===r?Error(n(525)):(o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function $1(o){var c=o._init;return c(o._payload)}function V1(o){function c(q,$){if(o){var ee=q.deletions;ee===null?(q.deletions=[$],q.flags|=16):ee.push($)}}function f(q,$){if(!o)return null;for(;$!==null;)c(q,$),$=$.sibling;return null}function m(q){for(var $=new Map;q!==null;)q.key!==null?$.set(q.key,q):$.set(q.index,q),q=q.sibling;return $}function x(q,$){return q=Sa(q,$),q.index=0,q.sibling=null,q}function E(q,$,ee){return q.index=ee,o?(ee=q.alternate,ee!==null?(ee=ee.index,ee<$?(q.flags|=33554434,$):ee):(q.flags|=33554434,$)):(q.flags|=1048576,$)}function R(q){return o&&q.alternate===null&&(q.flags|=33554434),q}function O(q,$,ee,fe){return $===null||$.tag!==6?($=sy(ee,q.mode,fe),$.return=q,$):($=x($,ee),$.return=q,$)}function H(q,$,ee,fe){var Ae=ee.type;return Ae===u?ce(q,$,ee.props.children,fe,ee.key):$!==null&&($.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===S&&$1(Ae)===$.type)?($=x($,ee.props),Ih($,ee),$.return=q,$):($=B0(ee.type,ee.key,ee.props,null,q.mode,fe),Ih($,ee),$.return=q,$)}function Y(q,$,ee,fe){return $===null||$.tag!==4||$.stateNode.containerInfo!==ee.containerInfo||$.stateNode.implementation!==ee.implementation?($=iy(ee,q.mode,fe),$.return=q,$):($=x($,ee.children||[]),$.return=q,$)}function ce(q,$,ee,fe,Ae){return $===null||$.tag!==7?($=zo(ee,q.mode,fe,Ae),$.return=q,$):($=x($,ee),$.return=q,$)}function ge(q,$,ee){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=sy(""+$,q.mode,ee),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case a:return ee=B0($.type,$.key,$.props,null,q.mode,ee),Ih(ee,$),ee.return=q,ee;case l:return $=iy($,q.mode,ee),$.return=q,$;case S:var fe=$._init;return $=fe($._payload),ge(q,$,ee)}if(le($)||B($))return $=zo($,q.mode,ee,null),$.return=q,$;if(typeof $.then=="function")return ge(q,x0($),ee);if($.$$typeof===y)return ge(q,M0(q,$),ee);v0(q,$)}return null}function ne(q,$,ee,fe){var Ae=$!==null?$.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ae!==null?null:O(q,$,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case a:return ee.key===Ae?H(q,$,ee,fe):null;case l:return ee.key===Ae?Y(q,$,ee,fe):null;case S:return Ae=ee._init,ee=Ae(ee._payload),ne(q,$,ee,fe)}if(le(ee)||B(ee))return Ae!==null?null:ce(q,$,ee,fe,null);if(typeof ee.then=="function")return ne(q,$,x0(ee),fe);if(ee.$$typeof===y)return ne(q,$,M0(q,ee),fe);v0(q,ee)}return null}function oe(q,$,ee,fe,Ae){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return q=q.get(ee)||null,O($,q,""+fe,Ae);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case a:return q=q.get(fe.key===null?ee:fe.key)||null,H($,q,fe,Ae);case l:return q=q.get(fe.key===null?ee:fe.key)||null,Y($,q,fe,Ae);case S:var Qe=fe._init;return fe=Qe(fe._payload),oe(q,$,ee,fe,Ae)}if(le(fe)||B(fe))return q=q.get(ee)||null,ce($,q,fe,Ae,null);if(typeof fe.then=="function")return oe(q,$,ee,x0(fe),Ae);if(fe.$$typeof===y)return oe(q,$,ee,M0($,fe),Ae);v0($,fe)}return null}function Re(q,$,ee,fe){for(var Ae=null,Qe=null,Le=$,Pe=$=0,yn=null;Le!==null&&Pe<ee.length;Pe++){Le.index>Pe?(yn=Le,Le=null):yn=Le.sibling;var at=ne(q,Le,ee[Pe],fe);if(at===null){Le===null&&(Le=yn);break}o&&Le&&at.alternate===null&&c(q,Le),$=E(at,$,Pe),Qe===null?Ae=at:Qe.sibling=at,Qe=at,Le=yn}if(Pe===ee.length)return f(q,Le),rt&&Co(q,Pe),Ae;if(Le===null){for(;Pe<ee.length;Pe++)Le=ge(q,ee[Pe],fe),Le!==null&&($=E(Le,$,Pe),Qe===null?Ae=Le:Qe.sibling=Le,Qe=Le);return rt&&Co(q,Pe),Ae}for(Le=m(Le);Pe<ee.length;Pe++)yn=oe(Le,q,Pe,ee[Pe],fe),yn!==null&&(o&&yn.alternate!==null&&Le.delete(yn.key===null?Pe:yn.key),$=E(yn,$,Pe),Qe===null?Ae=yn:Qe.sibling=yn,Qe=yn);return o&&Le.forEach(function(Ia){return c(q,Ia)}),rt&&Co(q,Pe),Ae}function Ue(q,$,ee,fe){if(ee==null)throw Error(n(151));for(var Ae=null,Qe=null,Le=$,Pe=$=0,yn=null,at=ee.next();Le!==null&&!at.done;Pe++,at=ee.next()){Le.index>Pe?(yn=Le,Le=null):yn=Le.sibling;var Ia=ne(q,Le,at.value,fe);if(Ia===null){Le===null&&(Le=yn);break}o&&Le&&Ia.alternate===null&&c(q,Le),$=E(Ia,$,Pe),Qe===null?Ae=Ia:Qe.sibling=Ia,Qe=Ia,Le=yn}if(at.done)return f(q,Le),rt&&Co(q,Pe),Ae;if(Le===null){for(;!at.done;Pe++,at=ee.next())at=ge(q,at.value,fe),at!==null&&($=E(at,$,Pe),Qe===null?Ae=at:Qe.sibling=at,Qe=at);return rt&&Co(q,Pe),Ae}for(Le=m(Le);!at.done;Pe++,at=ee.next())at=oe(Le,q,Pe,at.value,fe),at!==null&&(o&&at.alternate!==null&&Le.delete(at.key===null?Pe:at.key),$=E(at,$,Pe),Qe===null?Ae=at:Qe.sibling=at,Qe=at);return o&&Le.forEach(function(rP){return c(q,rP)}),rt&&Co(q,Pe),Ae}function $t(q,$,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===u&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case a:e:{for(var Ae=ee.key;$!==null;){if($.key===Ae){if(Ae=ee.type,Ae===u){if($.tag===7){f(q,$.sibling),fe=x($,ee.props.children),fe.return=q,q=fe;break e}}else if($.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===S&&$1(Ae)===$.type){f(q,$.sibling),fe=x($,ee.props),Ih(fe,ee),fe.return=q,q=fe;break e}f(q,$);break}else c(q,$);$=$.sibling}ee.type===u?(fe=zo(ee.props.children,q.mode,fe,ee.key),fe.return=q,q=fe):(fe=B0(ee.type,ee.key,ee.props,null,q.mode,fe),Ih(fe,ee),fe.return=q,q=fe)}return R(q);case l:e:{for(Ae=ee.key;$!==null;){if($.key===Ae)if($.tag===4&&$.stateNode.containerInfo===ee.containerInfo&&$.stateNode.implementation===ee.implementation){f(q,$.sibling),fe=x($,ee.children||[]),fe.return=q,q=fe;break e}else{f(q,$);break}else c(q,$);$=$.sibling}fe=iy(ee,q.mode,fe),fe.return=q,q=fe}return R(q);case S:return Ae=ee._init,ee=Ae(ee._payload),$t(q,$,ee,fe)}if(le(ee))return Re(q,$,ee,fe);if(B(ee)){if(Ae=B(ee),typeof Ae!="function")throw Error(n(150));return ee=Ae.call(ee),Ue(q,$,ee,fe)}if(typeof ee.then=="function")return $t(q,$,x0(ee),fe);if(ee.$$typeof===y)return $t(q,$,M0(q,ee),fe);v0(q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,$!==null&&$.tag===6?(f(q,$.sibling),fe=x($,ee),fe.return=q,q=fe):(f(q,$),fe=sy(ee,q.mode,fe),fe.return=q,q=fe),R(q)):f(q,$)}return function(q,$,ee,fe){try{Ch=0;var Ae=$t(q,$,ee,fe);return mc=null,Ae}catch(Le){if(Le===Lh)throw Le;var Qe=Fs(29,Le,null,q.mode);return Qe.lanes=fe,Qe.return=q,Qe}finally{}}}var Oo=V1(!0),Y1=V1(!1),pc=ke(null),b0=ke(0);function K1(o,c){o=Ar,Ke(b0,o),Ke(pc,c),Ar=o|c.baseLanes}function up(){Ke(b0,Ar),Ke(pc,pc.current)}function hp(){Ar=b0.current,Ne(pc),Ne(b0)}var Ps=ke(null),Li=null;function ga(o){var c=o.alternate;Ke(ln,ln.current&1),Ke(Ps,o),Li===null&&(c===null||pc.current!==null||c.memoizedState!==null)&&(Li=o)}function j1(o){if(o.tag===22){if(Ke(ln,ln.current),Ke(Ps,o),Li===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Li=o)}}else ma()}function ma(){Ke(ln,ln.current),Ke(Ps,Ps.current)}function dr(o){Ne(Ps),Li===o&&(Li=null),Ne(ln)}var ln=ke(0);function E0(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var KO=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(f,m){o.push(m)}};this.abort=function(){c.aborted=!0,o.forEach(function(f){return f()})}},jO=s.unstable_scheduleCallback,qO=s.unstable_NormalPriority,cn={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fp(){return{controller:new KO,data:new Map,refCount:0}}function Oh(o){o.refCount--,o.refCount===0&&jO(qO,function(){o.controller.abort()})}var Mh=null,dp=0,yc=0,xc=null;function QO(o,c){if(Mh===null){var f=Mh=[];dp=0,yc=vy(),xc={status:"pending",value:void 0,then:function(m){f.push(m)}}}return dp++,c.then(q1,q1),c}function q1(){if(--dp===0&&Mh!==null){xc!==null&&(xc.status="fulfilled");var o=Mh;Mh=null,yc=0,xc=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function WO(o,c){var f=[],m={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return o.then(function(){m.status="fulfilled",m.value=c;for(var x=0;x<f.length;x++)(0,f[x])(c)},function(x){for(m.status="rejected",m.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),m}var Q1=N.S;N.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&QO(o,c),Q1!==null&&Q1(o,c)};var Mo=ke(null);function gp(){var o=Mo.current;return o!==null?o:Tt.pooledCache}function w0(o,c){c===null?Ke(Mo,Mo.current):Ke(Mo,c.pool)}function W1(){var o=gp();return o===null?null:{parent:cn._currentValue,pool:o}}var pa=0,qe=null,xt=null,sn=null,A0=!1,vc=!1,Po=!1,T0=0,Ph=0,bc=null,XO=0;function qt(){throw Error(n(321))}function mp(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!gs(o[f],c[f]))return!1;return!0}function pp(o,c,f,m,x,E){return pa=E,qe=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,N.H=o===null||o.memoizedState===null?No:ya,Po=!1,E=f(m,x),Po=!1,vc&&(E=Z1(c,f,m,x)),X1(o),E}function X1(o){N.H=Di;var c=xt!==null&&xt.next!==null;if(pa=0,sn=xt=qe=null,A0=!1,Ph=0,bc=null,c)throw Error(n(300));o===null||mn||(o=o.dependencies,o!==null&&O0(o)&&(mn=!0))}function Z1(o,c,f,m){qe=o;var x=0;do{if(vc&&(bc=null),Ph=0,vc=!1,25<=x)throw Error(n(301));if(x+=1,sn=xt=null,o.updateQueue!=null){var E=o.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}N.H=Bo,E=c(f,m)}while(vc);return E}function ZO(){var o=N.H,c=o.useState()[0];return c=typeof c.then=="function"?Nh(c):c,o=o.useState()[0],(xt!==null?xt.memoizedState:null)!==o&&(qe.flags|=1024),c}function yp(){var o=T0!==0;return T0=0,o}function xp(o,c,f){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~f}function vp(o){if(A0){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}A0=!1}pa=0,sn=xt=qe=null,vc=!1,Ph=T0=0,bc=null}function ts(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?qe.memoizedState=sn=o:sn=sn.next=o,sn}function rn(){if(xt===null){var o=qe.alternate;o=o!==null?o.memoizedState:null}else o=xt.next;var c=sn===null?qe.memoizedState:sn.next;if(c!==null)sn=c,xt=o;else{if(o===null)throw qe.alternate===null?Error(n(467)):Error(n(310));xt=o,o={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},sn===null?qe.memoizedState=sn=o:sn=sn.next=o}return sn}var S0;S0=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Nh(o){var c=Ph;return Ph+=1,bc===null&&(bc=[]),o=G1(bc,o,c),c=qe,(sn===null?c.memoizedState:sn.next)===null&&(c=c.alternate,N.H=c===null||c.memoizedState===null?No:ya),o}function _0(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Nh(o);if(o.$$typeof===y)return Pn(o)}throw Error(n(438,String(o)))}function bp(o){var c=null,f=qe.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var m=qe.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=S0(),qe.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(o),m=0;m<o;m++)f[m]=D;return c.index++,f}function gr(o,c){return typeof c=="function"?c(o):c}function R0(o){var c=rn();return Ep(c,xt,o)}function Ep(o,c,f){var m=o.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=f;var x=o.baseQueue,E=m.pending;if(E!==null){if(x!==null){var R=x.next;x.next=E.next,E.next=R}c.baseQueue=x=E,m.pending=null}if(E=o.baseState,x===null)o.memoizedState=E;else{c=x.next;var O=R=null,H=null,Y=c,ce=!1;do{var ge=Y.lane&-536870913;if(ge!==Y.lane?(tt&ge)===ge:(pa&ge)===ge){var ne=Y.revertLane;if(ne===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ge===yc&&(ce=!0);else if((pa&ne)===ne){Y=Y.next,ne===yc&&(ce=!0);continue}else ge={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},H===null?(O=H=ge,R=E):H=H.next=ge,qe.lanes|=ne,_a|=ne;ge=Y.action,Po&&f(E,ge),E=Y.hasEagerState?Y.eagerState:f(E,ge)}else ne={lane:ge,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},H===null?(O=H=ne,R=E):H=H.next=ne,qe.lanes|=ge,_a|=ge;Y=Y.next}while(Y!==null&&Y!==c);if(H===null?R=E:H.next=O,!gs(E,o.memoizedState)&&(mn=!0,ce&&(f=xc,f!==null)))throw f;o.memoizedState=E,o.baseState=R,o.baseQueue=H,m.lastRenderedState=E}return x===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function wp(o){var c=rn(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var m=f.dispatch,x=f.pending,E=c.memoizedState;if(x!==null){f.pending=null;var R=x=x.next;do E=o(E,R.action),R=R.next;while(R!==x);gs(E,c.memoizedState)||(mn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),f.lastRenderedState=E}return[E,m]}function J1(o,c,f){var m=qe,x=rn(),E=rt;if(E){if(f===void 0)throw Error(n(407));f=f()}else f=c();var R=!gs((xt||x).memoizedState,f);if(R&&(x.memoizedState=f,mn=!0),x=x.queue,Sp(nE.bind(null,m,x,o),[o]),x.getSnapshot!==c||R||sn!==null&&sn.memoizedState.tag&1){if(m.flags|=2048,Ec(9,tE.bind(null,m,x,f,c),{destroy:void 0},null),Tt===null)throw Error(n(349));E||(pa&60)!==0||eE(m,c,f)}return f}function eE(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=qe.updateQueue,c===null?(c=S0(),qe.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function tE(o,c,f,m){c.value=f,c.getSnapshot=m,sE(c)&&iE(o)}function nE(o,c,f){return f(function(){sE(c)&&iE(o)})}function sE(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!gs(o,f)}catch{return!0}}function iE(o){var c=da(o,2);c!==null&&Vn(c,o,2)}function Ap(o){var c=ts();if(typeof o=="function"){var f=o;if(o=f(),Po){Ri(!0);try{f()}finally{Ri(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:o},c}function rE(o,c,f,m){return o.baseState=f,Ep(o,xt,typeof m=="function"?m:gr)}function JO(o,c,f,m,x){if(D0(o))throw Error(n(485));if(o=c.action,o!==null){var E={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){E.listeners.push(R)}};N.T!==null?f(!0):E.isTransition=!1,m(E),f=c.pending,f===null?(E.next=c.pending=E,aE(c,E)):(E.next=f.next,c.pending=f.next=E)}}function aE(o,c){var f=c.action,m=c.payload,x=o.state;if(c.isTransition){var E=N.T,R={};N.T=R;try{var O=f(x,m),H=N.S;H!==null&&H(R,O),oE(o,c,O)}catch(Y){Tp(o,c,Y)}finally{N.T=E}}else try{E=f(x,m),oE(o,c,E)}catch(Y){Tp(o,c,Y)}}function oE(o,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){lE(o,c,m)},function(m){return Tp(o,c,m)}):lE(o,c,f)}function lE(o,c,f){c.status="fulfilled",c.value=f,cE(c),o.state=f,c=o.pending,c!==null&&(f=c.next,f===c?o.pending=null:(f=f.next,c.next=f,aE(o,f)))}function Tp(o,c,f){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=f,cE(c),c=c.next;while(c!==m)}o.action=null}function cE(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function uE(o,c){return c}function hE(o,c){if(rt){var f=Tt.formState;if(f!==null){e:{var m=qe;if(rt){if(Sn){t:{for(var x=Sn,E=ki;x.nodeType!==8;){if(!E){x=null;break t}if(x=ri(x.nextSibling),x===null){x=null;break t}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){Sn=ri(x.nextSibling),m=x.data==="F!";break e}}Io(m)}m=!1}m&&(c=f[0])}}return f=ts(),f.memoizedState=f.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uE,lastRenderedState:c},f.queue=m,f=LE.bind(null,qe,m),m.dispatch=f,m=Ap(!1),E=Dp.bind(null,qe,!1,m.queue),m=ts(),x={state:c,dispatch:null,action:o,pending:null},m.queue=x,f=JO.bind(null,qe,x,E,f),x.dispatch=f,m.memoizedState=o,[c,f,!1]}function fE(o){var c=rn();return dE(c,xt,o)}function dE(o,c,f){c=Ep(o,c,uE)[0],o=R0(gr)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?Nh(c):c;var m=rn(),x=m.queue,E=x.dispatch;return f!==m.memoizedState&&(qe.flags|=2048,Ec(9,eM.bind(null,x,f),{destroy:void 0},null)),[c,E,o]}function eM(o,c){o.action=c}function gE(o){var c=rn(),f=xt;if(f!==null)return dE(c,f,o);rn(),c=c.memoizedState,f=rn();var m=f.queue.dispatch;return f.memoizedState=o,[c,m,!1]}function Ec(o,c,f,m){return o={tag:o,create:c,inst:f,deps:m,next:null},c=qe.updateQueue,c===null&&(c=S0(),qe.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=o.next=o:(m=f.next,f.next=o,o.next=m,c.lastEffect=o),o}function mE(){return rn().memoizedState}function k0(o,c,f,m){var x=ts();qe.flags|=o,x.memoizedState=Ec(1|c,f,{destroy:void 0},m===void 0?null:m)}function L0(o,c,f,m){var x=rn();m=m===void 0?null:m;var E=x.memoizedState.inst;xt!==null&&m!==null&&mp(m,xt.memoizedState.deps)?x.memoizedState=Ec(c,f,E,m):(qe.flags|=o,x.memoizedState=Ec(1|c,f,E,m))}function pE(o,c){k0(8390656,8,o,c)}function Sp(o,c){L0(2048,8,o,c)}function yE(o,c){return L0(4,2,o,c)}function xE(o,c){return L0(4,4,o,c)}function vE(o,c){if(typeof c=="function"){o=o();var f=c(o);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function bE(o,c,f){f=f!=null?f.concat([o]):null,L0(4,4,vE.bind(null,c,o),f)}function _p(){}function EE(o,c){var f=rn();c=c===void 0?null:c;var m=f.memoizedState;return c!==null&&mp(c,m[1])?m[0]:(f.memoizedState=[o,c],o)}function wE(o,c){var f=rn();c=c===void 0?null:c;var m=f.memoizedState;if(c!==null&&mp(c,m[1]))return m[0];if(m=o(),Po){Ri(!0);try{o()}finally{Ri(!1)}}return f.memoizedState=[m,c],m}function Rp(o,c,f){return f===void 0||(pa&1073741824)!==0?o.memoizedState=c:(o.memoizedState=f,o=Tw(),qe.lanes|=o,_a|=o,f)}function AE(o,c,f,m){return gs(f,c)?f:pc.current!==null?(o=Rp(o,f,m),gs(o,c)||(mn=!0),o):(pa&42)===0?(mn=!0,o.memoizedState=f):(o=Tw(),qe.lanes|=o,_a|=o,c)}function TE(o,c,f,m,x){var E=ae.p;ae.p=E!==0&&8>E?E:8;var R=N.T,O={};N.T=O,Dp(o,!1,c,f);try{var H=x(),Y=N.S;if(Y!==null&&Y(O,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ce=WO(H,m);Bh(o,c,ce,xs(o))}else Bh(o,c,m,xs(o))}catch(ge){Bh(o,c,{then:function(){},status:"rejected",reason:ge},xs())}finally{ae.p=E,N.T=R}}function tM(){}function kp(o,c,f,m){if(o.tag!==5)throw Error(n(476));var x=SE(o).queue;TE(o,x,c,ve,f===null?tM:function(){return _E(o),f(m)})}function SE(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:ve},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:f},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function _E(o){var c=SE(o).next.queue;Bh(o,c,{},xs())}function Lp(){return Pn(sf)}function RE(){return rn().memoizedState}function kE(){return rn().memoizedState}function nM(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var f=xs();o=ba(f);var m=Ea(c,o,f);m!==null&&(Vn(m,c,f),Hh(m,c,f)),c={cache:fp()},o.payload=c;return}c=c.return}}function sM(o,c,f){var m=xs();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},D0(o)?DE(c,f):(f=rp(o,c,f,m),f!==null&&(Vn(f,o,m),CE(f,c,m)))}function LE(o,c,f){var m=xs();Bh(o,c,f,m)}function Bh(o,c,f,m){var x={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(D0(o))DE(c,x);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var R=c.lastRenderedState,O=E(R,f);if(x.hasEagerState=!0,x.eagerState=O,gs(O,R))return d0(o,c,x,0),Tt===null&&f0(),!1}catch{}finally{}if(f=rp(o,c,x,m),f!==null)return Vn(f,o,m),CE(f,c,m),!0}return!1}function Dp(o,c,f,m){if(m={lane:2,revertLane:vy(),action:m,hasEagerState:!1,eagerState:null,next:null},D0(o)){if(c)throw Error(n(479))}else c=rp(o,f,m,2),c!==null&&Vn(c,o,2)}function D0(o){var c=o.alternate;return o===qe||c!==null&&c===qe}function DE(o,c){vc=A0=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function CE(o,c,f){if((f&4194176)!==0){var m=c.lanes;m&=o.pendingLanes,f|=m,c.lanes=f,zb(o,f)}}var Di={readContext:Pn,use:_0,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt};Di.useCacheRefresh=qt,Di.useMemoCache=qt,Di.useHostTransitionStatus=qt,Di.useFormState=qt,Di.useActionState=qt,Di.useOptimistic=qt;var No={readContext:Pn,use:_0,useCallback:function(o,c){return ts().memoizedState=[o,c===void 0?null:c],o},useContext:Pn,useEffect:pE,useImperativeHandle:function(o,c,f){f=f!=null?f.concat([o]):null,k0(4194308,4,vE.bind(null,c,o),f)},useLayoutEffect:function(o,c){return k0(4194308,4,o,c)},useInsertionEffect:function(o,c){k0(4,2,o,c)},useMemo:function(o,c){var f=ts();c=c===void 0?null:c;var m=o();if(Po){Ri(!0);try{o()}finally{Ri(!1)}}return f.memoizedState=[m,c],m},useReducer:function(o,c,f){var m=ts();if(f!==void 0){var x=f(c);if(Po){Ri(!0);try{f(c)}finally{Ri(!1)}}}else x=c;return m.memoizedState=m.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},m.queue=o,o=o.dispatch=sM.bind(null,qe,o),[m.memoizedState,o]},useRef:function(o){var c=ts();return o={current:o},c.memoizedState=o},useState:function(o){o=Ap(o);var c=o.queue,f=LE.bind(null,qe,c);return c.dispatch=f,[o.memoizedState,f]},useDebugValue:_p,useDeferredValue:function(o,c){var f=ts();return Rp(f,o,c)},useTransition:function(){var o=Ap(!1);return o=TE.bind(null,qe,o.queue,!0,!1),ts().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,f){var m=qe,x=ts();if(rt){if(f===void 0)throw Error(n(407));f=f()}else{if(f=c(),Tt===null)throw Error(n(349));(tt&60)!==0||eE(m,c,f)}x.memoizedState=f;var E={value:f,getSnapshot:c};return x.queue=E,pE(nE.bind(null,m,E,o),[o]),m.flags|=2048,Ec(9,tE.bind(null,m,E,f,c),{destroy:void 0},null),f},useId:function(){var o=ts(),c=Tt.identifierPrefix;if(rt){var f=fr,m=hr;f=(m&~(1<<32-ds(m)-1)).toString(32)+f,c=":"+c+"R"+f,f=T0++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=XO++,c=":"+c+"r"+f.toString(32)+":";return o.memoizedState=c},useCacheRefresh:function(){return ts().memoizedState=nM.bind(null,qe)}};No.useMemoCache=bp,No.useHostTransitionStatus=Lp,No.useFormState=hE,No.useActionState=hE,No.useOptimistic=function(o){var c=ts();c.memoizedState=c.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=Dp.bind(null,qe,!0,f),f.dispatch=c,[o,c]};var ya={readContext:Pn,use:_0,useCallback:EE,useContext:Pn,useEffect:Sp,useImperativeHandle:bE,useInsertionEffect:yE,useLayoutEffect:xE,useMemo:wE,useReducer:R0,useRef:mE,useState:function(){return R0(gr)},useDebugValue:_p,useDeferredValue:function(o,c){var f=rn();return AE(f,xt.memoizedState,o,c)},useTransition:function(){var o=R0(gr)[0],c=rn().memoizedState;return[typeof o=="boolean"?o:Nh(o),c]},useSyncExternalStore:J1,useId:RE};ya.useCacheRefresh=kE,ya.useMemoCache=bp,ya.useHostTransitionStatus=Lp,ya.useFormState=fE,ya.useActionState=fE,ya.useOptimistic=function(o,c){var f=rn();return rE(f,xt,o,c)};var Bo={readContext:Pn,use:_0,useCallback:EE,useContext:Pn,useEffect:Sp,useImperativeHandle:bE,useInsertionEffect:yE,useLayoutEffect:xE,useMemo:wE,useReducer:wp,useRef:mE,useState:function(){return wp(gr)},useDebugValue:_p,useDeferredValue:function(o,c){var f=rn();return xt===null?Rp(f,o,c):AE(f,xt.memoizedState,o,c)},useTransition:function(){var o=wp(gr)[0],c=rn().memoizedState;return[typeof o=="boolean"?o:Nh(o),c]},useSyncExternalStore:J1,useId:RE};Bo.useCacheRefresh=kE,Bo.useMemoCache=bp,Bo.useHostTransitionStatus=Lp,Bo.useFormState=gE,Bo.useActionState=gE,Bo.useOptimistic=function(o,c){var f=rn();return xt!==null?rE(f,xt,o,c):(f.baseState=o,[o,f.queue.dispatch])};function Cp(o,c,f,m){c=o.memoizedState,f=f(m,c),f=f==null?c:P({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Ip={isMounted:function(o){return(o=o._reactInternals)?se(o)===o:!1},enqueueSetState:function(o,c,f){o=o._reactInternals;var m=xs(),x=ba(m);x.payload=c,f!=null&&(x.callback=f),c=Ea(o,x,m),c!==null&&(Vn(c,o,m),Hh(c,o,m))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var m=xs(),x=ba(m);x.tag=1,x.payload=c,f!=null&&(x.callback=f),c=Ea(o,x,m),c!==null&&(Vn(c,o,m),Hh(c,o,m))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=xs(),m=ba(f);m.tag=2,c!=null&&(m.callback=c),c=Ea(o,m,f),c!==null&&(Vn(c,o,f),Hh(c,o,f))}};function IE(o,c,f,m,x,E,R){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,E,R):c.prototype&&c.prototype.isPureReactComponent?!Th(f,m)||!Th(x,E):!0}function OE(o,c,f,m){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,m),c.state!==o&&Ip.enqueueReplaceState(c,c.state,null)}function Fo(o,c){var f=c;if("ref"in c){f={};for(var m in c)m!=="ref"&&(f[m]=c[m])}if(o=o.defaultProps){f===c&&(f=P({},f));for(var x in o)f[x]===void 0&&(f[x]=o[x])}return f}var C0=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function ME(o){C0(o)}function PE(o){console.error(o)}function NE(o){C0(o)}function I0(o,c){try{var f=o.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function BE(o,c,f){try{var m=o.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Op(o,c,f){return f=ba(f),f.tag=3,f.payload={element:null},f.callback=function(){I0(o,c)},f}function FE(o){return o=ba(o),o.tag=3,o}function UE(o,c,f,m){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;o.payload=function(){return x(E)},o.callback=function(){BE(c,f,m)}}var R=f.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(o.callback=function(){BE(c,f,m),typeof x!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function iM(o,c,f,m,x){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=f.alternate,c!==null&&Uh(c,f,x,!0),f=Ps.current,f!==null){switch(f.tag){case 13:return Li===null?gy():f.alternate===null&&zt===0&&(zt=3),f.flags&=-257,f.flags|=65536,f.lanes=x,m===cp?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([m]):c.add(m),py(o,m,x)),!1;case 22:return f.flags|=65536,m===cp?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([m]):f.add(m)),py(o,m,x)),!1}throw Error(n(435,f.tag))}return py(o,m,x),gy(),!1}if(rt)return c=Ps.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,m!==lp&&(o=Error(n(422),{cause:m}),kh(Is(o,f)))):(m!==lp&&(c=Error(n(423),{cause:m}),kh(Is(c,f))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,m=Is(m,f),x=Op(o.stateNode,m,x),qp(o,x),zt!==4&&(zt=2)),!1;var E=Error(n(520),{cause:m});if(E=Is(E,f),qh===null?qh=[E]:qh.push(E),zt!==4&&(zt=2),c===null)return!0;m=Is(m,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,o=x&-x,f.lanes|=o,o=Op(f.stateNode,m,o),qp(f,o),!1;case 1:if(c=f.type,E=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ra===null||!Ra.has(E))))return f.flags|=65536,x&=-x,f.lanes|=x,x=FE(x),UE(x,o,f,m),qp(f,x),!1}f=f.return}while(f!==null);return!1}var HE=Error(n(461)),mn=!1;function _n(o,c,f,m){c.child=o===null?Y1(c,null,f,m):Oo(c,o.child,f,m)}function GE(o,c,f,m,x){f=f.render;var E=c.ref;if("ref"in m){var R={};for(var O in m)O!=="ref"&&(R[O]=m[O])}else R=m;return Ho(c),m=pp(o,c,f,R,E,x),O=yp(),o!==null&&!mn?(xp(o,c,x),mr(o,c,x)):(rt&&O&&ap(c),c.flags|=1,_n(o,c,m,x),c.child)}function zE(o,c,f,m,x){if(o===null){var E=f.type;return typeof E=="function"&&!ny(E)&&E.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=E,$E(o,c,E,m,x)):(o=B0(f.type,null,m,c,c.mode,x),o.ref=c.ref,o.return=c,c.child=o)}if(E=o.child,!zp(o,x)){var R=E.memoizedProps;if(f=f.compare,f=f!==null?f:Th,f(R,m)&&o.ref===c.ref)return mr(o,c,x)}return c.flags|=1,o=Sa(E,m),o.ref=c.ref,o.return=c,c.child=o}function $E(o,c,f,m,x){if(o!==null){var E=o.memoizedProps;if(Th(E,m)&&o.ref===c.ref)if(mn=!1,c.pendingProps=m=E,zp(o,x))(o.flags&131072)!==0&&(mn=!0);else return c.lanes=o.lanes,mr(o,c,x)}return Mp(o,c,f,m,x)}function VE(o,c,f){var m=c.pendingProps,x=m.children,E=(c.stateNode._pendingVisibility&2)!==0,R=o!==null?o.memoizedState:null;if(Fh(o,c),m.mode==="hidden"||E){if((c.flags&128)!==0){if(m=R!==null?R.baseLanes|f:f,o!==null){for(x=c.child=o.child,E=0;x!==null;)E=E|x.lanes|x.childLanes,x=x.sibling;c.childLanes=E&~m}else c.childLanes=0,c.child=null;return YE(o,c,m,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&w0(c,R!==null?R.cachePool:null),R!==null?K1(c,R):up(),j1(c);else return c.lanes=c.childLanes=536870912,YE(o,c,R!==null?R.baseLanes|f:f,f)}else R!==null?(w0(c,R.cachePool),K1(c,R),ma(),c.memoizedState=null):(o!==null&&w0(c,null),up(),ma());return _n(o,c,x,f),c.child}function YE(o,c,f,m){var x=gp();return x=x===null?null:{parent:cn._currentValue,pool:x},c.memoizedState={baseLanes:f,cachePool:x},o!==null&&w0(c,null),up(),j1(c),o!==null&&Uh(o,c,m,!0),null}function Fh(o,c){var f=c.ref;if(f===null)o!==null&&o.ref!==null&&(c.flags|=2097664);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(o===null||o.ref!==f)&&(c.flags|=2097664)}}function Mp(o,c,f,m,x){return Ho(c),f=pp(o,c,f,m,void 0,x),m=yp(),o!==null&&!mn?(xp(o,c,x),mr(o,c,x)):(rt&&m&&ap(c),c.flags|=1,_n(o,c,f,x),c.child)}function KE(o,c,f,m,x,E){return Ho(c),c.updateQueue=null,f=Z1(c,m,f,x),X1(o),m=yp(),o!==null&&!mn?(xp(o,c,E),mr(o,c,E)):(rt&&m&&ap(c),c.flags|=1,_n(o,c,f,E),c.child)}function jE(o,c,f,m,x){if(Ho(c),c.stateNode===null){var E=fc,R=f.contextType;typeof R=="object"&&R!==null&&(E=Pn(R)),E=new f(m,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Ip,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=m,E.state=c.memoizedState,E.refs={},Kp(c),R=f.contextType,E.context=typeof R=="object"&&R!==null?Pn(R):fc,E.state=c.memoizedState,R=f.getDerivedStateFromProps,typeof R=="function"&&(Cp(c,f,R,m),E.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(R=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),R!==E.state&&Ip.enqueueReplaceState(E,E.state,null),zh(c,m,E,x),Gh(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(o===null){E=c.stateNode;var O=c.memoizedProps,H=Fo(f,O);E.props=H;var Y=E.context,ce=f.contextType;R=fc,typeof ce=="object"&&ce!==null&&(R=Pn(ce));var ge=f.getDerivedStateFromProps;ce=typeof ge=="function"||typeof E.getSnapshotBeforeUpdate=="function",O=c.pendingProps!==O,ce||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O||Y!==R)&&OE(c,E,m,R),va=!1;var ne=c.memoizedState;E.state=ne,zh(c,m,E,x),Gh(),Y=c.memoizedState,O||ne!==Y||va?(typeof ge=="function"&&(Cp(c,f,ge,m),Y=c.memoizedState),(H=va||IE(c,f,H,m,ne,Y,R))?(ce||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=Y),E.props=m,E.state=Y,E.context=R,m=H):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{E=c.stateNode,jp(o,c),R=c.memoizedProps,ce=Fo(f,R),E.props=ce,ge=c.pendingProps,ne=E.context,Y=f.contextType,H=fc,typeof Y=="object"&&Y!==null&&(H=Pn(Y)),O=f.getDerivedStateFromProps,(Y=typeof O=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==ge||ne!==H)&&OE(c,E,m,H),va=!1,ne=c.memoizedState,E.state=ne,zh(c,m,E,x),Gh();var oe=c.memoizedState;R!==ge||ne!==oe||va||o!==null&&o.dependencies!==null&&O0(o.dependencies)?(typeof O=="function"&&(Cp(c,f,O,m),oe=c.memoizedState),(ce=va||IE(c,f,ce,m,ne,oe,H)||o!==null&&o.dependencies!==null&&O0(o.dependencies))?(Y||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,oe,H),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,oe,H)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=oe),E.props=m,E.state=oe,E.context=H,m=ce):(typeof E.componentDidUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&ne===o.memoizedState||(c.flags|=1024),m=!1)}return E=m,Fh(o,c),m=(c.flags&128)!==0,E||m?(E=c.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,o!==null&&m?(c.child=Oo(c,o.child,null,x),c.child=Oo(c,null,f,x)):_n(o,c,f,x),c.memoizedState=E.state,o=c.child):o=mr(o,c,x),o}function qE(o,c,f,m){return Rh(),c.flags|=256,_n(o,c,f,m),c.child}var Pp={dehydrated:null,treeContext:null,retryLane:0};function Np(o){return{baseLanes:o,cachePool:W1()}}function Bp(o,c,f){return o=o!==null?o.childLanes&~f:0,c&&(o|=Us),o}function QE(o,c,f){var m=c.pendingProps,x=!1,E=(c.flags&128)!==0,R;if((R=E)||(R=o!==null&&o.memoizedState===null?!1:(ln.current&2)!==0),R&&(x=!0,c.flags&=-129),R=(c.flags&32)!==0,c.flags&=-33,o===null){if(rt){if(x?ga(c):ma(),rt){var O=Sn,H;if(H=O){e:{for(H=O,O=ki;H.nodeType!==8;){if(!O){O=null;break e}if(H=ri(H.nextSibling),H===null){O=null;break e}}O=H}O!==null?(c.memoizedState={dehydrated:O,treeContext:Do!==null?{id:hr,overflow:fr}:null,retryLane:536870912},H=Fs(18,null,null,0),H.stateNode=O,H.return=c,c.child=H,$n=c,Sn=null,H=!0):H=!1}H||Io(c)}if(O=c.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return O.data==="$!"?c.lanes=16:c.lanes=536870912,null;dr(c)}return O=m.children,m=m.fallback,x?(ma(),x=c.mode,O=Up({mode:"hidden",children:O},x),m=zo(m,x,f,null),O.return=c,m.return=c,O.sibling=m,c.child=O,x=c.child,x.memoizedState=Np(f),x.childLanes=Bp(o,R,f),c.memoizedState=Pp,m):(ga(c),Fp(c,O))}if(H=o.memoizedState,H!==null&&(O=H.dehydrated,O!==null)){if(E)c.flags&256?(ga(c),c.flags&=-257,c=Hp(o,c,f)):c.memoizedState!==null?(ma(),c.child=o.child,c.flags|=128,c=null):(ma(),x=m.fallback,O=c.mode,m=Up({mode:"visible",children:m.children},O),x=zo(x,O,f,null),x.flags|=2,m.return=c,x.return=c,m.sibling=x,c.child=m,Oo(c,o.child,null,f),m=c.child,m.memoizedState=Np(f),m.childLanes=Bp(o,R,f),c.memoizedState=Pp,c=x);else if(ga(c),O.data==="$!"){if(R=O.nextSibling&&O.nextSibling.dataset,R)var Y=R.dgst;R=Y,m=Error(n(419)),m.stack="",m.digest=R,kh({value:m,source:null,stack:null}),c=Hp(o,c,f)}else if(mn||Uh(o,c,f,!1),R=(f&o.childLanes)!==0,mn||R){if(R=Tt,R!==null){if(m=f&-f,(m&42)!==0)m=1;else switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=64;break;case 268435456:m=134217728;break;default:m=0}if(m=(m&(R.suspendedLanes|f))!==0?0:m,m!==0&&m!==H.retryLane)throw H.retryLane=m,da(o,m),Vn(R,o,m),HE}O.data==="$?"||gy(),c=Hp(o,c,f)}else O.data==="$?"?(c.flags|=128,c.child=o.child,c=vM.bind(null,o),O._reactRetry=c,c=null):(o=H.treeContext,Sn=ri(O.nextSibling),$n=c,rt=!0,si=null,ki=!1,o!==null&&(Os[Ms++]=hr,Os[Ms++]=fr,Os[Ms++]=Do,hr=o.id,fr=o.overflow,Do=c),c=Fp(c,m.children),c.flags|=4096);return c}return x?(ma(),x=m.fallback,O=c.mode,H=o.child,Y=H.sibling,m=Sa(H,{mode:"hidden",children:m.children}),m.subtreeFlags=H.subtreeFlags&31457280,Y!==null?x=Sa(Y,x):(x=zo(x,O,f,null),x.flags|=2),x.return=c,m.return=c,m.sibling=x,c.child=m,m=x,x=c.child,O=o.child.memoizedState,O===null?O=Np(f):(H=O.cachePool,H!==null?(Y=cn._currentValue,H=H.parent!==Y?{parent:Y,pool:Y}:H):H=W1(),O={baseLanes:O.baseLanes|f,cachePool:H}),x.memoizedState=O,x.childLanes=Bp(o,R,f),c.memoizedState=Pp,m):(ga(c),f=o.child,o=f.sibling,f=Sa(f,{mode:"visible",children:m.children}),f.return=c,f.sibling=null,o!==null&&(R=c.deletions,R===null?(c.deletions=[o],c.flags|=16):R.push(o)),c.child=f,c.memoizedState=null,f)}function Fp(o,c){return c=Up({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Up(o,c){return Ew(o,c,0,null)}function Hp(o,c,f){return Oo(c,o.child,null,f),o=Fp(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function WE(o,c,f){o.lanes|=c;var m=o.alternate;m!==null&&(m.lanes|=c),Vp(o.return,c,f)}function Gp(o,c,f,m,x){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:x}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=f,E.tailMode=x)}function XE(o,c,f){var m=c.pendingProps,x=m.revealOrder,E=m.tail;if(_n(o,c,m.children,f),m=ln.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&WE(o,f,c);else if(o.tag===19)WE(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}switch(Ke(ln,m),x){case"forwards":for(f=c.child,x=null;f!==null;)o=f.alternate,o!==null&&E0(o)===null&&(x=f),f=f.sibling;f=x,f===null?(x=c.child,c.child=null):(x=f.sibling,f.sibling=null),Gp(c,!1,x,f,E);break;case"backwards":for(f=null,x=c.child,c.child=null;x!==null;){if(o=x.alternate,o!==null&&E0(o)===null){c.child=x;break}o=x.sibling,x.sibling=f,f=x,x=o}Gp(c,!0,f,null,E);break;case"together":Gp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function mr(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),_a|=c.lanes,(f&c.childLanes)===0)if(o!==null){if(Uh(o,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,f=Sa(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=Sa(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function zp(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&O0(o)))}function rM(o,c,f){switch(c.tag){case 3:Si(c,c.stateNode.containerInfo),xa(c,cn,o.memoizedState.cache),Rh();break;case 27:case 5:It(c);break;case 4:Si(c,c.stateNode.containerInfo);break;case 10:xa(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(ga(c),c.flags|=128,null):(f&c.child.childLanes)!==0?QE(o,c,f):(ga(c),o=mr(o,c,f),o!==null?o.sibling:null);ga(c);break;case 19:var x=(o.flags&128)!==0;if(m=(f&c.childLanes)!==0,m||(Uh(o,c,f,!1),m=(f&c.childLanes)!==0),x){if(m)return XE(o,c,f);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Ke(ln,ln.current),m)break;return null;case 22:case 23:return c.lanes=0,VE(o,c,f);case 24:xa(c,cn,o.memoizedState.cache)}return mr(o,c,f)}function ZE(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps)mn=!0;else{if(!zp(o,f)&&(c.flags&128)===0)return mn=!1,rM(o,c,f);mn=(o.flags&131072)!==0}else mn=!1,rt&&(c.flags&1048576)!==0&&N1(c,p0,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var m=c.elementType,x=m._init;if(m=x(m._payload),c.type=m,typeof m=="function")ny(m)?(o=Fo(m,o),c.tag=1,c=jE(null,c,m,o,f)):(c.tag=0,c=Mp(null,c,m,o,f));else{if(m!=null){if(x=m.$$typeof,x===v){c.tag=11,c=GE(null,c,m,o,f);break e}else if(x===A){c.tag=14,c=zE(null,c,m,o,f);break e}}throw c=I(m)||m,Error(n(306,c,""))}}return c;case 0:return Mp(o,c,c.type,c.pendingProps,f);case 1:return m=c.type,x=Fo(m,c.pendingProps),jE(o,c,m,x,f);case 3:e:{if(Si(c,c.stateNode.containerInfo),o===null)throw Error(n(387));var E=c.pendingProps;x=c.memoizedState,m=x.element,jp(o,c),zh(c,E,null,f);var R=c.memoizedState;if(E=R.cache,xa(c,cn,E),E!==x.cache&&Yp(c,[cn],f,!0),Gh(),E=R.element,x.isDehydrated)if(x={element:E,isDehydrated:!1,cache:R.cache},c.updateQueue.baseState=x,c.memoizedState=x,c.flags&256){c=qE(o,c,E,f);break e}else if(E!==m){m=Is(Error(n(424)),c),kh(m),c=qE(o,c,E,f);break e}else for(Sn=ri(c.stateNode.containerInfo.firstChild),$n=c,rt=!0,si=null,ki=!0,f=Y1(c,null,E,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Rh(),E===m){c=mr(o,c,f);break e}_n(o,c,E,f)}c=c.child}return c;case 26:return Fh(o,c),o===null?(f=tA(c.type,null,c.pendingProps,null))?c.memoizedState=f:rt||(f=c.type,o=c.pendingProps,m=Q0(At.current).createElement(f),m[Mn]=c,m[Jn]=o,Rn(m,f,o),gn(m),c.stateNode=m):c.memoizedState=tA(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return It(c),o===null&&rt&&(m=c.stateNode=Zw(c.type,c.pendingProps,At.current),$n=c,ki=!0,Sn=ri(m.firstChild)),m=c.pendingProps.children,o!==null||rt?_n(o,c,m,f):c.child=Oo(c,null,m,f),Fh(o,c),c.child;case 5:return o===null&&rt&&((x=m=Sn)&&(m=PM(m,c.type,c.pendingProps,ki),m!==null?(c.stateNode=m,$n=c,Sn=ri(m.firstChild),ki=!1,x=!0):x=!1),x||Io(c)),It(c),x=c.type,E=c.pendingProps,R=o!==null?o.memoizedProps:null,m=E.children,ky(x,E)?m=null:R!==null&&ky(x,R)&&(c.flags|=32),c.memoizedState!==null&&(x=pp(o,c,ZO,null,null,f),sf._currentValue=x),Fh(o,c),_n(o,c,m,f),c.child;case 6:return o===null&&rt&&((o=f=Sn)&&(f=NM(f,c.pendingProps,ki),f!==null?(c.stateNode=f,$n=c,Sn=null,o=!0):o=!1),o||Io(c)),null;case 13:return QE(o,c,f);case 4:return Si(c,c.stateNode.containerInfo),m=c.pendingProps,o===null?c.child=Oo(c,null,m,f):_n(o,c,m,f),c.child;case 11:return GE(o,c,c.type,c.pendingProps,f);case 7:return _n(o,c,c.pendingProps,f),c.child;case 8:return _n(o,c,c.pendingProps.children,f),c.child;case 12:return _n(o,c,c.pendingProps.children,f),c.child;case 10:return m=c.pendingProps,xa(c,c.type,m.value),_n(o,c,m.children,f),c.child;case 9:return x=c.type._context,m=c.pendingProps.children,Ho(c),x=Pn(x),m=m(x),c.flags|=1,_n(o,c,m,f),c.child;case 14:return zE(o,c,c.type,c.pendingProps,f);case 15:return $E(o,c,c.type,c.pendingProps,f);case 19:return XE(o,c,f);case 22:return VE(o,c,f);case 24:return Ho(c),m=Pn(cn),o===null?(x=gp(),x===null&&(x=Tt,E=fp(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=f),x=E),c.memoizedState={parent:m,cache:x},Kp(c),xa(c,cn,x)):((o.lanes&f)!==0&&(jp(o,c),zh(c,null,null,f),Gh()),x=o.memoizedState,E=c.memoizedState,x.parent!==m?(x={parent:m,cache:m},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),xa(c,cn,m)):(m=E.cache,xa(c,cn,m),m!==x.cache&&Yp(c,[cn],f,!0))),_n(o,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}var $p=ke(null),Uo=null,pr=null;function xa(o,c,f){Ke($p,c._currentValue),c._currentValue=f}function yr(o){o._currentValue=$p.current,Ne($p)}function Vp(o,c,f){for(;o!==null;){var m=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),o===f)break;o=o.return}}function Yp(o,c,f,m){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var E=x.dependencies;if(E!==null){var R=x.child;E=E.firstContext;e:for(;E!==null;){var O=E;E=x;for(var H=0;H<c.length;H++)if(O.context===c[H]){E.lanes|=f,O=E.alternate,O!==null&&(O.lanes|=f),Vp(E.return,f,o),m||(R=null);break e}E=O.next}}else if(x.tag===18){if(R=x.return,R===null)throw Error(n(341));R.lanes|=f,E=R.alternate,E!==null&&(E.lanes|=f),Vp(R,f,o),R=null}else R=x.child;if(R!==null)R.return=x;else for(R=x;R!==null;){if(R===o){R=null;break}if(x=R.sibling,x!==null){x.return=R.return,R=x;break}R=R.return}x=R}}function Uh(o,c,f,m){o=null;for(var x=c,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var R=x.alternate;if(R===null)throw Error(n(387));if(R=R.memoizedProps,R!==null){var O=x.type;gs(x.pendingProps.value,R.value)||(o!==null?o.push(O):o=[O])}}else if(x===dn.current){if(R=x.alternate,R===null)throw Error(n(387));R.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(sf):o=[sf])}x=x.return}o!==null&&Yp(c,o,f,m),c.flags|=262144}function O0(o){for(o=o.firstContext;o!==null;){if(!gs(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ho(o){Uo=o,pr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Pn(o){return JE(Uo,o)}function M0(o,c){return Uo===null&&Ho(o),JE(o,c)}function JE(o,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},pr===null){if(o===null)throw Error(n(308));pr=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else pr=pr.next=c;return f}var va=!1;function Kp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jp(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ba(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ea(o,c,f){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Pt&2)!==0){var x=m.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),m.pending=c,c=g0(o),M1(o,null,f),c}return d0(o,m,c,f),g0(o)}function Hh(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194176)!==0)){var m=c.lanes;m&=o.pendingLanes,f|=m,c.lanes=f,zb(o,f)}}function qp(o,c){var f=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var x=null,E=null;if(f=f.firstBaseUpdate,f!==null){do{var R={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};E===null?x=E=R:E=E.next=R,f=f.next}while(f!==null);E===null?x=E=c:E=E.next=c}else x=E=c;f={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}var Qp=!1;function Gh(){if(Qp){var o=xc;if(o!==null)throw o}}function zh(o,c,f,m){Qp=!1;var x=o.updateQueue;va=!1;var E=x.firstBaseUpdate,R=x.lastBaseUpdate,O=x.shared.pending;if(O!==null){x.shared.pending=null;var H=O,Y=H.next;H.next=null,R===null?E=Y:R.next=Y,R=H;var ce=o.alternate;ce!==null&&(ce=ce.updateQueue,O=ce.lastBaseUpdate,O!==R&&(O===null?ce.firstBaseUpdate=Y:O.next=Y,ce.lastBaseUpdate=H))}if(E!==null){var ge=x.baseState;R=0,ce=Y=H=null,O=E;do{var ne=O.lane&-536870913,oe=ne!==O.lane;if(oe?(tt&ne)===ne:(m&ne)===ne){ne!==0&&ne===yc&&(Qp=!0),ce!==null&&(ce=ce.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Re=o,Ue=O;ne=c;var $t=f;switch(Ue.tag){case 1:if(Re=Ue.payload,typeof Re=="function"){ge=Re.call($t,ge,ne);break e}ge=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ue.payload,ne=typeof Re=="function"?Re.call($t,ge,ne):Re,ne==null)break e;ge=P({},ge,ne);break e;case 2:va=!0}}ne=O.callback,ne!==null&&(o.flags|=64,oe&&(o.flags|=8192),oe=x.callbacks,oe===null?x.callbacks=[ne]:oe.push(ne))}else oe={lane:ne,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ce===null?(Y=ce=oe,H=ge):ce=ce.next=oe,R|=ne;if(O=O.next,O===null){if(O=x.shared.pending,O===null)break;oe=O,O=oe.next,oe.next=null,x.lastBaseUpdate=oe,x.shared.pending=null}}while(!0);ce===null&&(H=ge),x.baseState=H,x.firstBaseUpdate=Y,x.lastBaseUpdate=ce,E===null&&(x.shared.lanes=0),_a|=R,o.lanes=R,o.memoizedState=ge}}function ew(o,c){if(typeof o!="function")throw Error(n(191,o));o.call(c)}function tw(o,c){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)ew(f[o],c)}function $h(o,c){try{var f=c.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var x=m.next;f=x;do{if((f.tag&o)===o){m=void 0;var E=f.create,R=f.inst;m=E(),R.destroy=m}f=f.next}while(f!==x)}}catch(O){wt(c,c.return,O)}}function wa(o,c,f){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&o)===o){var R=m.inst,O=R.destroy;if(O!==void 0){R.destroy=void 0,x=c;var H=f;try{O()}catch(Y){wt(x,H,Y)}}}m=m.next}while(m!==E)}}catch(Y){wt(c,c.return,Y)}}function nw(o){var c=o.updateQueue;if(c!==null){var f=o.stateNode;try{tw(c,f)}catch(m){wt(o,o.return,m)}}}function sw(o,c,f){f.props=Fo(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(m){wt(o,c,m)}}function Go(o,c){try{var f=o.ref;if(f!==null){var m=o.stateNode;switch(o.tag){case 26:case 27:case 5:var x=m;break;default:x=m}typeof f=="function"?o.refCleanup=f(x):f.current=x}}catch(E){wt(o,c,E)}}function ms(o,c){var f=o.ref,m=o.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(x){wt(o,c,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){wt(o,c,x)}else f.current=null}function iw(o){var c=o.type,f=o.memoizedProps,m=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(x){wt(o,o.return,x)}}function rw(o,c,f){try{var m=o.stateNode;DM(m,o.type,f,c),m[Jn]=c}catch(x){wt(o,o.return,x)}}function aw(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27||o.tag===4}function Wp(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||aw(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==27&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Xp(o,c,f){var m=o.tag;if(m===5||m===6)o=o.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(o,c):f.insertBefore(o,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(o,f)):(c=f,c.appendChild(o)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=q0));else if(m!==4&&m!==27&&(o=o.child,o!==null))for(Xp(o,c,f),o=o.sibling;o!==null;)Xp(o,c,f),o=o.sibling}function P0(o,c,f){var m=o.tag;if(m===5||m===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(m!==4&&m!==27&&(o=o.child,o!==null))for(P0(o,c,f),o=o.sibling;o!==null;)P0(o,c,f),o=o.sibling}var xr=!1,Gt=!1,Zp=!1,ow=typeof WeakSet=="function"?WeakSet:Set,pn=null,lw=!1;function aM(o,c){if(o=o.containerInfo,_y=t2,o=S1(o),ep(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{f.nodeType,E.nodeType}catch{f=null;break e}var R=0,O=-1,H=-1,Y=0,ce=0,ge=o,ne=null;t:for(;;){for(var oe;ge!==f||x!==0&&ge.nodeType!==3||(O=R+x),ge!==E||m!==0&&ge.nodeType!==3||(H=R+m),ge.nodeType===3&&(R+=ge.nodeValue.length),(oe=ge.firstChild)!==null;)ne=ge,ge=oe;for(;;){if(ge===o)break t;if(ne===f&&++Y===x&&(O=R),ne===E&&++ce===m&&(H=R),(oe=ge.nextSibling)!==null)break;ge=ne,ne=ge.parentNode}ge=oe}f=O===-1||H===-1?null:{start:O,end:H}}else f=null}f=f||{start:0,end:0}}else f=null;for(Ry={focusedElem:o,selectionRange:f},t2=!1,pn=c;pn!==null;)if(c=pn,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,pn=o;else for(;pn!==null;){switch(c=pn,E=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&E!==null){o=void 0,f=c,x=E.memoizedProps,E=E.memoizedState,m=f.stateNode;try{var Re=Fo(f.type,x,f.elementType===f.type);o=m.getSnapshotBeforeUpdate(Re,E),m.__reactInternalSnapshotBeforeUpdate=o}catch(Ue){wt(f,f.return,Ue)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,f=o.nodeType,f===9)Cy(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Cy(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=c.sibling,o!==null){o.return=c.return,pn=o;break}pn=c.return}return Re=lw,lw=!1,Re}function cw(o,c,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:br(o,f),m&4&&$h(5,f);break;case 1:if(br(o,f),m&4)if(o=f.stateNode,c===null)try{o.componentDidMount()}catch(O){wt(f,f.return,O)}else{var x=Fo(f.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(x,c,o.__reactInternalSnapshotBeforeUpdate)}catch(O){wt(f,f.return,O)}}m&64&&nw(f),m&512&&Go(f,f.return);break;case 3:if(br(o,f),m&64&&(m=f.updateQueue,m!==null)){if(o=null,f.child!==null)switch(f.child.tag){case 27:case 5:o=f.child.stateNode;break;case 1:o=f.child.stateNode}try{tw(m,o)}catch(O){wt(f,f.return,O)}}break;case 26:br(o,f),m&512&&Go(f,f.return);break;case 27:case 5:br(o,f),c===null&&m&4&&iw(f),m&512&&Go(f,f.return);break;case 12:br(o,f);break;case 13:br(o,f),m&4&&fw(o,f);break;case 22:if(x=f.memoizedState!==null||xr,!x){c=c!==null&&c.memoizedState!==null||Gt;var E=xr,R=Gt;xr=x,(Gt=c)&&!R?Aa(o,f,(f.subtreeFlags&8772)!==0):br(o,f),xr=E,Gt=R}m&512&&(f.memoizedProps.mode==="manual"?Go(f,f.return):ms(f,f.return));break;default:br(o,f)}}function uw(o){var c=o.alternate;c!==null&&(o.alternate=null,uw(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Fm(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var an=null,ps=!1;function vr(o,c,f){for(f=f.child;f!==null;)hw(o,c,f),f=f.sibling}function hw(o,c,f){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(lt,f)}catch{}switch(f.tag){case 26:Gt||ms(f,c),vr(o,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Gt||ms(f,c);var m=an,x=ps;for(an=f.stateNode,vr(o,c,f),f=f.stateNode,c=f.attributes;c.length;)f.removeAttributeNode(c[0]);Fm(f),an=m,ps=x;break;case 5:Gt||ms(f,c);case 6:x=an;var E=ps;if(an=null,vr(o,c,f),an=x,ps=E,an!==null)if(ps)try{o=an,m=f.stateNode,o.nodeType===8?o.parentNode.removeChild(m):o.removeChild(m)}catch(R){wt(f,c,R)}else try{an.removeChild(f.stateNode)}catch(R){wt(f,c,R)}break;case 18:an!==null&&(ps?(c=an,f=f.stateNode,c.nodeType===8?Dy(c.parentNode,f):c.nodeType===1&&Dy(c,f),lf(c)):Dy(an,f.stateNode));break;case 4:m=an,x=ps,an=f.stateNode.containerInfo,ps=!0,vr(o,c,f),an=m,ps=x;break;case 0:case 11:case 14:case 15:Gt||wa(2,f,c),Gt||wa(4,f,c),vr(o,c,f);break;case 1:Gt||(ms(f,c),m=f.stateNode,typeof m.componentWillUnmount=="function"&&sw(f,c,m)),vr(o,c,f);break;case 21:vr(o,c,f);break;case 22:Gt||ms(f,c),Gt=(m=Gt)||f.memoizedState!==null,vr(o,c,f),Gt=m;break;default:vr(o,c,f)}}function fw(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{lf(o)}catch(f){wt(c,c.return,f)}}function oM(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new ow),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new ow),c;default:throw Error(n(435,o.tag))}}function Jp(o,c){var f=oM(o);c.forEach(function(m){var x=bM.bind(null,o,m);f.has(m)||(f.add(m),m.then(x,x))})}function Ns(o,c){var f=c.deletions;if(f!==null)for(var m=0;m<f.length;m++){var x=f[m],E=o,R=c,O=R;e:for(;O!==null;){switch(O.tag){case 27:case 5:an=O.stateNode,ps=!1;break e;case 3:an=O.stateNode.containerInfo,ps=!0;break e;case 4:an=O.stateNode.containerInfo,ps=!0;break e}O=O.return}if(an===null)throw Error(n(160));hw(E,R,x),an=null,ps=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)dw(c,o),c=c.sibling}var ii=null;function dw(o,c){var f=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ns(c,o),Bs(o),m&4&&(wa(3,o,o.return),$h(3,o),wa(5,o,o.return));break;case 1:Ns(c,o),Bs(o),m&512&&(Gt||f===null||ms(f,f.return)),m&64&&xr&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var x=ii;if(Ns(c,o),Bs(o),m&512&&(Gt||f===null||ms(f,f.return)),m&4){var E=f!==null?f.memoizedState:null;if(m=o.memoizedState,f===null)if(m===null)if(o.stateNode===null){e:{m=o.type,f=o.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":E=x.getElementsByTagName("title")[0],(!E||E[mh]||E[Mn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(m),x.head.insertBefore(E,x.querySelector("head > title"))),Rn(E,m,f),E[Mn]=o,gn(E),m=E;break e;case"link":var R=iA("link","href",x).get(m+(f.href||""));if(R){for(var O=0;O<R.length;O++)if(E=R[O],E.getAttribute("href")===(f.href==null?null:f.href)&&E.getAttribute("rel")===(f.rel==null?null:f.rel)&&E.getAttribute("title")===(f.title==null?null:f.title)&&E.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){R.splice(O,1);break t}}E=x.createElement(m),Rn(E,m,f),x.head.appendChild(E);break;case"meta":if(R=iA("meta","content",x).get(m+(f.content||""))){for(O=0;O<R.length;O++)if(E=R[O],E.getAttribute("content")===(f.content==null?null:""+f.content)&&E.getAttribute("name")===(f.name==null?null:f.name)&&E.getAttribute("property")===(f.property==null?null:f.property)&&E.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&E.getAttribute("charset")===(f.charSet==null?null:f.charSet)){R.splice(O,1);break t}}E=x.createElement(m),Rn(E,m,f),x.head.appendChild(E);break;default:throw Error(n(468,m))}E[Mn]=o,gn(E),m=E}o.stateNode=m}else rA(x,o.type,o.stateNode);else o.stateNode=sA(x,m,o.memoizedProps);else E!==m?(E===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):E.count--,m===null?rA(x,o.type,o.stateNode):sA(x,m,o.memoizedProps)):m===null&&o.stateNode!==null&&rw(o,o.memoizedProps,f.memoizedProps)}break;case 27:if(m&4&&o.alternate===null){x=o.stateNode,E=o.memoizedProps;try{for(var H=x.firstChild;H;){var Y=H.nextSibling,ce=H.nodeName;H[mh]||ce==="HEAD"||ce==="BODY"||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&H.rel.toLowerCase()==="stylesheet"||x.removeChild(H),H=Y}for(var ge=o.type,ne=x.attributes;ne.length;)x.removeAttributeNode(ne[0]);Rn(x,ge,E),x[Mn]=o,x[Jn]=E}catch(Re){wt(o,o.return,Re)}}case 5:if(Ns(c,o),Bs(o),m&512&&(Gt||f===null||ms(f,f.return)),o.flags&32){x=o.stateNode;try{rc(x,"")}catch(Re){wt(o,o.return,Re)}}m&4&&o.stateNode!=null&&(x=o.memoizedProps,rw(o,x,f!==null?f.memoizedProps:x)),m&1024&&(Zp=!0);break;case 6:if(Ns(c,o),Bs(o),m&4){if(o.stateNode===null)throw Error(n(162));m=o.memoizedProps,f=o.stateNode;try{f.nodeValue=m}catch(Re){wt(o,o.return,Re)}}break;case 3:if(Z0=null,x=ii,ii=W0(c.containerInfo),Ns(c,o),ii=x,Bs(o),m&4&&f!==null&&f.memoizedState.isDehydrated)try{lf(c.containerInfo)}catch(Re){wt(o,o.return,Re)}Zp&&(Zp=!1,gw(o));break;case 4:m=ii,ii=W0(o.stateNode.containerInfo),Ns(c,o),Bs(o),ii=m;break;case 12:Ns(c,o),Bs(o);break;case 13:Ns(c,o),Bs(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(ly=Tn()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Jp(o,m)));break;case 22:if(m&512&&(Gt||f===null||ms(f,f.return)),H=o.memoizedState!==null,Y=f!==null&&f.memoizedState!==null,ce=xr,ge=Gt,xr=ce||H,Gt=ge||Y,Ns(c,o),Gt=ge,xr=ce,Bs(o),c=o.stateNode,c._current=o,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,m&8192&&(c._visibility=H?c._visibility&-2:c._visibility|1,H&&(c=xr||Gt,f===null||Y||c||wc(o)),o.memoizedProps===null||o.memoizedProps.mode!=="manual"))e:for(f=null,c=o;;){if(c.tag===5||c.tag===26||c.tag===27){if(f===null){Y=f=c;try{if(x=Y.stateNode,H)E=x.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=Y.stateNode,O=Y.memoizedProps.style;var oe=O!=null&&O.hasOwnProperty("display")?O.display:null;R.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(Re){wt(Y,Y.return,Re)}}}else if(c.tag===6){if(f===null){Y=c;try{Y.stateNode.nodeValue=H?"":Y.memoizedProps}catch(Re){wt(Y,Y.return,Re)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=o.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,Jp(o,f))));break;case 19:Ns(c,o),Bs(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Jp(o,m)));break;case 21:break;default:Ns(c,o),Bs(o)}}function Bs(o){var c=o.flags;if(c&2){try{if(o.tag!==27){e:{for(var f=o.return;f!==null;){if(aw(f)){var m=f;break e}f=f.return}throw Error(n(160))}switch(m.tag){case 27:var x=m.stateNode,E=Wp(o);P0(o,E,x);break;case 5:var R=m.stateNode;m.flags&32&&(rc(R,""),m.flags&=-33);var O=Wp(o);P0(o,O,R);break;case 3:case 4:var H=m.stateNode.containerInfo,Y=Wp(o);Xp(o,Y,H);break;default:throw Error(n(161))}}}catch(ce){wt(o,o.return,ce)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function gw(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;gw(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function br(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)cw(o,c.alternate,c),c=c.sibling}function wc(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:wa(4,c,c.return),wc(c);break;case 1:ms(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&sw(c,c.return,f),wc(c);break;case 26:case 27:case 5:ms(c,c.return),wc(c);break;case 22:ms(c,c.return),c.memoizedState===null&&wc(c);break;default:wc(c)}o=o.sibling}}function Aa(o,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,x=o,E=c,R=E.flags;switch(E.tag){case 0:case 11:case 15:Aa(x,E,f),$h(4,E);break;case 1:if(Aa(x,E,f),m=E,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Y){wt(m,m.return,Y)}if(m=E,x=m.updateQueue,x!==null){var O=m.stateNode;try{var H=x.shared.hiddenCallbacks;if(H!==null)for(x.shared.hiddenCallbacks=null,x=0;x<H.length;x++)ew(H[x],O)}catch(Y){wt(m,m.return,Y)}}f&&R&64&&nw(E),Go(E,E.return);break;case 26:case 27:case 5:Aa(x,E,f),f&&m===null&&R&4&&iw(E),Go(E,E.return);break;case 12:Aa(x,E,f);break;case 13:Aa(x,E,f),f&&R&4&&fw(x,E);break;case 22:E.memoizedState===null&&Aa(x,E,f),Go(E,E.return);break;default:Aa(x,E,f)}c=c.sibling}}function ey(o,c){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&Oh(f))}function ty(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Oh(o))}function Ta(o,c,f,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)mw(o,c,f,m),c=c.sibling}function mw(o,c,f,m){var x=c.flags;switch(c.tag){case 0:case 11:case 15:Ta(o,c,f,m),x&2048&&$h(9,c);break;case 3:Ta(o,c,f,m),x&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Oh(o)));break;case 12:if(x&2048){Ta(o,c,f,m),o=c.stateNode;try{var E=c.memoizedProps,R=E.id,O=E.onPostCommit;typeof O=="function"&&O(R,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(H){wt(c,c.return,H)}}else Ta(o,c,f,m);break;case 23:break;case 22:E=c.stateNode,c.memoizedState!==null?E._visibility&4?Ta(o,c,f,m):Vh(o,c):E._visibility&4?Ta(o,c,f,m):(E._visibility|=4,Ac(o,c,f,m,(c.subtreeFlags&10256)!==0)),x&2048&&ey(c.alternate,c);break;case 24:Ta(o,c,f,m),x&2048&&ty(c.alternate,c);break;default:Ta(o,c,f,m)}}function Ac(o,c,f,m,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var E=o,R=c,O=f,H=m,Y=R.flags;switch(R.tag){case 0:case 11:case 15:Ac(E,R,O,H,x),$h(8,R);break;case 23:break;case 22:var ce=R.stateNode;R.memoizedState!==null?ce._visibility&4?Ac(E,R,O,H,x):Vh(E,R):(ce._visibility|=4,Ac(E,R,O,H,x)),x&&Y&2048&&ey(R.alternate,R);break;case 24:Ac(E,R,O,H,x),x&&Y&2048&&ty(R.alternate,R);break;default:Ac(E,R,O,H,x)}c=c.sibling}}function Vh(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=o,m=c,x=m.flags;switch(m.tag){case 22:Vh(f,m),x&2048&&ey(m.alternate,m);break;case 24:Vh(f,m),x&2048&&ty(m.alternate,m);break;default:Vh(f,m)}c=c.sibling}}var Yh=8192;function Tc(o){if(o.subtreeFlags&Yh)for(o=o.child;o!==null;)pw(o),o=o.sibling}function pw(o){switch(o.tag){case 26:Tc(o),o.flags&Yh&&o.memoizedState!==null&&QM(ii,o.memoizedState,o.memoizedProps);break;case 5:Tc(o);break;case 3:case 4:var c=ii;ii=W0(o.stateNode.containerInfo),Tc(o),ii=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Yh,Yh=16777216,Tc(o),Yh=c):Tc(o));break;default:Tc(o)}}function yw(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function Kh(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];pn=m,vw(m,o)}yw(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)xw(o),o=o.sibling}function xw(o){switch(o.tag){case 0:case 11:case 15:Kh(o),o.flags&2048&&wa(9,o,o.return);break;case 3:Kh(o);break;case 12:Kh(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&4&&(o.return===null||o.return.tag!==13)?(c._visibility&=-5,N0(o)):Kh(o);break;default:Kh(o)}}function N0(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];pn=m,vw(m,o)}yw(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:wa(8,c,c.return),N0(c);break;case 22:f=c.stateNode,f._visibility&4&&(f._visibility&=-5,N0(c));break;default:N0(c)}o=o.sibling}}function vw(o,c){for(;pn!==null;){var f=pn;switch(f.tag){case 0:case 11:case 15:wa(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Oh(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,pn=m;else e:for(f=o;pn!==null;){m=pn;var x=m.sibling,E=m.return;if(uw(m),m===f){pn=null;break e}if(x!==null){x.return=E,pn=x;break e}pn=E}}}function lM(o,c,f,m){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(o,c,f,m){return new lM(o,c,f,m)}function ny(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Sa(o,c){var f=o.alternate;return f===null?(f=Fs(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&31457280,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function bw(o,c){o.flags&=31457282;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,c=f.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function B0(o,c,f,m,x,E){var R=0;if(m=o,typeof o=="function")ny(o)&&(R=1);else if(typeof o=="string")R=jM(o,f,fn.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case u:return zo(f.children,x,E,c);case h:R=8,x|=24;break;case d:return o=Fs(12,f,c,x|2),o.elementType=d,o.lanes=E,o;case b:return o=Fs(13,f,c,x),o.elementType=b,o.lanes=E,o;case w:return o=Fs(19,f,c,x),o.elementType=w,o.lanes=E,o;case T:return Ew(f,x,E,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case g:case y:R=10;break e;case p:R=9;break e;case v:R=11;break e;case A:R=14;break e;case S:R=16,m=null;break e}R=29,f=Error(n(130,o===null?"null":typeof o,"")),m=null}return c=Fs(R,f,c,x),c.elementType=o,c.type=m,c.lanes=E,c}function zo(o,c,f,m){return o=Fs(7,o,m,c),o.lanes=f,o}function Ew(o,c,f,m){o=Fs(22,o,m,c),o.elementType=T,o.lanes=f;var x={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var E=x._current;if(E===null)throw Error(n(456));if((x._pendingVisibility&2)===0){var R=da(E,2);R!==null&&(x._pendingVisibility|=2,Vn(R,E,2))}},attach:function(){var E=x._current;if(E===null)throw Error(n(456));if((x._pendingVisibility&2)!==0){var R=da(E,2);R!==null&&(x._pendingVisibility&=-3,Vn(R,E,2))}}};return o.stateNode=x,o}function sy(o,c,f){return o=Fs(6,o,null,c),o.lanes=f,o}function iy(o,c,f){return c=Fs(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function Er(o){o.flags|=4}function ww(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!aA(c)){if(c=Ps.current,c!==null&&((tt&4194176)===tt?Li!==null:(tt&62914560)!==tt&&(tt&536870912)===0||c!==Li))throw Dh=cp,U1;o.flags|=8192}}function F0(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?Hb():536870912,o.lanes|=c,_c|=c)}function jh(o,c){if(!rt)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Mt(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,m=0;if(c)for(var x=o.child;x!==null;)f|=x.lanes|x.childLanes,m|=x.subtreeFlags&31457280,m|=x.flags&31457280,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)f|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=m,o.childLanes=f,c}function cM(o,c,f){var m=c.pendingProps;switch(op(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(c),null;case 1:return Mt(c),null;case 3:return f=c.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),yr(cn),Fe(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(_h(c)?Er(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,si!==null&&(fy(si),si=null))),Mt(c),null;case 26:return f=c.memoizedState,o===null?(Er(c),f!==null?(Mt(c),ww(c,f)):(Mt(c),c.flags&=-16777217)):f?f!==o.memoizedState?(Er(c),Mt(c),ww(c,f)):(Mt(c),c.flags&=-16777217):(o.memoizedProps!==m&&Er(c),Mt(c),c.flags&=-16777217),null;case 27:on(c),f=At.current;var x=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==m&&Er(c);else{if(!m){if(c.stateNode===null)throw Error(n(166));return Mt(c),null}o=fn.current,_h(c)?B1(c):(o=Zw(x,m,f),c.stateNode=o,Er(c))}return Mt(c),null;case 5:if(on(c),f=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==m&&Er(c);else{if(!m){if(c.stateNode===null)throw Error(n(166));return Mt(c),null}if(o=fn.current,_h(c))B1(c);else{switch(x=Q0(At.current),o){case 1:o=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:o=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":o=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":o=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":o=x.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?o.multiple=!0:m.size&&(o.size=m.size);break;default:o=typeof m.is=="string"?x.createElement(f,{is:m.is}):x.createElement(f)}}o[Mn]=c,o[Jn]=m;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)o.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=o;e:switch(Rn(o,f,m),f){case"button":case"input":case"select":case"textarea":o=!!m.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Er(c)}}return Mt(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==m&&Er(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(n(166));if(o=At.current,_h(c)){if(o=c.stateNode,f=c.memoizedProps,m=null,x=$n,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}o[Mn]=c,o=!!(o.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||Kw(o.nodeValue,f)),o||Io(c)}else o=Q0(o).createTextNode(m),o[Mn]=c,c.stateNode=o}return Mt(c),null;case 13:if(m=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=_h(c),m!==null&&m.dehydrated!==null){if(o===null){if(!x)throw Error(n(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[Mn]=c}else Rh(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Mt(c),x=!1}else si!==null&&(fy(si),si=null),x=!0;if(!x)return c.flags&256?(dr(c),c):(dr(c),null)}if(dr(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=m!==null,o=o!==null&&o.memoizedState!==null,f){m=c.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048)}return f!==o&&f&&(c.child.flags|=8192),F0(c,c.updateQueue),Mt(c),null;case 4:return Fe(),o===null&&Ay(c.stateNode.containerInfo),Mt(c),null;case 10:return yr(c.type),Mt(c),null;case 19:if(Ne(ln),x=c.memoizedState,x===null)return Mt(c),null;if(m=(c.flags&128)!==0,E=x.rendering,E===null)if(m)jh(x,!1);else{if(zt!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(E=E0(o),E!==null){for(c.flags|=128,jh(x,!1),o=E.updateQueue,c.updateQueue=o,F0(c,o),c.subtreeFlags=0,o=f,f=c.child;f!==null;)bw(f,o),f=f.sibling;return Ke(ln,ln.current&1|2),c.child}o=o.sibling}x.tail!==null&&Tn()>U0&&(c.flags|=128,m=!0,jh(x,!1),c.lanes=4194304)}else{if(!m)if(o=E0(E),o!==null){if(c.flags|=128,m=!0,o=o.updateQueue,c.updateQueue=o,F0(c,o),jh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!rt)return Mt(c),null}else 2*Tn()-x.renderingStartTime>U0&&f!==536870912&&(c.flags|=128,m=!0,jh(x,!1),c.lanes=4194304);x.isBackwards?(E.sibling=c.child,c.child=E):(o=x.last,o!==null?o.sibling=E:c.child=E,x.last=E)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Tn(),c.sibling=null,o=ln.current,Ke(ln,m?o&1|2:o&1),c):(Mt(c),null);case 22:case 23:return dr(c),hp(),m=c.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(f&536870912)!==0&&(c.flags&128)===0&&(Mt(c),c.subtreeFlags&6&&(c.flags|=8192)):Mt(c),f=c.updateQueue,f!==null&&F0(c,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048),o!==null&&Ne(Mo),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),yr(cn),Mt(c),null;case 25:return null}throw Error(n(156,c.tag))}function uM(o,c){switch(op(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return yr(cn),Fe(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return on(c),null;case 13:if(dr(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Rh()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Ne(ln),null;case 4:return Fe(),null;case 10:return yr(c.type),null;case 22:case 23:return dr(c),hp(),o!==null&&Ne(Mo),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return yr(cn),null;case 25:return null;default:return null}}function Aw(o,c){switch(op(c),c.tag){case 3:yr(cn),Fe();break;case 26:case 27:case 5:on(c);break;case 4:Fe();break;case 13:dr(c);break;case 19:Ne(ln);break;case 10:yr(c.type);break;case 22:case 23:dr(c),hp(),o!==null&&Ne(Mo);break;case 24:yr(cn)}}var hM={getCacheForType:function(o){var c=Pn(cn),f=c.data.get(o);return f===void 0&&(f=o(),c.data.set(o,f)),f}},fM=typeof WeakMap=="function"?WeakMap:Map,Pt=0,Tt=null,Ze=null,tt=0,St=0,ys=null,wr=!1,Sc=!1,ry=!1,Ar=0,zt=0,_a=0,$o=0,ay=0,Us=0,_c=0,qh=null,Ci=null,oy=!1,ly=0,U0=1/0,H0=null,Ra=null,G0=!1,Vo=null,Qh=0,cy=0,uy=null,Wh=0,hy=null;function xs(){if((Pt&2)!==0&&tt!==0)return tt&-tt;if(N.T!==null){var o=yc;return o!==0?o:vy()}return Vb()}function Tw(){Us===0&&(Us=(tt&536870912)===0||rt?Ub():536870912);var o=Ps.current;return o!==null&&(o.flags|=32),Us}function Vn(o,c,f){(o===Tt&&St===2||o.cancelPendingCommit!==null)&&(Rc(o,0),Tr(o,tt,Us,!1)),gh(o,f),((Pt&2)===0||o!==Tt)&&(o===Tt&&((Pt&2)===0&&($o|=f),zt===4&&Tr(o,tt,Us,!1)),Ii(o))}function Sw(o,c,f){if((Pt&6)!==0)throw Error(n(327));var m=!f&&(c&60)===0&&(c&o.expiredLanes)===0||dh(o,c),x=m?mM(o,c):my(o,c,!0),E=m;do{if(x===0){Sc&&!m&&Tr(o,c,0,!1);break}else if(x===6)Tr(o,c,0,!wr);else{if(f=o.current.alternate,E&&!dM(f)){x=my(o,c,!1),E=!1;continue}if(x===2){if(E=c,o.errorRecoveryDisabledLanes&E)var R=0;else R=o.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){c=R;e:{var O=o;x=qh;var H=O.current.memoizedState.isDehydrated;if(H&&(Rc(O,R).flags|=256),R=my(O,R,!1),R!==2){if(ry&&!H){O.errorRecoveryDisabledLanes|=E,$o|=E,x=4;break e}E=Ci,Ci=x,E!==null&&fy(E)}x=R}if(E=!1,x!==2)continue}}if(x===1){Rc(o,0),Tr(o,c,0,!0);break}e:{switch(m=o,x){case 0:case 1:throw Error(n(345));case 4:if((c&4194176)===c){Tr(m,c,Us,!wr);break e}break;case 2:Ci=null;break;case 3:case 5:break;default:throw Error(n(329))}if(m.finishedWork=f,m.finishedLanes=c,(c&62914560)===c&&(E=ly+300-Tn(),10<E)){if(Tr(m,c,Us,!wr),e0(m,0)!==0)break e;m.timeoutHandle=Qw(_w.bind(null,m,f,Ci,H0,oy,c,Us,$o,_c,wr,2,-0,0),E);break e}_w(m,f,Ci,H0,oy,c,Us,$o,_c,wr,0,-0,0)}}break}while(!0);Ii(o)}function fy(o){Ci===null?Ci=o:Ci.push.apply(Ci,o)}function _w(o,c,f,m,x,E,R,O,H,Y,ce,ge,ne){var oe=c.subtreeFlags;if((oe&8192||(oe&16785408)===16785408)&&(nf={stylesheets:null,count:0,unsuspend:qM},pw(c),c=WM(),c!==null)){o.cancelPendingCommit=c(Ow.bind(null,o,f,m,x,R,O,H,1,ge,ne)),Tr(o,E,R,!Y);return}Ow(o,f,m,x,R,O,H,ce,ge,ne)}function dM(o){for(var c=o;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var x=f[m],E=x.getSnapshot;x=x.value;try{if(!gs(E(),x))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Tr(o,c,f,m){c&=~ay,c&=~$o,o.suspendedLanes|=c,o.pingedLanes&=~c,m&&(o.warmLanes|=c),m=o.expirationTimes;for(var x=c;0<x;){var E=31-ds(x),R=1<<E;m[E]=-1,x&=~R}f!==0&&Gb(o,f,c)}function z0(){return(Pt&6)===0?(Xh(0),!1):!0}function dy(){if(Ze!==null){if(St===0)var o=Ze.return;else o=Ze,pr=Uo=null,vp(o),mc=null,Ch=0,o=Ze;for(;o!==null;)Aw(o.alternate,o),o=o.return;Ze=null}}function Rc(o,c){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,IM(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),dy(),Tt=o,Ze=f=Sa(o.current,null),tt=c,St=0,ys=null,wr=!1,Sc=dh(o,c),ry=!1,_c=Us=ay=$o=_a=zt=0,Ci=qh=null,oy=!1,(c&8)!==0&&(c|=c&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=c;0<m;){var x=31-ds(m),E=1<<x;c|=o[x],m&=~E}return Ar=c,f0(),f}function Rw(o,c){qe=null,N.H=Di,c===Lh?(c=z1(),St=3):c===U1?(c=z1(),St=4):St=c===HE?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ys=c,Ze===null&&(zt=1,I0(o,Is(c,o.current)))}function kw(){var o=N.H;return N.H=Di,o===null?Di:o}function Lw(){var o=N.A;return N.A=hM,o}function gy(){zt=4,wr||(tt&4194176)!==tt&&Ps.current!==null||(Sc=!0),(_a&134217727)===0&&($o&134217727)===0||Tt===null||Tr(Tt,tt,Us,!1)}function my(o,c,f){var m=Pt;Pt|=2;var x=kw(),E=Lw();(Tt!==o||tt!==c)&&(H0=null,Rc(o,c)),c=!1;var R=zt;e:do try{if(St!==0&&Ze!==null){var O=Ze,H=ys;switch(St){case 8:dy(),R=6;break e;case 3:case 2:case 6:Ps.current===null&&(c=!0);var Y=St;if(St=0,ys=null,kc(o,O,H,Y),f&&Sc){R=0;break e}break;default:Y=St,St=0,ys=null,kc(o,O,H,Y)}}gM(),R=zt;break}catch(ce){Rw(o,ce)}while(!0);return c&&o.shellSuspendCounter++,pr=Uo=null,Pt=m,N.H=x,N.A=E,Ze===null&&(Tt=null,tt=0,f0()),R}function gM(){for(;Ze!==null;)Dw(Ze)}function mM(o,c){var f=Pt;Pt|=2;var m=kw(),x=Lw();Tt!==o||tt!==c?(H0=null,U0=Tn()+500,Rc(o,c)):Sc=dh(o,c);e:do try{if(St!==0&&Ze!==null){c=Ze;var E=ys;t:switch(St){case 1:St=0,ys=null,kc(o,c,E,1);break;case 2:if(H1(E)){St=0,ys=null,Cw(c);break}c=function(){St===2&&Tt===o&&(St=7),Ii(o)},E.then(c,c);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:H1(E)?(St=0,ys=null,Cw(c)):(St=0,ys=null,kc(o,c,E,7));break;case 5:var R=null;switch(Ze.tag){case 26:R=Ze.memoizedState;case 5:case 27:var O=Ze;if(!R||aA(R)){St=0,ys=null;var H=O.sibling;if(H!==null)Ze=H;else{var Y=O.return;Y!==null?(Ze=Y,$0(Y)):Ze=null}break t}}St=0,ys=null,kc(o,c,E,5);break;case 6:St=0,ys=null,kc(o,c,E,6);break;case 8:dy(),zt=6;break e;default:throw Error(n(462))}}pM();break}catch(ce){Rw(o,ce)}while(!0);return pr=Uo=null,N.H=m,N.A=x,Pt=f,Ze!==null?0:(Tt=null,tt=0,f0(),zt)}function pM(){for(;Ze!==null&&!ti();)Dw(Ze)}function Dw(o){var c=ZE(o.alternate,o,Ar);o.memoizedProps=o.pendingProps,c===null?$0(o):Ze=c}function Cw(o){var c=o,f=c.alternate;switch(c.tag){case 15:case 0:c=KE(f,c,c.pendingProps,c.type,void 0,tt);break;case 11:c=KE(f,c,c.pendingProps,c.type.render,c.ref,tt);break;case 5:vp(c);default:Aw(f,c),c=Ze=bw(c,Ar),c=ZE(f,c,Ar)}o.memoizedProps=o.pendingProps,c===null?$0(o):Ze=c}function kc(o,c,f,m){pr=Uo=null,vp(c),mc=null,Ch=0;var x=c.return;try{if(iM(o,x,c,f,tt)){zt=1,I0(o,Is(f,o.current)),Ze=null;return}}catch(E){if(x!==null)throw Ze=x,E;zt=1,I0(o,Is(f,o.current)),Ze=null;return}c.flags&32768?(rt||m===1?o=!0:Sc||(tt&536870912)!==0?o=!1:(wr=o=!0,(m===2||m===3||m===6)&&(m=Ps.current,m!==null&&m.tag===13&&(m.flags|=16384))),Iw(c,o)):$0(c)}function $0(o){var c=o;do{if((c.flags&32768)!==0){Iw(c,wr);return}o=c.return;var f=cM(c.alternate,c,Ar);if(f!==null){Ze=f;return}if(c=c.sibling,c!==null){Ze=c;return}Ze=c=o}while(c!==null);zt===0&&(zt=5)}function Iw(o,c){do{var f=uM(o.alternate,o);if(f!==null){f.flags&=32767,Ze=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(o=o.sibling,o!==null)){Ze=o;return}Ze=o=f}while(o!==null);zt=6,Ze=null}function Ow(o,c,f,m,x,E,R,O,H,Y){var ce=N.T,ge=ae.p;try{ae.p=2,N.T=null,yM(o,c,f,m,ge,x,E,R,O,H,Y)}finally{N.T=ce,ae.p=ge}}function yM(o,c,f,m,x,E,R,O){do Lc();while(Vo!==null);if((Pt&6)!==0)throw Error(n(327));var H=o.finishedWork;if(m=o.finishedLanes,H===null)return null;if(o.finishedWork=null,o.finishedLanes=0,H===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0,o.cancelPendingCommit=null;var Y=H.lanes|H.childLanes;if(Y|=ip,QI(o,m,Y,E,R,O),o===Tt&&(Ze=Tt=null,tt=0),(H.subtreeFlags&10256)===0&&(H.flags&10256)===0||G0||(G0=!0,cy=Y,uy=f,EM(Be,function(){return Lc(),null})),f=(H.flags&15990)!==0,(H.subtreeFlags&15990)!==0||f?(f=N.T,N.T=null,E=ae.p,ae.p=2,R=Pt,Pt|=4,aM(o,H),dw(H,o),GO(Ry,o.containerInfo),t2=!!_y,Ry=_y=null,o.current=H,cw(o,H.alternate,H),Zl(),Pt=R,ae.p=E,N.T=f):o.current=H,G0?(G0=!1,Vo=o,Qh=m):Mw(o,Y),Y=o.pendingLanes,Y===0&&(Ra=null),Xd(H.stateNode),Ii(o),c!==null)for(x=o.onRecoverableError,H=0;H<c.length;H++)Y=c[H],x(Y.value,{componentStack:Y.stack});return(Qh&3)!==0&&Lc(),Y=o.pendingLanes,(m&4194218)!==0&&(Y&42)!==0?o===hy?Wh++:(Wh=0,hy=o):Wh=0,Xh(0),null}function Mw(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Oh(c)))}function Lc(){if(Vo!==null){var o=Vo,c=cy;cy=0;var f=$b(Qh),m=N.T,x=ae.p;try{if(ae.p=32>f?32:f,N.T=null,Vo===null)var E=!1;else{f=uy,uy=null;var R=Vo,O=Qh;if(Vo=null,Qh=0,(Pt&6)!==0)throw Error(n(331));var H=Pt;if(Pt|=4,xw(R.current),mw(R,R.current,O,f),Pt=H,Xh(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(lt,R)}catch{}E=!0}return E}finally{ae.p=x,N.T=m,Mw(o,c)}}return!1}function Pw(o,c,f){c=Is(f,c),c=Op(o.stateNode,c,2),o=Ea(o,c,2),o!==null&&(gh(o,2),Ii(o))}function wt(o,c,f){if(o.tag===3)Pw(o,o,f);else for(;c!==null;){if(c.tag===3){Pw(c,o,f);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ra===null||!Ra.has(m))){o=Is(f,o),f=FE(2),m=Ea(c,f,2),m!==null&&(UE(f,m,c,o),gh(m,2),Ii(m));break}}c=c.return}}function py(o,c,f){var m=o.pingCache;if(m===null){m=o.pingCache=new fM;var x=new Set;m.set(c,x)}else x=m.get(c),x===void 0&&(x=new Set,m.set(c,x));x.has(f)||(ry=!0,x.add(f),o=xM.bind(null,o,c,f),c.then(o,o))}function xM(o,c,f){var m=o.pingCache;m!==null&&m.delete(c),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,Tt===o&&(tt&f)===f&&(zt===4||zt===3&&(tt&62914560)===tt&&300>Tn()-ly?(Pt&2)===0&&Rc(o,0):ay|=f,_c===tt&&(_c=0)),Ii(o)}function Nw(o,c){c===0&&(c=Hb()),o=da(o,c),o!==null&&(gh(o,c),Ii(o))}function vM(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),Nw(o,f)}function bM(o,c){var f=0;switch(o.tag){case 13:var m=o.stateNode,x=o.memoizedState;x!==null&&(f=x.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(c),Nw(o,f)}function EM(o,c){return An(o,c)}var V0=null,Dc=null,yy=!1,Y0=!1,xy=!1,Yo=0;function Ii(o){o!==Dc&&o.next===null&&(Dc===null?V0=Dc=o:Dc=Dc.next=o),Y0=!0,yy||(yy=!0,AM(wM))}function Xh(o,c){if(!xy&&Y0){xy=!0;do for(var f=!1,m=V0;m!==null;){if(o!==0){var x=m.pendingLanes;if(x===0)var E=0;else{var R=m.suspendedLanes,O=m.pingedLanes;E=(1<<31-ds(42|o)+1)-1,E&=x&~(R&~O),E=E&201326677?E&201326677|1:E?E|2:0}E!==0&&(f=!0,Uw(m,E))}else E=tt,E=e0(m,m===Tt?E:0),(E&3)===0||dh(m,E)||(f=!0,Uw(m,E));m=m.next}while(f);xy=!1}}function wM(){Y0=yy=!1;var o=0;Yo!==0&&(CM()&&(o=Yo),Yo=0);for(var c=Tn(),f=null,m=V0;m!==null;){var x=m.next,E=Bw(m,c);E===0?(m.next=null,f===null?V0=x:f.next=x,x===null&&(Dc=f)):(f=m,(o!==0||(E&3)!==0)&&(Y0=!0)),m=x}Xh(o)}function Bw(o,c){for(var f=o.suspendedLanes,m=o.pingedLanes,x=o.expirationTimes,E=o.pendingLanes&-62914561;0<E;){var R=31-ds(E),O=1<<R,H=x[R];H===-1?((O&f)===0||(O&m)!==0)&&(x[R]=qI(O,c)):H<=c&&(o.expiredLanes|=O),E&=~O}if(c=Tt,f=tt,f=e0(o,o===c?f:0),m=o.callbackNode,f===0||o===c&&St===2||o.cancelPendingCommit!==null)return m!==null&&m!==null&&ks(m),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||dh(o,f)){if(c=f&-f,c===o.callbackPriority)return c;switch(m!==null&&ks(m),$b(f)){case 2:case 8:f=De;break;case 32:f=Be;break;case 268435456:f=Ie;break;default:f=Be}return m=Fw.bind(null,o),f=An(f,m),o.callbackPriority=c,o.callbackNode=f,c}return m!==null&&m!==null&&ks(m),o.callbackPriority=2,o.callbackNode=null,2}function Fw(o,c){var f=o.callbackNode;if(Lc()&&o.callbackNode!==f)return null;var m=tt;return m=e0(o,o===Tt?m:0),m===0?null:(Sw(o,m,c),Bw(o,Tn()),o.callbackNode!=null&&o.callbackNode===f?Fw.bind(null,o):null)}function Uw(o,c){if(Lc())return null;Sw(o,c,!0)}function AM(o){OM(function(){(Pt&6)!==0?An(_i,o):o()})}function vy(){return Yo===0&&(Yo=Ub()),Yo}function Hw(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:r0(""+o)}function Gw(o,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,o.id&&f.setAttribute("form",o.id),c.parentNode.insertBefore(f,c),o=new FormData(o),f.parentNode.removeChild(f),o}function TM(o,c,f,m,x){if(c==="submit"&&f&&f.stateNode===x){var E=Hw((x[Jn]||null).action),R=m.submitter;R&&(c=(c=R[Jn]||null)?Hw(c.formAction):R.getAttribute("formAction"),c!==null&&(E=c,R=null));var O=new c0("action","action",null,m,x);o.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Yo!==0){var H=R?Gw(x,R):new FormData(x);kp(f,{pending:!0,data:H,method:x.method,action:E},null,H)}}else typeof E=="function"&&(O.preventDefault(),H=R?Gw(x,R):new FormData(x),kp(f,{pending:!0,data:H,method:x.method,action:E},E,H))},currentTarget:x}]})}}for(var by=0;by<O1.length;by++){var Ey=O1[by],SM=Ey.toLowerCase(),_M=Ey[0].toUpperCase()+Ey.slice(1);ni(SM,"on"+_M)}ni(k1,"onAnimationEnd"),ni(L1,"onAnimationIteration"),ni(D1,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni($O,"onTransitionRun"),ni(VO,"onTransitionStart"),ni(YO,"onTransitionCancel"),ni(C1,"onTransitionEnd"),sc("onMouseEnter",["mouseout","mouseover"]),sc("onMouseLeave",["mouseout","mouseover"]),sc("onPointerEnter",["pointerout","pointerover"]),sc("onPointerLeave",["pointerout","pointerover"]),_o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_o("onBeforeInput",["compositionend","keypress","textInput","paste"]),_o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zh));function zw(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var m=o[f],x=m.event;m=m.listeners;e:{var E=void 0;if(c)for(var R=m.length-1;0<=R;R--){var O=m[R],H=O.instance,Y=O.currentTarget;if(O=O.listener,H!==E&&x.isPropagationStopped())break e;E=O,x.currentTarget=Y;try{E(x)}catch(ce){C0(ce)}x.currentTarget=null,E=H}else for(R=0;R<m.length;R++){if(O=m[R],H=O.instance,Y=O.currentTarget,O=O.listener,H!==E&&x.isPropagationStopped())break e;E=O,x.currentTarget=Y;try{E(x)}catch(ce){C0(ce)}x.currentTarget=null,E=H}}}}function Je(o,c){var f=c[Bm];f===void 0&&(f=c[Bm]=new Set);var m=o+"__bubble";f.has(m)||($w(c,o,2,!1),f.add(m))}function wy(o,c,f){var m=0;c&&(m|=4),$w(f,o,m,c)}var K0="_reactListening"+Math.random().toString(36).slice(2);function Ay(o){if(!o[K0]){o[K0]=!0,Kb.forEach(function(f){f!=="selectionchange"&&(RM.has(f)||wy(f,!1,o),wy(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[K0]||(c[K0]=!0,wy("selectionchange",!1,c))}}function $w(o,c,f,m){switch(fA(c)){case 2:var x=JM;break;case 8:x=eP;break;default:x=Ny}f=x.bind(null,c,f,o),x=void 0,!Ym||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),m?x!==void 0?o.addEventListener(c,f,{capture:!0,passive:x}):o.addEventListener(c,f,!0):x!==void 0?o.addEventListener(c,f,{passive:x}):o.addEventListener(c,f,!1)}function Ty(o,c,f,m,x){var E=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var R=m.tag;if(R===3||R===4){var O=m.stateNode.containerInfo;if(O===x||O.nodeType===8&&O.parentNode===x)break;if(R===4)for(R=m.return;R!==null;){var H=R.tag;if((H===3||H===4)&&(H=R.stateNode.containerInfo,H===x||H.nodeType===8&&H.parentNode===x))return;R=R.return}for(;O!==null;){if(R=So(O),R===null)return;if(H=R.tag,H===5||H===6||H===26||H===27){m=E=R;continue e}O=O.parentNode}}m=m.return}i1(function(){var Y=E,ce=$m(f),ge=[];e:{var ne=I1.get(o);if(ne!==void 0){var oe=c0,Re=o;switch(o){case"keypress":if(o0(f)===0)break e;case"keydown":case"keyup":oe=bO;break;case"focusin":Re="focus",oe=Qm;break;case"focusout":Re="blur",oe=Qm;break;case"beforeblur":case"afterblur":oe=Qm;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=o1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=lO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=AO;break;case k1:case L1:case D1:oe=hO;break;case C1:oe=SO;break;case"scroll":case"scrollend":oe=aO;break;case"wheel":oe=RO;break;case"copy":case"cut":case"paste":oe=dO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=c1;break;case"toggle":case"beforetoggle":oe=LO}var Ue=(c&4)!==0,$t=!Ue&&(o==="scroll"||o==="scrollend"),q=Ue?ne!==null?ne+"Capture":null:ne;Ue=[];for(var $=Y,ee;$!==null;){var fe=$;if(ee=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ee===null||q===null||(fe=yh($,q),fe!=null&&Ue.push(Jh($,fe,ee))),$t)break;$=$.return}0<Ue.length&&(ne=new oe(ne,Re,null,f,ce),ge.push({event:ne,listeners:Ue}))}}if((c&7)===0){e:{if(ne=o==="mouseover"||o==="pointerover",oe=o==="mouseout"||o==="pointerout",ne&&f!==zm&&(Re=f.relatedTarget||f.fromElement)&&(So(Re)||Re[ec]))break e;if((oe||ne)&&(ne=ce.window===ce?ce:(ne=ce.ownerDocument)?ne.defaultView||ne.parentWindow:window,oe?(Re=f.relatedTarget||f.toElement,oe=Y,Re=Re?So(Re):null,Re!==null&&($t=se(Re),Ue=Re.tag,Re!==$t||Ue!==5&&Ue!==27&&Ue!==6)&&(Re=null)):(oe=null,Re=Y),oe!==Re)){if(Ue=o1,fe="onMouseLeave",q="onMouseEnter",$="mouse",(o==="pointerout"||o==="pointerover")&&(Ue=c1,fe="onPointerLeave",q="onPointerEnter",$="pointer"),$t=oe==null?ne:ph(oe),ee=Re==null?ne:ph(Re),ne=new Ue(fe,$+"leave",oe,f,ce),ne.target=$t,ne.relatedTarget=ee,fe=null,So(ce)===Y&&(Ue=new Ue(q,$+"enter",Re,f,ce),Ue.target=ee,Ue.relatedTarget=$t,fe=Ue),$t=fe,oe&&Re)t:{for(Ue=oe,q=Re,$=0,ee=Ue;ee;ee=Cc(ee))$++;for(ee=0,fe=q;fe;fe=Cc(fe))ee++;for(;0<$-ee;)Ue=Cc(Ue),$--;for(;0<ee-$;)q=Cc(q),ee--;for(;$--;){if(Ue===q||q!==null&&Ue===q.alternate)break t;Ue=Cc(Ue),q=Cc(q)}Ue=null}else Ue=null;oe!==null&&Vw(ge,ne,oe,Ue,!1),Re!==null&&$t!==null&&Vw(ge,$t,Re,Ue,!0)}}e:{if(ne=Y?ph(Y):window,oe=ne.nodeName&&ne.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ne.type==="file")var Ae=y1;else if(m1(ne))if(x1)Ae=UO;else{Ae=BO;var Qe=NO}else oe=ne.nodeName,!oe||oe.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?Y&&Gm(Y.elementType)&&(Ae=y1):Ae=FO;if(Ae&&(Ae=Ae(o,Y))){p1(ge,Ae,f,ce);break e}Qe&&Qe(o,ne,Y),o==="focusout"&&Y&&ne.type==="number"&&Y.memoizedProps.value!=null&&Hm(ne,"number",ne.value)}switch(Qe=Y?ph(Y):window,o){case"focusin":(m1(Qe)||Qe.contentEditable==="true")&&(cc=Qe,tp=Y,Sh=null);break;case"focusout":Sh=tp=cc=null;break;case"mousedown":np=!0;break;case"contextmenu":case"mouseup":case"dragend":np=!1,_1(ge,f,ce);break;case"selectionchange":if(zO)break;case"keydown":case"keyup":_1(ge,f,ce)}var Le;if(Xm)e:{switch(o){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else lc?d1(o,f)&&(Pe="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Pe="onCompositionStart");Pe&&(u1&&f.locale!=="ko"&&(lc||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&lc&&(Le=r1()):(fa=ce,Km="value"in fa?fa.value:fa.textContent,lc=!0)),Qe=j0(Y,Pe),0<Qe.length&&(Pe=new l1(Pe,o,null,f,ce),ge.push({event:Pe,listeners:Qe}),Le?Pe.data=Le:(Le=g1(f),Le!==null&&(Pe.data=Le)))),(Le=CO?IO(o,f):OO(o,f))&&(Pe=j0(Y,"onBeforeInput"),0<Pe.length&&(Qe=new l1("onBeforeInput","beforeinput",null,f,ce),ge.push({event:Qe,listeners:Pe}),Qe.data=Le)),TM(ge,o,Y,f,ce)}zw(ge,c)})}function Jh(o,c,f){return{instance:o,listener:c,currentTarget:f}}function j0(o,c){for(var f=c+"Capture",m=[];o!==null;){var x=o,E=x.stateNode;x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=yh(o,f),x!=null&&m.unshift(Jh(o,x,E)),x=yh(o,c),x!=null&&m.push(Jh(o,x,E))),o=o.return}return m}function Cc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Vw(o,c,f,m,x){for(var E=c._reactName,R=[];f!==null&&f!==m;){var O=f,H=O.alternate,Y=O.stateNode;if(O=O.tag,H!==null&&H===m)break;O!==5&&O!==26&&O!==27||Y===null||(H=Y,x?(Y=yh(f,E),Y!=null&&R.unshift(Jh(f,Y,H))):x||(Y=yh(f,E),Y!=null&&R.push(Jh(f,Y,H)))),f=f.return}R.length!==0&&o.push({event:c,listeners:R})}var kM=/\r\n?/g,LM=/\u0000|\uFFFD/g;function Yw(o){return(typeof o=="string"?o:""+o).replace(kM,`
`).replace(LM,"")}function Kw(o,c){return c=Yw(c),Yw(o)===c}function q0(){}function vt(o,c,f,m,x,E){switch(f){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||rc(o,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&rc(o,""+m);break;case"className":n0(o,"class",m);break;case"tabIndex":n0(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":n0(o,f,m);break;case"style":n1(o,m,E);break;case"data":if(c!=="object"){n0(o,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||f!=="href")){o.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(f);break}m=r0(""+m),o.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(f==="formAction"?(c!=="input"&&vt(o,c,"name",x.name,x,null),vt(o,c,"formEncType",x.formEncType,x,null),vt(o,c,"formMethod",x.formMethod,x,null),vt(o,c,"formTarget",x.formTarget,x,null)):(vt(o,c,"encType",x.encType,x,null),vt(o,c,"method",x.method,x,null),vt(o,c,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(f);break}m=r0(""+m),o.setAttribute(f,m);break;case"onClick":m!=null&&(o.onclick=q0);break;case"onScroll":m!=null&&Je("scroll",o);break;case"onScrollEnd":m!=null&&Je("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(f=m.__html,f!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}f=r0(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(f,""+m):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":m===!0?o.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(f,m):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(f,m):o.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(f):o.setAttribute(f,m);break;case"popover":Je("beforetoggle",o),Je("toggle",o),t0(o,"popover",m);break;case"xlinkActuate":ur(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ur(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ur(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ur(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ur(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ur(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ur(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ur(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ur(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":t0(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=iO.get(f)||f,t0(o,f,m))}}function Sy(o,c,f,m,x,E){switch(f){case"style":n1(o,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(f=m.__html,f!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"children":typeof m=="string"?rc(o,m):(typeof m=="number"||typeof m=="bigint")&&rc(o,""+m);break;case"onScroll":m!=null&&Je("scroll",o);break;case"onScrollEnd":m!=null&&Je("scrollend",o);break;case"onClick":m!=null&&(o.onclick=q0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jb.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),c=f.slice(2,x?f.length-7:void 0),E=o[Jn]||null,E=E!=null?E[f]:null,typeof E=="function"&&o.removeEventListener(c,E,x),typeof m=="function")){typeof E!="function"&&E!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(c,m,x);break e}f in o?o[f]=m:m===!0?o.setAttribute(f,""):t0(o,f,m)}}}function Rn(o,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",o),Je("load",o);var m=!1,x=!1,E;for(E in f)if(f.hasOwnProperty(E)){var R=f[E];if(R!=null)switch(E){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vt(o,c,E,R,f,null)}}x&&vt(o,c,"srcSet",f.srcSet,f,null),m&&vt(o,c,"src",f.src,f,null);return;case"input":Je("invalid",o);var O=E=R=x=null,H=null,Y=null;for(m in f)if(f.hasOwnProperty(m)){var ce=f[m];if(ce!=null)switch(m){case"name":x=ce;break;case"type":R=ce;break;case"checked":H=ce;break;case"defaultChecked":Y=ce;break;case"value":E=ce;break;case"defaultValue":O=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,c));break;default:vt(o,c,m,ce,f,null)}}Zb(o,E,O,H,Y,R,x,!1),s0(o);return;case"select":Je("invalid",o),m=R=E=null;for(x in f)if(f.hasOwnProperty(x)&&(O=f[x],O!=null))switch(x){case"value":E=O;break;case"defaultValue":R=O;break;case"multiple":m=O;default:vt(o,c,x,O,f,null)}c=E,f=R,o.multiple=!!m,c!=null?ic(o,!!m,c,!1):f!=null&&ic(o,!!m,f,!0);return;case"textarea":Je("invalid",o),E=x=m=null;for(R in f)if(f.hasOwnProperty(R)&&(O=f[R],O!=null))switch(R){case"value":m=O;break;case"defaultValue":x=O;break;case"children":E=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(n(91));break;default:vt(o,c,R,O,f,null)}e1(o,m,x,E),s0(o);return;case"option":for(H in f)if(f.hasOwnProperty(H)&&(m=f[H],m!=null))switch(H){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:vt(o,c,H,m,f,null)}return;case"dialog":Je("cancel",o),Je("close",o);break;case"iframe":case"object":Je("load",o);break;case"video":case"audio":for(m=0;m<Zh.length;m++)Je(Zh[m],o);break;case"image":Je("error",o),Je("load",o);break;case"details":Je("toggle",o);break;case"embed":case"source":case"link":Je("error",o),Je("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in f)if(f.hasOwnProperty(Y)&&(m=f[Y],m!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:vt(o,c,Y,m,f,null)}return;default:if(Gm(c)){for(ce in f)f.hasOwnProperty(ce)&&(m=f[ce],m!==void 0&&Sy(o,c,ce,m,f,void 0));return}}for(O in f)f.hasOwnProperty(O)&&(m=f[O],m!=null&&vt(o,c,O,m,f,null))}function DM(o,c,f,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,R=null,O=null,H=null,Y=null,ce=null;for(oe in f){var ge=f[oe];if(f.hasOwnProperty(oe)&&ge!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":H=ge;default:m.hasOwnProperty(oe)||vt(o,c,oe,null,m,ge)}}for(var ne in m){var oe=m[ne];if(ge=f[ne],m.hasOwnProperty(ne)&&(oe!=null||ge!=null))switch(ne){case"type":E=oe;break;case"name":x=oe;break;case"checked":Y=oe;break;case"defaultChecked":ce=oe;break;case"value":R=oe;break;case"defaultValue":O=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,c));break;default:oe!==ge&&vt(o,c,ne,oe,m,ge)}}Um(o,R,O,H,Y,ce,E,x);return;case"select":oe=R=O=ne=null;for(E in f)if(H=f[E],f.hasOwnProperty(E)&&H!=null)switch(E){case"value":break;case"multiple":oe=H;default:m.hasOwnProperty(E)||vt(o,c,E,null,m,H)}for(x in m)if(E=m[x],H=f[x],m.hasOwnProperty(x)&&(E!=null||H!=null))switch(x){case"value":ne=E;break;case"defaultValue":O=E;break;case"multiple":R=E;default:E!==H&&vt(o,c,x,E,m,H)}c=O,f=R,m=oe,ne!=null?ic(o,!!f,ne,!1):!!m!=!!f&&(c!=null?ic(o,!!f,c,!0):ic(o,!!f,f?[]:"",!1));return;case"textarea":oe=ne=null;for(O in f)if(x=f[O],f.hasOwnProperty(O)&&x!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:vt(o,c,O,null,m,x)}for(R in m)if(x=m[R],E=f[R],m.hasOwnProperty(R)&&(x!=null||E!=null))switch(R){case"value":ne=x;break;case"defaultValue":oe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==E&&vt(o,c,R,x,m,E)}Jb(o,ne,oe);return;case"option":for(var Re in f)if(ne=f[Re],f.hasOwnProperty(Re)&&ne!=null&&!m.hasOwnProperty(Re))switch(Re){case"selected":o.selected=!1;break;default:vt(o,c,Re,null,m,ne)}for(H in m)if(ne=m[H],oe=f[H],m.hasOwnProperty(H)&&ne!==oe&&(ne!=null||oe!=null))switch(H){case"selected":o.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:vt(o,c,H,ne,m,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in f)ne=f[Ue],f.hasOwnProperty(Ue)&&ne!=null&&!m.hasOwnProperty(Ue)&&vt(o,c,Ue,null,m,ne);for(Y in m)if(ne=m[Y],oe=f[Y],m.hasOwnProperty(Y)&&ne!==oe&&(ne!=null||oe!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(n(137,c));break;default:vt(o,c,Y,ne,m,oe)}return;default:if(Gm(c)){for(var $t in f)ne=f[$t],f.hasOwnProperty($t)&&ne!==void 0&&!m.hasOwnProperty($t)&&Sy(o,c,$t,void 0,m,ne);for(ce in m)ne=m[ce],oe=f[ce],!m.hasOwnProperty(ce)||ne===oe||ne===void 0&&oe===void 0||Sy(o,c,ce,ne,m,oe);return}}for(var q in f)ne=f[q],f.hasOwnProperty(q)&&ne!=null&&!m.hasOwnProperty(q)&&vt(o,c,q,null,m,ne);for(ge in m)ne=m[ge],oe=f[ge],!m.hasOwnProperty(ge)||ne===oe||ne==null&&oe==null||vt(o,c,ge,ne,m,oe)}var _y=null,Ry=null;function Q0(o){return o.nodeType===9?o:o.ownerDocument}function jw(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qw(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function ky(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ly=null;function CM(){var o=window.event;return o&&o.type==="popstate"?o===Ly?!1:(Ly=o,!0):(Ly=null,!1)}var Qw=typeof setTimeout=="function"?setTimeout:void 0,IM=typeof clearTimeout=="function"?clearTimeout:void 0,Ww=typeof Promise=="function"?Promise:void 0,OM=typeof queueMicrotask=="function"?queueMicrotask:typeof Ww<"u"?function(o){return Ww.resolve(null).then(o).catch(MM)}:Qw;function MM(o){setTimeout(function(){throw o})}function Dy(o,c){var f=c,m=0;do{var x=f.nextSibling;if(o.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"){if(m===0){o.removeChild(x),lf(c);return}m--}else f!=="$"&&f!=="$?"&&f!=="$!"||m++;f=x}while(f);lf(c)}function Cy(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Cy(f),Fm(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function PM(o,c,f,m){for(;o.nodeType===1;){var x=f;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[mh])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(E=o.getAttribute("rel"),E==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(E!==x.rel||o.getAttribute("href")!==(x.href==null?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(E=o.getAttribute("src"),(E!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===E)return o}else return o;if(o=ri(o.nextSibling),o===null)break}return null}function NM(o,c,f){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=ri(o.nextSibling),o===null))return null;return o}function ri(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}function Xw(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return o;c--}else f==="/$"&&c++}o=o.previousSibling}return null}function Zw(o,c,f){switch(c=Q0(f),o){case"html":if(o=c.documentElement,!o)throw Error(n(452));return o;case"head":if(o=c.head,!o)throw Error(n(453));return o;case"body":if(o=c.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}var Hs=new Map,Jw=new Set;function W0(o){return typeof o.getRootNode=="function"?o.getRootNode():o.ownerDocument}var Sr=ae.d;ae.d={f:BM,r:FM,D:UM,C:HM,L:GM,m:zM,X:VM,S:$M,M:YM};function BM(){var o=Sr.f(),c=z0();return o||c}function FM(o){var c=tc(o);c!==null&&c.tag===5&&c.type==="form"?_E(c):Sr.r(o)}var Ic=typeof document>"u"?null:document;function eA(o,c,f){var m=Ic;if(m&&typeof c=="string"&&c){var x=Ds(c);x='link[rel="'+o+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),Jw.has(x)||(Jw.add(x),o={rel:o,crossOrigin:f,href:c},m.querySelector(x)===null&&(c=m.createElement("link"),Rn(c,"link",o),gn(c),m.head.appendChild(c)))}}function UM(o){Sr.D(o),eA("dns-prefetch",o,null)}function HM(o,c){Sr.C(o,c),eA("preconnect",o,c)}function GM(o,c,f){Sr.L(o,c,f);var m=Ic;if(m&&o&&c){var x='link[rel="preload"][as="'+Ds(c)+'"]';c==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+Ds(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+Ds(f.imageSizes)+'"]')):x+='[href="'+Ds(o)+'"]';var E=x;switch(c){case"style":E=Oc(o);break;case"script":E=Mc(o)}Hs.has(E)||(o=P({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:o,as:c},f),Hs.set(E,o),m.querySelector(x)!==null||c==="style"&&m.querySelector(ef(E))||c==="script"&&m.querySelector(tf(E))||(c=m.createElement("link"),Rn(c,"link",o),gn(c),m.head.appendChild(c)))}}function zM(o,c){Sr.m(o,c);var f=Ic;if(f&&o){var m=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+Ds(m)+'"][href="'+Ds(o)+'"]',E=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Mc(o)}if(!Hs.has(E)&&(o=P({rel:"modulepreload",href:o},c),Hs.set(E,o),f.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(tf(E)))return}m=f.createElement("link"),Rn(m,"link",o),gn(m),f.head.appendChild(m)}}}function $M(o,c,f){Sr.S(o,c,f);var m=Ic;if(m&&o){var x=nc(m).hoistableStyles,E=Oc(o);c=c||"default";var R=x.get(E);if(!R){var O={loading:0,preload:null};if(R=m.querySelector(ef(E)))O.loading=5;else{o=P({rel:"stylesheet",href:o,"data-precedence":c},f),(f=Hs.get(E))&&Iy(o,f);var H=R=m.createElement("link");gn(H),Rn(H,"link",o),H._p=new Promise(function(Y,ce){H.onload=Y,H.onerror=ce}),H.addEventListener("load",function(){O.loading|=1}),H.addEventListener("error",function(){O.loading|=2}),O.loading|=4,X0(R,c,m)}R={type:"stylesheet",instance:R,count:1,state:O},x.set(E,R)}}}function VM(o,c){Sr.X(o,c);var f=Ic;if(f&&o){var m=nc(f).hoistableScripts,x=Mc(o),E=m.get(x);E||(E=f.querySelector(tf(x)),E||(o=P({src:o,async:!0},c),(c=Hs.get(x))&&Oy(o,c),E=f.createElement("script"),gn(E),Rn(E,"link",o),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function YM(o,c){Sr.M(o,c);var f=Ic;if(f&&o){var m=nc(f).hoistableScripts,x=Mc(o),E=m.get(x);E||(E=f.querySelector(tf(x)),E||(o=P({src:o,async:!0,type:"module"},c),(c=Hs.get(x))&&Oy(o,c),E=f.createElement("script"),gn(E),Rn(E,"link",o),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function tA(o,c,f,m){var x=(x=At.current)?W0(x):null;if(!x)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Oc(f.href),f=nc(x).hoistableStyles,m=f.get(c),m||(m={type:"style",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=Oc(f.href);var E=nc(x).hoistableStyles,R=E.get(o);if(R||(x=x.ownerDocument||x,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(o,R),(E=x.querySelector(ef(o)))&&!E._p&&(R.instance=E,R.state.loading=5),Hs.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Hs.set(o,f),E||KM(x,o,f,R.state))),c&&m===null)throw Error(n(528,""));return R}if(c&&m!==null)throw Error(n(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Mc(f),f=nc(x).hoistableScripts,m=f.get(c),m||(m={type:"script",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function Oc(o){return'href="'+Ds(o)+'"'}function ef(o){return'link[rel="stylesheet"]['+o+"]"}function nA(o){return P({},o,{"data-precedence":o.precedence,precedence:null})}function KM(o,c,f,m){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=o.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),Rn(c,"link",f),gn(c),o.head.appendChild(c))}function Mc(o){return'[src="'+Ds(o)+'"]'}function tf(o){return"script[async]"+o}function sA(o,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var m=o.querySelector('style[data-href~="'+Ds(f.href)+'"]');if(m)return c.instance=m,gn(m),m;var x=P({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),gn(m),Rn(m,"style",x),X0(m,f.precedence,o),c.instance=m;case"stylesheet":x=Oc(f.href);var E=o.querySelector(ef(x));if(E)return c.state.loading|=4,c.instance=E,gn(E),E;m=nA(f),(x=Hs.get(x))&&Iy(m,x),E=(o.ownerDocument||o).createElement("link"),gn(E);var R=E;return R._p=new Promise(function(O,H){R.onload=O,R.onerror=H}),Rn(E,"link",m),c.state.loading|=4,X0(E,f.precedence,o),c.instance=E;case"script":return E=Mc(f.src),(x=o.querySelector(tf(E)))?(c.instance=x,gn(x),x):(m=f,(x=Hs.get(E))&&(m=P({},f),Oy(m,x)),o=o.ownerDocument||o,x=o.createElement("script"),gn(x),Rn(x,"link",m),o.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,X0(m,f.precedence,o));return c.instance}function X0(o,c,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,E=x,R=0;R<m.length;R++){var O=m[R];if(O.dataset.precedence===c)E=O;else if(E!==x)break}E?E.parentNode.insertBefore(o,E.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(o,c.firstChild))}function Iy(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function Oy(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var Z0=null;function iA(o,c,f){if(Z0===null){var m=new Map,x=Z0=new Map;x.set(f,m)}else x=Z0,m=x.get(f),m||(m=new Map,x.set(f,m));if(m.has(o))return m;for(m.set(o,null),f=f.getElementsByTagName(o),x=0;x<f.length;x++){var E=f[x];if(!(E[mh]||E[Mn]||o==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var R=E.getAttribute(c)||"";R=o+R;var O=m.get(R);O?O.push(E):m.set(R,[E])}}return m}function rA(o,c,f){o=o.ownerDocument||o,o.head.insertBefore(f,c==="title"?o.querySelector("head > title"):null)}function jM(o,c,f){if(f===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function aA(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var nf=null;function qM(){}function QM(o,c,f){if(nf===null)throw Error(n(475));var m=nf;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=Oc(f.href),E=o.querySelector(ef(x));if(E){o=E._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(m.count++,m=J0.bind(m),o.then(m,m)),c.state.loading|=4,c.instance=E,gn(E);return}E=o.ownerDocument||o,f=nA(f),(x=Hs.get(x))&&Iy(f,x),E=E.createElement("link"),gn(E);var R=E;R._p=new Promise(function(O,H){R.onload=O,R.onerror=H}),Rn(E,"link",f),c.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=J0.bind(m),o.addEventListener("load",c),o.addEventListener("error",c))}}function WM(){if(nf===null)throw Error(n(475));var o=nf;return o.stylesheets&&o.count===0&&My(o,o.stylesheets),0<o.count?function(c){var f=setTimeout(function(){if(o.stylesheets&&My(o,o.stylesheets),o.unsuspend){var m=o.unsuspend;o.unsuspend=null,m()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(f)}}:null}function J0(){if(this.count--,this.count===0){if(this.stylesheets)My(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var e2=null;function My(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,e2=new Map,c.forEach(XM,o),e2=null,J0.call(o))}function XM(o,c){if(!(c.state.loading&4)){var f=e2.get(o);if(f)var m=f.get(null);else{f=new Map,e2.set(o,f);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var R=x[E];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(f.set(R.dataset.precedence,R),m=R)}m&&f.set(null,m)}x=c.instance,R=x.getAttribute("data-precedence"),E=f.get(R)||m,E===m&&f.set(null,x),f.set(R,x),this.count++,m=J0.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),E?E.parentNode.insertBefore(x,E.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),c.state.loading|=4}}var sf={$$typeof:y,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function ZM(o,c,f,m,x,E,R,O){this.tag=1,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nm(0),this.hiddenUpdates=Nm(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function oA(o,c,f,m,x,E,R,O,H,Y,ce,ge){return o=new ZM(o,c,f,R,O,H,Y,ge),c=1,E===!0&&(c|=24),E=Fs(3,null,null,c),o.current=E,E.stateNode=o,c=fp(),c.refCount++,o.pooledCache=c,c.refCount++,E.memoizedState={element:m,isDehydrated:f,cache:c},Kp(E),o}function lA(o){return o?(o=fc,o):fc}function cA(o,c,f,m,x,E){x=lA(x),m.context===null?m.context=x:m.pendingContext=x,m=ba(c),m.payload={element:f},E=E===void 0?null:E,E!==null&&(m.callback=E),f=Ea(o,m,c),f!==null&&(Vn(f,o,c),Hh(f,o,c))}function uA(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function Py(o,c){uA(o,c),(o=o.alternate)&&uA(o,c)}function hA(o){if(o.tag===13){var c=da(o,67108864);c!==null&&Vn(c,o,67108864),Py(o,67108864)}}var t2=!0;function JM(o,c,f,m){var x=N.T;N.T=null;var E=ae.p;try{ae.p=2,Ny(o,c,f,m)}finally{ae.p=E,N.T=x}}function eP(o,c,f,m){var x=N.T;N.T=null;var E=ae.p;try{ae.p=8,Ny(o,c,f,m)}finally{ae.p=E,N.T=x}}function Ny(o,c,f,m){if(t2){var x=By(m);if(x===null)Ty(o,c,m,n2,f),dA(o,m);else if(nP(x,o,c,f,m))m.stopPropagation();else if(dA(o,m),c&4&&-1<tP.indexOf(o)){for(;x!==null;){var E=tc(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var R=To(E.pendingLanes);if(R!==0){var O=E;for(O.pendingLanes|=2,O.entangledLanes|=2;R;){var H=1<<31-ds(R);O.entanglements[1]|=H,R&=~H}Ii(E),(Pt&6)===0&&(U0=Tn()+500,Xh(0))}}break;case 13:O=da(E,2),O!==null&&Vn(O,E,2),z0(),Py(E,2)}if(E=By(m),E===null&&Ty(o,c,m,n2,f),E===x)break;x=E}x!==null&&m.stopPropagation()}else Ty(o,c,m,null,f)}}function By(o){return o=$m(o),Fy(o)}var n2=null;function Fy(o){if(n2=null,o=So(o),o!==null){var c=se(o);if(c===null)o=null;else{var f=c.tag;if(f===13){if(o=X(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return n2=o,null}function fA(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jl()){case _i:return 2;case De:return 8;case Be:case Me:return 32;case Ie:return 268435456;default:return 32}default:return 32}}var Uy=!1,ka=null,La=null,Da=null,rf=new Map,af=new Map,Ca=[],tP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dA(o,c){switch(o){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":rf.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":af.delete(c.pointerId)}}function of(o,c,f,m,x,E){return o===null||o.nativeEvent!==E?(o={blockedOn:c,domEventName:f,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},c!==null&&(c=tc(c),c!==null&&hA(c)),o):(o.eventSystemFlags|=m,c=o.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),o)}function nP(o,c,f,m,x){switch(c){case"focusin":return ka=of(ka,o,c,f,m,x),!0;case"dragenter":return La=of(La,o,c,f,m,x),!0;case"mouseover":return Da=of(Da,o,c,f,m,x),!0;case"pointerover":var E=x.pointerId;return rf.set(E,of(rf.get(E)||null,o,c,f,m,x)),!0;case"gotpointercapture":return E=x.pointerId,af.set(E,of(af.get(E)||null,o,c,f,m,x)),!0}return!1}function gA(o){var c=So(o.target);if(c!==null){var f=se(c);if(f!==null){if(c=f.tag,c===13){if(c=X(f),c!==null){o.blockedOn=c,WI(o.priority,function(){if(f.tag===13){var m=xs(),x=da(f,m);x!==null&&Vn(x,f,m),Py(f,m)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function s2(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=By(o.nativeEvent);if(f===null){f=o.nativeEvent;var m=new f.constructor(f.type,f);zm=m,f.target.dispatchEvent(m),zm=null}else return c=tc(f),c!==null&&hA(c),o.blockedOn=f,!1;c.shift()}return!0}function mA(o,c,f){s2(o)&&f.delete(c)}function sP(){Uy=!1,ka!==null&&s2(ka)&&(ka=null),La!==null&&s2(La)&&(La=null),Da!==null&&s2(Da)&&(Da=null),rf.forEach(mA),af.forEach(mA)}function i2(o,c){o.blockedOn===c&&(o.blockedOn=null,Uy||(Uy=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,sP)))}var r2=null;function pA(o){r2!==o&&(r2=o,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){r2===o&&(r2=null);for(var c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],x=o[c+2];if(typeof m!="function"){if(Fy(m||f)===null)continue;break}var E=tc(f);E!==null&&(o.splice(c,3),c-=3,kp(E,{pending:!0,data:x,method:f.method,action:m},m,x))}}))}function lf(o){function c(H){return i2(H,o)}ka!==null&&i2(ka,o),La!==null&&i2(La,o),Da!==null&&i2(Da,o),rf.forEach(c),af.forEach(c);for(var f=0;f<Ca.length;f++){var m=Ca[f];m.blockedOn===o&&(m.blockedOn=null)}for(;0<Ca.length&&(f=Ca[0],f.blockedOn===null);)gA(f),f.blockedOn===null&&Ca.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var x=f[m],E=f[m+1],R=x[Jn]||null;if(typeof E=="function")R||pA(f);else if(R){var O=null;if(E&&E.hasAttribute("formAction")){if(x=E,R=E[Jn]||null)O=R.formAction;else if(Fy(x)!==null)continue}else O=R.action;typeof O=="function"?f[m+1]=O:(f.splice(m,3),m-=3),pA(f)}}}function Hy(o){this._internalRoot=o}a2.prototype.render=Hy.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));var f=c.current,m=xs();cA(f,m,o,c,null,null)},a2.prototype.unmount=Hy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;o.tag===0&&Lc(),cA(o.current,2,null,o,null,null),z0(),c[ec]=null}};function a2(o){this._internalRoot=o}a2.prototype.unstable_scheduleHydration=function(o){if(o){var c=Vb();o={blockedOn:null,target:o,priority:c};for(var f=0;f<Ca.length&&c!==0&&c<Ca[f].priority;f++);Ca.splice(f,0,o),f===0&&gA(o)}};var yA=e.version;if(yA!=="19.0.0")throw Error(n(527,yA,"19.0.0"));ae.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=j(c),o=o!==null?re(o):null,o=o===null?null:o.stateNode,o};var iP={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:N,findFiberByHostInstance:So,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var o2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!o2.isDisabled&&o2.supportsFiber)try{lt=o2.inject(iP),Ot=o2}catch{}}return hf.createRoot=function(o,c){if(!i(o))throw Error(n(299));var f=!1,m="",x=ME,E=PE,R=NE,O=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(R=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(O=c.unstable_transitionCallbacks)),c=oA(o,1,!1,null,null,f,m,x,E,R,O,null),o[ec]=c.current,Ay(o.nodeType===8?o.parentNode:o),new Hy(c)},hf.hydrateRoot=function(o,c,f){if(!i(o))throw Error(n(299));var m=!1,x="",E=ME,R=PE,O=NE,H=null,Y=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(R=f.onCaughtError),f.onRecoverableError!==void 0&&(O=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(H=f.unstable_transitionCallbacks),f.formState!==void 0&&(Y=f.formState)),c=oA(o,1,!0,c,f??null,m,x,E,R,O,H,Y),c.context=lA(null),f=c.current,m=xs(),x=ba(m),x.callback=null,Ea(f,x,m),c.current.lanes=m,gh(c,m),Ii(c),o[ec]=c.current,Ay(o),new a2(c)},hf.version="19.0.0",hf}var kA;function yP(){if(kA)return Vy.exports;kA=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Vy.exports=pP(),Vy.exports}var xP=yP(),ff={},LA;function vP(){if(LA)return ff;LA=1,Object.defineProperty(ff,"__esModule",{value:!0}),ff.parse=a,ff.serialize=h;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,r=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function a(p,y){const v=new r,b=p.length;if(b<2)return v;const w=(y==null?void 0:y.decode)||d;let A=0;do{const S=p.indexOf("=",A);if(S===-1)break;const T=p.indexOf(";",A),D=T===-1?b:T;if(S>D){A=p.lastIndexOf(";",S-1)+1;continue}const L=l(p,A,S),B=u(p,S,L),M=p.slice(L,B);if(v[M]===void 0){let I=l(p,S+1,D),N=u(p,D,I);const P=w(p.slice(I,N));v[M]=P}A=D+1}while(A<b);return v}function l(p,y,v){do{const b=p.charCodeAt(y);if(b!==32&&b!==9)return y}while(++y<v);return v}function u(p,y,v){for(;y>v;){const b=p.charCodeAt(--y);if(b!==32&&b!==9)return y+1}return v}function h(p,y,v){const b=(v==null?void 0:v.encode)||encodeURIComponent;if(!s.test(p))throw new TypeError(`argument name is invalid: ${p}`);const w=b(y);if(!e.test(w))throw new TypeError(`argument val is invalid: ${y}`);let A=p+"="+w;if(!v)return A;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);A+="; Max-Age="+v.maxAge}if(v.domain){if(!t.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);A+="; Domain="+v.domain}if(v.path){if(!n.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);A+="; Path="+v.path}if(v.expires){if(!g(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);A+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(A+="; HttpOnly"),v.secure&&(A+="; Secure"),v.partitioned&&(A+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":A+="; Priority=Low";break;case"medium":A+="; Priority=Medium";break;case"high":A+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":A+="; SameSite=Strict";break;case"lax":A+="; SameSite=Lax";break;case"none":A+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return A}function d(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function g(p){return i.call(p)==="[object Date]"}return ff}vP();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var DA="popstate";function bP(s={}){function e(i,r){let{pathname:a="/",search:l="",hash:u=""}=jl(i.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Zx("",{pathname:a,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){let a=i.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let u=i.location.href,h=u.indexOf("#");l=h===-1?u:u.slice(0,h)}return l+"#"+(typeof r=="string"?r:Jf(r))}function n(i,r){vi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(r)})`)}return wP(e,t,n,s)}function Ut(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function vi(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EP(){return Math.random().toString(36).substring(2,10)}function CA(s,e){return{usr:s.state,key:s.key,idx:e}}function Zx(s,e,t=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?jl(e):e,state:t,key:e&&e.key||n||EP()}}function Jf({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function jl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substring(n),s=s.substring(0,n)),s&&(e.pathname=s)}return e}function wP(s,e,t,n={}){let{window:i=document.defaultView,v5Compat:r=!1}=n,a=i.history,l="POP",u=null,h=d();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function d(){return(a.state||{idx:null}).idx}function g(){l="POP";let w=d(),A=w==null?null:w-h;h=w,u&&u({action:l,location:b.location,delta:A})}function p(w,A){l="PUSH";let S=Zx(b.location,w,A);t&&t(S,w),h=d()+1;let T=CA(S,h),D=b.createHref(S);try{a.pushState(T,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(D)}r&&u&&u({action:l,location:b.location,delta:1})}function y(w,A){l="REPLACE";let S=Zx(b.location,w,A);t&&t(S,w),h=d();let T=CA(S,h),D=b.createHref(S);a.replaceState(T,"",D),r&&u&&u({action:l,location:b.location,delta:0})}function v(w){let A=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof w=="string"?w:Jf(w);return S=S.replace(/ $/,"%20"),Ut(A,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,A)}let b={get action(){return l},get location(){return s(i,a)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(DA,g),u=w,()=>{i.removeEventListener(DA,g),u=null}},createHref(w){return e(i,w)},createURL:v,encodeLocation(w){let A=v(w);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:p,replace:y,go(w){return a.go(w)}};return b}function GR(s,e,t="/"){return AP(s,e,t,!1)}function AP(s,e,t,n){let i=typeof e=="string"?jl(e):e,r=aa(i.pathname||"/",t);if(r==null)return null;let a=zR(s);TP(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let h=PP(r);l=OP(a[u],h,n)}return l}function zR(s,e=[],t=[],n=""){let i=(r,a,l)=>{let u={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};u.relativePath.startsWith("/")&&(Ut(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length));let h=na([n,u.relativePath]),d=t.concat(u);r.children&&r.children.length>0&&(Ut(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),zR(r.children,e,d,h)),!(r.path==null&&!r.index)&&e.push({path:h,score:CP(h,r.index),routesMeta:d})};return s.forEach((r,a)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))i(r,a);else for(let u of $R(r.path))i(r,a,u)}),e}function $R(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),r=t.replace(/\?$/,"");if(n.length===0)return i?[r,""]:[r];let a=$R(n.join("/")),l=[];return l.push(...a.map(u=>u===""?r:[r,u].join("/"))),i&&l.push(...a),l.map(u=>s.startsWith("/")&&u===""?"/":u)}function TP(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:IP(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var SP=/^:[\w-]+$/,_P=3,RP=2,kP=1,LP=10,DP=-2,IA=s=>s==="*";function CP(s,e){let t=s.split("/"),n=t.length;return t.some(IA)&&(n+=DP),e&&(n+=RP),t.filter(i=>!IA(i)).reduce((i,r)=>i+(SP.test(r)?_P:r===""?kP:LP),n)}function IP(s,e){return s.length===e.length&&s.slice(0,-1).every((n,i)=>n===e[i])?s[s.length-1]-e[e.length-1]:0}function OP(s,e,t=!1){let{routesMeta:n}=s,i={},r="/",a=[];for(let l=0;l<n.length;++l){let u=n[l],h=l===n.length-1,d=r==="/"?e:e.slice(r.length)||"/",g=wg({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},d),p=u.route;if(!g&&h&&t&&!n[n.length-1].route.index&&(g=wg({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:na([r,g.pathname]),pathnameBase:UP(na([r,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(r=na([r,g.pathnameBase]))}return a}function wg(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=MP(s.path,s.caseSensitive,s.end),i=e.match(t);if(!i)return null;let r=i[0],a=r.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((h,{paramName:d,isOptional:g},p)=>{if(d==="*"){let v=l[p]||"";a=r.slice(0,r.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[p];return g&&!y?h[d]=void 0:h[d]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:r,pathnameBase:a,pattern:s}}function MP(s,e=!1,t=!0){vi(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(n.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function PP(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vi(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function aa(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}function NP(s,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof s=="string"?jl(s):s;return{pathname:t?t.startsWith("/")?t:BP(t,e):e,search:HP(n),hash:GP(i)}}function BP(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function qy(s,e,t,n){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FP(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function VR(s){let e=FP(s);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function YR(s,e,t,n=!1){let i;typeof s=="string"?i=jl(s):(i={...s},Ut(!i.pathname||!i.pathname.includes("?"),qy("?","pathname","search",i)),Ut(!i.pathname||!i.pathname.includes("#"),qy("#","pathname","hash",i)),Ut(!i.search||!i.search.includes("#"),qy("#","search","hash",i)));let r=s===""||i.pathname==="",a=r?"/":i.pathname,l;if(a==null)l=t;else{let g=e.length-1;if(!n&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),g-=1;i.pathname=p.join("/")}l=g>=0?e[g]:"/"}let u=NP(i,l),h=a&&a!=="/"&&a.endsWith("/"),d=(r||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||d)&&(u.pathname+="/"),u}var na=s=>s.join("/").replace(/\/\/+/g,"/"),UP=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),HP=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,GP=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function zP(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var KR=["POST","PUT","PATCH","DELETE"];new Set(KR);var $P=["GET",...KR];new Set($P);var uh=Q.createContext(null);uh.displayName="DataRouter";var hm=Q.createContext(null);hm.displayName="DataRouterState";var jR=Q.createContext({isTransitioning:!1});jR.displayName="ViewTransition";var VP=Q.createContext(new Map);VP.displayName="Fetchers";var YP=Q.createContext(null);YP.displayName="Await";var lr=Q.createContext(null);lr.displayName="Navigation";var Nd=Q.createContext(null);Nd.displayName="Location";var la=Q.createContext({outlet:null,matches:[],isDataRoute:!1});la.displayName="Route";var xv=Q.createContext(null);xv.displayName="RouteError";function KP(s,{relative:e}={}){Ut(Bd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=Q.useContext(lr),{hash:i,pathname:r,search:a}=Fd(s,{relative:e}),l=r;return t!=="/"&&(l=r==="/"?t:na([t,r])),n.createHref({pathname:l,search:a,hash:i})}function Bd(){return Q.useContext(Nd)!=null}function wo(){return Ut(Bd(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(Nd).location}var qR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QR(s){Q.useContext(lr).static||Q.useLayoutEffect(s)}function WR(){let{isDataRoute:s}=Q.useContext(la);return s?rN():jP()}function jP(){Ut(Bd(),"useNavigate() may be used only in the context of a <Router> component.");let s=Q.useContext(uh),{basename:e,navigator:t}=Q.useContext(lr),{matches:n}=Q.useContext(la),{pathname:i}=wo(),r=JSON.stringify(VR(n)),a=Q.useRef(!1);return QR(()=>{a.current=!0}),Q.useCallback((u,h={})=>{if(vi(a.current,qR),!a.current)return;if(typeof u=="number"){t.go(u);return}let d=YR(u,JSON.parse(r),i,h.relative==="path");s==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:na([e,d.pathname])),(h.replace?t.replace:t.push)(d,h.state,h)},[e,t,r,i,s])}Q.createContext(null);function Fd(s,{relative:e}={}){let{matches:t}=Q.useContext(la),{pathname:n}=wo(),i=JSON.stringify(VR(t));return Q.useMemo(()=>YR(s,JSON.parse(i),n,e==="path"),[s,i,n,e])}function qP(s,e){return XR(s,e)}function XR(s,e,t,n){var S;Ut(Bd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:r}=Q.useContext(lr),{matches:a}=Q.useContext(la),l=a[a.length-1],u=l?l.params:{},h=l?l.pathname:"/",d=l?l.pathnameBase:"/",g=l&&l.route;{let T=g&&g.path||"";ZR(h,!g||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let p=wo(),y;if(e){let T=typeof e=="string"?jl(e):e;Ut(d==="/"||((S=T.pathname)==null?void 0:S.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${T.pathname}" was given in the \`location\` prop.`),y=T}else y=p;let v=y.pathname||"/",b=v;if(d!=="/"){let T=d.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=!r&&t&&t.matches&&t.matches.length>0?t.matches:GR(s,{pathname:b});vi(g||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),vi(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=JP(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:na([d,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?d:na([d,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,t,n);return e&&A?Q.createElement(Nd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},A):A}function QP(){let s=iN(),e=zP(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",s),a=Q.createElement(Q.Fragment,null,Q.createElement("p",null,"💿 Hey developer 👋"),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:r},"ErrorBoundary")," or"," ",Q.createElement("code",{style:r},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:i},t):null,a)}var WP=Q.createElement(QP,null),XP=class extends Q.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?Q.createElement(la.Provider,{value:this.props.routeContext},Q.createElement(xv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZP({routeContext:s,match:e,children:t}){let n=Q.useContext(uh);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(la.Provider,{value:s},t)}function JP(s,e=[],t=null,n=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let i=s,r=t==null?void 0:t.errors;if(r!=null){let u=i.findIndex(h=>h.route.id&&(r==null?void 0:r[h.route.id])!==void 0);Ut(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,l=-1;if(t)for(let u=0;u<i.length;u++){let h=i[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=u),h.route.id){let{loaderData:d,errors:g}=t,p=h.route.loader&&!d.hasOwnProperty(h.route.id)&&(!g||g[h.route.id]===void 0);if(h.route.lazy||p){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((u,h,d)=>{let g,p=!1,y=null,v=null;t&&(g=r&&h.route.id?r[h.route.id]:void 0,y=h.route.errorElement||WP,a&&(l<0&&d===0?(ZR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,v=null):l===d&&(p=!0,v=h.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,d+1)),w=()=>{let A;return g?A=y:p?A=v:h.route.Component?A=Q.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=u,Q.createElement(ZP,{match:h,routeContext:{outlet:u,matches:b,isDataRoute:t!=null},children:A})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?Q.createElement(XP,{location:t.location,revalidation:t.revalidation,component:y,error:g,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}function vv(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eN(s){let e=Q.useContext(uh);return Ut(e,vv(s)),e}function tN(s){let e=Q.useContext(hm);return Ut(e,vv(s)),e}function nN(s){let e=Q.useContext(la);return Ut(e,vv(s)),e}function bv(s){let e=nN(s),t=e.matches[e.matches.length-1];return Ut(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function sN(){return bv("useRouteId")}function iN(){var n;let s=Q.useContext(xv),e=tN("useRouteError"),t=bv("useRouteError");return s!==void 0?s:(n=e.errors)==null?void 0:n[t]}function rN(){let{router:s}=eN("useNavigate"),e=bv("useNavigate"),t=Q.useRef(!1);return QR(()=>{t.current=!0}),Q.useCallback(async(i,r={})=>{vi(t.current,qR),t.current&&(typeof i=="number"?s.navigate(i):await s.navigate(i,{fromRouteId:e,...r}))},[s,e])}var OA={};function ZR(s,e,t){!e&&!OA[s]&&(OA[s]=!0,vi(!1,t))}Q.memo(aN);function aN({routes:s,future:e,state:t}){return XR(s,void 0,t,e)}function Lf(s){Ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oN({basename:s="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:r=!1}){Ut(!Bd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=s.replace(/^\/*/,"/"),l=Q.useMemo(()=>({basename:a,navigator:i,static:r,future:{}}),[a,i,r]);typeof t=="string"&&(t=jl(t));let{pathname:u="/",search:h="",hash:d="",state:g=null,key:p="default"}=t,y=Q.useMemo(()=>{let v=aa(u,a);return v==null?null:{location:{pathname:v,search:h,hash:d,state:g,key:p},navigationType:n}},[a,u,h,d,g,p,n]);return vi(y!=null,`<Router basename="${a}"> is not able to match the URL "${u}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:Q.createElement(lr.Provider,{value:l},Q.createElement(Nd.Provider,{children:e,value:y}))}function lN({children:s,location:e}){return qP(Jx(s),e)}function Jx(s,e=[]){let t=[];return Q.Children.forEach(s,(n,i)=>{if(!Q.isValidElement(n))return;let r=[...e,i];if(n.type===Q.Fragment){t.push.apply(t,Jx(n.props.children,r));return}Ut(n.type===Lf,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ut(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Jx(n.props.children,r)),t.push(a)}),t}var Z2="get",J2="application/x-www-form-urlencoded";function fm(s){return s!=null&&typeof s.tagName=="string"}function cN(s){return fm(s)&&s.tagName.toLowerCase()==="button"}function uN(s){return fm(s)&&s.tagName.toLowerCase()==="form"}function hN(s){return fm(s)&&s.tagName.toLowerCase()==="input"}function fN(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function dN(s,e){return s.button===0&&(!e||e==="_self")&&!fN(s)}var l2=null;function gN(){if(l2===null)try{new FormData(document.createElement("form"),0),l2=!1}catch{l2=!0}return l2}var mN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qy(s){return s!=null&&!mN.has(s)?(vi(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${J2}"`),null):s}function pN(s,e){let t,n,i,r,a;if(uN(s)){let l=s.getAttribute("action");n=l?aa(l,e):null,t=s.getAttribute("method")||Z2,i=Qy(s.getAttribute("enctype"))||J2,r=new FormData(s)}else if(cN(s)||hN(s)&&(s.type==="submit"||s.type==="image")){let l=s.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=s.getAttribute("formaction")||l.getAttribute("action");if(n=u?aa(u,e):null,t=s.getAttribute("formmethod")||l.getAttribute("method")||Z2,i=Qy(s.getAttribute("formenctype"))||Qy(l.getAttribute("enctype"))||J2,r=new FormData(l,s),!gN()){let{name:h,type:d,value:g}=s;if(d==="image"){let p=h?`${h}.`:"";r.append(`${p}x`,"0"),r.append(`${p}y`,"0")}else h&&r.append(h,g)}}else{if(fm(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Z2,n=null,i=J2,a=s}return r&&i==="text/plain"&&(a=r,r=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:r,body:a}}function Ev(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function yN(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xN(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function vN(s,e,t){let n=await Promise.all(s.map(async i=>{let r=e.routes[i.route.id];if(r){let a=await yN(r,t);return a.links?a.links():[]}return[]}));return AN(n.flat(1).filter(xN).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function MA(s,e,t,n,i,r){let a=(u,h)=>t[h]?u.route.id!==t[h].route.id:!0,l=(u,h)=>{var d;return t[h].pathname!==u.pathname||((d=t[h].route.path)==null?void 0:d.endsWith("*"))&&t[h].params["*"]!==u.params["*"]};return r==="assets"?e.filter((u,h)=>a(u,h)||l(u,h)):r==="data"?e.filter((u,h)=>{var g;let d=n.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(a(u,h)||l(u,h))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(s,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function bN(s,e,{includeHydrateFallback:t}={}){return EN(s.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function EN(s){return[...new Set(s)]}function wN(s){let e={},t=Object.keys(s).sort();for(let n of t)e[n]=s[n];return e}function AN(s,e){let t=new Set;return new Set(e),s.reduce((n,i)=>{let r=JSON.stringify(wN(i));return t.has(r)||(t.add(r),n.push({key:r,link:i})),n},[])}function TN(s,e){let t=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t.pathname==="/"?t.pathname="_root.data":e&&aa(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function JR(){let s=Q.useContext(uh);return Ev(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function SN(){let s=Q.useContext(hm);return Ev(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var wv=Q.createContext(void 0);wv.displayName="FrameworkContext";function ek(){let s=Q.useContext(wv);return Ev(s,"You must render this element inside a <HydratedRouter> element"),s}function _N(s,e){let t=Q.useContext(wv),[n,i]=Q.useState(!1),[r,a]=Q.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:h,onMouseLeave:d,onTouchStart:g}=e,p=Q.useRef(null);Q.useEffect(()=>{if(s==="render"&&a(!0),s==="viewport"){let b=A=>{A.forEach(S=>{a(S.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return p.current&&w.observe(p.current),()=>{w.disconnect()}}},[s]),Q.useEffect(()=>{if(n){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[n]);let y=()=>{i(!0)},v=()=>{i(!1),a(!1)};return t?s!=="intent"?[r,p,{}]:[r,p,{onFocus:df(l,y),onBlur:df(u,v),onMouseEnter:df(h,y),onMouseLeave:df(d,v),onTouchStart:df(g,y)}]:[!1,p,{}]}function df(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function RN({page:s,...e}){let{router:t}=JR(),n=Q.useMemo(()=>GR(t.routes,s,t.basename),[t.routes,s,t.basename]);return n?Q.createElement(LN,{page:s,matches:n,...e}):null}function kN(s){let{manifest:e,routeModules:t}=ek(),[n,i]=Q.useState([]);return Q.useEffect(()=>{let r=!1;return vN(s,e,t).then(a=>{r||i(a)}),()=>{r=!0}},[s,e,t]),n}function LN({page:s,matches:e,...t}){let n=wo(),{manifest:i,routeModules:r}=ek(),{basename:a}=JR(),{loaderData:l,matches:u}=SN(),h=Q.useMemo(()=>MA(s,e,u,i,n,"data"),[s,e,u,i,n]),d=Q.useMemo(()=>MA(s,e,u,i,n,"assets"),[s,e,u,i,n]),g=Q.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let v=new Set,b=!1;if(e.forEach(A=>{var T;let S=i.routes[A.route.id];!S||!S.hasLoader||(!h.some(D=>D.route.id===A.route.id)&&A.route.id in l&&((T=r[A.route.id])!=null&&T.shouldRevalidate)||S.hasClientLoader?b=!0:v.add(A.route.id))}),v.size===0)return[];let w=TN(s,a);return b&&v.size>0&&w.searchParams.set("_routes",e.filter(A=>v.has(A.route.id)).map(A=>A.route.id).join(",")),[w.pathname+w.search]},[a,l,n,i,h,e,s,r]),p=Q.useMemo(()=>bN(d,i),[d,i]),y=kN(d);return Q.createElement(Q.Fragment,null,g.map(v=>Q.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),p.map(v=>Q.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),y.map(({key:v,link:b})=>Q.createElement("link",{key:v,...b})))}function DN(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var tk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tk&&(window.__reactRouterVersion="7.4.0")}catch{}function CN({basename:s,children:e,window:t}){let n=Q.useRef();n.current==null&&(n.current=bP({window:t,v5Compat:!0}));let i=n.current,[r,a]=Q.useState({action:i.action,location:i.location}),l=Q.useCallback(u=>{Q.startTransition(()=>a(u))},[a]);return Q.useLayoutEffect(()=>i.listen(l),[i,l]),Q.createElement(oN,{basename:s,children:e,location:r.location,navigationType:r.action,navigator:i})}var nk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sl=Q.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:r,replace:a,state:l,target:u,to:h,preventScrollReset:d,viewTransition:g,...p},y){let{basename:v}=Q.useContext(lr),b=typeof h=="string"&&nk.test(h),w,A=!1;if(typeof h=="string"&&b&&(w=h,tk))try{let N=new URL(window.location.href),P=h.startsWith("//")?new URL(N.protocol+h):new URL(h),z=aa(P.pathname,v);P.origin===N.origin&&z!=null?h=z+P.search+P.hash:A=!0}catch{vi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=KP(h,{relative:i}),[T,D,L]=_N(n,p),B=PN(h,{replace:a,state:l,target:u,preventScrollReset:d,relative:i,viewTransition:g});function M(N){e&&e(N),N.defaultPrevented||B(N)}let I=Q.createElement("a",{...p,...L,href:w||S,onClick:A||r?e:M,ref:DN(y,D),target:u,"data-discover":!b&&t==="render"?"true":void 0});return T&&!b?Q.createElement(Q.Fragment,null,I,Q.createElement(RN,{page:S})):I});sl.displayName="Link";var IN=Q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:r,to:a,viewTransition:l,children:u,...h},d){let g=Fd(a,{relative:h.relative}),p=wo(),y=Q.useContext(hm),{navigator:v,basename:b}=Q.useContext(lr),w=y!=null&&HN(g)&&l===!0,A=v.encodeLocation?v.encodeLocation(g).pathname:g.pathname,S=p.pathname,T=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(S=S.toLowerCase(),T=T?T.toLowerCase():null,A=A.toLowerCase()),T&&b&&(T=aa(T,b)||T);const D=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let L=S===A||!i&&S.startsWith(A)&&S.charAt(D)==="/",B=T!=null&&(T===A||!i&&T.startsWith(A)&&T.charAt(A.length)==="/"),M={isActive:L,isPending:B,isTransitioning:w},I=L?e:void 0,N;typeof n=="function"?N=n(M):N=[n,L?"active":null,B?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P=typeof r=="function"?r(M):r;return Q.createElement(sl,{...h,"aria-current":I,className:N,ref:d,style:P,to:a,viewTransition:l},typeof u=="function"?u(M):u)});IN.displayName="NavLink";var ON=Q.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:r,method:a=Z2,action:l,onSubmit:u,relative:h,preventScrollReset:d,viewTransition:g,...p},y)=>{let v=FN(),b=UN(l,{relative:h}),w=a.toLowerCase()==="get"?"get":"post",A=typeof l=="string"&&nk.test(l),S=T=>{if(u&&u(T),T.defaultPrevented)return;T.preventDefault();let D=T.nativeEvent.submitter,L=(D==null?void 0:D.getAttribute("formmethod"))||a;v(D||T.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:i,state:r,relative:h,preventScrollReset:d,viewTransition:g})};return Q.createElement("form",{ref:y,method:w,action:b,onSubmit:n?u:S,...p,"data-discover":!A&&s==="render"?"true":void 0})});ON.displayName="Form";function MN(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sk(s){let e=Q.useContext(uh);return Ut(e,MN(s)),e}function PN(s,{target:e,replace:t,state:n,preventScrollReset:i,relative:r,viewTransition:a}={}){let l=WR(),u=wo(),h=Fd(s,{relative:r});return Q.useCallback(d=>{if(dN(d,e)){d.preventDefault();let g=t!==void 0?t:Jf(u)===Jf(h);l(s,{replace:g,state:n,preventScrollReset:i,relative:r,viewTransition:a})}},[u,l,h,t,n,e,s,i,r,a])}var NN=0,BN=()=>`__${String(++NN)}__`;function FN(){let{router:s}=sk("useSubmit"),{basename:e}=Q.useContext(lr),t=sN();return Q.useCallback(async(n,i={})=>{let{action:r,method:a,encType:l,formData:u,body:h}=pN(n,e);if(i.navigate===!1){let d=i.fetcherKey||BN();await s.fetch(d,t,i.action||r,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||a,formEncType:i.encType||l,flushSync:i.flushSync})}else await s.navigate(i.action||r,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||a,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[s,e,t])}function UN(s,{relative:e}={}){let{basename:t}=Q.useContext(lr),n=Q.useContext(la);Ut(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),r={...Fd(s||".",{relative:e})},a=wo();if(s==null){r.search=a.search;let l=new URLSearchParams(r.search),u=l.getAll("index");if(u.some(d=>d==="")){l.delete("index"),u.filter(g=>g).forEach(g=>l.append("index",g));let d=l.toString();r.search=d?`?${d}`:""}}return(!s||s===".")&&i.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:na([t,r.pathname])),Jf(r)}function HN(s,e={}){let t=Q.useContext(jR);Ut(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=sk("useViewTransitionState"),i=Fd(s,{relative:e.relative});if(!t.isTransitioning)return!1;let r=aa(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=aa(t.nextLocation.pathname,n)||t.nextLocation.pathname;return wg(i.pathname,a)!=null||wg(i.pathname,r)!=null}new TextEncoder;function GN(){const s=wo(),t=["/","/LiveStream","/CryptoMarket"].includes(s.pathname);return he.jsxs("nav",{className:`bg-black p-4 flex justify-between items-center fixed h-[90px] top-0 left-0 w-full text-white z-40 ${t?"shadow-lg shadow-cyan-500/30":""}`,children:[he.jsx(sl,{to:"/",className:`text-4xl font-bold text-neon\r
      `,children:"Cyber Park"}),he.jsxs("div",{className:"flex items-center space-x-6",children:[he.jsx(sl,{to:"/",className:"px-4 py-2 text-cyan-300 text-neon-soft hover:text-white hover:underline transition",children:"Home"}),he.jsx(sl,{to:"/LiveStream",className:"px-4 py-2 text-cyan-300 text-neon-soft hover:text-white hover:underline transition",children:"LiveStream"}),he.jsx(sl,{to:"/CryptoMarket",className:"px-4 py-2 text-cyan-300 text-neon-soft hover:text-white hover:underline transition",children:"CryptoMarket"}),he.jsx(sl,{to:"/BlackjackTable",className:"px-4 py-2 text-cyan-300 text-neon-soft hover:text-white hover:underline transition",children:"BlackjackTable"})]})]})}const be=Number.isFinite||function(s){return typeof s=="number"&&isFinite(s)},zN=Number.isSafeInteger||function(s){return typeof s=="number"&&Math.abs(s)<=$N},$N=Number.MAX_SAFE_INTEGER||9007199254740991;let _e=function(s){return s.NETWORK_ERROR="networkError",s.MEDIA_ERROR="mediaError",s.KEY_SYSTEM_ERROR="keySystemError",s.MUX_ERROR="muxError",s.OTHER_ERROR="otherError",s}({}),Z=function(s){return s.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",s.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",s.KEY_SYSTEM_NO_SESSION="keySystemNoSession",s.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",s.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",s.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",s.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",s.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",s.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",s.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",s.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",s.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",s.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",s.MANIFEST_LOAD_ERROR="manifestLoadError",s.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",s.MANIFEST_PARSING_ERROR="manifestParsingError",s.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",s.LEVEL_EMPTY_ERROR="levelEmptyError",s.LEVEL_LOAD_ERROR="levelLoadError",s.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",s.LEVEL_PARSING_ERROR="levelParsingError",s.LEVEL_SWITCH_ERROR="levelSwitchError",s.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",s.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",s.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",s.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",s.FRAG_LOAD_ERROR="fragLoadError",s.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",s.FRAG_DECRYPT_ERROR="fragDecryptError",s.FRAG_PARSING_ERROR="fragParsingError",s.FRAG_GAP="fragGap",s.REMUX_ALLOC_ERROR="remuxAllocError",s.KEY_LOAD_ERROR="keyLoadError",s.KEY_LOAD_TIMEOUT="keyLoadTimeOut",s.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",s.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",s.BUFFER_APPEND_ERROR="bufferAppendError",s.BUFFER_APPENDING_ERROR="bufferAppendingError",s.BUFFER_STALLED_ERROR="bufferStalledError",s.BUFFER_FULL_ERROR="bufferFullError",s.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",s.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",s.ASSET_LIST_LOAD_ERROR="assetListLoadError",s.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",s.ASSET_LIST_PARSING_ERROR="assetListParsingError",s.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",s.INTERNAL_EXCEPTION="internalException",s.INTERNAL_ABORTED="aborted",s.ATTACH_MEDIA_ERROR="attachMediaError",s.UNKNOWN="unknown",s}({}),_=function(s){return s.MEDIA_ATTACHING="hlsMediaAttaching",s.MEDIA_ATTACHED="hlsMediaAttached",s.MEDIA_DETACHING="hlsMediaDetaching",s.MEDIA_DETACHED="hlsMediaDetached",s.MEDIA_ENDED="hlsMediaEnded",s.STALL_RESOLVED="hlsStallResolved",s.BUFFER_RESET="hlsBufferReset",s.BUFFER_CODECS="hlsBufferCodecs",s.BUFFER_CREATED="hlsBufferCreated",s.BUFFER_APPENDING="hlsBufferAppending",s.BUFFER_APPENDED="hlsBufferAppended",s.BUFFER_EOS="hlsBufferEos",s.BUFFERED_TO_END="hlsBufferedToEnd",s.BUFFER_FLUSHING="hlsBufferFlushing",s.BUFFER_FLUSHED="hlsBufferFlushed",s.MANIFEST_LOADING="hlsManifestLoading",s.MANIFEST_LOADED="hlsManifestLoaded",s.MANIFEST_PARSED="hlsManifestParsed",s.LEVEL_SWITCHING="hlsLevelSwitching",s.LEVEL_SWITCHED="hlsLevelSwitched",s.LEVEL_LOADING="hlsLevelLoading",s.LEVEL_LOADED="hlsLevelLoaded",s.LEVEL_UPDATED="hlsLevelUpdated",s.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",s.LEVELS_UPDATED="hlsLevelsUpdated",s.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",s.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",s.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",s.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",s.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",s.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",s.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",s.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",s.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",s.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",s.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",s.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",s.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",s.CUES_PARSED="hlsCuesParsed",s.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",s.INIT_PTS_FOUND="hlsInitPtsFound",s.FRAG_LOADING="hlsFragLoading",s.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",s.FRAG_LOADED="hlsFragLoaded",s.FRAG_DECRYPTED="hlsFragDecrypted",s.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",s.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",s.FRAG_PARSING_METADATA="hlsFragParsingMetadata",s.FRAG_PARSED="hlsFragParsed",s.FRAG_BUFFERED="hlsFragBuffered",s.FRAG_CHANGED="hlsFragChanged",s.FPS_DROP="hlsFpsDrop",s.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",s.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",s.ERROR="hlsError",s.DESTROYING="hlsDestroying",s.KEY_LOADING="hlsKeyLoading",s.KEY_LOADED="hlsKeyLoaded",s.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",s.BACK_BUFFER_REACHED="hlsBackBufferReached",s.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",s.ASSET_LIST_LOADING="hlsAssetListLoading",s.ASSET_LIST_LOADED="hlsAssetListLoaded",s.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",s.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",s.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",s.INTERSTITIAL_STARTED="hlsInterstitialStarted",s.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",s.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",s.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",s.INTERSTITIAL_ENDED="hlsInterstitialEnded",s.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",s.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",s.EVENT_CUE_ENTER="hlsEventCueEnter",s}({});var We={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Te={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Pc{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class VN{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Pc(e),this.fast_=new Pc(t),this.defaultTTFB_=i,this.ttfb_=new Pc(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:r}=this;n.halfLife!==e&&(this.slow_=new Pc(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new Pc(t,i.getEstimate(),i.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new Pc(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,i=e/1e3,r=n/i;this.fast_.sample(i,r),this.slow_.sample(i,r)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function YN(s,e,t){return(e=jN(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function yt(){return yt=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},yt.apply(null,arguments)}function PA(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),t.push.apply(t,n)}return t}function ht(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PA(Object(t),!0).forEach(function(n){YN(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):PA(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function KN(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function jN(s){var e=KN(s,"string");return typeof e=="symbol"?e:e+""}class ca{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=$a,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const $a=function(){},qN={trace:$a,debug:$a,log:$a,warn:$a,info:$a,error:$a};function e3(){return yt({},qN)}function QN(s,e){const t=self.console[s];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${s}] >`):$a}function NA(s,e,t){return e[s]?e[s].bind(e):QN(s,t)}const t3=e3();function WN(s,e,t){const n=e3();if(typeof console=="object"&&s===!0||typeof s=="object"){const i=["debug","log","info","warn","error"];i.forEach(r=>{n[r]=NA(r,s,t)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.2`)}catch{return e3()}i.forEach(r=>{t3[r]=NA(r,s)})}else yt(t3,n);return n}const et=t3;function mo(s=!0){return typeof self>"u"?void 0:(s||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function XN(s){return typeof self<"u"&&s===self.ManagedMediaSource}function ik(s,e){const t=Object.keys(s),n=Object.keys(e),i=t.length,r=n.length;return!i||!r||i===r&&!t.some(a=>n.indexOf(a)===-1)}function Rs(s,e=!1){if(typeof TextDecoder<"u"){const h=new TextDecoder("utf-8").decode(s);if(e){const d=h.indexOf("\0");return d!==-1?h.substring(0,d):h}return h.replace(/\0/g,"")}const t=s.length;let n,i,r,a="",l=0;for(;l<t;){if(n=s[l++],n===0&&e)return a;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:i=s[l++],a+=String.fromCharCode((n&31)<<6|i&63);break;case 14:i=s[l++],r=s[l++],a+=String.fromCharCode((n&15)<<12|(i&63)<<6|(r&63)<<0);break}}return a}const Ui={hexDump:function(s){let e="";for(let t=0;t<s.length;t++){let n=s[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}};function ZN(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Wy={exports:{}},BA;function JN(){return BA||(BA=1,function(s,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,l={buildAbsoluteURL:function(u,h,d){if(d=d||{},u=u.trim(),h=h.trim(),!h){if(!d.alwaysNormalize)return u;var g=l.parseURL(u);if(!g)throw new Error("Error trying to parse base URL.");return g.path=l.normalizePath(g.path),l.buildURLFromParts(g)}var p=l.parseURL(h);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return d.alwaysNormalize?(p.path=l.normalizePath(p.path),l.buildURLFromParts(p)):h;var y=l.parseURL(u);if(!y)throw new Error("Error trying to parse base URL.");if(!y.netLoc&&y.path&&y.path[0]!=="/"){var v=i.exec(y.path);y.netLoc=v[1],y.path=v[2]}y.netLoc&&!y.path&&(y.path="/");var b={scheme:y.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(b.netLoc=y.netLoc,p.path[0]!=="/"))if(!p.path)b.path=y.path,p.params||(b.params=y.params,p.query||(b.query=y.query));else{var w=y.path,A=w.substring(0,w.lastIndexOf("/")+1)+p.path;b.path=l.normalizePath(A)}return b.path===null&&(b.path=d.alwaysNormalize?l.normalizePath(p.path):p.path),l.buildURLFromParts(b)},parseURL:function(u){var h=n.exec(u);return h?{scheme:h[1]||"",netLoc:h[2]||"",path:h[3]||"",params:h[4]||"",query:h[5]||"",fragment:h[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(r,"");u.length!==(u=u.replace(a,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};s.exports=l})()}(Wy)),Wy.exports}var Av=JN();class Tv{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var pt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class rk{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,tB(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let i;n.length===1?i=(t==null?void 0:t.byteRangeEndOffset)||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[pt.AUDIO]:null,[pt.VIDEO]:null,[pt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Tv),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Av.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[pt.AUDIO]=null,e[pt.VIDEO]=null,e[pt.AUDIOVIDEO]=null}}function En(s){return s.sn!=="initSegment"}let Xy=class extends rk{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],t=this.byteRange[1];if(be(e)&&be(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1)return this._decryptdata=this.levelkeys[n[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=be(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),n=t.length;if(n>1||n===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!be(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return En(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,i,r,a=!1){const{elementaryStreams:l}=this,u=l[e];if(!u){l[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:r,partial:a};return}u.startPTS=Math.min(u.startPTS,t),u.endPTS=Math.max(u.endPTS,n),u.startDTS=Math.min(u.startDTS,i),u.endDTS=Math.max(u.endDTS,r)}};class eB extends rk{constructor(e,t,n,i,r){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function ak(s,e){const t=Object.getPrototypeOf(s);if(t){const n=Object.getOwnPropertyDescriptor(t,e);return n||ak(t,e)}}function tB(s,e){const t=ak(s,e);t&&(t.enumerable=!0,Object.defineProperty(s,e,t))}const Ag=Math.pow(2,32)-1,nB=[].push,ok={video:1,audio:2,id3:3,text:4};function un(s){return String.fromCharCode.apply(null,s)}function lk(s,e){const t=s[e]<<8|s[e+1];return t<0?65536+t:t}function Ce(s,e){const t=ck(s,e);return t<0?4294967296+t:t}function FA(s,e){let t=Ce(s,e);return t*=Math.pow(2,32),t+=Ce(s,e+4),t}function ck(s,e){return s[e]<<24|s[e+1]<<16|s[e+2]<<8|s[e+3]}function Zy(s,e,t){s[e]=t>>24,s[e+1]=t>>16&255,s[e+2]=t>>8&255,s[e+3]=t&255}function sB(s){const e=s.byteLength;for(let t=0;t<e;){const n=Ce(s,t);if(n>8&&s[t+4]===109&&s[t+5]===111&&s[t+6]===111&&s[t+7]===102)return!0;t=n>1?t+n:e}return!1}function He(s,e){const t=[];if(!e.length)return t;const n=s.byteLength;for(let i=0;i<n;){const r=Ce(s,i),a=un(s.subarray(i+4,i+8)),l=r>1?i+r:n;if(a===e[0])if(e.length===1)t.push(s.subarray(i+8,l));else{const u=He(s.subarray(i+8,l),e.slice(1));u.length&&nB.apply(t,u)}i=l}return t}function iB(s){const e=[],t=s[0];let n=8;const i=Ce(s,n);n+=4;let r=0,a=0;t===0?(r=Ce(s,n),a=Ce(s,n+4),n+=8):(r=FA(s,n),a=FA(s,n+8),n+=16),n+=2;let l=s.length+a;const u=lk(s,n);n+=2;for(let h=0;h<u;h++){let d=n;const g=Ce(s,d);d+=4;const p=g&2147483647;if((g&2147483648)>>>31===1)return et.warn("SIDX has hierarchical references (not supported)"),null;const v=Ce(s,d);d+=4,e.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/i,start:l,end:l+p-1}}),l+=p,d+=4,n=d}return{earliestPresentationTime:r,timescale:i,version:t,referencesCount:u,references:e}}function uk(s){const e=[],t=He(s,["moov","trak"]);for(let i=0;i<t.length;i++){const r=t[i],a=He(r,["tkhd"])[0];if(a){let l=a[0];const u=Ce(a,l===0?12:20),h=He(r,["mdia","mdhd"])[0];if(h){l=h[0];const d=Ce(h,l===0?12:20),g=He(r,["mdia","hdlr"])[0];if(g){const p=un(g.subarray(8,12)),y={soun:pt.AUDIO,vide:pt.VIDEO}[p],v=He(r,["mdia","minf","stbl","stsd"])[0],b=rB(v);y?(e[u]={timescale:d,type:y,stsd:b},e[y]=ht({timescale:d,id:u},b)):e[u]={timescale:d,type:p,stsd:b}}}}}return He(s,["moov","mvex","trex"]).forEach(i=>{const r=Ce(i,4),a=e[r];a&&(a.default={duration:Ce(i,12),flags:Ce(i,20)})}),e}function rB(s){const e=s.subarray(8),t=e.subarray(86),n=un(e.subarray(4,8));let i=n,r;const a=n==="enca"||n==="encv";if(a){const h=He(e,[n])[0].subarray(n==="enca"?28:78);He(h,["sinf"]).forEach(g=>{const p=He(g,["schm"])[0];if(p){const y=un(p.subarray(4,8));if(y==="cbcs"||y==="cenc"){const v=He(g,["frma"])[0];v&&(i=un(v))}}})}const l=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const u=He(t,["avcC"])[0];u&&u.length>3&&(i+="."+u2(u[1])+u2(u[2])+u2(u[3]),r=c2(l==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const u=He(e,[n])[0],h=He(u.subarray(28),["esds"])[0];if(h&&h.length>7){let d=4;if(h[d++]!==3)break;d=Jy(h,d),d+=2;const g=h[d++];if(g&128&&(d+=2),g&64&&(d+=h[d++]),h[d++]!==4)break;d=Jy(h,d);const p=h[d++];if(p===64)i+="."+u2(p);else break;if(d+=12,h[d++]!==5)break;d=Jy(h,d);const y=h[d++];let v=(y&248)>>3;v===31&&(v+=1+((y&7)<<3)+((h[d]&224)>>5)),i+="."+v}break}case"hvc1":case"hev1":{const u=He(t,["hvcC"])[0];if(u&&u.length>12){const h=u[1],d=["","A","B","C"][h>>6],g=h&31,p=Ce(u,2),y=(h&32)>>5?"H":"L",v=u[12],b=u.subarray(6,12);i+="."+d+g,i+="."+p.toString(16).toUpperCase(),i+="."+y+v;let w="";for(let A=b.length;A--;){const S=b[A];(S||w)&&(w="."+S.toString(16).toUpperCase()+w)}i+=w}r=c2(l=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=c2(i,t)||i;break}case"vp09":{const u=He(t,["vpcC"])[0];if(u&&u.length>6){const h=u[4],d=u[5],g=u[6]>>4&15;i+="."+Bi(h)+"."+Bi(d)+"."+Bi(g)}break}case"av01":{const u=He(t,["av1C"])[0];if(u&&u.length>2){const h=u[1]>>>5,d=u[1]&31,g=u[2]>>>7?"H":"M",p=(u[2]&64)>>6,y=(u[2]&32)>>5,v=h===2&&p?y?12:10:p?10:8,b=(u[2]&16)>>4,w=(u[2]&8)>>3,A=(u[2]&4)>>2,S=u[2]&3;i+="."+h+"."+Bi(d)+g+"."+Bi(v)+"."+b+"."+w+A+S+"."+Bi(1)+"."+Bi(1)+"."+Bi(1)+"."+0,r=c2("dav1",t)}break}}return{codec:i,encrypted:a,supplemental:r}}function c2(s,e){const t=He(e,["dvvC"]),n=t.length?t[0]:He(e,["dvcC"])[0];if(n){const i=n[2]>>1&127,r=n[2]<<5&32|n[3]>>3&31;return s+"."+Bi(i)+"."+Bi(r)}}function Jy(s,e){const t=e+5;for(;s[e++]&128&&e<t;);return e}function u2(s){return("0"+s.toString(16).toUpperCase()).slice(-2)}function Bi(s){return(s<10?"0":"")+s}function aB(s,e){if(!s||!e)return s;const t=e.keyId;return t&&e.isCommonEncryption&&He(s,["moov","trak"]).forEach(i=>{const a=He(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let l=He(a,["enca"]);const u=l.length>0;u||(l=He(a,["encv"])),l.forEach(h=>{const d=u?h.subarray(28):h.subarray(78);He(d,["sinf"]).forEach(p=>{const y=hk(p);if(y){const v=y.subarray(8,24);v.some(b=>b!==0)||(et.log(`[eme] Patching keyId in 'enc${u?"a":"v"}>sinf>>tenc' box: ${Ui.hexDump(v)} -> ${Ui.hexDump(t)}`),y.set(t,8))}})})}),s}function hk(s){const e=He(s,["schm"])[0];if(e){const t=un(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return He(s,["schi","tenc"])[0]}return null}function oB(s,e){return He(e,["moof","traf"]).reduce((t,n)=>{const i=He(n,["tfdt"])[0],r=i[0],a=He(n,["tfhd"]).reduce((l,u)=>{const h=Ce(u,4),d=s[h];if(d){let g=Ce(i,4);if(r===1){if(g===Ag)return et.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),l;g*=Ag+1,g+=Ce(i,8)}const p=d.timescale||9e4,y=g/p;if(be(y)&&(l===null||y<l))return y}return l},null);return a!==null&&be(a)&&(t===null||a<t)?a:t},null)}function lB(s,e){let t=0,n=0,i=0;const r=He(s,["moof","traf"]);for(let a=0;a<r.length;a++){const l=r[a],u=He(l,["tfhd"])[0],h=Ce(u,4),d=e[h];if(!d)continue;const g=d.default,p=Ce(u,0)|(g==null?void 0:g.flags);let y=g==null?void 0:g.duration;p&8&&(p&2?y=Ce(u,12):y=Ce(u,8));const v=d.timescale||9e4,b=He(l,["trun"]);for(let w=0;w<b.length;w++){if(t=cB(b[w]),!t&&y){const A=Ce(b[w],4);t=y*A}d.type===pt.VIDEO?n+=t/v:d.type===pt.AUDIO&&(i+=t/v)}}if(n===0&&i===0){let a=1/0,l=0,u=0;const h=He(s,["sidx"]);for(let d=0;d<h.length;d++){const g=iB(h[d]);if(g!=null&&g.references){a=Math.min(a,g.earliestPresentationTime/g.timescale);const p=g.references.reduce((y,v)=>y+v.info.duration||0,0);l=Math.max(l,p+g.earliestPresentationTime/g.timescale),u=l-a}}if(u&&be(u))return u}return n||i}function cB(s){const e=Ce(s,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let n=0;const i=Ce(s,4);for(let r=0;r<i;r++){if(e&256){const a=Ce(s,t);n+=a,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return n}function uB(s,e,t){He(e,["moof","traf"]).forEach(n=>{He(n,["tfhd"]).forEach(i=>{const r=Ce(i,4),a=s[r];if(!a)return;const l=a.timescale||9e4;He(n,["tfdt"]).forEach(u=>{const h=u[0],d=t*l;if(d){let g=Ce(u,4);if(h===0)g-=d,g=Math.max(g,0),Zy(u,4,g);else{g*=Math.pow(2,32),g+=Ce(u,8),g-=d,g=Math.max(g,0);const p=Math.floor(g/(Ag+1)),y=Math.floor(g%(Ag+1));Zy(u,4,p),Zy(u,8,y)}}})})})}function hB(s){const e={valid:null,remainder:null},t=He(s,["moof"]);if(t.length<2)return e.remainder=s,e;const n=t[t.length-1];return e.valid=s.slice(0,n.byteOffset-8),e.remainder=s.slice(n.byteOffset-8),e}function Js(s,e){const t=new Uint8Array(s.length+e.length);return t.set(s),t.set(e,s.length),t}function UA(s,e){const t=[],n=e.samples,i=e.timescale,r=e.id;let a=!1;return He(n,["moof"]).map(u=>{const h=u.byteOffset-8;He(u,["traf"]).map(g=>{const p=He(g,["tfdt"]).map(y=>{const v=y[0];let b=Ce(y,4);return v===1&&(b*=Math.pow(2,32),b+=Ce(y,8)),b/i})[0];return p!==void 0&&(s=p),He(g,["tfhd"]).map(y=>{const v=Ce(y,4),b=Ce(y,0)&16777215,w=(b&1)!==0,A=(b&2)!==0,S=(b&8)!==0;let T=0;const D=(b&16)!==0;let L=0;const B=(b&32)!==0;let M=8;v===r&&(w&&(M+=8),A&&(M+=4),S&&(T=Ce(y,M),M+=4),D&&(L=Ce(y,M),M+=4),B&&(M+=4),e.type==="video"&&(a=dm(e.codec)),He(g,["trun"]).map(I=>{const N=I[0],P=Ce(I,0)&16777215,z=(P&1)!==0;let te=0;const ye=(P&4)!==0,me=(P&256)!==0;let K=0;const G=(P&512)!==0;let J=0;const se=(P&1024)!==0,X=(P&2048)!==0;let C=0;const j=Ce(I,4);let re=8;z&&(te=Ce(I,re),re+=4),ye&&(re+=4);let le=te+h;for(let ae=0;ae<j;ae++){if(me?(K=Ce(I,re),re+=4):K=T,G?(J=Ce(I,re),re+=4):J=L,se&&(re+=4),X&&(N===0?C=Ce(I,re):C=ck(I,re),re+=4),e.type===pt.VIDEO){let ve=0;for(;ve<J;){const xe=Ce(n,le);if(le+=4,fB(a,n[le])){const ze=n.subarray(le,le+xe);Sv(ze,a?2:1,s+C/i,t)}le+=xe,ve+=xe+4}}s+=K/i}}))})})}),t}function dm(s){if(!s)return!1;const e=s.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function fB(s,e){if(s){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Sv(s,e,t,n){const i=fk(s);let r=0;r+=e;let a=0,l=0,u=0;for(;r<i.length;){a=0;do{if(r>=i.length)break;u=i[r++],a+=u}while(u===255);l=0;do{if(r>=i.length)break;u=i[r++],l+=u}while(u===255);const h=i.length-r;let d=r;if(l<h)r+=l;else if(l>h){et.error(`Malformed SEI payload. ${l} is too small, only ${h} bytes left to parse.`);break}if(a===4){if(i[d++]===181){const p=lk(i,d);if(d+=2,p===49){const y=Ce(i,d);if(d+=4,y===1195456820){const v=i[d++];if(v===3){const b=i[d++],w=31&b,A=64&b,S=A?2+w*3:0,T=new Uint8Array(S);if(A){T[0]=b;for(let D=1;D<S;D++)T[D]=i[d++]}n.push({type:v,payloadType:a,pts:t,bytes:T})}}}}}else if(a===5&&l>16){const g=[];for(let v=0;v<16;v++){const b=i[d++].toString(16);g.push(b.length==1?"0"+b:b),(v===3||v===5||v===7||v===9)&&g.push("-")}const p=l-16,y=new Uint8Array(p);for(let v=0;v<p;v++)y[v]=i[d++];n.push({payloadType:a,pts:t,uuid:g.join(""),userData:Rs(y),userDataBytes:y})}}}function fk(s){const e=s.byteLength,t=[];let n=1;for(;n<e-2;)s[n]===0&&s[n+1]===0&&s[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return s;const i=e-t.length,r=new Uint8Array(i);let a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),r[n]=s[a];return r}function dB(s){const e=s[0];let t="",n="",i=0,r=0,a=0,l=0,u=0,h=0;if(e===0){for(;un(s.subarray(h,h+1))!=="\0";)t+=un(s.subarray(h,h+1)),h+=1;for(t+=un(s.subarray(h,h+1)),h+=1;un(s.subarray(h,h+1))!=="\0";)n+=un(s.subarray(h,h+1)),h+=1;n+=un(s.subarray(h,h+1)),h+=1,i=Ce(s,12),r=Ce(s,16),l=Ce(s,20),u=Ce(s,24),h=28}else if(e===1){h+=4,i=Ce(s,h),h+=4;const g=Ce(s,h);h+=4;const p=Ce(s,h);for(h+=4,a=2**32*g+p,zN(a)||(a=Number.MAX_SAFE_INTEGER,et.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),l=Ce(s,h),h+=4,u=Ce(s,h),h+=4;un(s.subarray(h,h+1))!=="\0";)t+=un(s.subarray(h,h+1)),h+=1;for(t+=un(s.subarray(h,h+1)),h+=1;un(s.subarray(h,h+1))!=="\0";)n+=un(s.subarray(h,h+1)),h+=1;n+=un(s.subarray(h,h+1)),h+=1}const d=s.subarray(h,s.byteLength);return{schemeIdUri:t,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:r,eventDuration:l,id:u,payload:d}}function gB(s,...e){const t=e.length;let n=8,i=t;for(;i--;)n+=e[i].byteLength;const r=new Uint8Array(n);for(r[0]=n>>24&255,r[1]=n>>16&255,r[2]=n>>8&255,r[3]=n&255,r.set(s,4),i=0,n=8;i<t;i++)r.set(e[i],n),n+=e[i].byteLength;return r}function mB(s,e,t){if(s.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let r;n>0?(r=new Uint8Array(4),e.length>0&&new DataView(r.buffer).setUint32(0,e.length,!1)):r=new Uint8Array;const a=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),gB([112,115,115,104],new Uint8Array([n,0,0,0]),s,r,i,a,t||new Uint8Array)}function pB(s){const e=[];if(s instanceof ArrayBuffer){const t=s.byteLength;let n=0;for(;n+32<t;){const i=new DataView(s,n),r=yB(i);e.push(r),n+=r.size}}return e}function yB(s){const e=s.getUint32(0),t=s.byteOffset,n=s.byteLength;if(n<e)return{offset:t,size:n};if(s.getUint32(4)!==1886614376)return{offset:t,size:e};const r=s.getUint32(8)>>>24;if(r!==0&&r!==1)return{offset:t,size:e};const a=s.buffer,l=Ui.hexDump(new Uint8Array(a,t+12,16)),u=s.getUint32(28);let h=null,d=null;if(r===0){if(e-32<u||u<22)return{offset:t,size:e};d=new Uint8Array(a,t+32,u)}else if(r===1){if(!u||n<t+32+u*16+16)return{offset:t,size:e};h=[];for(let g=0;g<u;g++)h.push(new Uint8Array(a,t+32+g*16,16))}return{version:r,systemId:l,kids:h,data:d,offset:t,size:e}}const dk=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Qu={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function gk(s,e){const t=Qu[e];return!!t&&!!t[s.slice(0,4)]}function n3(s,e,t=!0){return!s.split(",").some(n=>!mk(n,e,t))}function mk(s,e,t=!0){var n;const i=mo(t);return(n=i==null?void 0:i.isTypeSupported(ed(s,e)))!=null?n:!1}function ed(s,e){return`${e}/mp4;codecs=${s}`}function HA(s){if(s){const e=s.substring(0,4);return Qu.video[e]}return 2}function Tg(s){const e=dk();return s.split(",").reduce((t,n)=>{const r=e&&dm(n)?9:Qu.video[n];return r?(r*2+t)/(t?3:2):(Qu.audio[n]+t)/(t?2:1)},0)}const ex={};function xB(s,e=!0){if(ex[s])return ex[s];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[s];for(let i=0;i<t.length;i++){var n;if(mk(t[i],"audio",e))return ex[s]=t[i],t[i];if(t[i]==="mp3"&&(n=mo(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return s}const vB=/flac|opus|mp4a\.40\.34/i;function Sg(s,e=!0){return s.replace(vB,t=>xB(t.toLowerCase(),e))}function bB(s,e){const t=[];if(s){const n=s.split(",");for(let i=0;i<n.length;i++)gk(n[i],"video")||t.push(n[i])}return e&&t.push(e),t.join(",")}function eg(s,e){if(s&&(s.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(s)!==-1))return s;if(e){const t=e.split(",");if(t.length>1){if(s){for(let n=t.length;n--;)if(t[n].substring(0,4)===s.substring(0,4))return t[n]}return t[0]}}return e||s}function EB(s){const e=s.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");if(n.length>2){let i=n.shift()+".";i+=parseInt(n.shift()).toString(16),i+=("000"+parseInt(n.shift()).toString(16)).slice(-4),e[t]=i}}return e.join(",")}function wB(s){if(s.startsWith("av01.")){const e=s.split("."),t=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=t[n-4];return e.join(".")}return s}function GA(s){const e=mo(s)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function pk(s){return s.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const yk={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function xk(s,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:s}}const zA={};function AB(s,e,t,n,i,r){const a=s.audioCodec?s.audioGroups:null,l=r==null?void 0:r.audioCodec,u=r==null?void 0:r.channels,h=u?parseInt(u):l?1/0:2;let d=null;if(a!=null&&a.length)try{a.length===1&&a[0]?d=e.groups[a[0]].channels:d=a.reduce((g,p)=>{if(p){const y=e.groups[p];if(!y)throw new Error(`Audio track group ${p} not found`);Object.keys(y.channels).forEach(v=>{g[v]=(g[v]||0)+y.channels[v]})}return g},{2:0})}catch{return!0}return s.videoCodec!==void 0&&(s.width>1920&&s.height>1088||s.height>1920&&s.width>1088||s.frameRate>Math.max(n,30)||s.videoRange!=="SDR"&&s.videoRange!==t||s.bitrate>Math.max(i,8e6))||!!d&&be(h)&&Object.keys(d).some(g=>parseInt(g)>h)}function vk(s,e,t){const n=s.videoCodec,i=s.audioCodec;if(!n&&!i||!t)return Promise.resolve(yk);const r=[];if(n){const a={width:s.width,height:s.height,bitrate:Math.ceil(Math.max(s.bitrate*.9,s.averageBitrate)),framerate:s.frameRate||30},l=s.videoRange;l!=="SDR"&&(a.transferFunction=l.toLowerCase());const u=n.split(","),h=navigator.userAgent;if(u.some(d=>dm(d))&&dk())return Promise.resolve(xk(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent sting: (${h})`),r));r.push.apply(r,u.map(d=>({type:"media-source",video:ht(ht({},a),{},{contentType:ed(wB(d),"video")})})))}return i&&s.audioGroups&&s.audioGroups.forEach(a=>{var l;a&&((l=e.groups[a])==null||l.tracks.forEach(u=>{if(u.groupId===a){const h=u.channels||"",d=parseFloat(h);be(d)&&d>2&&r.push.apply(r,i.split(",").map(g=>({type:"media-source",audio:{contentType:ed(g,"audio"),channels:""+d}})))}}))}),Promise.all(r.map(a=>{const l=TB(a);return zA[l]||(zA[l]=t.decodingInfo(a))})).then(a=>({supported:!a.some(l=>!l.supported),configurations:r,decodingInfoResults:a})).catch(a=>({supported:!1,configurations:r,decodingInfoResults:[],error:a}))}function TB(s){const{audio:e,video:t}=s,n=t||e;if(n){const i=pk(n.contentType);if(t)return`r${t.height}x${t.width}f${Math.ceil(t.framerate)}${t.transferFunction||"sd"}_${i}_${Math.ceil(t.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${i}`}return""}const s3=["NONE","TYPE-0","TYPE-1",null];function SB(s){return s3.indexOf(s)>-1}const _g=["SDR","PQ","HLG"];function _B(s){return!!s&&_g.indexOf(s)>-1}var tg={No:"",Yes:"YES",v2:"v2"};function $A(s){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=s,i=n<e/2;return e&&i?t?tg.v2:tg.Yes:tg.No}class VA{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class td{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=(t=e.supplemental)==null?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return YA(this._audioGroups,e)}hasSubtitleGroup(e){return YA(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function YA(s,e){return!e||!s?!1:s.indexOf(e)!==-1}function RB(){if(typeof matchMedia=="function"){const s=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(s.media!==e.media)return s.matches===!0}return!1}function kB(s,e){let t=!1,n=[];if(s&&(t=s!=="SDR",n=[s]),e){n=e.allowedVideoRanges||_g.slice(0);const i=n.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:i&&RB(),t||(n=["SDR"])}return{preferHDR:t,allowedVideoRanges:n}}const LB=s=>{const e=new WeakSet;return(t,n)=>{if(s&&(n=s(t,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},Ct=(s,e)=>JSON.stringify(s,LB(e));function DB(s,e,t,n,i){const r=Object.keys(s),a=n==null?void 0:n.channels,l=n==null?void 0:n.audioCodec,u=i==null?void 0:i.videoCodec,h=a&&parseInt(a)===2;let d=!1,g=!1,p=1/0,y=1/0,v=1/0,b=1/0,w=0,A=[];const{preferHDR:S,allowedVideoRanges:T}=kB(e,i);for(let I=r.length;I--;){const N=s[r[I]];d||(d=N.channels[2]>0),p=Math.min(p,N.minHeight),y=Math.min(y,N.minFramerate),v=Math.min(v,N.minBitrate),T.filter(z=>N.videoRanges[z]>0).length>0&&(g=!0)}p=be(p)?p:0,y=be(y)?y:0;const D=Math.max(1080,p),L=Math.max(30,y);v=be(v)?v:t,t=Math.max(v,t),g||(e=void 0);const B=r.length>1;return{codecSet:r.reduce((I,N)=>{const P=s[N];if(N===I)return I;if(A=g?T.filter(z=>P.videoRanges[z]>0):[],B){if(P.minBitrate>t)return Oi(N,`min bitrate of ${P.minBitrate} > current estimate of ${t}`),I;if(!P.hasDefaultAudio)return Oi(N,"no renditions with default or auto-select sound found"),I;if(l&&N.indexOf(l.substring(0,4))%5!==0)return Oi(N,`audio codec preference "${l}" not found`),I;if(a&&!h){if(!P.channels[a])return Oi(N,`no renditions with ${a} channel sound found (channels options: ${Object.keys(P.channels)})`),I}else if((!l||h)&&d&&P.channels[2]===0)return Oi(N,"no renditions with stereo sound found"),I;if(P.minHeight>D)return Oi(N,`min resolution of ${P.minHeight} > maximum of ${D}`),I;if(P.minFramerate>L)return Oi(N,`min framerate of ${P.minFramerate} > maximum of ${L}`),I;if(!A.some(z=>P.videoRanges[z]>0))return Oi(N,`no variants with VIDEO-RANGE of ${Ct(A)} found`),I;if(u&&N.indexOf(u.substring(0,4))%5!==0)return Oi(N,`video codec preference "${u}" not found`),I;if(P.maxScore<w)return Oi(N,`max score of ${P.maxScore} < selected max of ${w}`),I}return I&&(Tg(N)>=Tg(I)||P.fragmentError>s[I].fragmentError)?I:(b=P.minIndex,w=P.maxScore,N)},void 0),videoRanges:A,preferHDR:S,minFramerate:y,minBitrate:v,minIndex:b}}function Oi(s,e){et.log(`[abr] start candidates with "${s}" ignored because ${e}`)}function bk(s){return s.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const i=t.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function CB(s,e,t,n){return s.slice(t,n+1).reduce((i,r,a)=>{if(!r.codecSet)return i;const l=r.audioGroups;let u=i[r.codecSet];u||(i[r.codecSet]=u={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!l,fragmentError:0}),u.minBitrate=Math.min(u.minBitrate,r.bitrate);const h=Math.min(r.height,r.width);return u.minHeight=Math.min(u.minHeight,h),u.minFramerate=Math.min(u.minFramerate,r.frameRate),u.minIndex=Math.min(u.minIndex,a),u.maxScore=Math.max(u.maxScore,r.score),u.fragmentError+=r.fragmentError,u.videoRanges[r.videoRange]=(u.videoRanges[r.videoRange]||0)+1,l&&l.forEach(d=>{if(!d)return;const g=e.groups[d];g&&(u.hasDefaultAudio=u.hasDefaultAudio||e.hasDefaultAudio?g.hasDefault:g.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(g.channels).forEach(p=>{u.channels[p]=(u.channels[p]||0)+g.channels[p]}))}),i},{})}function KA(s){if(!s)return s;const{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:r}=s;return{lang:e,assocLang:t,characteristics:n,channels:i,audioCodec:r}}function er(s,e,t){if("attrs"in s){const n=e.indexOf(s);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(Ml(s,i,t))return n}return-1}function Ml(s,e,t){const{groupId:n,name:i,lang:r,assocLang:a,default:l}=s,u=s.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(r===void 0||IB(r,e.lang))&&(r===void 0||e.assocLang===a)&&(l===void 0||e.default===l)&&(u===void 0||e.forced===u)&&(!("characteristics"in s)||OB(s.characteristics||"",e.characteristics))&&(t===void 0||t(s,e))}function IB(s,e="--"){return s.length===e.length?s===e:s.startsWith(e)||e.startsWith(s)}function OB(s,e=""){const t=s.split(","),n=e.split(",");return t.length===n.length&&!t.some(i=>n.indexOf(i)===-1)}function Xo(s,e){const{audioCodec:t,channels:n}=s;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function MB(s,e,t,n,i){const r=e[n],l=e.reduce((p,y,v)=>{const b=y.uri;return(p[b]||(p[b]=[])).push(v),p},{})[r.uri];l.length>1&&(n=Math.max.apply(Math,l));const u=r.videoRange,h=r.frameRate,d=r.codecSet.substring(0,4),g=jA(e,n,p=>{if(p.videoRange!==u||p.frameRate!==h||p.codecSet.substring(0,4)!==d)return!1;const y=p.audioGroups,v=t.filter(b=>!y||y.indexOf(b.groupId)!==-1);return er(s,v,i)>-1});return g>-1?g:jA(e,n,p=>{const y=p.audioGroups,v=t.filter(b=>!y||y.indexOf(b.groupId)!==-1);return er(s,v,i)>-1})}function jA(s,e,t){for(let n=e;n>-1;n--)if(t(s[n]))return n;for(let n=e+1;n<s.length;n++)if(t(s[n]))return n;return-1}function Rg(s,e){var t;return!!s&&s!==((t=e.loadLevelObj)==null?void 0:t.uri)}class PB extends ca{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var n;const{fragCurrent:i,partCurrent:r,hls:a}=this,{autoLevelEnabled:l,media:u}=a;if(!i||!u)return;const h=performance.now(),d=r?r.stats:i.stats,g=r?r.duration:i.duration,p=h-d.loading.start,y=a.minAutoLevel,v=i.level,b=this._nextAutoLevel;if(d.aborted||d.loaded&&d.loaded===d.total||v<=y){this.clearTimer(),this._nextAutoLevel=-1;return}if(!l)return;const w=b>-1&&b!==v,A=!!t||w;if(!A&&(u.paused||!u.playbackRate||!u.readyState))return;const S=a.mainForwardBufferInfo;if(!A&&S===null)return;const T=this.bwEstimator.getEstimateTTFB(),D=Math.abs(u.playbackRate);if(p<=Math.max(T,1e3*(g/(D*2))))return;const L=S?S.len/D:0,B=d.loading.first?d.loading.first-d.loading.start:-1,M=d.loaded&&B>-1,I=this.getBwEstimate(),N=a.levels,P=N[v],z=Math.max(d.loaded,Math.round(g*(i.bitrate||P.averageBitrate)/8));let te=M?p-B:p;te<1&&M&&(te=Math.min(p,d.loaded*8/I));const ye=M?d.loaded*1e3/te:0,me=T/1e3,K=ye?(z-d.loaded)/ye:z*8/I+me;if(K<=L)return;const G=ye?ye*8:I,J=((n=(t==null?void 0:t.details)||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,se=this.hls.config.abrBandWidthUpFactor;let X=Number.POSITIVE_INFINITY,C;for(C=v-1;C>y;C--){const ae=N[C].maxBitrate,ve=!N[C].details||J;if(X=this.getTimeToLoadFrag(me,G,g*ae,ve),X<Math.min(L,g+me))break}if(X>=K||X>g*10)return;M?this.bwEstimator.sample(p-Math.min(T,B),d.loaded):this.bwEstimator.sampleTTFB(p);const j=N[C].maxBitrate;this.getBwEstimate()*se>j&&this.resetEstimator(j);const re=this.findBestLevel(j,y,C,0,L,1,1);re>-1&&(C=re),this.warn(`Fragment ${i.sn}${r?" part "+r.index:""} of level ${v} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${L.toFixed(3)} s
      Estimated load time for current fragment: ${K.toFixed(3)} s
      Estimated load time for down switch fragment: ${X.toFixed(3)} s
      TTFB estimate: ${B|0} ms
      Current BW estimate: ${be(I)?I|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${C} @ ${j|0} bps`),a.nextLoadLevel=a.nextAutoLevel=C,this.clearTimer();const le=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===C&&C>0){const ae=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${C>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${ae.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,C>y){let ve=this.findBestLevel(this.hls.levels[y].bitrate,y,C,0,ae,1,1);ve===-1&&(ve=y),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ve,this.resetEstimator(this.hls.levels[ve].bitrate)}}};w||K>X*2?le():this.timer=self.setInterval(le,X*1e3),a.trigger(_.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:r,stats:d})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new VN(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.FRAG_LOADING,this.onFragLoading,this),e.on(_.FRAG_LOADED,this.onFragLoaded,this),e.on(_.FRAG_BUFFERED,this.onFragBuffered,this),e.on(_.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(_.LEVEL_LOADED,this.onLevelLoaded,this),e.on(_.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(_.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(_.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.FRAG_LOADING,this.onFragLoading,this),e.off(_.FRAG_LOADED,this.onFragLoaded,this),e.off(_.FRAG_BUFFERED,this.onFragBuffered,this),e.off(_.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(_.LEVEL_LOADED,this.onLevelLoaded,this),e.off(_.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(_.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(_.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case Z.BUFFER_ADD_CODEC_ERROR:case Z.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Z.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:i,partCurrent:r}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const a=performance.now(),l=r?r.stats:n.stats,u=a-l.loading.start,h=l.loading.first?l.loading.first-l.loading.start:-1;if(l.loaded&&h>-1){const g=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(u-Math.min(g,h),l.loaded)}else this.bwEstimator.sampleTTFB(u)}break}}}getTimeToLoadFrag(e,t,n,i){const r=e+n/t,a=i?e+this.lastLevelLoadSec:0;return r+a}onLevelLoaded(e,t){const n=this.hls.config,{loading:i}=t.stats,r=i.end-i.first;be(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===Te.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const r=n?n.duration:t.duration,a=this.hls.levels[t.level],l=(a.loaded?a.loaded.bytes:0)+i.loaded,u=(a.loaded?a.loaded.duration:0)+r;a.loaded={bytes:l,duration:u},a.realBitrate=Math.round(8*l/u)}if(t.bitrateTest){const r={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered(_.FRAG_BUFFERED,r),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:i}=t,r=i!=null&&i.stats.loaded?i.stats:n.stats;if(r.aborted||this.ignoreFragment(n))return;const a=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Te.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,r=this.findBestLevel(n,t,e,0,i,1,1);if(r>-1)return r;const a=this.hls.firstLevel,l=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${l}`),l}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,r)&&a[e].loadError<=a[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:i,config:r,minAutoLevel:a}=n,l=t?t.duration:e?e.duration:0,u=this.getBwEstimate(),h=this.getStarvationDelay();let d=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(h){const w=this.findBestLevel(u,a,i,h,0,d,g);if(w>=0)return this.rebufferNotice=-1,w}let p=l?Math.min(l,r.maxStarvationDelay):r.maxStarvationDelay;if(!h){const w=this.bitrateTestDelay;w&&(p=(l?Math.min(l,r.maxLoadingDelay):r.maxLoadingDelay)-w,this.info(`bitrate test took ${Math.round(1e3*w)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),d=g=1)}const y=this.findBestLevel(u,a,i,h,p,d,g);if(this.rebufferNotice!==y&&(this.rebufferNotice=y,this.info(`${h?"rebuffering expected":"buffer is empty"}, optimal quality level ${y}`)),y>-1)return y;const v=n.levels[a],b=n.loadLevelObj;return b&&(v==null?void 0:v.bitrate)<b.bitrate?a:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,i,r,a,l){var u;const h=i+r,d=this.lastLoadedFragLevel,g=d===-1?this.hls.firstLevel:d,{fragCurrent:p,partCurrent:y}=this,{levels:v,allAudioTracks:b,loadLevel:w,config:A}=this.hls;if(v.length===1)return 0;const S=v[g],T=!!((u=this.hls.latestLevelDetails)!=null&&u.live),D=w===-1||d===-1;let L,B="SDR",M=(S==null?void 0:S.frameRate)||0;const{audioPreference:I,videoPreference:N}=A,P=this.audioTracksByGroup||(this.audioTracksByGroup=bk(b));let z=-1;if(D){if(this.firstSelection!==-1)return this.firstSelection;const G=this.codecTiers||(this.codecTiers=CB(v,P,t,n)),J=DB(G,B,e,I,N),{codecSet:se,videoRanges:X,minFramerate:C,minBitrate:j,minIndex:re,preferHDR:le}=J;z=re,L=se,B=le?X[X.length-1]:X[0],M=C,e=Math.max(e,j),this.log(`picked start tier ${Ct(J)}`)}else L=S==null?void 0:S.codecSet,B=S==null?void 0:S.videoRange;const te=y?y.duration:p?p.duration:0,ye=this.bwEstimator.getEstimateTTFB()/1e3,me=[];for(let G=n;G>=t;G--){var K;const J=v[G],se=G>g;if(!J)continue;if(A.useMediaCapabilities&&!J.supportedResult&&!J.supportedPromise){const ve=navigator.mediaCapabilities;typeof(ve==null?void 0:ve.decodingInfo)=="function"&&(AB(J,P,B,M,e,I)||dm(J.videoCodec))?(J.supportedPromise=vk(J,P,ve),J.supportedPromise.then(xe=>{if(!this.hls)return;J.supportedResult=xe;const ze=this.hls.levels,ke=ze.indexOf(J);xe.error?this.warn(`MediaCapabilities decodingInfo error: "${xe.error}" for level ${ke} ${Ct(xe)}`):xe.supported||(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${ke} ${Ct(xe)}`),ke>-1&&ze.length>1&&(this.log(`Removing unsupported level ${ke}`),this.hls.removeLevel(ke),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):J.supportedResult=yk}if((L&&J.codecSet!==L||B&&J.videoRange!==B||se&&M>J.frameRate||!se&&M>0&&M<J.frameRate||J.supportedResult&&!((K=J.supportedResult.decodingInfoResults)!=null&&K[0].smooth))&&(!D||G!==z)){me.push(G);continue}const X=J.details,C=(y?X==null?void 0:X.partTarget:X==null?void 0:X.averagetargetduration)||te;let j;se?j=l*e:j=a*e;const re=te&&i>=te*2&&r===0?J.averageBitrate:J.maxBitrate,le=this.getTimeToLoadFrag(ye,j,re*C,X===void 0);if(j>=re&&(G===d||J.loadError===0&&J.fragmentError===0)&&(le<=ye||!be(le)||T&&!this.bitrateTestDelay||le<h)){const ve=this.forcedAutoLevel;return G!==w&&(ve===-1||ve!==w)&&(me.length&&this.trace(`Skipped level(s) ${me.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${v[me[0]].codecs}" ${v[me[0]].videoRange}; not compatible with "${L}" ${B}`),this.info(`switch candidate:${g}->${G} adjustedbw(${Math.round(j)})-bitrate=${Math.round(j-re)} ttfb:${ye.toFixed(1)} avgDuration:${C.toFixed(1)} maxFetchDuration:${h.toFixed(1)} fetchDuration:${le.toFixed(1)} firstSelection:${D} codecSet:${J.codecSet} videoRange:${J.videoRange} hls.loadLevel:${w}`)),D&&(this.firstSelection=G),G}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}}const _v={search:function(s,e){let t=0,n=s.length-1,i=null,r=null;for(;t<=n;){i=(t+n)/2|0,r=s[i];const a=e(r);if(a>0)t=i+1;else if(a<0)n=i-1;else return r}return null}};function NB(s,e,t){if(e===null||!Array.isArray(s)||!s.length||!be(e))return null;const n=s[0].programDateTime;if(e<(n||0))return null;const i=s[s.length-1].endProgramDateTime;if(e>=(i||0))return null;t=t||0;for(let r=0;r<s.length;++r){const a=s[r];if(FB(e,t,a))return a}return null}function Fl(s,e,t=0,n=0,i=.005){let r=null;if(s){r=e[1+s.sn-e[0].sn]||null;const l=s.endDTS-t;l>0&&l<15e-7&&(t+=15e-7),r&&s.level!==r.level&&r.end<=s.end&&(r=e[2+s.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(r=e[0]);if(r&&((!s||s.level===r.level)&&qA(t,n,r)===0||BB(r,s,Math.min(i,n))))return r;const a=_v.search(e,qA.bind(null,t,n));return a&&(a!==s||!r)?a:r}function BB(s,e,t){if(e&&e.start===0&&e.level<s.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,r)=>(r[0]==="INF"&&(i+=parseFloat(r[1])),i),t);return s.start<=n}return!1}function qA(s=0,e=0,t){if(t.start<=s&&t.start+t.duration>s)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=s?1:t.start-n>s&&t.start?-1:0}function FB(s,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>s}function Ek(s,e){return _v.search(s,t=>t.cc<e?1:t.cc>e?-1:0)}function UB(s,e,t){if(s&&s.startCC<=e&&s.endCC>=e){const n=t.start,i=t.end;let r=s.fragments;if(!t.relurl){const{fragmentHint:a}=s;a&&(r=r.concat(a))}return _v.search(r,a=>a.cc<e||a.end<=n?1:a.cc>e||a.start>=i?-1:0)}return null}function kg(s){switch(s.details){case Z.FRAG_LOAD_TIMEOUT:case Z.KEY_LOAD_TIMEOUT:case Z.LEVEL_LOAD_TIMEOUT:case Z.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function QA(s,e){const t=kg(e);return s.default[`${t?"timeout":"error"}Retry`]}function Rv(s,e){const t=s.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*s.retryDelayMs,s.maxRetryDelayMs)}function WA(s){return ht(ht({},s),{errorRetry:null,timeoutRetry:null})}function Lg(s,e,t,n){if(!s)return!1;const i=n==null?void 0:n.code,r=e<s.maxNumRetry&&(HB(i)||!!t);return s.shouldRetry?s.shouldRetry(s,e,t,n,r):r}function HB(s){return s===0&&navigator.onLine===!1||!!s&&(s<400||s>499)}var Hn={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},ci={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class GB extends ca{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(_.ERROR,this.onError,this),e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(_.ERROR,this.onError,this),e.off(_.ERROR,this.onErrorOut,this),e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Te.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const i=this.hls,r=t.context;switch(t.details){case Z.FRAG_LOAD_ERROR:case Z.FRAG_LOAD_TIMEOUT:case Z.KEY_LOAD_ERROR:case Z.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case Z.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction=nd();return}case Z.FRAG_GAP:case Z.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Hn.SendAlternateToPenaltyBox;return}case Z.LEVEL_EMPTY_ERROR:case Z.LEVEL_PARSING_ERROR:{var a,l;const h=t.parent===Te.MAIN?t.level:i.loadLevel;t.details===Z.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(l=a.levelDetails)!=null&&l.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,h):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,h))}return;case Z.LEVEL_LOAD_ERROR:case Z.LEVEL_LOAD_TIMEOUT:typeof(r==null?void 0:r.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.level));return;case Z.AUDIO_TRACK_LOAD_ERROR:case Z.AUDIO_TRACK_LOAD_TIMEOUT:case Z.SUBTITLE_LOAD_ERROR:case Z.SUBTITLE_TRACK_LOAD_TIMEOUT:if(r){const h=i.loadLevelObj;if(h&&(r.type===We.AUDIO_TRACK&&h.hasAudioGroup(r.groupId)||r.type===We.SUBTITLE_TRACK&&h.hasSubtitleGroup(r.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=Hn.SendAlternateToPenaltyBox,t.errorAction.flags=ci.MoveAllAlternatesMatchingHost;return}}return;case Z.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const h=i.loadLevelObj,d=h==null?void 0:h.attrs["HDCP-LEVEL"];d?t.errorAction={action:Hn.SendAlternateToPenaltyBox,flags:ci.MoveAllAlternatesMatchingHDCP,hdcpLevel:d}:this.keySystemError(t)}return;case Z.BUFFER_ADD_CODEC_ERROR:case Z.REMUX_ALLOC_ERROR:case Z.BUFFER_APPEND_ERROR:if(!t.errorAction){var u;t.errorAction=this.getLevelSwitchAction(t,(u=t.level)!=null?u:i.loadLevel)}return;case Z.INTERNAL_EXCEPTION:case Z.BUFFER_APPENDING_ERROR:case Z.BUFFER_FULL_ERROR:case Z.LEVEL_SWITCH_ERROR:case Z.BUFFER_STALLED_ERROR:case Z.BUFFER_SEEK_OVER_HOLE:case Z.BUFFER_NUDGE_ON_STALL:t.errorAction=nd();return}t.type===_e.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,i=QA(n.config.playlistLoadPolicy,e),r=this.playlistError++;if(Lg(i,r,kg(e),e.response))return{action:Hn.RetryRequest,flags:ci.None,retryConfig:i,retryCount:r};const l=this.getLevelSwitchAction(e,t);return i&&(l.retryConfig=i,l.retryCount=r),l}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:r,keyLoadPolicy:a}=t.config,l=QA(e.details.startsWith("key")?a:r,e),u=t.levels.reduce((d,g)=>d+g.fragmentError,0);if(i&&(e.details!==Z.FRAG_GAP&&i.fragmentError++,Lg(l,u,kg(e),e.response)))return{action:Hn.RetryRequest,flags:ci.None,retryConfig:l,retryCount:u};const h=this.getLevelSwitchAction(e,n);return l&&(h.retryConfig=l,h.retryCount=u),h}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const i=this.hls.levels[t];if(i){var r,a;const h=e.details;i.loadError++,h===Z.BUFFER_APPEND_ERROR&&i.fragmentError++;let d=-1;const{levels:g,loadLevel:p,minAutoLevel:y,maxAutoLevel:v}=n;n.autoLevelEnabled||(n.loadLevel=-1);const b=(r=e.frag)==null?void 0:r.type,A=(b===Te.AUDIO&&h===Z.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(h===Z.BUFFER_ADD_CODEC_ERROR||h===Z.BUFFER_APPEND_ERROR))&&g.some(({audioCodec:B})=>i.audioCodec!==B),T=e.sourceBufferName==="video"&&(h===Z.BUFFER_ADD_CODEC_ERROR||h===Z.BUFFER_APPEND_ERROR)&&g.some(({codecSet:B,audioCodec:M})=>i.codecSet!==B&&i.audioCodec===M),{type:D,groupId:L}=(a=e.context)!=null?a:{};for(let B=g.length;B--;){const M=(B+p)%g.length;if(M!==p&&M>=y&&M<=v&&g[M].loadError===0){var l,u;const I=g[M];if(h===Z.FRAG_GAP&&b===Te.MAIN&&e.frag){const N=g[M].details;if(N){const P=Fl(e.frag,N.fragments,e.frag.start);if(P!=null&&P.gap)continue}}else{if(D===We.AUDIO_TRACK&&I.hasAudioGroup(L)||D===We.SUBTITLE_TRACK&&I.hasSubtitleGroup(L))continue;if(b===Te.AUDIO&&(l=i.audioGroups)!=null&&l.some(N=>I.hasAudioGroup(N))||b===Te.SUBTITLE&&(u=i.subtitleGroups)!=null&&u.some(N=>I.hasSubtitleGroup(N))||A&&i.audioCodec===I.audioCodec||!A&&i.audioCodec!==I.audioCodec||T&&i.codecSet===I.codecSet)continue}d=M;break}}if(d>-1&&n.loadLevel!==d)return e.levelRetry=!0,this.playlistError=0,{action:Hn.SendAlternateToPenaltyBox,flags:ci.None,nextAutoLevel:d}}return{action:Hn.SendAlternateToPenaltyBox,flags:ci.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case Hn.DoNothing:break;case Hn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==Z.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i,hdcpLevel:r,nextAutoLevel:a}=n;switch(i){case ci.None:this.switchLevel(e,a);break;case ci.MoveAllAlternatesMatchingHDCP:r&&(t.maxHdcpLevel=s3[s3.indexOf(r)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}n.resolved||this.switchLevel(e,a)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===Z.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=pk(e.mimeType),i=this.hls.levels;for(let r=i.length;r--;)i[r][`${e.sourceBufferName}Codec`]===n&&this.hls.removeLevel(r)}}}function nd(s){const e={action:Hn.DoNothing,flags:ci.None};return s&&(e.resolved=!0),e}var hn={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class zB{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.BUFFER_APPENDED,this.onBufferAppended,this),e.on(_.FRAG_BUFFERED,this.onFragBuffered,this),e.on(_.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.BUFFER_APPENDED,this.onBufferAppended,this),e.off(_.FRAG_BUFFERED,this.onFragBuffered,this),e.off(_.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let i=n.length;i--;){const r=n[i];if(!r)break;const a=r.end;if(r.start<=e&&a!==null&&e<=a)return r}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:i}=this,r=Object.keys(i);for(let a=r.length;a--;){const l=i[r[a]];if((l==null?void 0:l.body.type)===t&&(!n||l.buffered)){const u=l.body;if(u.start<=e&&e<=u.end)return u}}return null}detectEvictedFragments(e,t,n,i,r){this.timeRanges&&(this.timeRanges[e]=t);const a=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(l=>{const u=this.fragments[l];if(!u||a>=u.body.sn)return;if(!u.buffered&&(!u.loaded||r)){u.body.type===n&&this.removeFragment(u.body);return}const h=u.range[e];if(h){if(h.time.length===0){this.removeFragment(u.body);return}h.time.some(d=>{const g=!this.isTimeBuffered(d.startPTS,d.endPTS,t);return g&&this.removeFragment(u.body),g})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const n=e.frag,i=Nc(n),r=this.fragments[i];if(!r||r.buffered&&n.gap)return;const a=!n.relurl;Object.keys(t).forEach(l=>{const u=n.elementaryStreams[l];if(!u)return;const h=t[l],d=a||u.partial===!0;r.range[l]=this.getBufferedTimes(n,e.part,d,h)}),r.loaded=null,Object.keys(r.range).length?(r.buffered=!0,(r.body.endList=n.endList||r.body.endList)&&(this.endListFragments[r.body.type]=r),h2(r)||this.removeParts(n.sn-1,n.type)):this.removeFragment(r.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=XA(n,i=>i.fragment.sn>=e))}fragBuffered(e,t){const n=Nc(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,n,i){const r={time:[],partial:n},a=e.start,l=e.end,u=e.minEndPTS||l,h=e.maxStartPTS||a;for(let d=0;d<i.length;d++){const g=i.start(d)-this.bufferPadding,p=i.end(d)+this.bufferPadding;if(h>=g&&u<=p){r.time.push({startPTS:Math.max(a,i.start(d)),endPTS:Math.min(l,i.end(d))});break}else if(a<p&&l>g){const y=Math.max(a,i.start(d)),v=Math.min(l,i.end(d));v>y&&(r.partial=!0,r.time.push({startPTS:y,endPTS:v}))}else if(l<=g)break}return r}getPartialFragment(e){let t=null,n,i,r,a=0;const{bufferPadding:l,fragments:u}=this;return Object.keys(u).forEach(h=>{const d=u[h];d&&h2(d)&&(i=d.body.start-l,r=d.body.end+l,e>=i&&e<=r&&(n=Math.min(e-i,r-e),a<=n&&(t=d.body,a=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||h2(t))}getState(e){const t=Nc(e),n=this.fragments[t];return n?n.buffered?h2(n)?hn.PARTIAL:hn.OK:hn.APPENDING:hn.NOT_LOADED}isTimeBuffered(e,t,n){let i,r;for(let a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,r=n.end(a)+this.bufferPadding,e>=i&&t<=r)return!0;if(t<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const n=t.frag,i=t.part?null:t,r=Nc(n);this.fragments[r]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:r,type:a}=t;if(n.sn==="initSegment")return;const l=n.type;if(i){let h=this.activePartLists[l];h||(this.activePartLists[l]=h=[]),h.push(i)}this.timeRanges=r;const u=r[a];this.detectEvictedFragments(a,u,l,i)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Nc(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let i=n.length;i--;){const r=t[n[i]];if((r==null?void 0:r.body.type)===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,i,r){i&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const l=this.fragments[a];if(!l)return;const u=l.body;u.type!==n||i&&!u.gap||u.start<t&&u.end>e&&(l.buffered||r)&&this.removeFragment(u)})}removeFragment(e){const t=Nc(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=XA(n,r=>r.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,t;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const n=(e=this.hls)==null||(t=e.latestLevelDetails)==null?void 0:t.partList;n&&n.forEach(i=>i.clearElementaryStreamInfo())}}function h2(s){var e,t,n;return s.buffered&&(s.body.gap||((e=s.range.video)==null?void 0:e.partial)||((t=s.range.audio)==null?void 0:t.partial)||((n=s.range.audiovideo)==null?void 0:n.partial))}function Nc(s){return`${s.type}_${s.level}_${s.sn}`}function XA(s,e){return s.filter(t=>{const n=e(t);return n||t.clearElementaryStreamInfo(),n})}var po={cbc:0,ctr:1};class $B{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case po.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case po.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function VB(s){const e=s.byteLength,t=e&&new DataView(s.buffer).getUint8(e-1);return t?s.slice(0,e-t):s}class YB{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=t.getUint32(i*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],l=n[3],u=this.invSubMix,h=u[0],d=u[1],g=u[2],p=u[3],y=new Uint32Array(256);let v=0,b=0,w=0;for(w=0;w<256;w++)w<128?y[w]=w<<1:y[w]=w<<1^283;for(w=0;w<256;w++){let A=b^b<<1^b<<2^b<<3^b<<4;A=A>>>8^A&255^99,e[v]=A,t[A]=v;const S=y[v],T=y[S],D=y[T];let L=y[A]*257^A*16843008;i[v]=L<<24|L>>>8,r[v]=L<<16|L>>>16,a[v]=L<<8|L>>>24,l[v]=L,L=D*16843009^T*65537^S*257^v*16843008,h[A]=L<<24|L>>>8,d[A]=L<<16|L>>>16,g[A]=L<<8|L>>>24,p[A]=L,v?(v=S^y[y[y[D^S]]],b^=y[y[b]]):v=b=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const r=this.keySize=t.length;if(r!==4&&r!==6&&r!==8)throw new Error("Invalid aes key size="+r);const a=this.ksRows=(r+6+1)*4;let l,u;const h=this.keySchedule=new Uint32Array(a),d=this.invKeySchedule=new Uint32Array(a),g=this.sBox,p=this.rcon,y=this.invSubMix,v=y[0],b=y[1],w=y[2],A=y[3];let S,T;for(l=0;l<a;l++){if(l<r){S=h[l]=t[l];continue}T=S,l%r===0?(T=T<<8|T>>>24,T=g[T>>>24]<<24|g[T>>>16&255]<<16|g[T>>>8&255]<<8|g[T&255],T^=p[l/r|0]<<24):r>6&&l%r===4&&(T=g[T>>>24]<<24|g[T>>>16&255]<<16|g[T>>>8&255]<<8|g[T&255]),h[l]=S=(h[l-r]^T)>>>0}for(u=0;u<a;u++)l=a-u,u&3?T=h[l]:T=h[l-4],u<4||l<=4?d[u]=T:d[u]=v[g[T>>>24]]^b[g[T>>>16&255]]^w[g[T>>>8&255]]^A[g[T&255]],d[u]=d[u]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,r=this.invKeySchedule,a=this.invSBox,l=this.invSubMix,u=l[0],h=l[1],d=l[2],g=l[3],p=this.uint8ArrayToUint32Array_(n);let y=p[0],v=p[1],b=p[2],w=p[3];const A=new Int32Array(e),S=new Int32Array(A.length);let T,D,L,B,M,I,N,P,z,te,ye,me,K,G;const J=this.networkToHostOrderSwap;for(;t<A.length;){for(z=J(A[t]),te=J(A[t+1]),ye=J(A[t+2]),me=J(A[t+3]),M=z^r[0],I=me^r[1],N=ye^r[2],P=te^r[3],K=4,G=1;G<i;G++)T=u[M>>>24]^h[I>>16&255]^d[N>>8&255]^g[P&255]^r[K],D=u[I>>>24]^h[N>>16&255]^d[P>>8&255]^g[M&255]^r[K+1],L=u[N>>>24]^h[P>>16&255]^d[M>>8&255]^g[I&255]^r[K+2],B=u[P>>>24]^h[M>>16&255]^d[I>>8&255]^g[N&255]^r[K+3],M=T,I=D,N=L,P=B,K=K+4;T=a[M>>>24]<<24^a[I>>16&255]<<16^a[N>>8&255]<<8^a[P&255]^r[K],D=a[I>>>24]<<24^a[N>>16&255]<<16^a[P>>8&255]<<8^a[M&255]^r[K+1],L=a[N>>>24]<<24^a[P>>16&255]<<16^a[M>>8&255]<<8^a[I&255]^r[K+2],B=a[P>>>24]<<24^a[M>>16&255]<<16^a[I>>8&255]<<8^a[N&255]^r[K+3],S[t]=J(T^y),S[t+1]=J(B^v),S[t+2]=J(L^b),S[t+3]=J(D^w),y=z,v=te,b=ye,w=me,t=t+4}return S.buffer}}class KB{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=jB(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function jB(s){switch(s){case po.cbc:return"AES-CBC";case po.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${s}`)}}const qB=16;class kv{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?VB(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,i){return this.useSoftware?new Promise((r,a)=>{const l=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(l,t,n,i);const u=this.flush();u?r(u.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,i)}softwareDecrypt(e,t,n,i){const{currentIV:r,currentResult:a,remainderData:l}=this;if(i!==po.cbc||t.byteLength!==16)return et.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),l&&(e=Js(l,e),this.remainderData=null);const u=this.getValidChunk(e);if(!u.length)return null;r&&(n=r);let h=this.softwareDecrypter;h||(h=this.softwareDecrypter=new YB),h.expandKey(t);const d=a;return this.currentResult=h.decrypt(u.buffer,0,n),this.currentIV=u.slice(-16).buffer,d||null}webCryptoDecrypt(e,t,n,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,i));this.key=t,this.fastAesKey=new KB(this.subtle,t,i)}return this.fastAesKey.expandKey().then(r=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new $B(this.subtle,new Uint8Array(n),i).decrypt(e.buffer,r)):Promise.reject(new Error("web crypto not initialized"))).catch(r=>(et.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,n,i)))}onWebCryptoError(e,t,n,i){const r=this.enableSoftwareAES;if(r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,i);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(r?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%qB;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(et.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const ZA=Math.pow(2,17);class QB{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new Or({type:_e.NETWORK_ERROR,details:Z.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,r=i.fLoader,a=i.loader;return new Promise((l,u)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(v=>v[0]==="GAP")){u(eT(e));return}else e.gap=!1;const h=this.loader=r?new r(i):new a(i),d=JA(e);e.loader=h;const g=WA(i.fragLoadPolicy.default),p={loadPolicy:g,timeout:g.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:ZA};e.stats=h.stats;const y={onSuccess:(v,b,w,A)=>{this.resetLoader(e,h);let S=v.data;w.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(S.slice(0,16)),S=S.slice(16)),l({frag:e,part:null,payload:S,networkDetails:A})},onError:(v,b,w,A)=>{this.resetLoader(e,h),u(new Or({type:_e.NETWORK_ERROR,details:Z.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ht({url:n,data:void 0},v),error:new Error(`HTTP Error ${v.code} ${v.text}`),networkDetails:w,stats:A}))},onAbort:(v,b,w)=>{this.resetLoader(e,h),u(new Or({type:_e.NETWORK_ERROR,details:Z.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:w,stats:v}))},onTimeout:(v,b,w)=>{this.resetLoader(e,h),u(new Or({type:_e.NETWORK_ERROR,details:Z.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:w,stats:v}))}};t&&(y.onProgress=(v,b,w,A)=>t({frag:e,part:null,payload:w,networkDetails:A})),h.load(d,p,y)})}loadPart(e,t,n){this.abort();const i=this.config,r=i.fLoader,a=i.loader;return new Promise((l,u)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){u(eT(e,t));return}const h=this.loader=r?new r(i):new a(i),d=JA(e,t);e.loader=h;const g=WA(i.fragLoadPolicy.default),p={loadPolicy:g,timeout:g.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:ZA};t.stats=h.stats,h.load(d,p,{onSuccess:(y,v,b,w)=>{this.resetLoader(e,h),this.updateStatsFromPart(e,t);const A={frag:e,part:t,payload:y.data,networkDetails:w};n(A),l(A)},onError:(y,v,b,w)=>{this.resetLoader(e,h),u(new Or({type:_e.NETWORK_ERROR,details:Z.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:ht({url:d.url,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:b,stats:w}))},onAbort:(y,v,b)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,h),u(new Or({type:_e.NETWORK_ERROR,details:Z.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:b,stats:y}))},onTimeout:(y,v,b)=>{this.resetLoader(e,h),u(new Or({type:_e.NETWORK_ERROR,details:Z.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${p.timeout}ms`),networkDetails:b,stats:y}))}})})}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,r=i.total;if(n.loaded+=i.loaded,r){const u=Math.round(e.duration/t.duration),h=Math.min(Math.round(n.loaded/r),u),g=(u-h)*Math.round(n.loaded/h);n.total=n.loaded+g}else n.total=Math.max(n.loaded,n.total);const a=n.loading,l=i.loading;a.start?a.first+=l.first-l.start:(a.start=l.start,a.first=l.first),a.end=l.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function JA(s,e=null){const t=e||s,n={frag:s,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,r=t.byteRangeEndOffset;if(be(i)&&be(r)){var a;let l=i,u=r;if(s.sn==="initSegment"&&WB((a=s.decryptdata)==null?void 0:a.method)){const h=r-i;h%16&&(u=r+(16-h%16)),i!==0&&(n.resetIV=!0,l=i-16)}n.rangeStart=l,n.rangeEnd=u}return n}function eT(s,e){const t=new Error(`GAP ${s.gap?"tag":"attribute"} found`),n={type:_e.MEDIA_ERROR,details:Z.FRAG_GAP,fatal:!1,frag:s,error:t,networkDetails:null};return e&&(n.part=e),(e||s).stats.aborted=!0,new Or(n)}function WB(s){return s==="AES-128"||s==="AES-256"}class Or extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class wk extends ca{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class Lv{constructor(e,t,n,i=0,r=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=f2(),this.buffering={audio:f2(),video:f2(),audiovideo:f2()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=r,this.partial=a}}function f2(){return{start:0,executeStart:0,executeEnd:0,end:0}}const tT={length:0,start:()=>0,end:()=>0};class Ve{static isBuffered(e,t){if(e){const n=Ve.getBuffered(e);for(let i=n.length;i--;)if(t>=n.start(i)&&t<=n.end(i))return!0}return!1}static bufferedRanges(e){if(e){const t=Ve.getBuffered(e);return Ve.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const i=Ve.bufferedRanges(e);if(i.length)return Ve.bufferedInfo(i,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((d,g)=>d.start-g.start||g.end-d.end);let i=-1,r=[];if(n)for(let d=0;d<e.length;d++){t>=e[d].start&&t<=e[d].end&&(i=d);const g=r.length;if(g){const p=r[g-1].end;e[d].start-p<n?e[d].end>p&&(r[g-1].end=e[d].end):r.push(e[d])}else r.push(e[d])}else r=e;let a=0,l,u=t,h=t;for(let d=0;d<r.length;d++){const g=r[d].start,p=r[d].end;if(i===-1&&t>=g&&t<=p&&(i=d),t+n>=g&&t<p)u=g,h=p,a=h-t;else if(t+n<g){l=g;break}}return{len:a,start:u||0,end:h||0,nextStart:l,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||tT}catch(t){return et.log("failed to get media.buffered",t),tT}}}const Ak=/\{\$([a-zA-Z0-9-_]+)\}/g;function nT(s){return Ak.test(s)}function i3(s,e){if(s.variableList!==null||s.hasVariableRefs){const t=s.variableList;return e.replace(Ak,n=>{const i=n.substring(2,n.length-1),r=t==null?void 0:t[i];return r===void 0?(s.playlistParsingError||(s.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):r})}return e}function sT(s,e,t){let n=s.variableList;n||(s.variableList=n={});let i,r;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(i))r=a.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(a){s.playlistParsingError||(s.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else i=e.NAME,r=e.VALUE;i in n?s.playlistParsingError||(s.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=r||""}function XB(s,e,t){const n=e.IMPORT;if(t&&n in t){let i=s.variableList;i||(s.variableList=i={}),i[n]=t[n]}else s.playlistParsingError||(s.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const ZB=/^(\d+)x(\d+)$/,iT=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Nt{constructor(e,t){typeof e=="string"&&(e=Nt.parseAttrList(e,t)),yt(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(i*2,i*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((i,r)=>(i[r.toLowerCase()]=!0,i),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=ZB.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const i={},r='"';for(iT.lastIndex=0;(n=iT.exec(e))!==null;){const a=n[1].trim();let l=n[2];const u=l.indexOf(r)===0&&l.lastIndexOf(r)===l.length-1;let h=!1;if(u)l=l.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":h=!0}if(t&&(u||h))l=i3(t,l);else if(!h&&!u)switch(a){case"CLOSED-CAPTIONS":if(l==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":et.warn(`${e}: attribute ${a} is missing quotes`)}i[a]=l}return i}}const JB="com.apple.hls.interstitial";function e8(s){return s!=="ID"&&s!=="CLASS"&&s!=="CUE"&&s!=="START-DATE"&&s!=="DURATION"&&s!=="END-DATE"&&s!=="END-ON-NEXT"}function t8(s){return s==="SCTE35-OUT"||s==="SCTE35-IN"||s==="SCTE35-CMD"}class Tk{constructor(e,t,n=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(t==null?void 0:t.tagAnchor)||null,this.tagOrder=(i=t==null?void 0:t.tagOrder)!=null?i:n,t){const r=t.attr;for(const a in r)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==r[a]){et.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=yt(new Nt({}),r,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const r=(t==null?void 0:t.endDate)||new Date(this.attr["END-DATE"]);be(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(et.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(be(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===JB}get isValid(){return!!this.id&&!this._badValueForSameId&&be(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const n8=10;class s8{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?be(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||n8}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function tu(s){return s==="AES-128"||s==="AES-256"||s==="AES-256-CTR"}function Dv(s){switch(s){case"AES-128":case"AES-256":return po.cbc;case"AES-256-CTR":return po.ctr;default:throw new Error(`invalid full segment method ${s}`)}}function Cv(s){return Uint8Array.from(atob(s),e=>e.charCodeAt(0))}function r3(s){return Uint8Array.from(unescape(encodeURIComponent(s)),e=>e.charCodeAt(0))}function i8(s){const e=r3(s).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function r8(s){const e=function(n,i,r){const a=n[i];n[i]=n[r],n[r]=a};e(s,0,3),e(s,1,2),e(s,4,5),e(s,6,7)}function a8(s){const e=s.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const r=i[0]==="base64",a=i[1];r?(n.splice(-1,1),t=Cv(a)):t=i8(a)}}return t}const Dg=typeof self<"u"?self:void 0;var ft={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},os={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function tx(s){switch(s){case os.FAIRPLAY:return ft.FAIRPLAY;case os.PLAYREADY:return ft.PLAYREADY;case os.WIDEVINE:return ft.WIDEVINE;case os.CLEARKEY:return ft.CLEARKEY}}var d2={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function nx(s){if(s===d2.WIDEVINE)return ft.WIDEVINE;if(s===d2.PLAYREADY)return ft.PLAYREADY;if(s===d2.CENC||s===d2.CLEARKEY)return ft.CLEARKEY}function sx(s){switch(s){case ft.FAIRPLAY:return os.FAIRPLAY;case ft.PLAYREADY:return os.PLAYREADY;case ft.WIDEVINE:return os.WIDEVINE;case ft.CLEARKEY:return os.CLEARKEY}}function g2(s){const{drmSystems:e,widevineLicenseUrl:t}=s,n=e?[ft.FAIRPLAY,ft.WIDEVINE,ft.PLAYREADY,ft.CLEARKEY].filter(i=>!!e[i]):[];return!n[ft.WIDEVINE]&&t&&n.push(ft.WIDEVINE),n}const Sk=function(s){return Dg!=null&&(s=Dg.navigator)!=null&&s.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function o8(s,e,t,n){let i;switch(s){case ft.FAIRPLAY:i=["cenc","sinf"];break;case ft.WIDEVINE:case ft.PLAYREADY:i=["cenc"];break;case ft.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${s}`)}return l8(i,e,t,n)}function l8(s,e,t,n){return[{initDataTypes:s,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(r=>({contentType:`audio/mp4; codecs=${r}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(r=>({contentType:`video/mp4; codecs=${r}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function c8(s){var e;return s.sessionType==="persistent-license"||!!((e=s.sessionTypes)!=null&&e.some(t=>t==="persistent-license"))}function _k(s){const e=new Uint16Array(s.buffer,s.byteOffset,s.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(a){const l=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(l){const u=Cv(l).subarray(0,16);return r8(u),u}}return null}let m2={};class sd{static clearKeyUriToKeyIdMap(){m2={}}constructor(e,t,n,i=[1],r=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=r,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!tu(e)}isSupported(){if(this.method){if(tu(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case os.FAIRPLAY:case os.WIDEVINE:case os.PLAYREADY:case os.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(tu(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(et.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const n=u8(e);return new sd(this.method,this.uri,"identity",this.keyFormatVersions,n)}const t=a8(this.uri);if(t)switch(this.keyFormat){case os.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case os.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=mB(n,null,t),this.keyId=_k(t);break}default:{let n=t.subarray(0,16);if(n.length!==16){const i=new Uint8Array(16);i.set(n,16-n.length),n=i}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=m2[this.uri];if(!n){const i=Object.keys(m2).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,i),m2[this.uri]=n}this.keyId=n}return this}}function u8(s){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=s>>8*(15-t)&255;return e}const rT=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,aT=/#EXT-X-MEDIA:(.*)/g,h8=/^#EXT(?:INF|-X-TARGETDURATION):/m,ix=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),f8=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class tr{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static resolve(e,t){return Av.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return h8.test(e)}static parseMasterPlaylist(e,t){const n=nT(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},r=[];rT.lastIndex=0;let a;for(;(a=rT.exec(e))!=null;)if(a[1]){var l;const h=new Nt(a[1],i),d=i3(i,a[2]),g={attrs:h,bitrate:h.decimalInteger("BANDWIDTH")||h.decimalInteger("AVERAGE-BANDWIDTH"),name:h.NAME,url:tr.resolve(d,t)},p=h.decimalResolution("RESOLUTION");p&&(g.width=p.width,g.height=p.height),cT(h.CODECS,g);const y=h["SUPPLEMENTAL-CODECS"];y&&(g.supplemental={},cT(y,g.supplemental)),(l=g.unknownCodecs)!=null&&l.length||r.push(g),i.levels.push(g)}else if(a[3]){const h=a[3],d=a[4];switch(h){case"SESSION-DATA":{const g=new Nt(d,i),p=g["DATA-ID"];p&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[p]=g);break}case"SESSION-KEY":{const g=oT(d,t,i);g.encrypted&&g.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(g)):et.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${d}"`);break}case"DEFINE":{{const g=new Nt(d,i);sT(i,g,t)}break}case"CONTENT-STEERING":{const g=new Nt(d,i);i.contentSteering={uri:tr.resolve(g["SERVER-URI"],t),pathwayId:g["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=lT(d);break}}}const u=r.length>0&&r.length<i.levels.length;return i.levels=u?r:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,n){let i;const r={},a=n.levels,l={AUDIO:a.map(h=>({id:h.attrs.AUDIO,audioCodec:h.audioCodec})),SUBTITLES:a.map(h=>({id:h.attrs.SUBTITLES,textCodec:h.textCodec})),"CLOSED-CAPTIONS":[]};let u=0;for(aT.lastIndex=0;(i=aT.exec(e))!==null;){const h=new Nt(i[1],n),d=h.TYPE;if(d){const g=l[d],p=r[d]||[];r[d]=p;const y=h.LANGUAGE,v=h["ASSOC-LANGUAGE"],b=h.CHANNELS,w=h.CHARACTERISTICS,A=h["INSTREAM-ID"],S={attrs:h,bitrate:0,id:u++,groupId:h["GROUP-ID"]||"",name:h.NAME||y||"",type:d,default:h.bool("DEFAULT"),autoselect:h.bool("AUTOSELECT"),forced:h.bool("FORCED"),lang:y,url:h.URI?tr.resolve(h.URI,t):""};if(v&&(S.assocLang=v),b&&(S.channels=b),w&&(S.characteristics=w),A&&(S.instreamId=A),g!=null&&g.length){const T=tr.findGroup(g,S.groupId)||g[0];uT(S,T,"audioCodec"),uT(S,T,"textCodec")}p.push(S)}}return r}static parseLevelPlaylist(e,t,n,i,r,a){var l;const u={url:t},h=new s8(t),d=h.fragments,g=[];let p=null,y=0,v=0,b=0,w=0,A=0,S=null,T=new Xy(i,u),D,L,B,M=-1,I=!1,N=null,P;if(ix.lastIndex=0,h.m3u8=e,h.hasVariableRefs=nT(e),((l=ix.exec(e))==null?void 0:l[0])!=="#EXTM3U")return h.playlistParsingError=new Error("Missing format identifier #EXTM3U"),h;for(;(D=ix.exec(e))!==null;){I&&(I=!1,T=new Xy(i,u),T.playlistOffset=b,T.start=b,T.sn=y,T.cc=w,A&&(T.bitrate=A),T.level=n,p&&(T.initSegment=p,p.rawProgramDateTime&&(T.rawProgramDateTime=p.rawProgramDateTime,p.rawProgramDateTime=null),N&&(T.setByteRange(N),N=null)));const me=D[1];if(me){T.duration=parseFloat(me);const K=(" "+D[2]).slice(1);T.title=K||null,T.tagList.push(K?["INF",me,K]:["INF",me])}else if(D[3]){if(be(T.duration)){T.playlistOffset=b,T.start=b,B&&fT(T,B,h),T.sn=y,T.level=n,T.cc=w,d.push(T);const K=(" "+D[3]).slice(1);T.relurl=i3(h,K),a3(T,S,g),S=T,b+=T.duration,y++,v=0,I=!0}}else{if(D=D[0].match(f8),!D){et.warn("No matches on slow regex match for level playlist!");continue}for(L=1;L<D.length&&D[L]===void 0;L++);const K=(" "+D[L]).slice(1),G=(" "+D[L+1]).slice(1),J=D[L+2]?(" "+D[L+2]).slice(1):null;switch(K){case"BYTERANGE":S?T.setByteRange(G,S):T.setByteRange(G);break;case"PROGRAM-DATE-TIME":T.rawProgramDateTime=G,T.tagList.push(["PROGRAM-DATE-TIME",G]),M===-1&&(M=d.length);break;case"PLAYLIST-TYPE":h.type&&_r(h,K,D),h.type=G.toUpperCase();break;case"MEDIA-SEQUENCE":h.startSN!==0?_r(h,K,D):d.length>0&&dT(h,K,D),y=h.startSN=parseInt(G);break;case"SKIP":{h.skippedSegments&&_r(h,K,D);const se=new Nt(G,h),X=se.decimalInteger("SKIPPED-SEGMENTS");if(be(X)){h.skippedSegments+=X;for(let j=X;j--;)d.push(null);y+=X}const C=se.enumeratedString("RECENTLY-REMOVED-DATERANGES");C&&(h.recentlyRemovedDateranges=(h.recentlyRemovedDateranges||[]).concat(C.split("	")));break}case"TARGETDURATION":h.targetduration!==0&&_r(h,K,D),h.targetduration=Math.max(parseInt(G),1);break;case"VERSION":h.version!==null&&_r(h,K,D),h.version=parseInt(G);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":h.live||_r(h,K,D),h.live=!1;break;case"#":(G||J)&&T.tagList.push(J?[G,J]:[G]);break;case"DISCONTINUITY":w++,T.tagList.push(["DIS"]);break;case"GAP":T.gap=!0,T.tagList.push([K]);break;case"BITRATE":T.tagList.push([K,G]),A=parseInt(G)*1e3,be(A)?T.bitrate=A:A=0;break;case"DATERANGE":{const se=new Nt(G,h),X=new Tk(se,h.dateRanges[se.ID],h.dateRangeTagCount);h.dateRangeTagCount++,X.isValid||h.skippedSegments?h.dateRanges[X.id]=X:et.warn(`Ignoring invalid DATERANGE tag: "${G}"`),T.tagList.push(["EXT-X-DATERANGE",G]);break}case"DEFINE":{{const se=new Nt(G,h);"IMPORT"in se?XB(h,se,a):sT(h,se,t)}break}case"DISCONTINUITY-SEQUENCE":h.startCC!==0?_r(h,K,D):d.length>0&&dT(h,K,D),h.startCC=w=parseInt(G);break;case"KEY":{const se=oT(G,t,h);if(se.isSupported()){if(se.method==="NONE"){B=void 0;break}B||(B={}),B[se.keyFormat]&&(B=yt({},B)),B[se.keyFormat]=se}else et.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${G}"`);break}case"START":h.startTimeOffset=lT(G);break;case"MAP":{const se=new Nt(G,h);if(T.duration){const X=new Xy(i,u);hT(X,se,n,B),p=X,T.initSegment=p,p.rawProgramDateTime&&!T.rawProgramDateTime&&(T.rawProgramDateTime=p.rawProgramDateTime)}else{const X=T.byteRangeEndOffset;if(X){const C=T.byteRangeStartOffset;N=`${X-C}@${C}`}else N=null;hT(T,se,n,B),p=T,I=!0}p.cc=w;break}case"SERVER-CONTROL":{P&&_r(h,K,D),P=new Nt(G),h.canBlockReload=P.bool("CAN-BLOCK-RELOAD"),h.canSkipUntil=P.optionalFloat("CAN-SKIP-UNTIL",0),h.canSkipDateRanges=h.canSkipUntil>0&&P.bool("CAN-SKIP-DATERANGES"),h.partHoldBack=P.optionalFloat("PART-HOLD-BACK",0),h.holdBack=P.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{h.partTarget&&_r(h,K,D);const se=new Nt(G);h.partTarget=se.decimalFloatingPoint("PART-TARGET");break}case"PART":{let se=h.partList;se||(se=h.partList=[]);const X=v>0?se[se.length-1]:void 0,C=v++,j=new Nt(G,h),re=new eB(j,T,u,C,X);se.push(re),T.duration+=re.duration;break}case"PRELOAD-HINT":{const se=new Nt(G,h);h.preloadHint=se;break}case"RENDITION-REPORT":{const se=new Nt(G,h);h.renditionReports=h.renditionReports||[],h.renditionReports.push(se);break}default:et.warn(`line parsed but not handled: ${D}`);break}}}S&&!S.relurl?(d.pop(),b-=S.duration,h.partList&&(h.fragmentHint=S)):h.partList&&(a3(T,S,g),T.cc=w,h.fragmentHint=T,B&&fT(T,B,h)),h.targetduration||(h.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const z=d.length,te=d[0],ye=d[z-1];if(b+=h.skippedSegments*h.targetduration,b>0&&z&&ye){h.averagetargetduration=b/z;const me=ye.sn;h.endSN=me!=="initSegment"?me:0,h.live||(ye.endList=!0),te&&h.startCC===void 0&&(h.startCC=te.cc),M>0&&(g8(d,M),te&&g.unshift(te))}else h.endSN=0,h.startCC=0;return h.fragmentHint&&(b+=h.fragmentHint.duration),h.totalduration=b,g.length&&h.dateRangeTagCount&&te&&Rk(g,h),h.endCC=w,h}}function Rk(s,e){const t=s.length,n=s[t-1],i=e.live?1/0:e.totalduration,r=Object.keys(e.dateRanges);for(let a=r.length;a--;){const l=e.dateRanges[r[a]],u=l.startDate.getTime();l.tagAnchor=n.ref;for(let h=t;h--;){const d=d8(e,u,s,h,i);if(d!==-1){l.tagAnchor=e.fragments[d].ref;break}}}}function d8(s,e,t,n,i){const r=t[n];if(r){const l=r.programDateTime;if(e>=l||n===0){var a;const u=(((a=t[n+1])==null?void 0:a.start)||i)-r.start;if(e<=l+u*1e3){const h=t[n].sn-s.startSN,d=s.fragments;if(d.length>t.length){const p=(t[n+1]||d[d.length-1]).sn-s.startSN;for(let y=p;y>h;y--){const v=d[y].programDateTime;if(e>=v&&e<v+d[y].duration*1e3)return y}}return h}}}return-1}function oT(s,e,t){var n,i;const r=new Nt(s,t),a=(n=r.METHOD)!=null?n:"",l=r.URI,u=r.hexadecimalInteger("IV"),h=r.KEYFORMATVERSIONS,d=(i=r.KEYFORMAT)!=null?i:"identity";l&&r.IV&&!u&&et.error(`Invalid IV: ${r.IV}`);const g=l?tr.resolve(l,e):"",p=(h||"1").split("/").map(Number).filter(Number.isFinite);return new sd(a,g,d,p,u)}function lT(s){const t=new Nt(s).decimalFloatingPoint("TIME-OFFSET");return be(t)?t:null}function cT(s,e){let t=(s||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=t.filter(r=>gk(r,n));i.length&&(e[`${n}Codec`]=i.map(r=>r.split("/")[0]).join(","),t=t.filter(r=>i.indexOf(r)===-1))}),e.unknownCodecs=t}function uT(s,e,t){const n=e[t];n&&(s[t]=n)}function g8(s,e){let t=s[e];for(let n=e;n--;){const i=s[n];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function a3(s,e,t){s.rawProgramDateTime?t.push(s):e!=null&&e.programDateTime&&(s.programDateTime=e.endProgramDateTime)}function hT(s,e,t,n){s.relurl=e.URI,e.BYTERANGE&&s.setByteRange(e.BYTERANGE),s.level=t,s.sn="initSegment",n&&(s.levelkeys=n),s.initSegment=null}function fT(s,e,t){s.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(s)}function _r(s,e,t){s.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function dT(s,e,t){s.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function rx(s,e){const t=e.startPTS;if(be(t)){let n=0,i;e.sn>s.sn?(n=t-s.start,i=s):(n=s.start-t,i=e),i.duration!==n&&i.setDuration(n)}else e.sn>s.sn?s.cc===e.cc&&s.minEndPTS?e.setStart(s.start+(s.minEndPTS-s.start)):e.setStart(s.start+s.duration):e.setStart(Math.max(s.start-e.duration,0))}function kk(s,e,t,n,i,r){n-t<=0&&(et.warn("Fragment should have a positive duration",e),n=t+e.duration,r=i+e.duration);let l=t,u=n;const h=e.startPTS,d=e.endPTS;if(be(h)){const w=Math.abs(h-t);be(e.deltaPTS)?e.deltaPTS=Math.max(w,e.deltaPTS):e.deltaPTS=w,l=Math.max(t,h),t=Math.min(t,h),i=Math.min(i,e.startDTS),u=Math.min(n,d),n=Math.max(n,d),r=Math.max(r,e.endDTS)}const g=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(n-e.start),e.startPTS=t,e.maxStartPTS=l,e.startDTS=i,e.endPTS=n,e.minEndPTS=u,e.endDTS=r;const p=e.sn;if(!s||p<s.startSN||p>s.endSN)return 0;let y;const v=p-s.startSN,b=s.fragments;for(b[v]=e,y=v;y>0;y--)rx(b[y],b[y-1]);for(y=v;y<b.length-1;y++)rx(b[y],b[y+1]);return s.fragmentHint&&rx(b[b.length-1],s.fragmentHint),s.PTSKnown=s.alignedSliding=!0,g}function m8(s,e){if(s===e)return;let t=null;const n=s.fragments;for(let u=n.length-1;u>=0;u--){const h=n[u].initSegment;if(h){t=h;break}}s.fragmentHint&&delete s.fragmentHint.endPTS;let i;x8(s,e,(u,h,d,g)=>{if(!e.startCC&&h.cc!==u.cc){var p,y;const v=u.cc-h.cc;for(let b=d;b<g.length;b++)g[b].cc+=v;e.startCC=(p=(y=Ck(s,e.startSN-1))==null?void 0:y.cc)!=null?p:g[0].cc,e.endCC=g[g.length-1].cc}be(u.startPTS)&&be(u.endPTS)&&(h.setStart(h.startPTS=u.startPTS),h.startDTS=u.startDTS,h.maxStartPTS=u.maxStartPTS,h.endPTS=u.endPTS,h.endDTS=u.endDTS,h.minEndPTS=u.minEndPTS,h.setDuration(u.endPTS-u.startPTS),h.duration&&(i=h),e.PTSKnown=e.alignedSliding=!0),u.hasStreams&&(h.elementaryStreams=u.elementaryStreams),h.loader=u.loader,u.hasStats&&(h.stats=u.stats),u.initSegment&&(h.initSegment=u.initSegment,t=u.initSegment)});const r=e.fragments,a=e.fragmentHint?r.concat(e.fragmentHint):r;if(t&&a.forEach(u=>{var h;u&&(!u.initSegment||u.initSegment.relurl===((h=t)==null?void 0:h.relurl))&&(u.initSegment=t)}),e.skippedSegments)if(e.deltaUpdateFailed=r.some(u=>!u),e.deltaUpdateFailed){et.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let u=e.skippedSegments;u--;)r.shift();e.startSN=r[0].sn}else{e.endCC=r[r.length-1].cc,e.canSkipDateRanges&&(e.dateRanges=p8(s.dateRanges,e));const u=s.fragments.filter(h=>h.rawProgramDateTime);if(s.hasProgramDateTime&&!e.hasProgramDateTime)for(let h=1;h<a.length;h++)a[h].programDateTime===null&&a3(a[h],a[h-1],u);Rk(u,e)}y8(s.partList,e.partList,(u,h)=>{h.elementaryStreams=u.elementaryStreams,h.stats=u.stats}),i?kk(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):Lk(s,e),r.length&&(e.totalduration=e.edge-r[0].start),e.driftStartTime=s.driftStartTime,e.driftStart=s.driftStart;const l=e.advancedDateTime;if(e.advanced&&l){const u=e.edge;e.driftStart||(e.driftStartTime=l,e.driftStart=u),e.driftEndTime=l,e.driftEnd=u}else e.driftEndTime=s.driftEndTime,e.driftEnd=s.driftEnd,e.advancedDateTime=s.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=s.requestScheduled)}function p8(s,e){const{dateRanges:t,recentlyRemovedDateranges:n}=e,i=yt({},s);n&&n.forEach(l=>{delete i[l]});const a=Object.keys(i).length;return a&&Object.keys(t).forEach(l=>{const u=i[l],h=new Tk(t[l].attr,u);h.isValid?(i[l]=h,u||(h.tagOrder+=a)):et.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Ct(t[l].attr)}"`)}),i}function y8(s,e,t){if(s&&e){let n=0;for(let i=0,r=s.length;i<=r;i++){const a=s[i],l=e[i+n];a&&l&&a.index===l.index&&a.fragment.sn===l.fragment.sn?t(a,l):n--}}}function x8(s,e,t){const n=e.skippedSegments,i=Math.max(s.startSN,e.startSN)-e.startSN,r=(s.fragmentHint?1:0)+(n?e.endSN:Math.min(s.endSN,e.endSN))-e.startSN,a=e.startSN-s.startSN,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=s.fragmentHint?s.fragments.concat(s.fragmentHint):s.fragments;for(let h=i;h<=r;h++){const d=u[a+h];let g=l[h];if(n&&!g&&d&&(g=e.fragments[h]=d),d&&g){if(t(d,g,h,l),d.url&&d.url!==g.url){e.playlistParsingError=gT(`media sequence mismatch ${g.sn}:`,s,e,d,g);return}else if(d.cc!==g.cc){e.playlistParsingError=gT(`discontinuity sequence mismatch (${d.cc}!=${g.cc})`,s,e,d,g);return}}}}function gT(s,e,t,n,i){return new Error(`${s} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function Lk(s,e,t=!0){const n=e.startSN+e.skippedSegments-s.startSN,i=s.fragments,r=n>=0;let a=0;if(r&&n<i.length)a=i[n].start;else if(r&&e.startSN===s.endSN+1)a=s.fragmentEnd;else if(r&&t)a=s.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=s.fragmentStart;else return;o3(e,a)}function o3(s,e){if(e){const t=s.fragments;for(let n=s.skippedSegments;n<t.length;n++)t[n].addStart(e);s.fragmentHint&&s.fragmentHint.addStart(e)}}function Dk(s,e=1/0){let t=1e3*s.targetduration;if(s.updated){const n=s.fragments;if(n.length&&t*4>e){const r=n[n.length-1].duration*1e3;r<t&&(t=r)}}else t/=2;return Math.round(t)}function Ck(s,e,t){if(!s)return null;let n=s.fragments[e-s.startSN];return n||(n=s.fragmentHint,n&&n.sn===e)?n:e<s.startSN&&t&&t.sn===e?t:null}function mT(s,e,t){return s?Ik(s.partList,e,t):null}function Ik(s,e,t){if(s)for(let n=s.length;n--;){const i=s[n];if(i.index===t&&i.fragment.sn===e)return i}return null}function Ok(s){s.forEach((e,t)=>{var n;(n=e.details)==null||n.fragments.forEach(i=>{i.level=t,i.initSegment&&(i.initSegment.level=t)})})}function Gf(s,e){for(let n=0,i=s.length;n<i;n++){var t;if(((t=s[n])==null?void 0:t.cc)===e)return s[n]}return null}function v8(s,e){return!!(s&&e.startCC<s.endCC&&e.endCC>s.startCC)}function pT(s,e){if(s){const t=s.start+e;s.start=s.startPTS=t,s.endPTS=t+s.duration}}function Mk(s,e){const t=e.fragments;for(let n=0,i=t.length;n<i;n++)pT(t[n],s);e.fragmentHint&&pT(e.fragmentHint,s),e.alignedSliding=!0}function b8(s,e){s&&(Pk(e,s),!e.alignedSliding&&s&&Cg(e,s),!e.alignedSliding&&s&&!e.skippedSegments&&Lk(s,e,!1))}function Pk(s,e){if(!v8(e,s))return;const t=Math.min(e.endCC,s.endCC),n=Gf(e.fragments,t),i=Gf(s.fragments,t);if(!n||!i)return;et.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const r=n.start-i.start;Mk(r,s)}function Cg(s,e){if(!s.hasProgramDateTime||!e.hasProgramDateTime)return;const t=s.fragments,n=e.fragments;if(!t.length||!n.length)return;let i,r;const a=Math.min(e.endCC,s.endCC);e.startCC<a&&s.startCC<a&&(i=Gf(n,a),r=Gf(t,a)),(!i||!r)&&(i=n[Math.floor(n.length/2)],r=Gf(t,i.cc)||t[Math.floor(t.length/2)]);const l=i.programDateTime,u=r.programDateTime;if(!l||!u)return;const h=(u-l)/1e3-(r.start-i.start);Mk(h,s)}const E8={toString:function(s){let e="";const t=s.length;for(let n=0;n<t;n++)e+=`[${s.start(n).toFixed(3)}-${s.end(n).toFixed(3)}]`;return e}},ue={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Iv extends wk{constructor(e,t,n,i,r){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ue.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:l,media:u,mediaBuffer:h,state:d}=this,g=u?u.currentTime:0,p=Ve.bufferInfo(h||u,g,a.maxBufferHole);if(this.log(`media seeking to ${be(g)?g.toFixed(3):g}, state: ${d}`),this.state===ue.ENDED)this.resetLoadingState();else if(l){const y=a.maxFragLookUpTolerance,v=l.start-y,b=l.start+l.duration+y;if(!p.len||b<p.start||v>p.end){const w=g>b;(g<v||w)&&(w&&l.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),l.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(u){this.fragmentTracker.removeFragmentsInRange(g,1/0,this.playlistType,!0);const y=this.lastCurrentTime;if(g>y&&(this.lastCurrentTime=g),!this.loadingParts){const v=Math.max(p.end,g),b=this.shouldLoadParts(this.getLevelDetails(),v);b&&(this.log(`LL-Part loading ON after seeking to ${g.toFixed(2)} with buffer @${v.toFixed(2)}`),this.loadingParts=b)}}!this.hls.hasEnoughToStart&&!p.len&&(this.log(`setting startPosition to ${g} because of seek before start`),this.nextLoadPosition=this.startPosition=g),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=r,this.hls=e,this.fragmentLoader=new QB(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new kv(e.config)}registerListeners(){const{hls:e}=this;e.on(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(_.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(_.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===ue.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ue.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,i=this.config.timelineOffset||0;if(n<=i)return!1;const r=e.nextStart;if(r&&r>i&&r<t.edge||this.media.currentTime<e.start)return!1;const l=t.partList;if(l!=null&&l.length){const h=l[l.length-1];return Ve.isBuffered(this.media,h.start+h.duration/2)}const u=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(u)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;n.removeEventListener("seeking",this.onMediaSeeking),n.removeEventListener("ended",this.onMediaEnded),n.addEventListener("seeking",this.onMediaSeeking),n.addEventListener("ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===ue.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),i.removeEventListener("seeking",this.onMediaSeeking),i.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=ue.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const i=r=>{const a=r.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${r.part?" part: "+r.part.index:""} of ${this.fragInfo(a,!1,r.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(r)};this._doFragLoad(e,t,n,i).then(r=>{if(!r)return;const a=this.state,l=r.frag;if(this.fragContextChanged(l)){(a===ue.FRAG_LOADING||!this.fragCurrent&&a===ue.PARSING)&&(this.fragmentTracker.removeFragment(l),this.state=ue.IDLE);return}"payload"in r&&(this.log(`Loaded ${l.type} sn: ${l.sn} of ${this.playlistLabel()} ${l.level}`),this.hls.trigger(_.FRAG_LOADED,r)),this._handleFragmentLoadComplete(r)}).catch(r=>{this.state===ue.STOPPED||this.state===ue.ERROR||(this.warn(`Frag error: ${(r==null?void 0:r.message)||r}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===hn.APPENDING){const r=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,r),l=Math.max(e.duration,a?a.len:this.config.maxBufferLength),u=this.backtrackFragment;((u?e.sn-u.sn:0)===1||this.reduceMaxBufferLength(l,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===hn.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(t==null?void 0:t.live)&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger(_.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{const i=n==null?void 0:n.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{frag:r,payload:a}=n,l=r.decryptdata;if(a&&a.byteLength>0&&l!=null&&l.key&&l.iv&&tu(l.method)){const u=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),l.key.buffer,l.iv.buffer,Dv(l.method)).catch(h=>{throw i.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.FRAG_DECRYPT_ERROR,fatal:!1,error:h,reason:h.message,frag:r}),h}).then(h=>{const d=self.performance.now();return i.trigger(_.FRAG_DECRYPTED,{frag:r,payload:h,stats:{tstart:u,tdecrypt:d}}),n.payload=h,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===ue.STOPPED||this.state===ue.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==ue.STOPPED&&(this.state=ue.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?E8.toString(Ve.getBuffered(n)):"(detached)"})`),En(e)){var i;if(e.type!==Te.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(l=>!!a[l])){this.state=ue.IDLE;return}}const r=(i=this.levels)==null?void 0:i[e.level];r!=null&&r.fragmentError&&(this.log(`Resetting level fragment error count of ${r.fragmentError} on frag buffered`),r.fragmentError=0)}this.state=ue.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:r}=e,a=!r||r.length===0||r.some(u=>!u),l=new Lv(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(l)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var r;this.fragCurrent=e;const a=t==null?void 0:t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let l=null;e.encrypted&&!((r=e.decryptdata)!=null&&r.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=ue.KEY_LOADING,this.fragCurrent=e,l=this.keyLoader.load(e).then(g=>{if(!this.fragContextChanged(g.frag))return this.hls.trigger(_.KEY_LOADED,g),this.state===ue.KEY_LOADING&&(this.state=ue.IDLE),g}),this.hls.trigger(_.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(l=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments);const u=this.fragPrevious;if(En(e)&&(!u||e.sn!==u.sn)){const g=this.shouldLoadParts(t.details,e.end);g!==this.loadingParts&&(this.log(`LL-Part loading ${g?"ON":"OFF"} loading sn ${u==null?void 0:u.sn}->${e.sn}`),this.loadingParts=g)}if(n=Math.max(e.start,n||0),this.loadingParts&&En(e)){const g=a.partList;if(g&&i){n>e.end&&a.fragmentHint&&(e=a.fragmentHint);const p=this.getNextPart(g,e,n);if(p>-1){const y=g[p];e=this.fragCurrent=y.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${y.index} (${p}/${g.length-1}) of ${this.fragInfo(e,!1,y)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=y.start+y.duration,this.state=ue.FRAG_LOADING;let v;return l?v=l.then(b=>!b||this.fragContextChanged(b.frag)?null:this.doFragPartsLoad(e,y,t,i)).catch(b=>this.handleFragLoadError(b)):v=this.doFragPartsLoad(e,y,t,i).catch(b=>this.handleFragLoadError(b)),this.hls.trigger(_.FRAG_LOADING,{frag:e,part:y,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):v}else if(!e.url||this.loadedEndOfParts(g,n))return Promise.resolve(null)}}if(En(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${a?"["+a.startSN+"-"+a.endSN+"]":""}, target: ${parseFloat(n.toFixed(3))}`),be(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=ue.FRAG_LOADING;const h=this.config.progressive;let d;return h&&l?d=l.then(g=>!g||this.fragContextChanged(g==null?void 0:g.frag)?null:this.fragmentLoader.load(e,i)).catch(g=>this.handleFragLoadError(g)):d=Promise.all([this.fragmentLoader.load(e,h?i:void 0),l]).then(([g])=>(!h&&g&&i&&i(g),g)).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(_.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,t,n,i){return new Promise((r,a)=>{var l;const u=[],h=(l=n.details)==null?void 0:l.partList,d=g=>{this.fragmentLoader.loadPart(e,g,i).then(p=>{u[g.index]=p;const y=p.part;this.hls.trigger(_.FRAG_LOADED,p);const v=mT(n.details,e.sn,g.index+1)||Ik(h,e.sn,g.index+1);if(v)d(v);else return r({frag:e,part:y,partsLoaded:u})}).catch(a)};d(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===Z.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(_.ERROR,t)}else this.hls.trigger(_.ERROR,{type:_e.OTHER_ERROR,details:Z.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==ue.PARSING){!this.fragCurrent&&this.state!==ue.STOPPED&&this.state!==ue.ERROR&&(this.state=ue.IDLE);return}const{frag:n,part:i,level:r}=t,a=self.performance.now();n.stats.parsing.end=a,i&&(i.stats.parsing.end=a);const l=this.getLevelDetails(),h=l&&n.sn>l.endSN||this.shouldLoadParts(l,n.end);h!==this.loadingParts&&(this.log(`LL-Part loading ${h?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=h),this.updateLevelTiming(n,i,r,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e!=null&&e.partList){var n;const r=e.partList[0],a=r.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(t>=a){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>r.start-r.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:r,part:a}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${r} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const l=t[i],u=l.details,h=a>-1?mT(u,r,a):null,d=h?h.fragment:Ck(u,r,n);return d?(n&&n!==d&&(d.stats=n.stats),{frag:d,part:h,level:l}):null}bufferFragmentData(e,t,n,i,r){var a;if(!e||this.state!==ue.PARSING)return;const{data1:l,data2:u}=e;let h=l;if(l&&u&&(h=Js(l,u)),!((a=h)!=null&&a.length))return;const d={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:h};if(this.hls.trigger(_.BUFFER_APPENDING,d),e.dropped&&e.independent&&!n){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!Ve.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,i=Ve.bufferInfo(t,n,0),r=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,r*.25),l=Math.max(Math.min(e.start-a,i.end-a),n+a);e.start-l>a&&this.flushMainBuffer(l,e.start)}getFwdBufferInfo(e,t){var n;const i=this.getLoadPosition();if(!be(i))return null;const a=this.lastCurrentTime>i||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,a)}getFwdBufferInfoAtPos(e,t,n,i){const r=Ve.bufferInfo(e,t,i);if(r.len===0&&r.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,n);if(a&&(r.nextStart<=a.end||a.gap)){const l=Math.max(Math.min(r.nextStart,a.end)-t,i);return Ve.bufferInfo(e,t,l)}}return r}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,i=Math.max(Math.min(e-t,n.maxBufferLength),t),r=Math.max(e-t*3,n.maxMaxBufferLength/2,i);return r>=i?(n.maxMaxBufferLength=r,this.warn(`Reduce max buffer length to ${r}s`),!0):!1}getAppendedFrag(e,t=Te.MAIN){var n;const i=(n=this.fragmentTracker)==null?void 0:n.getAppendedFrag(e,t);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:r}=this,a=n[0].start,l=r.lowLatencyMode&&!!t.partList;let u=null;if(t.live){const g=r.initialLiveManifestSize;if(i<g)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${g})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var h;l&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),u=this.getInitialLiveFragment(t,n);const p=this.hls.startPosition,y=this.hls.liveSyncPosition,v=u?(p!==-1&&p>=a?p:y)||u.start:e;this.log(`Setting startPosition to ${v} to match start frag at live edge. mainStart: ${p} liveSyncPosition: ${y} frag.start: ${(h=u)==null?void 0:h.start}`),this.startPosition=this.nextLoadPosition=v}}else e<=a&&(u=n[0]);if(!u){const g=this.loadingParts?t.partEnd:t.fragmentEnd;u=this.getFragmentAtPosition(e,g,t)}let d=this.filterReplacedPrimary(u,t);if(!d&&u){const g=u.sn-t.startSN;d=this.filterReplacedPrimary(n[g+1]||null,t)}return this.mapToInitFragWhenRequired(d)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===hn.OK||n===hn.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,r){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&n.nextStart)){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i,0);if(l!==null&&n.len+l.len>=r){const u=a.sn;return this.loopSn!==u&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${u}`),this.loopSn=u),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(yT(this.hls.config)){var e,t;if((e=this.hls.interstitialsManager)==null||(t=e.playingItem)==null?void 0:t.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(yT(this.hls.config)&&e.type!==Te.SUBTITLE){const n=this.hls.interstitialsManager,i=n==null?void 0:n.bufferingItem;if(i){const a=i.event;if(a){if(a.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&(t==null?void 0:t.live)===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const r=n==null?void 0:n.playerQueue;if(r)for(let a=r.length;a--;){const l=r[a].interstitial;if(l.appendInPlace&&e.start>=l.startTime&&e.end<=l.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let i=-1,r=!1,a=!0;for(let l=0,u=e.length;l<u;l++){const h=e[l];if(a=a&&!h.independent,i>-1&&n<h.start)break;const d=h.loaded;d?i=-1:(r||h.independent||a)&&h.fragment===t&&(i=l),r=d}return i}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=NB(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const r=n.sn+1;if(r>=e.startSN&&r<=e.endSN){const a=t[r-e.startSN];n.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=Ek(t,n.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const r=this.hls.liveSyncPosition;r!==null&&(i=this.getFragmentAtPosition(r,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:r}=this,{fragments:a,endSN:l}=n;const{fragmentHint:u}=n,{maxFragLookUpTolerance:h}=i,d=n.partList,g=!!(this.loadingParts&&d!=null&&d.length&&u);g&&u&&!this.bitrateTest&&d[d.length-1].fragment.sn===u.sn&&(a=a.concat(u),l=u.sn);let p;if(e<t){var y;const b=e<this.lastCurrentTime||e>t-h||(y=this.media)!=null&&y.paused||!this.startFragRequested?0:h;p=Fl(r,a,e,b)}else p=a[a.length-1];if(p){const v=p.sn-n.startSN,b=this.fragmentTracker.getState(p);if((b===hn.OK||b===hn.PARTIAL&&p.gap)&&(r=p),r&&p.sn===r.sn&&(!g||d[0].fragment.sn>p.sn||!n.live&&!g)&&r&&p.level===r.level){const A=a[v+1];p.sn<l&&this.fragmentTracker.getState(A)!==hn.OK?p=A:p=null}}return p}alignPlaylists(e,t,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const r=e.fragmentStart,a=!t,l=e.alignedSliding&&be(r);if(a||!l&&!r){b8(n,e);const u=e.fragmentStart;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${i}`),u}return r}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const i=this.timelineOffset;if(n===-1){const r=this.startTimeOffset!==null,a=r?this.startTimeOffset:e.startTimeOffset;a!==null&&be(a)?(n=t+a,a<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${a} found in ${r?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+i}this.nextLoadPosition=n+i}getLoadPosition(){var e;const{media:t}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&En(e)&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==ue.FRAG_LOADING_WAITING_RETRY)&&(this.state=ue.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const v=this.getCurrentContext(t.chunkMeta);v&&(t.frag=v.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;if(this.fragContextChanged(n)){var i;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const r=t.details===Z.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(n,!0);const a=t.errorAction,{action:l,flags:u,retryCount:h=0,retryConfig:d}=a||{},g=!!a&&!!d,p=g&&l===Hn.RetryRequest,y=g&&!a.resolved&&u===ci.MoveAllAlternatesMatchingHost;if(!p&&y&&En(n)&&!n.endList)this.resetFragmentErrors(e),this.treatAsGap(n),a.resolved=!0;else if((p||y)&&h<d.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const v=Rv(d,h);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${h+1}/${d.maxNumRetry} in ${v}ms`),a.resolved=!0,this.retryDate=self.performance.now()+v,this.state=ue.FRAG_LOADING_WAITING_RETRY}else if(d&&a)if(this.resetFragmentErrors(e),h<d.maxNumRetry)!r&&l!==Hn.RemoveAlternatePermanently&&(a.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${h})`);return}else l===Hn.SendAlternateToPenaltyBox?this.state=ue.WAITING_LEVEL:this.state=ue.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===ue.PARSING||this.state===ue.PARSED){const t=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),r=i&&i.len>.5;r&&this.reduceMaxBufferLength(i.len,(t==null?void 0:t.duration)||10);const a=!r;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===Te.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==ue.STOPPED&&(this.state=ue.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const i=Ve.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===ue.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==ue.STOPPED&&(this.state=ue.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){const r=n.details;if(!r){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((u,h)=>{const d=e.elementaryStreams[h];if(d){const g=d.endPTS-d.startPTS;if(g<=0)return this.warn(`Could not parse fragment ${e.sn} ${h} duration reliably (${g})`),u||!1;const p=i?0:kk(r,e,d.startPTS,d.endPTS,d.startDTS,d.endDTS);return this.hls.trigger(_.LEVEL_PTS_UPDATED,{details:r,level:n,drift:p,type:h,frag:e,start:d.startPTS,end:d.endPTS}),!0}return u},!1)){var l;if(n.fragmentError===0&&this.treatAsGap(e,n),((l=this.transmuxer)==null?void 0:l.error)===null){const u=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(u.message),this.hls.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.FRAG_PARSING_ERROR,fatal:!1,error:u,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=ue.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(_.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Te.MAIN?"level":"track"}fragInfo(e,t=!0,n){var i,r;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((i=t&&!n?e.startPTS:(n||e).start)!=null?i:NaN).toFixed(3)}-${((r=t&&!n?e.endPTS:(n||e).end)!=null?r:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function yT(s){return!!s.interstitialsController&&s.enableInterstitialPlayback!==!1}class Nk{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=w8(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function w8(s,e){const t=new Uint8Array(e);let n=0;for(let i=0;i<s.length;i++){const r=s[i];t.set(r,n),n+=r.length}return t}var ax={exports:{}},xT;function A8(){return xT||(xT=1,function(s){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,h,d){this.fn=u,this.context=h,this.once=d||!1}function r(u,h,d,g,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,g||u,p),v=t?t+h:h;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],y]:u._events[v].push(y):(u._events[v]=y,u._eventsCount++),u}function a(u,h){--u._eventsCount===0?u._events=new n:delete u._events[h]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],d,g;if(this._eventsCount===0)return h;for(g in d=this._events)e.call(d,g)&&h.push(t?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},l.prototype.listeners=function(h){var d=t?t+h:h,g=this._events[d];if(!g)return[];if(g.fn)return[g.fn];for(var p=0,y=g.length,v=new Array(y);p<y;p++)v[p]=g[p].fn;return v},l.prototype.listenerCount=function(h){var d=t?t+h:h,g=this._events[d];return g?g.fn?1:g.length:0},l.prototype.emit=function(h,d,g,p,y,v){var b=t?t+h:h;if(!this._events[b])return!1;var w=this._events[b],A=arguments.length,S,T;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),A){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,g),!0;case 4:return w.fn.call(w.context,d,g,p),!0;case 5:return w.fn.call(w.context,d,g,p,y),!0;case 6:return w.fn.call(w.context,d,g,p,y,v),!0}for(T=1,S=new Array(A-1);T<A;T++)S[T-1]=arguments[T];w.fn.apply(w.context,S)}else{var D=w.length,L;for(T=0;T<D;T++)switch(w[T].once&&this.removeListener(h,w[T].fn,void 0,!0),A){case 1:w[T].fn.call(w[T].context);break;case 2:w[T].fn.call(w[T].context,d);break;case 3:w[T].fn.call(w[T].context,d,g);break;case 4:w[T].fn.call(w[T].context,d,g,p);break;default:if(!S)for(L=1,S=new Array(A-1);L<A;L++)S[L-1]=arguments[L];w[T].fn.apply(w[T].context,S)}}return!0},l.prototype.on=function(h,d,g){return r(this,h,d,g,!1)},l.prototype.once=function(h,d,g){return r(this,h,d,g,!0)},l.prototype.removeListener=function(h,d,g,p){var y=t?t+h:h;if(!this._events[y])return this;if(!d)return a(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!p||v.once)&&(!g||v.context===g)&&a(this,y);else{for(var b=0,w=[],A=v.length;b<A;b++)(v[b].fn!==d||p&&!v[b].once||g&&v[b].context!==g)&&w.push(v[b]);w.length?this._events[y]=w.length===1?w[0]:w:a(this,y)}return this},l.prototype.removeAllListeners=function(h){var d;return h?(d=t?t+h:h,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,s.exports=l}(ax)),ax.exports}var T8=A8(),Ov=ZN(T8);const id="1.6.2",Wu={};function S8(){return typeof __HLS_WORKER_BUNDLE__=="function"}function _8(){const s=Wu[id];if(s)return s.clientCount++,s;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),i={worker:new self.Worker(t),objectURL:t,clientCount:1};return Wu[id]=i,i}function R8(s){const e=Wu[s];if(e)return e.clientCount++,e;const t=new self.URL(s,self.location.href).href,i={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Wu[s]=i,i}function k8(s){const e=Wu[s||id];if(e&&e.clientCount--===1){const{worker:n,objectURL:i}=e;delete Wu[s||id],i&&self.URL.revokeObjectURL(i),n.terminate()}}function Bk(s,e){return e+10<=s.length&&s[e]===51&&s[e+1]===68&&s[e+2]===73&&s[e+3]<255&&s[e+4]<255&&s[e+6]<128&&s[e+7]<128&&s[e+8]<128&&s[e+9]<128}function Mv(s,e){return e+10<=s.length&&s[e]===73&&s[e+1]===68&&s[e+2]===51&&s[e+3]<255&&s[e+4]<255&&s[e+6]<128&&s[e+7]<128&&s[e+8]<128&&s[e+9]<128}function gm(s,e){let t=0;return t=(s[e]&127)<<21,t|=(s[e+1]&127)<<14,t|=(s[e+2]&127)<<7,t|=s[e+3]&127,t}function rd(s,e){const t=e;let n=0;for(;Mv(s,e);){n+=10;const i=gm(s,e+6);n+=i,Bk(s,e+10)&&(n+=10),e+=n}if(n>0)return s.subarray(t,t+n)}function L8(s,e,t,n){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=e[t+2],a=r>>2&15;if(a>12){const y=new Error(`invalid ADTS sampling index:${a}`);s.emit(_.ERROR,_.ERROR,{type:_e.MEDIA_ERROR,details:Z.FRAG_PARSING_ERROR,fatal:!0,error:y,reason:y.message});return}const l=(r>>6&3)+1,u=e[t+3]>>6&3|(r&1)<<2,h="mp4a.40."+l,d=i[a];let g=a;(l===5||l===29)&&(g-=3);const p=[l<<3|(g&14)>>1,(g&1)<<7|u<<3];return et.log(`manifest codec:${n}, parsed codec:${h}, channels:${u}, rate:${d} (ADTS object type:${l} sampling index:${a})`),{config:p,samplerate:d,channelCount:u,codec:h,parsedCodec:h,manifestCodec:n}}function Fk(s,e){return s[e]===255&&(s[e+1]&246)===240}function Uk(s,e){return s[e+1]&1?7:9}function Pv(s,e){return(s[e+3]&3)<<11|s[e+4]<<3|(s[e+5]&224)>>>5}function D8(s,e){return e+5<s.length}function Ig(s,e){return e+1<s.length&&Fk(s,e)}function C8(s,e){return D8(s,e)&&Fk(s,e)&&Pv(s,e)<=s.length-e}function I8(s,e){if(Ig(s,e)){const t=Uk(s,e);if(e+t>=s.length)return!1;const n=Pv(s,e);if(n<=t)return!1;const i=e+n;return i===s.length||Ig(s,i)}return!1}function Hk(s,e,t,n,i){if(!s.samplerate){const r=L8(e,t,n,i);if(!r)return;yt(s,r)}}function Gk(s){return 1024*9e4/s}function O8(s,e){const t=Uk(s,e);if(e+t<=s.length){const n=Pv(s,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function zk(s,e,t,n,i){const r=Gk(s.samplerate),a=n+i*r,l=O8(e,t);let u;if(l){const{frameLength:g,headerLength:p}=l,y=p+g,v=Math.max(0,t+y-e.length);v?(u=new Uint8Array(y-p),u.set(e.subarray(t+p,e.length),0)):u=e.subarray(t+p,t+y);const b={unit:u,pts:a};return v||s.samples.push(b),{sample:b,length:y,missing:v}}const h=e.length-t;return u=new Uint8Array(h),u.set(e.subarray(t,e.length),0),{sample:{unit:u,pts:a},length:h,missing:-1}}function M8(s,e){return Mv(s,e)&&gm(s,e+6)+10<=s.length-e}function P8(s){if(s.size<2)return;const e=Rs(s.data,!0),t=new Uint8Array(s.data.subarray(e.length+1));return{key:s.type,info:e,data:t.buffer}}function N8(s){if(s.size<2)return;if(s.type==="TXXX"){let t=1;const n=Rs(s.data.subarray(t),!0);t+=n.length+1;const i=Rs(s.data.subarray(t));return{key:s.type,info:n,data:i}}const e=Rs(s.data.subarray(1));return{key:s.type,info:"",data:e}}function B8(s){if(s.type==="WXXX"){if(s.size<2)return;let t=1;const n=Rs(s.data.subarray(t),!0);t+=n.length+1;const i=Rs(s.data.subarray(t));return{key:s.type,info:n,data:i}}const e=Rs(s.data);return{key:s.type,info:"",data:e}}function F8(s){return btoa(String.fromCharCode(...s))}function $k(s,e){if(s<0)return-$k(-s,e);const t=Math.pow(10,e);if(Math.abs(s*t%1-.5)<Number.EPSILON){const i=Math.floor(s*t);return(i%2===0?i:i+1)/t}else return Math.round(s*t)/t}function U8(s,e){const t=new URL(s),n=new URL(e);if(t.origin!==n.origin)return s;const i=t.pathname.split("/").slice(1),r=n.pathname.split("/").slice(1,-1);for(;i[0]===r[0];)i.shift(),r.shift();for(;r.length;)r.shift(),i.unshift("..");return i.join("/")}function H8(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?r:r&3|8).toString(16)})}}}function G8(s){return s instanceof ArrayBuffer?s:s.byteOffset==0&&s.byteLength==s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer}function ox(s,e=0,t=1/0){return z8(s,e,t,Uint8Array)}function z8(s,e,t,n){const i=$8(s);let r=1;"BYTES_PER_ELEMENT"in n&&(r=n.BYTES_PER_ELEMENT);const a=V8(s)?s.byteOffset:0,l=(a+s.byteLength)/r,u=(a+e)/r,h=Math.floor(Math.max(0,Math.min(u,l))),d=Math.floor(Math.min(h+Math.max(t,0),l));return new n(i,h,d-h)}function $8(s){return s instanceof ArrayBuffer?s:s.buffer}function V8(s){return s&&s.buffer instanceof ArrayBuffer&&s.byteLength!==void 0&&s.byteOffset!==void 0}function Y8(s){const e={key:s.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(s.size<2)return;if(s.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const n=s.data.subarray(1).indexOf(0);if(n===-1)return;const i=Rs(ox(s.data,1,n)),r=s.data[2+n],a=s.data.subarray(3+n).indexOf(0);if(a===-1)return;const l=Rs(ox(s.data,3+n,a));let u;return i==="-->"?u=Rs(ox(s.data,4+n+a)):u=G8(s.data.subarray(4+n+a)),e.mimeType=i,e.pictureType=r,e.description=l,e.data=u,e}function K8(s){return s.type==="PRIV"?P8(s):s.type[0]==="W"?B8(s):s.type==="APIC"?Y8(s):N8(s)}function j8(s){const e=String.fromCharCode(s[0],s[1],s[2],s[3]),t=gm(s,4),n=10;return{type:e,size:t,data:s.subarray(n,n+t)}}const p2=10,q8=10;function Vk(s){let e=0;const t=[];for(;Mv(s,e);){const n=gm(s,e+6);s[e+5]>>6&1&&(e+=p2),e+=p2;const i=e+n;for(;e+q8<i;){const r=j8(s.subarray(e)),a=K8(r);a&&t.push(a),e+=r.size+p2}Bk(s,e)&&(e+=p2)}return t}function Yk(s){return s&&s.key==="PRIV"&&s.info==="com.apple.streaming.transportStreamTimestamp"}function Q8(s){if(s.data.byteLength===8){const e=new Uint8Array(s.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}}function Nv(s){const e=Vk(s);for(let t=0;t<e.length;t++){const n=e[t];if(Yk(n))return Q8(n)}}let _s=function(s){return s.audioId3="org.id3",s.dateRange="com.apple.quicktime.HLS",s.emsg="https://aomedia.org/emsg/ID3",s.misbklv="urn:misb:KLV:bin:1910.1",s}({});function qi(s="",e=9e4){return{type:s,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Bv{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=Js(this.cachedData,e),this.cachedData=null);let n=rd(e,0),i=n?n.length:0,r;const a=this._audioTrack,l=this._id3Track,u=n?Nv(n):void 0,h=e.length;for((this.basePTS===null||this.frameIndex===0&&be(u))&&(this.basePTS=W8(u,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:_s.audioId3,duration:Number.POSITIVE_INFINITY});i<h;){if(this.canParse(e,i)){const d=this.appendFrame(a,e,i);d?(this.frameIndex++,this.lastPTS=d.sample.pts,i+=d.length,r=i):i=h}else M8(e,i)?(n=rd(e,i),l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:_s.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,r=i):i++;if(i===h&&r!==h){const d=e.slice(r);this.cachedData?this.cachedData=Js(this.cachedData,d):this.cachedData=d}}return{audioTrack:a,videoTrack:qi(),id3Track:l,textTrack:qi()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:qi(),id3Track:this._id3Track,textTrack:qi()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const W8=(s,e,t)=>{if(be(s))return s*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};let y2=null;const X8=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Z8=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],J8=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],e4=[0,1,1,4];function Kk(s,e,t,n,i){if(t+24>e.length)return;const r=jk(e,t);if(r&&t+r.frameLength<=e.length){const a=r.samplesPerFrame*9e4/r.sampleRate,l=n+i*a,u={unit:e.subarray(t,t+r.frameLength),pts:l,dts:l};return s.config=[],s.channelCount=r.channelCount,s.samplerate=r.sampleRate,s.samples.push(u),{sample:u,length:r.frameLength,missing:0}}}function jk(s,e){const t=s[e+1]>>3&3,n=s[e+1]>>1&3,i=s[e+2]>>4&15,r=s[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&r!==3){const a=s[e+2]>>1&1,l=s[e+3]>>6,u=t===3?3-n:n===3?3:4,h=X8[u*14+i-1]*1e3,g=Z8[(t===3?0:t===2?1:2)*3+r],p=l===3?1:2,y=J8[t][n],v=e4[n],b=y*8*v,w=Math.floor(y*h/g+a)*v;if(y2===null){const T=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);y2=T?parseInt(T[1]):0}return!!y2&&y2<=87&&n===2&&h>=224e3&&l===0&&(s[e+3]=s[e+3]|128),{sampleRate:g,channelCount:p,frameLength:w,samplesPerFrame:b}}}function Fv(s,e){return s[e]===255&&(s[e+1]&224)===224&&(s[e+1]&6)!==0}function qk(s,e){return e+1<s.length&&Fv(s,e)}function t4(s,e){return Fv(s,e)&&4<=s.length-e}function Qk(s,e){if(e+1<s.length&&Fv(s,e)){const n=jk(s,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const r=e+i;return r===s.length||qk(s,r)}return!1}class n4 extends Bv{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=rd(e,0);let i=(n==null?void 0:n.length)||0;if(Qk(e,i))return!1;for(let r=e.length;i<r;i++)if(I8(e,i))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return C8(e,t)}appendFrame(e,t,n){Hk(e,this.observer,t,n,e.manifestCodec);const i=zk(e,t,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const Wk=(s,e)=>{let t=0,n=5;e+=n;const i=new Uint32Array(1),r=new Uint32Array(1),a=new Uint8Array(1);for(;n>0;){a[0]=s[e];const l=Math.min(n,8),u=8-l;r[0]=4278190080>>>24+u<<u,i[0]=(a[0]&r[0])>>u,t=t?t<<l|i[0]:i[0],e+=1,n-=l}return t};class s4 extends Bv{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const i=Xk(e,t,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=rd(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&Nv(t)!==void 0&&Wk(e,n)<16}}function Xk(s,e,t,n,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const r=e[t+4]>>6;if(r>=3)return-1;const l=[48e3,44100,32e3][r],u=e[t+4]&63,d=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][u*3+r]*2;if(t+d>e.length)return-1;const g=e[t+6]>>5;let p=0;g===2?p+=2:(g&1&&g!==1&&(p+=2),g&4&&(p+=2));const y=(e[t+6]<<8|e[t+7])>>12-p&1,b=[2,1,2,3,3,4,4,5][g]+y,w=e[t+5]>>3,A=e[t+5]&7,S=new Uint8Array([r<<6|w<<1|A>>2,(A&3)<<6|g<<3|y<<2|u>>4,u<<4&224]),T=1536/l*9e4,D=n+i*T,L=e.subarray(t,t+d);return s.config=S,s.channelCount=b,s.samplerate=l,s.samples.push({unit:L,pts:D}),d}class i4 extends Bv{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=rd(e,0);let n=(t==null?void 0:t.length)||0;if(t&&e[n]===11&&e[n+1]===119&&Nv(t)!==void 0&&Wk(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(Qk(e,n))return et.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return t4(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return Kk(e,t,n,this.basePTS,this.frameIndex)}}const r4=/\/emsg[-/]ID3/i;class a4{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const r=this.videoTrack=qi("video",1),a=this.audioTrack=qi("audio",1),l=this.txtTrack=qi("text",1);if(this.id3Track=qi("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const u=uk(e);if(u.video){const{id:h,timescale:d,codec:g,supplemental:p}=u.video;r.id=h,r.timescale=l.timescale=d,r.codec=g,r.supplemental=p}if(u.audio){const{id:h,timescale:d,codec:g}=u.audio;a.id=h,a.timescale=d,a.codec=g}l.id=ok.text,r.sampleDuration=0,r.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return sB(e)}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Js(this.remainderData,e));const l=hB(n);this.remainderData=l.remainder,i.samples=l.valid||new Uint8Array}else i.samples=n;const a=this.extractID3Track(i,t);return r.samples=UA(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=UA(e,t),{videoTrack:t,audioTrack:qi(),id3Track:i,textTrack:qi()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=He(e.samples,["emsg"]);i&&i.forEach(r=>{const a=dB(r);if(r4.test(a.schemeIdUri)){const l=vT(a,t);let u=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);const h=a.payload;n.samples.push({data:h,len:h.byteLength,dts:l,pts:l,type:_s.emsg,duration:u})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const l=vT(a,t);n.samples.push({data:a.payload,len:a.payload.byteLength,dts:l,pts:l,type:_s.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function vT(s,e){return be(s.presentationTime)?s.presentationTime/s.timeScale:e+s.presentationTimeDelta/s.timeScale}class o4{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new kv(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,po.cbc)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const r=i.subarray(16,i.length-i.length%16),a=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(a).then(l=>{const u=new Uint8Array(l);i.set(u,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)})}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let i=0;for(let r=32;r<e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let r=32;r<e.length-16;r+=160,i+=16)e.set(n.subarray(i,i+16),r);return e}decryptAvcSample(e,t,n,i,r){const a=fk(r.data),l=this.getAvcEncryptedData(a);this.decryptBuffer(l.buffer).then(u=>{r.data=this.getAvcDecryptedUnit(a,u),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)})}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){i();return}const r=e[t].units;for(;!(n>=r.length);n++){const a=r[n];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,n,i,a),!this.decrypter.isSync()))return}}}}class Zk{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const r=n.units;i=r[r.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,i=n.length;if(i){const r=n[i-1];e.pts=r.pts,e.dts=r.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,n){const i=t.byteLength;let r=e.naluState||0;const a=r,l=[];let u=0,h,d,g,p=-1,y=0;for(r===-1&&(p=0,y=this.getNALuType(t,0),r=0,u=1);u<i;){if(h=t[u++],!r){r=h?0:1;continue}if(r===1){r=h?0:2;continue}if(!h)r=3;else if(h===1){if(d=u-r-1,p>=0){const v={data:t.subarray(p,d),type:y};l.push(v)}else{const v=this.getLastNalUnit(e.samples);v&&(a&&u<=4-a&&v.state&&(v.data=v.data.subarray(0,v.data.byteLength-a)),d>0&&(v.data=Js(v.data,t.subarray(0,d)),v.state=0))}u<i?(g=this.getNALuType(t,u),p=u,y=g,r=0):r=-1}else r=0}if(p>=0&&r>=0){const v={data:t.subarray(p,i),type:y,state:r};l.push(v)}if(l.length===0){const v=this.getLastNalUnit(e.samples);v&&(v.data=Js(v.data,t))}return e.naluState=r,l}}class zf{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(r===0)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=r*8,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&et.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class bT extends Zk{parsePES(e,t,n,i){const r=this.parseNALu(e,n.data,i);let a=this.VideoSample,l,u=!1;n.data=null,a&&r.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),r.forEach(h=>{var d,g;switch(h.type){case 1:{let b=!1;l=!0;const w=h.data;if(u&&w.length>4){const A=this.readSliceType(w);(A===2||A===4||A===7||A===9)&&(b=!0)}if(b){var p;(p=a)!=null&&p.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.frame=!0,a.key=b;break}case 5:l=!0,(d=a)!=null&&d.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 6:{l=!0,Sv(h.data,1,n.pts,t.samples);break}case 7:{var y,v;l=!0,u=!0;const b=h.data,w=this.readSPS(b);if(!e.sps||e.width!==w.width||e.height!==w.height||((y=e.pixelRatio)==null?void 0:y[0])!==w.pixelRatio[0]||((v=e.pixelRatio)==null?void 0:v[1])!==w.pixelRatio[1]){e.width=w.width,e.height=w.height,e.pixelRatio=w.pixelRatio,e.sps=[b];const A=b.subarray(1,4);let S="avc1.";for(let T=0;T<3;T++){let D=A[T].toString(16);D.length<2&&(D="0"+D),S+=D}e.codec=S}break}case 8:l=!0,e.pps=[h.data];break;case 9:l=!0,e.audFound=!0,(g=a)!=null&&g.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:l=!0;break;default:l=!1;break}a&&l&&a.units.push(h)}),i&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new zf(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n=8,i=8,r;for(let a=0;a<e;a++)i!==0&&(r=t.readEG(),i=(n+r+256)%256),n=i===0?n:i}readSPS(e){const t=new zf(e);let n=0,i=0,r=0,a=0,l,u,h;const d=t.readUByte.bind(t),g=t.readBits.bind(t),p=t.readUEG.bind(t),y=t.readBoolean.bind(t),v=t.skipBits.bind(t),b=t.skipEG.bind(t),w=t.skipUEG.bind(t),A=this.skipScalingList.bind(this);d();const S=d();if(g(5),v(3),d(),w(),S===100||S===110||S===122||S===244||S===44||S===83||S===86||S===118||S===128){const I=p();if(I===3&&v(1),w(),w(),v(1),y())for(u=I!==3?8:12,h=0;h<u;h++)y()&&(h<6?A(16,t):A(64,t))}w();const T=p();if(T===0)p();else if(T===1)for(v(1),b(),b(),l=p(),h=0;h<l;h++)b();w(),v(1);const D=p(),L=p(),B=g(1);B===0&&v(1),v(1),y()&&(n=p(),i=p(),r=p(),a=p());let M=[1,1];if(y()&&y())switch(d()){case 1:M=[1,1];break;case 2:M=[12,11];break;case 3:M=[10,11];break;case 4:M=[16,11];break;case 5:M=[40,33];break;case 6:M=[24,11];break;case 7:M=[20,11];break;case 8:M=[32,11];break;case 9:M=[80,33];break;case 10:M=[18,11];break;case 11:M=[15,11];break;case 12:M=[64,33];break;case 13:M=[160,99];break;case 14:M=[4,3];break;case 15:M=[3,2];break;case 16:M=[2,1];break;case 255:{M=[d()<<8|d(),d()<<8|d()];break}}return{width:Math.ceil((D+1)*16-n*2-i*2),height:(2-B)*(L+1)*16-(B?2:4)*(r+a),pixelRatio:M}}}class ET extends Zk{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,i){const r=this.parseNALu(e,n.data,i);let a=this.VideoSample,l,u=!1;n.data=null,a&&r.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),r.forEach(h=>{var d,g;switch(h.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.frame=!0,l=!0;break;case 16:case 17:case 18:case 21:if(l=!0,u){var p;(p=a)!=null&&p.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:l=!0,(d=a)!=null&&d.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 39:l=!0,Sv(h.data,2,n.pts,t.samples);break;case 32:l=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=yt(e.params,this.readVPS(h.data)),this.initVPS=h.data),e.vps=[h.data];break;case 33:if(l=!0,u=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],h.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const y=this.readSPS(h.data);e.width=y.width,e.height=y.height,e.pixelRatio=y.pixelRatio,e.codec=y.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const v in y.params)e.params[v]=y.params[v]}this.pushParameterSet(e.sps,h.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0;break;case 34:if(l=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const y=this.readPPS(h.data);for(const v in y)e.params[v]=y[v]}this.pushParameterSet(e.pps,h.data,e.vps)}break;case 35:l=!0,e.audFound=!0,(g=a)!=null&&g.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:l=!1;break}a&&l&&a.units.push(h)}),i&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(t[n]=e[i],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new zf(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const n=t.readBits(3),i=t.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:i}}readSPS(e){const t=new zf(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const i=t.readBits(2),r=t.readBoolean(),a=t.readBits(5),l=t.readUByte(),u=t.readUByte(),h=t.readUByte(),d=t.readUByte(),g=t.readUByte(),p=t.readUByte(),y=t.readUByte(),v=t.readUByte(),b=t.readUByte(),w=t.readUByte(),A=t.readUByte(),S=[],T=[];for(let Fe=0;Fe<n;Fe++)S.push(t.readBoolean()),T.push(t.readBoolean());if(n>0)for(let Fe=n;Fe<8;Fe++)t.readBits(2);for(let Fe=0;Fe<n;Fe++)S[Fe]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),T[Fe]&&t.readUByte();t.readUEG();const D=t.readUEG();D==3&&t.skipBits(1);const L=t.readUEG(),B=t.readUEG(),M=t.readBoolean();let I=0,N=0,P=0,z=0;M&&(I+=t.readUEG(),N+=t.readUEG(),P+=t.readUEG(),z+=t.readUEG());const te=t.readUEG(),ye=t.readUEG(),me=t.readUEG(),K=t.readBoolean();for(let Fe=K?0:n;Fe<=n;Fe++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let It=0;It<4;It++)for(let on=0;on<(It===3?2:6);on++)if(!t.readBoolean())t.readUEG();else{const An=Math.min(64,1<<4+(It<<1));It>1&&t.readEG();for(let ks=0;ks<An;ks++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const se=t.readUEG();let X=0;for(let Fe=0;Fe<se;Fe++){let It=!1;if(Fe!==0&&(It=t.readBoolean()),It){Fe===se&&t.readUEG(),t.readBoolean(),t.readUEG();let on=0;for(let fs=0;fs<=X;fs++){const An=t.readBoolean();let ks=!1;An||(ks=t.readBoolean()),(An||ks)&&on++}X=on}else{const on=t.readUEG(),fs=t.readUEG();X=on+fs;for(let An=0;An<on;An++)t.readUEG(),t.readBoolean();for(let An=0;An<fs;An++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const Fe=t.readUEG();for(let It=0;It<Fe;It++){for(let on=0;on<me+4;on++)t.readBits(1);t.readBits(1)}}let j=0,re=1,le=1,ae=!0,ve=1,xe=0;t.readBoolean(),t.readBoolean();let ze=!1;if(t.readBoolean()){if(t.readBoolean()){const ti=t.readUByte(),Zl=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Tn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];ti>0&&ti<16?(re=Zl[ti-1],le=Tn[ti-1]):ti===255&&(re=t.readBits(16),le=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),ze=t.readBoolean(),ze&&(I+=t.readUEG(),N+=t.readUEG(),P+=t.readUEG(),z+=t.readUEG()),t.readBoolean()&&(ve=t.readBits(32),xe=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const Tn=t.readBoolean(),Jl=t.readBoolean();let _i=!1;(Tn||Jl)&&(_i=t.readBoolean(),_i&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),_i&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let De=0;De<=n;De++){ae=t.readBoolean();const Be=ae||t.readBoolean();let Me=!1;Be?t.readEG():Me=t.readBoolean();const Ie=Me?1:t.readUEG()+1;if(Tn)for(let kt=0;kt<Ie;kt++)t.readUEG(),t.readUEG(),_i&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(Jl)for(let kt=0;kt<Ie;kt++)t.readUEG(),t.readUEG(),_i&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),j=t.readUEG())}let Ne=L,Ke=B;if(M||ze){let Fe=1,It=1;D===1?Fe=It=2:D==2&&(Fe=2),Ne=L-Fe*N-Fe*I,Ke=B-It*z-It*P}const fn=i?["A","B","C"][i]:"",On=l<<24|u<<16|h<<8|d;let At=0;for(let Fe=0;Fe<32;Fe++)At=(At|(On>>Fe&1)<<31-Fe)>>>0;let dn=At.toString(16);return a===1&&dn==="2"&&(dn="6"),{codecString:`hvc1.${fn}${a}.${dn}.${r?"H":"L"}${A}.B0`,params:{general_tier_flag:r,general_profile_idc:a,general_profile_space:i,general_profile_compatibility_flags:[l,u,h,d],general_constraint_indicator_flags:[g,p,y,v,b,w],general_level_idc:A,bit_depth:te+8,bit_depth_luma_minus8:te,bit_depth_chroma_minus8:ye,min_spatial_segmentation_idc:j,chroma_format_idc:D,frame_rate:{fixed:ae,fps:xe/ve}},width:Ne,height:Ke,pixelRatio:[re,le]}}readPPS(e){const t=new zf(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const i=t.readBoolean(),r=t.readBoolean();let a=1;return r&&i?a=0:r?a=3:i&&(a=2),{parallelismType:a}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const xn=188;class Va{constructor(e,t,n,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=i,this.videoParser=null}static probe(e,t){const n=Va.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const t=e.length;let n=Math.min(xn*5,t-xn)+1,i=0;for(;i<n;){let r=!1,a=-1,l=0;for(let u=i;u<t;u+=xn)if(e[u]===71&&(t-u===xn||e[u+xn]===71)){if(l++,a===-1&&(a=u,a!==0&&(n=Math.min(a+xn*99,e.length-xn)+1)),r||(r=l3(e,u)===0),r&&l>1&&(a===0&&l>2||u+xn>n))return a}else{if(l)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:ok[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Va.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=Va.createTrack("audio",i),this._id3Track=Va.createTrack("id3"),this._txtTrack=Va.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,i=!1){n||(this.sampleAes=null);let r;const a=this._videoTrack,l=this._audioTrack,u=this._id3Track,h=this._txtTrack;let d=a.pid,g=a.pesData,p=l.pid,y=u.pid,v=l.pesData,b=u.pesData,w=null,A=this.pmtParsed,S=this._pmtId,T=e.length;if(this.remainderData&&(e=Js(this.remainderData,e),T=e.length,this.remainderData=null),T<xn&&!i)return this.remainderData=e,{audioTrack:l,videoTrack:a,id3Track:u,textTrack:h};const D=Math.max(0,Va.syncOffset(e));T-=(T-D)%xn,T<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,T,e.buffer.byteLength-T));let L=0;for(let M=D;M<T;M+=xn)if(e[M]===71){const I=!!(e[M+1]&64),N=l3(e,M),P=(e[M+3]&48)>>4;let z;if(P>1){if(z=M+5+e[M+4],z===M+xn)continue}else z=M+4;switch(N){case d:if(I){if(g&&(r=Bc(g,this.logger))){if(this.videoParser===null)switch(a.segmentCodec){case"avc":this.videoParser=new bT;break;case"hevc":this.videoParser=new ET;break}this.videoParser!==null&&this.videoParser.parsePES(a,h,r,!1)}g={data:[],size:0}}g&&(g.data.push(e.subarray(z,M+xn)),g.size+=M+xn-z);break;case p:if(I){if(v&&(r=Bc(v,this.logger)))switch(l.segmentCodec){case"aac":this.parseAACPES(l,r);break;case"mp3":this.parseMPEGPES(l,r);break;case"ac3":this.parseAC3PES(l,r);break}v={data:[],size:0}}v&&(v.data.push(e.subarray(z,M+xn)),v.size+=M+xn-z);break;case y:I&&(b&&(r=Bc(b,this.logger))&&this.parseID3PES(u,r),b={data:[],size:0}),b&&(b.data.push(e.subarray(z,M+xn)),b.size+=M+xn-z);break;case 0:I&&(z+=e[z]+1),S=this._pmtId=l4(e,z);break;case S:{I&&(z+=e[z]+1);const te=c4(e,z,this.typeSupported,n,this.observer,this.logger);d=te.videoPid,d>0&&(a.pid=d,a.segmentCodec=te.segmentVideoCodec),p=te.audioPid,p>0&&(l.pid=p,l.segmentCodec=te.segmentAudioCodec),y=te.id3Pid,y>0&&(u.pid=y),w!==null&&!A&&(this.logger.warn(`MPEG-TS PMT found at ${M} after unknown PID '${w}'. Backtracking to sync byte @${D} to parse all TS packets.`),w=null,M=D-188),A=this.pmtParsed=!0;break}case 17:case 8191:break;default:w=N;break}}else L++;L>0&&c3(this.observer,new Error(`Found ${L} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=g,l.pesData=v,u.pesData=b;const B={audioTrack:l,videoTrack:a,id3Track:u,textTrack:h};return i&&this.extractRemainingSamples(B),B}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:r}=e,a=n.pesData,l=t.pesData,u=i.pesData;let h;if(a&&(h=Bc(a,this.logger))){if(this.videoParser===null)switch(n.segmentCodec){case"avc":this.videoParser=new bT;break;case"hevc":this.videoParser=new ET;break}this.videoParser!==null&&(this.videoParser.parsePES(n,r,h,!0),n.pesData=null)}else n.pesData=a;if(l&&(h=Bc(l,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,h);break;case"mp3":this.parseMPEGPES(t,h);break;case"ac3":this.parseAC3PES(t,h);break}t.pesData=null}else l!=null&&l.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=l;u&&(h=Bc(u,this.logger))?(this.parseID3PES(i,h),i.pesData=null):i.pesData=u}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),r=this.sampleAes=new o4(this.observer,this.config,t);return this.decrypt(i,r)}decrypt(e,t){return new Promise(n=>{const{audioTrack:i,videoTrack:r}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,()=>{n(e)}):n(e)}):r.samples&&t.decryptAvcSamples(r.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let r=t.data;if(i){this.aacOverFlow=null;const g=i.missing,p=i.sample.unit.byteLength;if(g===-1)r=Js(i.sample.unit,r);else{const y=p-g;i.sample.unit.set(r.subarray(0,g),y),e.samples.push(i.sample),n=i.missing}}let a,l;for(a=n,l=r.length;a<l-1&&!Ig(r,a);a++);if(a!==n){let g;const p=a<l-1;if(p?g=`AAC PES did not start with ADTS header,offset:${a}`:g="No ADTS header found in AAC PES",c3(this.observer,new Error(g),p,this.logger),!p)return}Hk(e,this.observer,r,a,this.audioCodec);let u;if(t.pts!==void 0)u=t.pts;else if(i){const g=Gk(e.samplerate);u=i.sample.pts+g}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let h=0,d;for(;a<l;)if(d=zk(e,r,a,u,h),a+=d.length,d.missing){this.aacOverFlow=d;break}else for(h++;a<l-1&&!Ig(r,a);a++);}parseMPEGPES(e,t){const n=t.data,i=n.length;let r=0,a=0;const l=t.pts;if(l===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(qk(n,a)){const u=Kk(e,n,a,l,r);if(u)a+=u.length,r++;else break}else a++}parseAC3PES(e,t){{const n=t.data,i=t.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const r=n.length;let a=0,l=0,u;for(;l<r&&(u=Xk(e,n,l,i,a++))>0;)l+=u}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=yt({},t,{type:this._videoTrack?_s.emsg:_s.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function l3(s,e){return((s[e+1]&31)<<8)+s[e+2]}function l4(s,e){return(s[e+10]&31)<<8|s[e+11]}function c4(s,e,t,n,i,r){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},l=(s[e+1]&15)<<8|s[e+2],u=e+3+l-4,h=(s[e+10]&15)<<8|s[e+11];for(e+=12+h;e<u;){const d=l3(s,e),g=(s[e+3]&15)<<8|s[e+4];switch(s[e]){case 207:if(!n){lx("ADTS AAC",r);break}case 15:a.audioPid===-1&&(a.audioPid=d);break;case 21:a.id3Pid===-1&&(a.id3Pid=d);break;case 219:if(!n){lx("H.264",r);break}case 27:a.videoPid===-1&&(a.videoPid=d);break;case 3:case 4:!t.mpeg&&!t.mp3?r.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=d,a.segmentAudioCodec="mp3");break;case 193:if(!n){lx("AC-3",r);break}case 129:t.ac3?a.audioPid===-1&&(a.audioPid=d,a.segmentAudioCodec="ac3"):r.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&g>0){let p=e+5,y=g;for(;y>2;){switch(s[p]){case 106:t.ac3!==!0?r.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=d,a.segmentAudioCodec="ac3");break}const b=s[p+1]+2;p+=b,y-=b}}break;case 194:case 135:return c3(i,new Error("Unsupported EC-3 in M2TS found"),void 0,r),a;case 36:a.videoPid===-1&&(a.videoPid=d,a.segmentVideoCodec="hevc",r.log("HEVC in M2TS found"));break}e+=g+5}return a}function c3(s,e,t,n){n.warn(`parsing error: ${e.message}`),s.emit(_.ERROR,_.ERROR,{type:_e.MEDIA_ERROR,details:Z.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function lx(s,e){e.log(`${s} with AES-128-CBC encryption found in unencrypted stream`)}function Bc(s,e){let t=0,n,i,r,a,l;const u=s.data;if(!s||s.size===0)return null;for(;u[0].length<19&&u.length>1;)u[0]=Js(u[0],u[1]),u.splice(1,1);if(n=u[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>s.size-6)return null;const d=n[7];d&192&&(a=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,d&64?(l=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,a-l>60*9e4&&(e.warn(`${Math.round((a-l)/9e4)}s delta between PTS and DTS, align them`),a=l)):l=a),r=n[8];let g=r+9;if(s.size<=g)return null;s.size-=g;const p=new Uint8Array(s.size);for(let y=0,v=u.length;y<v;y++){n=u[y];let b=n.byteLength;if(g)if(g>b){g-=b;continue}else n=n.subarray(g),b-=g,g=0;p.set(n,t),t+=b}return i&&(i-=r+3),{data:p,pts:a,dts:l,len:i}}return null}class u4{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Oa=Math.pow(2,32)-1;class W{static init(){W.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in W.types)W.types.hasOwnProperty(e)&&(W.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);W.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);W.STTS=W.STSC=W.STCO=r,W.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),W.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),W.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),W.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),l=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);W.FTYP=W.box(W.types.ftyp,a,u,a,l),W.DINF=W.box(W.types.dinf,W.box(W.types.dref,i))}static box(e,...t){let n=8,i=t.length;const r=i;for(;i--;)n+=t[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(e,4),i=0,n=8;i<r;i++)a.set(t[i],n),n+=t[i].byteLength;return a}static hdlr(e){return W.box(W.types.hdlr,W.HDLR_TYPES[e])}static mdat(e){return W.box(W.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Oa+1)),i=Math.floor(t%(Oa+1));return W.box(W.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return W.box(W.types.mdia,W.mdhd(e.timescale||0,e.duration||0),W.hdlr(e.type),W.minf(e))}static mfhd(e){return W.box(W.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?W.box(W.types.minf,W.box(W.types.smhd,W.SMHD),W.DINF,W.stbl(e)):W.box(W.types.minf,W.box(W.types.vmhd,W.VMHD),W.DINF,W.stbl(e))}static moof(e,t,n){return W.box(W.types.moof,W.mfhd(e),W.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=W.trak(e[t]);return W.box.apply(null,[W.types.moov,W.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(W.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=W.trex(e[t]);return W.box.apply(null,[W.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Oa+1)),i=Math.floor(t%(Oa+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return W.box(W.types.mvhd,r)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,r;for(i=0;i<t.length;i++)r=t[i].flags,n[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return W.box(W.types.sdtp,n)}static stbl(e){return W.box(W.types.stbl,W.stsd(e),W.box(W.types.stts,W.STTS),W.box(W.types.stsc,W.STSC),W.box(W.types.stsz,W.STSZ),W.box(W.types.stco,W.STCO))}static avc1(e){let t=[],n=[],i,r,a;for(i=0;i<e.sps.length;i++)r=e.sps[i],a=r.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(r));for(i=0;i<e.pps.length;i++)r=e.pps[i],a=r.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(r));const l=W.box(W.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),u=e.width,h=e.height,d=e.pixelRatio[0],g=e.pixelRatio[1];return W.box(W.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,h>>8&255,h&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,W.box(W.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),W.box(W.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,d&255,g>>24,g>>16&255,g>>8&255,g&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return W.box(W.types.mp4a,W.audioStsd(e),W.box(W.types.esds,W.esds(e)))}static mp3(e){return W.box(W.types[".mp3"],W.audioStsd(e))}static ac3(e){return W.box(W.types["ac-3"],W.audioStsd(e),W.box(W.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return W.box(W.types.stsd,W.STSD,W.mp4a(e));if(t==="ac3"&&e.config)return W.box(W.types.stsd,W.STSD,W.ac3(e));if(t==="mp3"&&e.codec==="mp3")return W.box(W.types.stsd,W.STSD,W.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return W.box(W.types.stsd,W.STSD,W.avc1(e));if(t==="hevc"&&e.vps)return W.box(W.types.stsd,W.STSD,W.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),i=e.width||0,r=e.height||0,a=Math.floor(n/(Oa+1)),l=Math.floor(n%(Oa+1));return W.box(W.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,l>>24,l>>16&255,l>>8&255,l&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,r>>8&255,r&255,0,0]))}static traf(e,t){const n=W.sdtp(e),i=e.id,r=Math.floor(t/(Oa+1)),a=Math.floor(t%(Oa+1));return W.box(W.types.traf,W.box(W.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),W.box(W.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,a>>24,a>>16&255,a>>8&255,a&255])),W.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,W.box(W.types.trak,W.tkhd(e),W.mdia(e))}static trex(e){const t=e.id;return W.box(W.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,r=12+16*i,a=new Uint8Array(r);let l,u,h,d,g,p;for(t+=8+r,a.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),l=0;l<i;l++)u=n[l],h=u.duration,d=u.size,g=u.flags,p=u.cts,a.set([h>>>24&255,h>>>16&255,h>>>8&255,h&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,g.isLeading<<2|g.dependsOn,g.isDependedOn<<6|g.hasRedundancy<<4|g.paddingValue<<1|g.isNonSync,g.degradPrio&61440,g.degradPrio&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*l);return W.box(W.types.trun,a)}static initSegment(e){W.types||W.init();const t=W.moov(e);return Js(W.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],i=4,r=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),i-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let a=r.length;for(let v=0;v<n.length;v+=1){a+=3;for(let b=0;b<n[v].length;b+=1)a+=2+n[v][b].length}const l=new Uint8Array(a);l.set(r,0),a=r.length;const u=n.length-1;for(let v=0;v<n.length;v+=1){l.set(new Uint8Array([32+v|(v===u?128:0),0,n[v].length]),a),a+=3;for(let b=0;b<n[v].length;b+=1)l.set(new Uint8Array([n[v][b].length>>8,n[v][b].length&255]),a),a+=2,l.set(n[v][b],a),a+=n[v][b].length}const h=W.box(W.types.hvcC,l),d=e.width,g=e.height,p=e.pixelRatio[0],y=e.pixelRatio[1];return W.box(W.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,d&255,g>>8&255,g&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h,W.box(W.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),W.box(W.types.pasp,new Uint8Array([p>>24,p>>16&255,p>>8&255,p&255,y>>24,y>>16&255,y>>8&255,y&255])))}}W.types=void 0;W.HDLR_TYPES=void 0;W.STTS=void 0;W.STSC=void 0;W.STCO=void 0;W.STSZ=void 0;W.VMHD=void 0;W.SMHD=void 0;W.STSD=void 0;W.FTYP=void 0;W.DINF=void 0;const Jk=9e4;function Uv(s,e,t=1,n=!1){const i=s*e*t;return n?Math.round(i):i}function h4(s,e,t=1,n=!1){return Uv(s,e,1/t,n)}function gf(s,e=!1){return Uv(s,1e3,1/Jk,e)}function f4(s,e=1){return Uv(s,Jk,1/e)}const d4=10*1e3,g4=1024,m4=1152,p4=1536;let Fc=null,cx=null;function wT(s,e,t,n){return{duration:e,size:t,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:s?2:1,isNonSync:s?0:1}}}class ng{constructor(e,t,n,i){if(this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=i,this.ISGenerated=!1,Fc===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Fc=a?parseInt(a[1]):0}if(cx===null){const r=navigator.userAgent.match(/Safari\/(\d+)/i);cx=r?parseInt(r[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,i=e.reduce((r,a)=>{let l=a.pts,u=l-r;return u<-4294967296&&(t=!0,l=Ws(l,n),u=l-r),u>0?r:l},n);return t&&this.logger.debug("PTS rollover detected"),i}remux(e,t,n,i,r,a,l,u){let h,d,g,p,y,v,b=r,w=r;const A=e.pid>-1,S=t.pid>-1,T=t.samples.length,D=e.samples.length>0,L=l&&T>0||T>1;if((!A||D)&&(!S||L)||this.ISGenerated||l){if(this.ISGenerated){var M,I,N,P;const me=this.videoTrackConfig;(me&&(t.width!==me.width||t.height!==me.height||((M=t.pixelRatio)==null?void 0:M[0])!==((I=me.pixelRatio)==null?void 0:I[0])||((N=t.pixelRatio)==null?void 0:N[1])!==((P=me.pixelRatio)==null?void 0:P[1]))||!me&&L||this.nextAudioPts===null&&D)&&this.resetInitSegment()}this.ISGenerated||(g=this.generateIS(e,t,r,a));const z=this.isVideoContiguous;let te=-1,ye;if(L&&(te=y4(t.samples),!z&&this.config.forceKeyFrameOnDiscontinuity))if(v=!0,te>0){this.logger.warn(`[mp4-remuxer]: Dropped ${te} out of ${T} video samples due to a missing keyframe`);const me=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(te),t.dropped+=te,w+=(t.samples[0].pts-me)/t.inputTimeScale,ye=w}else te===-1&&(this.logger.warn(`[mp4-remuxer]: No keyframe found out of ${T} video samples`),v=!1);if(this.ISGenerated){if(D&&L){const me=this.getVideoStartPts(t.samples),G=(Ws(e.samples[0].pts,me)-me)/t.inputTimeScale;b+=Math.max(0,G),w+=Math.max(0,-G)}if(D){if(e.samplerate||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),g=this.generateIS(e,t,r,a)),d=this.remuxAudio(e,b,this.isAudioContiguous,a,S||L||u===Te.AUDIO?w:void 0),L){const me=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),g=this.generateIS(e,t,r,a)),h=this.remuxVideo(t,w,z,me)}}else L&&(h=this.remuxVideo(t,w,z,0));h&&(h.firstKeyFrame=te,h.independent=te!==-1,h.firstKeyFramePTS=ye)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(y=eL(n,r,this._initPTS,this._initDTS)),i.samples.length&&(p=tL(i,r,this._initPTS))),{audio:d,video:h,initSegment:g,independent:v,text:p,id3:y}}generateIS(e,t,n,i){const r=e.samples,a=t.samples,l=this.typeSupported,u={},h=this._initPTS;let d=!h||i,g="audio/mp4",p,y,v;if(d&&(p=y=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":l.mpeg?(g="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}u.audio={id:"audio",container:g,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&l.mpeg?new Uint8Array(0):W.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(v=e.inputTimeScale,!h||v!==h.timescale?p=y=r[0].pts-Math.round(v*n):d=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:W.initSegment([t]),metadata:{width:t.width,height:t.height}},d)if(v=t.inputTimeScale,!h||v!==h.timescale){const b=this.getVideoStartPts(a),w=Math.round(v*n);y=Math.min(y,Ws(a[0].dts,b)-w),p=Math.min(p,b-w)}else d=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,d?(this._initPTS={baseTime:p,timescale:v},this._initDTS={baseTime:y,timescale:v}):p=v=void 0,{tracks:u,initPTS:p,timescale:v}}remuxVideo(e,t,n,i){const r=e.inputTimeScale,a=e.samples,l=[],u=a.length,h=this._initPTS;let d=this.nextAvcDts,g=8,p=this.videoSampleDuration,y,v,b=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,A=!1;if(!n||d===null){const X=t*r,C=a[0].pts-Ws(a[0].dts,a[0].pts);Fc&&d!==null&&Math.abs(X-C-d)<15e3?n=!0:d=X-C}const S=h.baseTime*r/h.timescale;for(let X=0;X<u;X++){const C=a[X];C.pts=Ws(C.pts-S,d),C.dts=Ws(C.dts-S,d),C.dts<a[X>0?X-1:X].dts&&(A=!0)}A&&a.sort(function(X,C){const j=X.dts-C.dts,re=X.pts-C.pts;return j||re}),y=a[0].dts,v=a[a.length-1].dts;const T=v-y,D=T?Math.round(T/(u-1)):p||e.inputTimeScale/30;if(n){const X=y-d,C=X>D,j=X<-1;if((C||j)&&(C?this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${gf(X,!0)} ms (${X}dts) hole between fragments detected at ${t.toFixed(3)}`):this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${gf(-X,!0)} ms (${X}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!j||d>=a[0].pts||Fc)){y=d;const re=a[0].pts-X;if(C)a[0].dts=y,a[0].pts=re;else{let le=!0;for(let ae=0;ae<a.length&&!(a[ae].dts>re&&le);ae++){const ve=a[ae].pts;if(a[ae].dts-=X,a[ae].pts-=X,ae<a.length-1){const xe=a[ae+1].pts,ze=a[ae].pts,ke=xe<=ze,Ne=xe<=ve;le=ke==Ne}}}this.logger.log(`Video: Initial PTS/DTS adjusted: ${gf(re,!0)}/${gf(y,!0)}, delta: ${gf(X,!0)} ms`)}}y=Math.max(0,y);let L=0,B=0,M=y;for(let X=0;X<u;X++){const C=a[X],j=C.units,re=j.length;let le=0;for(let ae=0;ae<re;ae++)le+=j[ae].data.length;B+=le,L+=re,C.length=le,C.dts<M?(C.dts=M,M+=D/4|0||1):M=C.dts,b=Math.min(C.pts,b),w=Math.max(C.pts,w)}v=a[u-1].dts;const I=B+4*L+8;let N;try{N=new Uint8Array(I)}catch(X){this.observer.emit(_.ERROR,_.ERROR,{type:_e.MUX_ERROR,details:Z.REMUX_ALLOC_ERROR,fatal:!1,error:X,bytes:I,reason:`fail allocating video mdat ${I}`});return}const P=new DataView(N.buffer);P.setUint32(0,I),N.set(W.types.mdat,4);let z=!1,te=Number.POSITIVE_INFINITY,ye=Number.POSITIVE_INFINITY,me=Number.NEGATIVE_INFINITY,K=Number.NEGATIVE_INFINITY;for(let X=0;X<u;X++){const C=a[X],j=C.units;let re=0;for(let ve=0,xe=j.length;ve<xe;ve++){const ze=j[ve],ke=ze.data,Ne=ze.data.byteLength;P.setUint32(g,Ne),g+=4,N.set(ke,g),g+=Ne,re+=4+Ne}let le;if(X<u-1)p=a[X+1].dts-C.dts,le=a[X+1].pts-C.pts;else{const ve=this.config,xe=X>0?C.dts-a[X-1].dts:D;if(le=X>0?C.pts-a[X-1].pts:D,ve.stretchShortVideoTrack&&this.nextAudioPts!==null){const ze=Math.floor(ve.maxBufferHole*r),ke=(i?b+i*r:this.nextAudioPts)-C.pts;ke>ze?(p=ke-xe,p<0?p=xe:z=!0,this.logger.log(`[mp4-remuxer]: It is approximately ${ke/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=xe}else p=xe}const ae=Math.round(C.pts-C.dts);te=Math.min(te,p),me=Math.max(me,p),ye=Math.min(ye,le),K=Math.max(K,le),l.push(wT(C.key,p,re,ae))}if(l.length){if(Fc){if(Fc<70){const X=l[0].flags;X.dependsOn=2,X.isNonSync=0}}else if(cx&&K-ye<me-te&&D/me<.025&&l[0].cts===0){this.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let X=y;for(let C=0,j=l.length;C<j;C++){const re=X+l[C].duration,le=X+l[C].cts;if(C<j-1){const ae=re+l[C+1].cts;l[C].duration=ae-le}else l[C].duration=C?l[C-1].duration:D;l[C].cts=0,X=re}}}p=z||!p?D:p,this.nextAvcDts=d=v+p,this.videoSampleDuration=p,this.isVideoContiguous=!0;const se={data1:W.moof(e.sequenceNumber++,y,yt(e,{samples:l})),data2:N,startPTS:b/r,endPTS:(w+p)/r,startDTS:y/r,endDTS:d/r,type:"video",hasAudio:!1,hasVideo:!0,nb:l.length,dropped:e.dropped};return e.samples=[],e.dropped=0,se}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return m4;case"ac3":return p4;default:return g4}}remuxAudio(e,t,n,i,r){const a=e.inputTimeScale,l=e.samplerate?e.samplerate:a,u=a/l,h=this.getSamplesPerFrame(e),d=h*u,g=this._initPTS,p=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,y=[],v=r!==void 0;let b=e.samples,w=p?0:8,A=this.nextAudioPts||-1;const S=t*a,T=g.baseTime*a/g.timescale;if(this.isAudioContiguous=n=n||b.length&&A>0&&(i&&Math.abs(S-A)<9e3||Math.abs(Ws(b[0].pts-T,S)-A)<20*d),b.forEach(function(G){G.pts=Ws(G.pts-T,S)}),!n||A<0){if(b=b.filter(G=>G.pts>=0),!b.length)return;r===0?A=0:i&&!v?A=Math.max(0,S):A=b[0].pts}if(e.segmentCodec==="aac"){const G=this.config.maxAudioFramesDrift;for(let J=0,se=A;J<b.length;J++){const X=b[J],C=X.pts,j=C-se,re=Math.abs(1e3*j/a);if(j<=-G*d&&v)J===0&&(this.logger.warn(`Audio frame @ ${(C/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*j/a)} ms.`),this.nextAudioPts=A=se=C);else if(j>=G*d&&re<d4&&v){let le=Math.round(j/d);se=C-le*d,se<0&&(le--,se+=d),J===0&&(this.nextAudioPts=A=se),this.logger.warn(`[mp4-remuxer]: Injecting ${le} audio frame @ ${(se/a).toFixed(3)}s due to ${Math.round(1e3*j/a)} ms gap.`);for(let ae=0;ae<le;ae++){const ve=Math.max(se,0);let xe=u4.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);xe||(this.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),xe=X.unit.subarray()),b.splice(J,0,{unit:xe,pts:ve}),se+=d,J++}}X.pts=se,se+=d}}let D=null,L=null,B,M=0,I=b.length;for(;I--;)M+=b[I].unit.byteLength;for(let G=0,J=b.length;G<J;G++){const se=b[G],X=se.unit;let C=se.pts;if(L!==null){const re=y[G-1];re.duration=Math.round((C-L)/u)}else if(n&&e.segmentCodec==="aac"&&(C=A),D=C,M>0){M+=w;try{B=new Uint8Array(M)}catch(re){this.observer.emit(_.ERROR,_.ERROR,{type:_e.MUX_ERROR,details:Z.REMUX_ALLOC_ERROR,fatal:!1,error:re,bytes:M,reason:`fail allocating audio mdat ${M}`});return}p||(new DataView(B.buffer).setUint32(0,M),B.set(W.types.mdat,4))}else return;B.set(X,w);const j=X.byteLength;w+=j,y.push(wT(!0,h,j,0)),L=C}const N=y.length;if(!N)return;const P=y[y.length-1];this.nextAudioPts=A=L+u*P.duration;const z=p?new Uint8Array(0):W.moof(e.sequenceNumber++,D/u,yt({},e,{samples:y}));e.samples=[];const te=D/a,ye=A/a,K={data1:z,data2:B,startPTS:te,endPTS:ye,startDTS:te,endDTS:ye,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.isAudioContiguous=!0,K}}function Ws(s,e){let t;if(e===null)return s;for(e<s?t=-8589934592:t=8589934592;Math.abs(s-e)>4294967296;)s+=t;return s}function y4(s){for(let e=0;e<s.length;e++)if(s[e].key)return e;return-1}function eL(s,e,t,n){const i=s.samples.length;if(!i)return;const r=s.inputTimeScale;for(let l=0;l<i;l++){const u=s.samples[l];u.pts=Ws(u.pts-t.baseTime*r/t.timescale,e*r)/r,u.dts=Ws(u.dts-n.baseTime*r/n.timescale,e*r)/r}const a=s.samples;return s.samples=[],{samples:a}}function tL(s,e,t){const n=s.samples.length;if(!n)return;const i=s.inputTimeScale;for(let a=0;a<n;a++){const l=s.samples[a];l.pts=Ws(l.pts-t.baseTime*i/t.timescale,e*i)/i}s.samples.sort((a,l)=>a.pts-l.pts);const r=s.samples;return s.samples=[],{samples:r}}class x4{constructor(e,t,n,i){this.logger=void 0,this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.logger=i}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(aB(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=uk(e);i.audio&&(t=AT(i.audio,pt.AUDIO)),i.video&&(n=AT(i.video,pt.VIDEO));const r={};i.audio&&i.video?r.audiovideo={container:"video/mp4",codec:t+","+n,supplemental:i.video.supplemental,initSegment:e,id:"main"}:i.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?r.video={container:"video/mp4",codec:n,supplemental:i.video.supplemental,initSegment:e,id:"main"}:this.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r}remux(e,t,n,i,r,a){var l,u;let{initPTS:h,lastEndTime:d}=this;const g={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};be(d)||(d=this.lastEndTime=r||0);const p=t.samples;if(!(p!=null&&p.length))return g;const y={initPTS:void 0,timescale:1};let v=this.initData;if((l=v)!=null&&l.length||(this.generateInitSegment(p),v=this.initData),!((u=v)!=null&&u.length))return this.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),g;this.emitInitSegment&&(y.tracks=this.initTracks,this.emitInitSegment=!1);const b=lB(p,v),w=oB(v,p),A=w===null?r:w;(a||!h)&&(v4(h,A,r,b)||y.timescale!==h.timescale)&&(y.initPTS=A-r,h&&h.timescale===1&&this.logger.warn(`Adjusting initPTS @${r} from ${h.baseTime/h.timescale} to ${y.initPTS}`),this.initPTS=h={baseTime:y.initPTS,timescale:1});const S=e?A-h.baseTime/h.timescale:d,T=S+b;uB(v,p,h.baseTime/h.timescale),b>0?this.lastEndTime=T:(this.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const D=!!v.audio,L=!!v.video;let B="";D&&(B+="audio"),L&&(B+="video");const M={data1:p,startPTS:S,startDTS:S,endPTS:T,endDTS:T,type:B,hasAudio:D,hasVideo:L,nb:1,dropped:0};return g.audio=M.type==="audio"?M:void 0,g.video=M.type!=="audio"?M:void 0,g.initSegment=y,g.id3=eL(n,r,h,h),i.samples.length&&(g.text=tL(i,r,h)),g}}function v4(s,e,t,n){if(s===null)return!0;const i=Math.max(n,1),r=e-s.baseTime/s.timescale;return Math.abs(r-t)>i}function AT(s,e){const t=s==null?void 0:s.codec;return t&&t.length>4?t:e===pt.AUDIO?t==="ec-3"||t==="ac-3"||t==="alac"?t:t==="fLaC"||t==="Opus"?Sg(t,!1):(et.warn(`Unhandled audio codec "${t}" in mp4 MAP`),t||"mp4a"):(et.warn(`Unhandled video codec "${t}" in mp4 MAP`),t||"avc1")}let Mr;try{Mr=self.performance.now.bind(self.performance)}catch{Mr=Date.now}const sg=[{demux:a4,remux:x4},{demux:Va,remux:ng},{demux:n4,remux:ng},{demux:i4,remux:ng}];sg.splice(2,0,{demux:s4,remux:ng});class TT{constructor(e,t,n,i,r,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=r,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const r=n.transmuxing;r.executeStart=Mr();let a=new Uint8Array(e);const{currentTransmuxState:l,transmuxConfig:u}=this;i&&(this.currentTransmuxState=i);const{contiguous:h,discontinuity:d,trackSwitch:g,accurateTimeOffset:p,timeOffset:y,initSegmentChange:v}=i||l,{audioCodec:b,videoCodec:w,defaultInitPts:A,duration:S,initSegmentData:T}=u,D=b4(a,t);if(D&&tu(D.method)){const I=this.getDecrypter(),N=Dv(D.method);if(I.isSync()){let P=I.softwareDecrypt(a,D.key.buffer,D.iv.buffer,N);if(n.part>-1){const te=I.flush();P=te&&te.buffer}if(!P)return r.executeEnd=Mr(),ux(n);a=new Uint8Array(P)}else return this.asyncResult=!0,this.decryptionPromise=I.webCryptoDecrypt(a,D.key.buffer,D.iv.buffer,N).then(P=>{const z=this.push(P,null,n);return this.decryptionPromise=null,z}),this.decryptionPromise}const L=this.needsProbing(d,g);if(L){const I=this.configureTransmuxer(a);if(I)return this.logger.warn(`[transmuxer] ${I.message}`),this.observer.emit(_.ERROR,_.ERROR,{type:_e.MEDIA_ERROR,details:Z.FRAG_PARSING_ERROR,fatal:!1,error:I,reason:I.message}),r.executeEnd=Mr(),ux(n)}(d||g||v||L)&&this.resetInitSegment(T,b,w,S,t),(d||v||L)&&this.resetInitialTimestamp(A),h||this.resetContiguity();const B=this.transmux(a,D,y,p,n);this.asyncResult=ad(B);const M=this.currentTransmuxState;return M.contiguous=!0,M.discontinuity=!1,M.trackSwitch=!1,r.executeEnd=Mr(),B}flush(e){const t=e.transmuxing;t.executeStart=Mr();const{decrypter:n,currentTransmuxState:i,decryptionPromise:r}=this;if(r)return this.asyncResult=!0,r.then(()=>this.flush(e));const a=[],{timeOffset:l}=i;if(n){const g=n.flush();g&&a.push(this.push(g.buffer,null,e))}const{demuxer:u,remuxer:h}=this;if(!u||!h){t.executeEnd=Mr();const g=[ux(e)];return this.asyncResult?Promise.resolve(g):g}const d=u.flush(l);return ad(d)?(this.asyncResult=!0,d.then(g=>(this.flushRemux(a,g,e),a))):(this.flushRemux(a,d,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:r,id3Track:a,textTrack:l}=t,{accurateTimeOffset:u,timeOffset:h}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===Te.MAIN?"level":"track"} ${n.level}`);const d=this.remuxer.remux(i,r,a,l,h,u,!0,this.id);e.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=Mr()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,r){const{demuxer:a,remuxer:l}=this;!a||!l||(a.resetInitSegment(e,t,n,i),l.resetInitSegment(e,t,n,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,r){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,n,i,r):a=this.transmuxUnencrypted(e,n,i,r),a}transmuxUnencrypted(e,t,n,i){const{audioTrack:r,videoTrack:a,id3Track:l,textTrack:u}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,a,l,u,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,r){return this.demuxer.demuxSampleAes(e,t,n).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,n,i,!1,this.id),chunkMeta:r}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i}=this;let r;for(let g=0,p=sg.length;g<p;g++){var a;if((a=sg[g].demux)!=null&&a.probe(e,this.logger)){r=sg[g];break}}if(!r)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,u=this.remuxer,h=r.remux,d=r.demux;(!u||!(u instanceof h))&&(this.remuxer=new h(n,t,i,this.logger)),(!l||!(l instanceof d))&&(this.demuxer=new d(n,t,i,this.logger),this.probe=d.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new kv(this.config)),e}}function b4(s,e){let t=null;return s.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const ux=s=>({remuxResult:{},chunkMeta:s});function ad(s){return"then"in s&&s.then instanceof Function}class E4{constructor(e,t,n,i,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=r||null}}class w4{constructor(e,t,n,i,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=r,this.initSegmentChange=a}}let ST=0;class nL{constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=ST++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=u=>{const h=u.data,d=this.hls;if(!(!d||!(h!=null&&h.event)||h.instanceNo!==this.instanceNo))switch(h.event){case"init":{var g;const p=(g=this.workerContext)==null?void 0:g.objectURL;p&&self.URL.revokeObjectURL(p);break}case"transmuxComplete":{this.handleTransmuxComplete(h.data);break}case"flush":{this.onFlush(h.data);break}case"workerLog":{d.logger[h.data.logType]&&d.logger[h.data.logType](h.data.message);break}default:{h.data=h.data||{},h.data.frag=this.frag,h.data.part=this.part,h.data.id=this.id,d.trigger(h.event,h.data);break}}},this.onWorkerError=u=>{if(!this.hls)return;const h=new Error(`${u.message}  (${u.filename}:${u.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(_.ERROR,{type:_e.OTHER_ERROR,details:Z.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:h})};const r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const a=(u,h)=>{h=h||{},h.frag=this.frag||void 0,u===_.ERROR&&(h=h,h.parent=this.id,h.part=this.part,this.error=h.error),this.hls.trigger(u,h)};this.observer=new Ov,this.observer.on(_.FRAG_DECRYPTED,a),this.observer.on(_.ERROR,a);const l=GA(r.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const u=this.hls.logger;if(r.workerPath||S8()){try{r.workerPath?(u.log(`loading Web Worker ${r.workerPath} for "${t}"`),this.workerContext=R8(r.workerPath)):(u.log(`injecting Web Worker for "${t}"`),this.workerContext=_8());const{worker:d}=this.workerContext;d.addEventListener("message",this.onWorkerMessage),d.addEventListener("error",this.onWorkerError),d.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:l,id:t,config:Ct(r)})}catch(d){u.warn(`Error setting up "${t}" Web Worker, fallback to inline`,d),this.terminateWorker(),this.error=null,this.transmuxer=new TT(this.observer,l,r,"",t,e.logger)}return}}this.transmuxer=new TT(this.observer,l,r,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=ST++;const t=this.hls.config,n=GA(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:Ct(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),k8(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,i,r,a,l,u,h,d){var g,p;h.transmuxing.start=self.performance.now();const{instanceNo:y,transmuxer:v}=this,b=a?a.start:r.start,w=r.decryptdata,A=this.frag,S=!(A&&r.cc===A.cc),T=!(A&&h.level===A.level),D=A?h.sn-A.sn:-1,L=this.part?h.part-this.part.index:-1,B=D===0&&h.id>1&&h.id===(A==null?void 0:A.stats.chunkCount),M=!T&&(D===1||D===0&&(L===1||B&&L<=0)),I=self.performance.now();(T||D||r.stats.parsing.start===0)&&(r.stats.parsing.start=I),a&&(L||!M)&&(a.stats.parsing.start=I);const N=!(A&&((g=r.initSegment)==null?void 0:g.url)===((p=A.initSegment)==null?void 0:p.url)),P=new w4(S,M,u,T,b,N);if(!M||S||N){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${r.type} sn: ${h.sn}${h.part>-1?" part: "+h.part:""} ${this.id===Te.MAIN?"level":"track"}: ${h.level} id: ${h.id}
        discontinuity: ${S}
        trackSwitch: ${T}
        contiguous: ${M}
        accurateTimeOffset: ${u}
        timeOffset: ${b}
        initSegmentChange: ${N}`);const z=new E4(n,i,t,l,d);this.configureTransmuxer(z)}if(this.frag=r,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:y,cmd:"demux",data:e,decryptdata:w,chunkMeta:h,state:P},e instanceof ArrayBuffer?[e]:[]);else if(v){const z=v.push(e,w,h,P);ad(z)?z.then(te=>{this.handleTransmuxComplete(te)}).catch(te=>{this.transmuxerError(te,h,"transmuxer-interface push error")}):this.handleTransmuxComplete(z)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const i=n.flush(e);ad(i)?i.then(r=>{this.handleFlushResult(r,e)}).catch(r=>{this.transmuxerError(r,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const _T=100;class A4 extends Iv{constructor(e,t,n){super(e,t,n,"audio-stream-controller",Te.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(_.LEVEL_LOADED,this.onLevelLoaded,this),e.on(_.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(_.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(_.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(_.BUFFER_RESET,this.onBufferReset,this),e.on(_.BUFFER_CREATED,this.onBufferCreated,this),e.on(_.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(_.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(_.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(_.FRAG_LOADING,this.onFragLoading,this),e.on(_.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(_.LEVEL_LOADED,this.onLevelLoaded,this),e.off(_.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(_.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(_.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(_.BUFFER_RESET,this.onBufferReset,this),e.off(_.BUFFER_CREATED,this.onBufferCreated,this),e.off(_.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(_.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(_.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(_.FRAG_LOADING,this.onFragLoading,this),e.off(_.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:r}){if(n===Te.MAIN){const a=t.cc,l=this.fragCurrent;if(this.initPTS[a]={baseTime:i,timescale:r},this.log(`InitPTS for cc: ${a} found from main: ${i}/${r}`),this.mainAnchor=t,this.state===ue.WAITING_INIT_PTS){const u=this.waitingData;(!u&&!this.loadingParts||u&&u.frag.cc!==a)&&(this.nextLoadPosition=this.findSyncFrag(t).start),this.tick()}else!this.hls.hasEnoughToStart&&l&&l.cc!==a?(this.startFragRequested=!1,this.nextLoadPosition=this.findSyncFrag(t).start,l.abortRequests(),this.resetLoadingState()):this.state===ue.IDLE&&this.tick()}}findSyncFrag(e){const t=this.getLevelDetails(),n=e.cc;return UB(t,n,e)||t&&Ek(t.fragments,n)||e}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=ue.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(_T),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=ue.IDLE):this.state=ue.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case ue.IDLE:this.doTickIdle();break;case ue.WAITING_TRACK:{const{levels:t,trackId:n}=this,i=t==null?void 0:t[n],r=i==null?void 0:i.details;if(r&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(r))break;this.state=ue.WAITING_INIT_PTS}break}case ue.FRAG_LOADING_WAITING_RETRY:{var e;const t=performance.now(),n=this.retryDate;if(!n||t>=n||(e=this.media)!=null&&e.seeking){const{levels:i,trackId:r}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((i==null?void 0:i[r])||null),this.state=ue.IDLE}break}case ue.WAITING_INIT_PTS:{const t=this.waitingData;if(t){const{frag:n,part:i,cache:r,complete:a}=t,l=this.mainAnchor;if(this.initPTS[n.cc]!==void 0){this.waitingData=null,this.state=ue.FRAG_LOADING;const u=r.flush().buffer,h={frag:n,part:i,payload:u,networkDetails:null};this._handleFragmentLoadProgress(h),a&&super._handleFragmentLoadComplete(h)}else l&&l.cc!==t.frag.cc&&(this.log(`Waiting fragment cc (${n.cc}) cancelled because video is at cc ${l.cc}`),this.nextLoadPosition=this.findSyncFrag(l).start,this.clearWaitingFragment())}else this.state=ue.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.state!==ue.STOPPED&&(this.state=ue.IDLE))}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:i,trackId:r}=this,a=t.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(n!=null&&n[r]))return;const l=n[r],u=l.details;if(!u||this.waitForLive(l)||this.waitForCdnTuneIn(u)){this.state=ue.WAITING_TRACK,this.startFragRequested=!1;return}const h=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&h&&(this.bufferFlushed=!1,this.afterBufferFlushed(h,pt.AUDIO,Te.AUDIO));const d=this.getFwdBufferInfo(h,Te.AUDIO);if(d===null)return;if(!this.switchingTrack&&this._streamEnded(d,u)){t.trigger(_.BUFFER_EOS,{type:"audio"}),this.state=ue.ENDED;return}const g=d.len,p=t.maxBufferLength,y=u.fragments,v=y[0].start,b=this.getLoadPosition(),w=this.flushing?b:d.end;if(this.switchingTrack&&i){const T=b;u.PTSKnown&&T<v&&(d.end>v||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=v+.05)}if(g>=p&&!this.switchingTrack&&w<y[y.length-1].start)return;let A=this.getNextFragment(w,u);if(A&&this.isLoopLoading(A,w)&&(A=this.getNextFragmentLoopLoading(A,u,d,Te.MAIN,p)),!A){this.bufferFlushed=!0;return}let S=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&S&&En(A)&&!A.endList&&(!u.live||!this.loadingParts&&w<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(S)===hn.OK&&(this.mainFragLoading=S=null),S&&En(S))){if(A.start>S.end){const D=this.fragmentTracker.getFragAtPos(w,Te.MAIN);D&&D.end>S.end&&(S=D,this.mainFragLoading={frag:D,targetBufferTime:null})}if(A.start>S.end)return}this.loadFragment(A,l,w)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new td(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==ue.STOPPED&&(this.setInterval(_T),this.state=ue.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(_.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:i}=this,{details:r,id:a,groupId:l,track:u}=t;if(!i){this.warn(`Audio tracks reset while loading track ${a} "${u.name}" of "${l}"`);return}const h=this.mainDetails;if(!h||r.endCC>h.endCC||h.expired){this.cachedTrackLoadedData=t,this.state!==ue.STOPPED&&(this.state=ue.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${u.name}" of "${l}" loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const d=i[a];let g=0;if(r.live||(n=d.details)!=null&&n.live){if(this.checkLiveUpdate(r),r.deltaUpdateFailed)return;if(d.details){var p;g=this.alignPlaylists(r,d.details,(p=this.levelLastLoaded)==null?void 0:p.details)}r.alignedSliding||(Pk(r,h),r.alignedSliding||Cg(r,h),g=r.fragmentStart)}d.details=r,this.levelLastLoaded=d,this.startFragRequested||this.setStartPosition(h,g),this.hls.trigger(_.AUDIO_TRACK_UPDATED,{details:r,id:a,groupId:t.groupId}),this.state===ue.WAITING_TRACK&&!this.waitForCdnTuneIn(r)&&(this.state=ue.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:r}=e,{config:a,trackId:l,levels:u}=this;if(!u){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const h=u[l];if(!h){this.warn("Audio track is undefined on fragment load progress");return}const d=h.details;if(!d){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const g=a.defaultAudioCodec||h.audioCodec||"mp4a.40.2";let p=this.transmuxer;p||(p=this.transmuxer=new nL(this.hls,Te.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const y=this.initPTS[n.cc],v=(t=n.initSegment)==null?void 0:t.data;if(y!==void 0){const w=i?i.index:-1,A=w!==-1,S=new Lv(n.level,n.sn,n.stats.chunkCount,r.byteLength,w,A);p.push(r,v,g,"",n,i,d.totalduration,!1,S,y)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${d.startSN} ,${d.endSN}],track ${l}`);const{cache:b}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new Nk,complete:!1};b.push(new Uint8Array(r)),this.state!==ue.STOPPED&&(this.state=ue.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Te.MAIN&&En(t.frag)&&(this.mainFragLoading=t,this.state===ue.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type!==Te.AUDIO){!this.audioOnly&&n.type===Te.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(En(n)){this.fragPrevious=n;const r=this.switchingTrack;r&&(this.bufferedTrack=r,this.switchingTrack=null,this.hls.trigger(_.AUDIO_TRACK_SWITCHED,ht({},r)))}this.fragBufferedComplete(n,i),this.media&&this.tick()}onError(e,t){var n;if(t.fatal){this.state=ue.ERROR;return}switch(t.details){case Z.FRAG_GAP:case Z.FRAG_PARSING_ERROR:case Z.FRAG_DECRYPT_ERROR:case Z.FRAG_LOAD_ERROR:case Z.FRAG_LOAD_TIMEOUT:case Z.KEY_LOAD_ERROR:case Z.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Te.AUDIO,t);break;case Z.AUDIO_TRACK_LOAD_ERROR:case Z.AUDIO_TRACK_LOAD_TIMEOUT:case Z.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ue.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===We.AUDIO_TRACK&&(this.state=ue.IDLE);break;case Z.BUFFER_ADD_CODEC_ERROR:case Z.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.resetLoadingState();break;case Z.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Z.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==pt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==pt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===ue.ENDED&&(this.state=ue.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,Te.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:r,chunkMeta:a}=e,l=this.getCurrentContext(a);if(!l){this.resetWhenMissingContext(a);return}const{frag:u,part:h,level:d}=l,{details:g}=d,{audio:p,text:y,id3:v,initSegment:b}=r;if(this.fragContextChanged(u)||!g){this.fragmentTracker.removeFragment(u);return}if(this.state=ue.PARSING,this.switchingTrack&&p&&this.completeAudioSwitch(this.switchingTrack),b!=null&&b.tracks){const w=u.initSegment||u;this._bufferInitSegment(d,b.tracks,w,a),i.trigger(_.FRAG_PARSING_INIT_SEGMENT,{frag:w,id:n,tracks:b.tracks})}if(p){const{startPTS:w,endPTS:A,startDTS:S,endDTS:T}=p;h&&(h.elementaryStreams[pt.AUDIO]={startPTS:w,endPTS:A,startDTS:S,endDTS:T}),u.setElementaryStreamInfo(pt.AUDIO,w,A,S,T),this.bufferFragmentData(p,u,h,a)}if(v!=null&&(t=v.samples)!=null&&t.length){const w=yt({id:n,frag:u,details:g},v);i.trigger(_.FRAG_PARSING_METADATA,w)}if(y){const w=yt({id:n,frag:u,details:g},y);i.trigger(_.FRAG_PARSING_USERDATA,w)}}_bufferInitSegment(e,t,n,i){if(this.state!==ue.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const r=t.audio;r.id=Te.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${r.container}, codecs[level/parsed]=[${a}/${r.codec}]`),a&&a.split(",").length===1&&(r.levelCodec=a),this.hls.trigger(_.BUFFER_CODECS,t);const l=r.initSegment;if(l!=null&&l.byteLength){const u={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:l};this.hls.trigger(_.BUFFER_APPENDING,u)}this.tickImmediate()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===hn.NOT_LOADED||i===hn.PARTIAL){var r;if(!En(e))this._loadInitSegment(e,t);else if((r=t.details)!=null&&r.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=ue.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==t.details.fragmentStart&&Cg(t.details,a)}else super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:i,characteristics:r,audioCodec:a,channels:l}=this.bufferedTrack;Ml({name:t,lang:n,assocLang:i,characteristics:r,audioCodec:a,channels:l},e,Xo)||(Rg(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(_.AUDIO_TRACK_SWITCHED,ht({},e))}}class Hv extends ca{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const i=t==null?void 0:t.renditionReports;if(i){let r=-1;for(let a=0;a<i.length;a++){const l=i[a];let u;try{u=new self.URL(l.URI,t.url).href}catch(h){this.warn(`Could not construct new URL for Rendition Report: ${h}`),u=l.URI||""}if(u===e){r=a;break}else u===e.substring(0,u.length)&&(r=a)}if(r!==-1){const a=i[r],l=parseInt(a["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let u=parseInt(a["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const d=Math.min(t.age-t.partTarget,t.targetduration);u>=0&&d>t.partTarget&&(u+=1)}const h=n&&$A(n);return new VA(l,u>=0?u:void 0,h)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:i,stats:r}=t,a=self.performance.now(),l=r.loading.first?Math.max(0,a-r.loading.first):0;i.advancedDateTime=Date.now()-l;const u=this.hls.config.timelineOffset;if(u!==i.appliedTimelineOffset){const d=Math.max(u||0,0);i.appliedTimelineOffset=d,i.fragments.forEach(g=>{g.start=g.playlistOffset+d})}if(i.live||n!=null&&n.live){const d="levelInfo"in t?t.levelInfo:t.track;if(i.reloaded(n),n&&i.fragments.length>0){m8(n,i);const S=i.playlistParsingError;if(S){this.warn(S);const T=this.hls;if(!T.config.ignorePlaylistParsingErrors){var h;const{networkDetails:D}=t;T.trigger(_.ERROR,{type:_e.NETWORK_ERROR,details:Z.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:S,reason:S.message,level:t.level||void 0,parent:(h=i.fragments[0])==null?void 0:h.type,networkDetails:D,stats:r});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=r.loading.start);const g=this.hls.mainForwardBufferInfo,p=g?g.end-g.len:0,y=(i.edge-p)*1e3,v=Dk(i,y);if(i.requestScheduled+v<a?i.requestScheduled=a:i.requestScheduled+=v,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let b,w,A;if(i.canBlockReload&&i.endSN&&i.advanced){const S=this.hls.config.lowLatencyMode,T=i.lastPartSn,D=i.endSN,L=i.lastPartIndex,B=L!==-1,M=T===D;B?M?(w=D+1,A=S?0:L):(w=T,A=S?L+1:i.maxPartIndex):w=D+1;const I=i.age,N=I+i.ageHeader;let P=Math.min(N-i.partTarget,i.targetduration*1.5);if(P>0){if(N>i.targetduration*3)this.log(`Playlist last advanced ${I.toFixed(2)}s ago. Omitting segment and part directives.`),w=void 0,A=void 0;else if(n!=null&&n.tuneInGoal&&N-i.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${P} with playlist age: ${i.age}`),P=0;else{const z=Math.floor(P/i.targetduration);if(w+=z,A!==void 0){const te=Math.round(P%i.targetduration/i.partTarget);A+=te}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${I.toFixed(2)}s goal: ${P} skip sn ${z} to part ${A}`)}i.tuneInGoal=P}if(b=this.getDeliveryDirectives(i,t.deliveryDirectives,w,A),S||!M){i.requestScheduled=a,this.loadingPlaylist(d,b);return}}else(i.canBlockReload||i.canSkipUntil)&&(b=this.getDeliveryDirectives(i,t.deliveryDirectives,w,A));b&&w!==void 0&&i.canBlockReload&&(i.requestScheduled=r.loading.first+Math.max(v-l*2,v/2)),this.scheduleLoading(d,b,i)}else this.clearTimer()}scheduleLoading(e,t,n){const i=n||e.details;if(!i){this.loadingPlaylist(e,t);return}const r=self.performance.now(),a=i.requestScheduled;if(r>=a){this.loadingPlaylist(e,t);return}const l=a-r;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(l)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),l)}getDeliveryDirectives(e,t,n,i){let r=$A(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,r=tg.No),new VA(n,i,r)}checkRetry(e){const t=e.details,n=kg(e),i=e.errorAction,{action:r,retryCount:a=0,retryConfig:l}=i||{},u=!!i&&!!l&&(r===Hn.RetryRequest||!i.resolved&&r===Hn.SendAlternateToPenaltyBox);if(u){var h;if(a>=l.maxNumRetry)return!1;if(n&&(h=e.context)!=null&&h.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${l.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const d=Rv(l,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),d),this.warn(`Retrying playlist loading ${a+1}/${l.maxNumRetry} after "${t}" in ${d}ms`)}e.levelRetry=!0,i.resolved=!0}return u}}function sL(s,e){if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(!od(s[t].attrs,e[t].attrs))return!1;return!0}function od(s,e,t){const n=s["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>s[i]!==e[i])}function u3(s,e){return e.label.toLowerCase()===s.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(s.lang||"").toLowerCase())}class T4 extends Hv{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_.LEVEL_LOADING,this.onLevelLoading,this),e.on(_.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(_.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(_.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_.LEVEL_LOADING,this.onLevelLoading,this),e.off(_.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(_.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(_.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:r}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const l=a.details;a.details=t.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${r.startSN}-${r.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,l)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,i=this.groupIds;let r=this.currentTrack;if(!n||(i==null?void 0:i.length)!==(n==null?void 0:n.length)||n!=null&&n.some(l=>(i==null?void 0:i.indexOf(l))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(p=>!n||n.indexOf(p.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(p=>p.default)&&(this.selectDefaultTrack=!1),l.forEach((p,y)=>{p.id=y});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const u=this.hls.config.audioPreference;if(!r&&u){const p=er(u,l,Xo);if(p>-1)r=l[p];else{const y=er(u,this.tracks);r=this.tracks[y]}}let h=this.findTrackId(r);h===-1&&r&&(h=this.findTrackId(null));const d={audioTracks:l};this.log(`Updating audio tracks, ${l.length} track(s) found in group(s): ${n==null?void 0:n.join(",")}`),this.hls.trigger(_.AUDIO_TRACKS_UPDATED,d);const g=this.trackId;if(h!==-1&&g===-1)this.setAudioTrack(h);else if(l.length&&g===-1){var a;const p=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${l.length}`);this.warn(p.message),this.hls.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:p})}}}onError(e,t){t.fatal||!t.context||t.context.type===We.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&Ml(e,i,Xo))return i;const r=er(e,this.tracksInGroup,Xo);if(r>-1){const a=this.tracksInGroup[r];return this.setAudioTrack(r),a}else if(i){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const l=MB(e,t.levels,n,a,Xo);if(l===-1)return null;t.nextLoadLevel=l}if(e.channels||e.audioCodec){const a=er(e,n);if(a>-1)return n[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e],r=i.details&&!i.details.live;if(e===this.trackId&&i===n&&r||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(_.AUDIO_TRACK_SWITCHING,ht({},i)),r))return;const a=this.switchParams(i.url,n==null?void 0:n.details,i.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Ml(e,i,Xo)))return n}if(e){const{name:n,lang:i,assocLang:r,characteristics:a,audioCodec:l,channels:u}=e;for(let h=0;h<t.length;h++){const d=t[h];if(Ml({name:n,lang:i,assocLang:r,characteristics:a,audioCodec:l,channels:u},d,Xo))return h}for(let h=0;h<t.length;h++){const d=t[h];if(od(e.attrs,d.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return h}for(let h=0;h<t.length;h++){const d=t[h];if(od(e.attrs,d.attrs,["LANGUAGE"]))return h}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&Rg(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,r=this.getUrlWithDirectives(e.url,t),a=e.details,l=a==null?void 0:a.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${l&&a.live?" age "+l.toFixed(1)+(a.type&&" "+a.type||""):""} ${r}`),this.hls.trigger(_.AUDIO_TRACK_LOADING,{url:r,id:n,groupId:i,deliveryDirectives:t||null,track:e})}}class S4{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(this.queues===null||this.tracks===null)return;const i=this.queues[t];i.push(e),i.length===1&&!n&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=(t=e[0])==null?void 0:t.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(r){var n;if(i.onError(r),this.queues===null||this.tracks===null)return;const a=(n=this.tracks[e])==null?void 0:n.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,n;return(t=this.queues)!=null&&t[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=(t=this.tracks)==null?void 0:t[e],i=n==null?void 0:n.buffer;return i?`SourceBuffer${i.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(n=>n.label).join(", "))||""}}const RT=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,iL="HlsJsTrackRemovedError";class _4 extends Error{constructor(e){super(e),this.name=iL}}class R4 extends ca{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:i,mediaSource:r}=this;n&&this.log("Media source opened"),!(!i||!r)&&(r.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(_.MEDIA_ATTACHED,{media:i,mediaSource:r}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=XN(mo(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(_.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_.BUFFER_RESET,this.onBufferReset,this),e.on(_.BUFFER_APPENDING,this.onBufferAppending,this),e.on(_.BUFFER_CODECS,this.onBufferCodecs,this),e.on(_.BUFFER_EOS,this.onBufferEos,this),e.on(_.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(_.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(_.FRAG_PARSED,this.onFragParsed,this),e.on(_.FRAG_CHANGED,this.onFragChanged,this),e.on(_.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(_.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_.BUFFER_RESET,this.onBufferReset,this),e.off(_.BUFFER_APPENDING,this.onBufferAppending,this),e.off(_.BUFFER_CODECS,this.onBufferCodecs,this),e.off(_.BUFFER_EOS,this.onBufferEos,this),e.off(_.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(_.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(_.FRAG_PARSED,this.onFragParsed,this),e.off(_.FRAG_CHANGED,this.onFragChanged,this),e.off(_.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const r=this.isUpdating();r||this.operationQueue.removeBlockers();const a=this.isQueued();(r||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${r?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===t?yt(n,i.tracks):this.sourceBuffers.forEach(r=>{const[a]=r;a&&(n[a]=yt({},this.tracks[a]),this.removeBuffer(a)),r[0]=r[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media,i=mo(this.appendSource);if(this.transferData=this.overrides=void 0,n&&i){const r=!!t.mediaSource;(r||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const a=this.mediaSource=t.mediaSource||new i;if(this.assignMediaSource(a),r)this._objectUrl=n.src,this.attachTransferred();else{const l=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{n.removeAttribute("src");const u=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||u&&a instanceof u,kT(n),k4(n,l),n.load()}catch{n.src=l}else n.src=l}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,i=t.tracks,r=i?Object.keys(i):null,a=r?r.length:0,l=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(i&&r&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Ct(n,(u,h)=>u==="initSegment"?void 0:h)};
transfer tracks: ${Ct(i,(u,h)=>u==="initSegment"?void 0:h)}}`),!ik(i,n)){t.mediaSource=null,t.tracks=void 0;const u=e.currentTime,h=this.details,d=Math.max(u,(h==null?void 0:h.fragments[0].start)||0);if(d-u>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${u} -> ${d}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(n)}") start time: ${d} currentTime: ${u}`),this.onMediaDetaching(_.MEDIA_DETACHING,{}),this.onMediaAttaching(_.MEDIA_ATTACHING,t),e.currentTime=d;return}this.transferData=void 0,r.forEach(u=>{const h=u,d=i[h];if(d){const g=d.buffer;if(g){const p=this.fragmentTracker,y=d.id;if(p.hasFragments(y)||p.hasParts(y)){const w=Ve.getBuffered(g);p.detectEvictedFragments(h,w,y,null,!0)}const v=hx(h),b=[h,g];this.sourceBuffers[v]=b,g.updating&&this.operationQueue&&this.operationQueue.prependBlocker(h),this.trackSourceBuffer(h,d)}}}),l(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),l()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:r,_objectUrl:a}=this;if(r){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([l])=>{l&&this.removeBuffer(l)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const l=r.readyState==="open";try{const u=r.sourceBuffers;for(let h=u.length;h--;)l&&u[h].abort(),r.removeSourceBuffer(u[h]);l&&r.endOfStream()}catch(u){this.warn(`onMediaDetaching: ${u.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(r.removeEventListener("startstreaming",this._onStartStreaming),r.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),n||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(i.removeAttribute("src"),this.appendSource&&kT(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(_.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),n)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(r){this.warn(`onBufferReset ${e}`,r)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[hx(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new S4(this.tracks)}onBufferCodecs(e,t){const n=this.tracks,i=Object.keys(t);this.log(`BUFFER_CODECS: "${i}" (current SB count ${this.sourceBufferCount})`);const r="audiovideo"in t&&(n.audio||n.video)||n.audiovideo&&("audio"in t||"video"in t),a=!r&&this.sourceBufferCount&&this.media&&i.some(l=>!n[l]);if(r||a){this.warn(`Unsupported transition between "${Object.keys(n)}" and "${i}" SourceBuffers`);return}i.forEach(l=>{var u,h,d;const g=t[l],{id:p,codec:y,levelCodec:v,container:b,metadata:w,supplemental:A}=g;let S=n[l];const T=(u=this.transferData)==null||(h=u.tracks)==null?void 0:h[l],D=T!=null&&T.buffer?T:S,L=(D==null?void 0:D.pendingCodec)||(D==null?void 0:D.codec),B=D==null?void 0:D.levelCodec;S||(S=n[l]={buffer:void 0,listeners:[],codec:y,supplemental:A,container:b,levelCodec:v,metadata:w,id:p});const M=eg(L,B),I=M==null?void 0:M.replace(RT,"$1");let N=eg(y,v);const P=(d=N)==null?void 0:d.replace(RT,"$1");N&&M&&I!==P&&(l.slice(0,5)==="audio"&&(N=Sg(N,this.appendSource)),this.log(`switching codec ${L} to ${N}`),N!==(S.pendingCodec||S.codec)&&(S.pendingCodec=N),S.container=b,this.appendChangeType(l,b,N))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const i=`${t};codecs=${n}`,r={label:`change-type=${i}`,execute:()=>{const a=this.tracks[e];if(a){const l=a.buffer;l!=null&&l.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),l.changeType(i),a.codec=n,a.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(r,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,i=n+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(n,Te.MAIN))==null?void 0:t.gap)===!0)return;const a={label:"block-audio",execute:()=>{var l;const u=this.tracks.video;(this.lastVideoAppendEnd>i||u!=null&&u.buffer&&Ve.isBuffered(u.buffer,i)||((l=this.fragmentTracker.getAppendedFrag(i,Te.MAIN))==null?void 0:l.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:l=>{this.warn("Error executing block-audio operation",l)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:i,type:r,parent:a,frag:l,part:u,chunkMeta:h}=t,d=h.buffering[r],g=l.sn,p=self.performance.now();d.start=p;const y=l.stats.buffering,v=u?u.stats.buffering:null;y.start===0&&(y.start=p),v&&v.start===0&&(v.start=p);const b=n.audio;let w=!1;r==="audio"&&(b==null?void 0:b.container)==="audio/mpeg"&&(w=!this.lastMpegAudioChunk||h.id===1||this.lastMpegAudioChunk.sn!==h.sn,this.lastMpegAudioChunk=h);const A=this.tracks.video,S=A==null?void 0:A.buffer;if(S&&g!=="initSegment"){const L=u||l,B=this.blockedAudioAppend;if(r==="audio"&&a!=="main"&&!this.blockedAudioAppend){const I=L.start+L.duration*.05,N=S.buffered,P=this.currentOp("video");!N.length&&!P?this.blockAudio(L):!P&&!Ve.isBuffered(S,I)&&this.lastVideoAppendEnd<I&&this.blockAudio(L)}else if(r==="video"){const M=L.end;if(B){const I=B.frag.start;(M>I||M<this.lastVideoAppendEnd||Ve.isBuffered(S,I))&&this.unblockAudio()}this.lastVideoAppendEnd=M}}const T=(u||l).start,D={label:`append-${r}`,execute:()=>{if(d.executeStart=self.performance.now(),w){const L=this.tracks[r];if(L){const B=L.buffer;if(B){const M=T-B.timestampOffset;Math.abs(M)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${T} (delta: ${M}) sn: ${g})`),B.timestampOffset=T)}}}this.appendExecutor(i,r)},onStart:()=>{},onComplete:()=>{const L=self.performance.now();d.executeEnd=d.end=L,y.first===0&&(y.first=L),v&&v.first===0&&(v.first=L);const B={};this.sourceBuffers.forEach(([M,I])=>{M&&(B[M]=Ve.getBuffered(I))}),this.appendErrors[r]=0,r==="audio"||r==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(_.BUFFER_APPENDED,{type:r,frag:l,part:u,chunkMeta:h,parent:l.type,timeRanges:B})},onError:L=>{var B;const M={type:_e.MEDIA_ERROR,parent:l.type,details:Z.BUFFER_APPEND_ERROR,sourceBufferName:r,frag:l,part:u,chunkMeta:h,error:L,err:L,fatal:!1},I=(B=this.media)==null?void 0:B.error;if(L.code===DOMException.QUOTA_EXCEEDED_ERR)M.details=Z.BUFFER_FULL_ERROR;else if(L.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!I)M.errorAction=nd(!0);else if(L.name===iL&&this.sourceBufferCount===0)M.errorAction=nd(!0);else{const N=++this.appendErrors[r];this.warn(`Failed ${N}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${r}" sourceBuffer (${I||"no media error"})`),(N>=this.hls.config.appendErrorMaxRetry||I)&&(M.fatal=!0)}this.hls.trigger(_.ERROR,M)}};this.append(D,r,this.isPending(this.tracks[r]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(_.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,t){const{type:n,startOffset:i,endOffset:r}=t;n?this.append(this.getFlushOp(n,i,r),n):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,i,r),a)})}onFragParsed(e,t){const{frag:n,part:i}=t,r=[],a=i?i.elementaryStreams:n.elementaryStreams;a[pt.AUDIOVIDEO]?r.push("audiovideo"):(a[pt.AUDIO]&&r.push("audio"),a[pt.VIDEO]&&r.push("video"));const l=()=>{const u=self.performance.now();n.stats.buffering.end=u,i&&(i.stats.buffering.end=u);const h=i?i.stats:n.stats;this.hls.trigger(_.FRAG_BUFFERED,{frag:n,part:i,stats:h,id:n.type})};r.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(l,r).catch(u=>{this.warn(`Fragment buffered callback ${u}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t,n;return e&&(!((t=this.tracks[e])!=null&&t.ended)||((n=this.tracks[e])==null?void 0:n.ending))})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([a])=>{if(a){const l=this.tracks[a];(!t.type||t.type===a)&&(l.ending=!0,l.ended||(l.ended=!0,this.log(`${a} buffer reached EOS`)))}});const i=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var l;return a&&!((l=this.tracks[a])!=null&&l.ended)})&&(i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(_.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(_.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){const e=this.getDurationAndRange();e&&this.blockUntilOpen(()=>this.updateMediaSource(e))}onError(e,t){if(t.details===Z.BUFFER_APPEND_ERROR&&t.frag){var n;const i=(n=t.errorAction)==null?void 0:n.nextAutoLevel;be(i)&&i!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.sourceBufferCount)return;const i=e.config,r=n.currentTime,a=t.levelTargetDuration,l=t.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(be(l)&&l>=0){const u=Math.max(l,a),h=Math.floor(r/a)*a-u;this.flushBackBuffer(r,a,h)}if(be(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){const u=Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),h=Math.max(u,a),d=Math.floor(r/a)*a+h;this.flushFrontBuffer(r,a,d)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([i,r])=>{if(r){const l=Ve.getBuffered(r);if(l.length>0&&n>l.start(0)){var a;this.hls.trigger(_.BACK_BUFFER_REACHED,{bufferEnd:n});const u=this.tracks[i];if((a=this.details)!=null&&a.live)this.hls.trigger(_.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(u!=null&&u.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(_.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:i})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([i,r])=>{if(r){const a=Ve.getBuffered(r),l=a.length;if(l<2)return;const u=a.start(l-1),h=a.end(l-1);if(n>u||e>=u&&e<=h)return;this.hls.trigger(_.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||(n==null?void 0:n.readyState)!=="open")return null;const i=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&t.live&&n.setLiveSeekableRange){const h=Math.max(0,t.fragmentStart),d=Math.max(h,i);return{duration:1/0,start:h,end:d}}return{duration:1/0}}const r=(e=this.overrides)==null?void 0:e.duration;if(r)return be(r)?{duration:r}:null;const a=this.media.duration,l=be(n.duration)?n.duration:0;return i>l&&i>a||!be(a)?{duration:i}:null}updateMediaSource({duration:e,start:t,end:n}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(be(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),t!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${t}-${n}.`),i.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Ct(n)}`),this.tracksReady){var i;const r=(i=this.transferData)==null?void 0:i.tracks;r&&Object.keys(r).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const i=this.tracks[t];e[t]={buffer:n,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(_.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const r in e){const a=r,l=e[a];if(this.isPending(l)){const u=this.getTrackCodec(l,a),h=`${l.container};codecs=${u}`;l.codec=u,this.log(`creating sourceBuffer(${h})${this.currentOp(a)?" Queued":""} ${Ct(l)}`);try{const d=n.addSourceBuffer(h),g=hx(a),p=[a,d];t[g]=p,l.buffer=d}catch(d){var i;this.error(`error while trying to add sourceBuffer: ${d.message}`),this.shiftAndExecuteNext(a),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[a],this.hls.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:d,sourceBufferName:a,mimeType:h,parent:l.id});return}this.trackSourceBuffer(a,l)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let i=e.codec;n&&(t==="video"||t==="audiovideo")&&n3(n,"video")&&(i=bB(i,n));const r=eg(i,e.levelCodec);return r?t.slice(0,5)==="audio"?Sg(r,this.appendSource):r:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const i=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:i,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(r,a)=>{const l=a.removedRanges;l!=null&&l.length&&this.hls.trigger(_.BUFFER_FLUSHED,{type:r})})}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n==null?void 0:n.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,t),this.hls.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const r=this.currentOp(e);r&&r.onError(i)}removeExecutor(e,t,n){const{media:i,mediaSource:r}=this,a=this.tracks[e],l=a==null?void 0:a.buffer;if(!i||!r||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const u=be(i.duration)?i.duration:1/0,h=be(r.duration)?r.duration:1/0,d=Math.max(0,t),g=Math.min(n,u,h);g>d&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${d},${g}] from the ${e} SourceBuffer`),l.remove(d,g)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],i=n==null?void 0:n.buffer;if(!i)throw new _4(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,i=t.map(a=>this.appendBlocker(a));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(a=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var n;const i=(n=this.tracks[t])==null?void 0:n.buffer;!i||i.updating||this.shiftAndExecuteNext(t)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const i=this.tracks[e];if(!i)return;const r=i.buffer;if(!r)return;const a=n.bind(this,e);i.listeners.push({event:t,listener:a}),r.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(i=>{n.removeEventListener(i.event,i.listener)}),t.listeners.length=0)}}function kT(s){const e=s.querySelectorAll("source");[].slice.call(e).forEach(t=>{s.removeChild(t)})}function k4(s,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,s.appendChild(t)}function hx(s){return s==="audio"?1:0}class Gv{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(_.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(_.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(_.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(_.BUFFER_CODECS,this.onBufferCodecs,this),e.on(_.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(_.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(_.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(_.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(_.BUFFER_CODECS,this.onBufferCodecs,this),e.off(_.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&be(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((i,r)=>this.isLevelAllowed(i)&&r<=e);return this.clientRect=null,Gv.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const i=(l,u)=>u?l.width!==u.width||l.height!==u.height:!0;let r=e.length-1;const a=Math.max(t,n);for(let l=0;l<e.length;l+=1){const u=e[l];if((u.width>=a||u.height>=a)&&i(u,e[l+1])){r=l;break}}return r}}const L4={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},ns=L4,D4={HLS:"h"},C4=D4,I4="CMCD-Object",O4="CMCD-Request",M4="CMCD-Session",P4="CMCD-Status",Df={OBJECT:I4,REQUEST:O4,SESSION:M4,STATUS:P4},N4={[Df.OBJECT]:["br","d","ot","tb"],[Df.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[Df.SESSION]:["cid","pr","sf","sid","st","v"],[Df.STATUS]:["bs","rtp"]};class Xu{constructor(e,t){Array.isArray(e)&&(e=e.map(n=>n instanceof Xu?n:new Xu(n))),this.value=e,this.params=t}}const B4="Dict";function F4(s){return Array.isArray(s)?JSON.stringify(s):s instanceof Map?"Map{}":s instanceof Set?"Set{}":typeof s=="object"?JSON.stringify(s):String(s)}function U4(s,e,t,n){return new Error(`failed to ${s} "${F4(e)}" as ${t}`,{cause:n})}function ar(s,e,t){return U4("serialize",s,e,t)}class rL{constructor(e){this.description=e}}const LT="Bare Item",H4="Boolean";function G4(s){if(typeof s!="boolean")throw ar(s,H4);return s?"?1":"?0"}const z4="Byte Sequence";function $4(s){if(ArrayBuffer.isView(s)===!1)throw ar(s,z4);return`:${F8(s)}:`}const V4="Integer";function Y4(s){return s<-999999999999999||999999999999999<s}function aL(s){if(Y4(s))throw ar(s,V4);return s.toString()}function K4(s){return`@${aL(s.getTime()/1e3)}`}const j4="Decimal";function q4(s){const e=$k(s,3);if(Math.floor(Math.abs(e)).toString().length>12)throw ar(s,j4);const t=e.toString();return t.includes(".")?t:`${t}.0`}const Q4="String",W4=/[\x00-\x1f\x7f]+/;function X4(s){if(W4.test(s))throw ar(s,Q4);return`"${s.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Z4(s){return s.description||s.toString().slice(7,-1)}const J4="Token";function DT(s){const e=Z4(s);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw ar(e,J4);return e}function h3(s){switch(typeof s){case"number":if(!be(s))throw ar(s,LT);return Number.isInteger(s)?aL(s):q4(s);case"string":return X4(s);case"symbol":return DT(s);case"boolean":return G4(s);case"object":if(s instanceof Date)return K4(s);if(s instanceof Uint8Array)return $4(s);if(s instanceof rL)return DT(s);default:throw ar(s,LT)}}const eF="Key";function f3(s){if(/^[a-z*][a-z0-9\-_.*]*$/.test(s)===!1)throw ar(s,eF);return s}function zv(s){return s==null?"":Object.entries(s).map(([e,t])=>t===!0?`;${f3(e)}`:`;${f3(e)}=${h3(t)}`).join("")}function oL(s){return s instanceof Xu?`${h3(s.value)}${zv(s.params)}`:h3(s)}function tF(s){return`(${s.value.map(oL).join(" ")})${zv(s.params)}`}function nF(s,e={whitespace:!0}){if(typeof s!="object")throw ar(s,B4);const t=s instanceof Map?s.entries():Object.entries(s),n=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([i,r])=>{r instanceof Xu||(r=new Xu(r));let a=f3(i);return r.value===!0?a+=zv(r.params):(a+="=",Array.isArray(r.value)?a+=tF(r):a+=oL(r)),a}).join(`,${n}`)}function sF(s,e){return nF(s,e)}function iF(s){return s==="ot"||s==="sf"||s==="st"}function rF(s){return typeof s=="number"?be(s):s!=null&&s!==""&&s!==!1}const ig=s=>Math.round(s),aF=(s,e)=>(e!=null&&e.baseUrl&&(s=U8(s,e.baseUrl)),encodeURIComponent(s)),x2=s=>ig(s/100)*100,oF={br:ig,d:ig,bl:x2,dl:x2,mtp:x2,nor:aF,rtp:x2,tb:ig};function lF(s,e){const t={};if(s==null||typeof s!="object")return t;const n=Object.keys(s).sort(),i=yt({},oF,e==null?void 0:e.formatters),r=e==null?void 0:e.filter;return n.forEach(a=>{if(r!=null&&r(a))return;let l=s[a];const u=i[a];u&&(l=u(l,e)),!(a==="v"&&l===1)&&(a=="pr"&&l===1||rF(l)&&(iF(a)&&typeof l=="string"&&(l=new rL(l)),t[a]=l))}),t}function lL(s,e={}){return s?sF(lF(s,e),yt({whitespace:!1},e)):""}function cF(s,e={}){const t={};if(!s)return t;const n=Object.entries(s),i=Object.entries(N4).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),r=n.reduce((a,l)=>{var u,h;const[d,g]=l,p=((u=i.find(y=>y[1].includes(d)))===null||u===void 0?void 0:u[0])||Df.REQUEST;return(h=a[p])!==null&&h!==void 0||(a[p]={}),a[p][d]=g,a},{});return Object.entries(r).reduce((a,[l,u])=>(a[l]=lL(u,e),a),t)}function uF(s,e,t){return yt(s,cF(e,t))}const hF="CMCD";function fF(s,e={}){if(!s)return"";const t=lL(s,e);return`${hF}=${encodeURIComponent(t)}`}const CT=/CMCD=[^&#]+/;function dF(s,e,t){const n=fF(e,t);if(!n)return s;if(CT.test(s))return s.replace(CT,n);const i=s.includes("?")?"&":"?";return`${s}${i}${n}`}class gF{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:ns.MANIFEST,su:!this.initialized})}catch(r){this.hls.logger.warn("Could not generate manifest CMCD data.",r)}},this.applyFragmentData=i=>{try{const{frag:r,part:a}=i,l=this.hls.levels[r.level],u=this.getObjectType(r),h={d:(a||r).duration*1e3,ot:u};(u===ns.VIDEO||u===ns.AUDIO||u==ns.MUXED)&&(h.br=l.bitrate/1e3,h.tb=this.getTopBandwidth(u)/1e3,h.bl=this.getBufferLength(u));const d=a?this.getNextPart(a):this.getNextFrag(r);d!=null&&d.url&&d.url!==r.url&&(h.nor=d.url),this.apply(i,h)}catch(r){this.hls.logger.warn("Could not generate segment CMCD data.",r)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_.MEDIA_DETACHED,this.onMediaDetached,this),e.on(_.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_.MEDIA_DETACHED,this.onMediaDetached,this),e.off(_.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:C4.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){yt(t,this.createData());const n=t.ot===ns.INIT||t.ot===ns.VIDEO||t.ot===ns.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((a,l)=>(i.includes(l)&&(a[l]=t[l]),a),{}));const r={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),uF(e.headers,t,r)):e.url=dF(e.url,t,r)}getNextFrag(e){var t;const n=(t=this.hls.levels[e.level])==null?void 0:t.details;if(n){const i=e.sn-n.startSN;return n.fragments[i+1]}}getNextPart(e){var t,n;const{index:i,fragment:r}=e,a=(t=this.hls.levels[r.level])==null||(n=t.details)==null?void 0:n.partList;if(a){const{sn:l}=r;for(let u=a.length-1;u>=0;u--){const h=a[u];if(h.index===i&&h.fragment.sn===l)return a[u+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return ns.TIMED_TEXT;if(e.sn==="initSegment")return ns.INIT;if(t==="audio")return ns.AUDIO;if(t==="main")return this.hls.audioTracks.length?ns.VIDEO:ns.MUXED}getTopBandwidth(e){let t=0,n;const i=this.hls;if(e===ns.AUDIO)n=i.audioTracks;else{const r=i.maxAutoLevel,a=r>-1?r+1:i.levels.length;n=i.levels.slice(0,a)}for(const r of n)r.bitrate>t&&(t=r.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.media,n=e===ns.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:Ve.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new n(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,a,l){t(r),this.loader.load(r,a,l)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new n(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,a,l){t(r),this.loader.load(r,a,l)}}}}const mF=3e5;class pF extends ca{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(_.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(_.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((n==null?void 0:n.action)===Hn.SendAlternateToPenaltyBox&&n.flags===ci.MoveAllAlternatesMatchingHost){const i=this.levels;let r=this._pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:l,pathwayId:u,type:h}=t.context;l&&i?a=this.getPathwayForGroupId(l,h,a):u&&(a=u)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!r&&i&&(r=this.pathways()),r&&r.length>1&&(this.updatePathwayPriority(r),n.resolved=this.pathwayId!==a),n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${i&&i.length} priorities: ${Ct(r)} penalized: ${Ct(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(r=>{i-n[r]>mF&&delete n[r]});for(let r=0;r<e.length;r++){const a=e[r];if(a in n)continue;if(a===this.pathwayId)return;const l=this.hls.nextLoadLevel,u=this.hls.levels[l];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,Ok(t),this.hls.trigger(_.LEVELS_UPDATED,{levels:t});const h=this.hls.levels[l];u&&h&&this.levels&&(h.attrs["STABLE-VARIANT-ID"]!==u.attrs["STABLE-VARIANT-ID"]&&h.bitrate!==u.bitrate&&this.log(`Unstable Pathways change from bitrate ${u.bitrate} to ${h.bitrate}`),this.hls.nextLoadLevel=l);break}}}getPathwayForGroupId(e,t,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let r=0;r<i.length;r++)if(t===We.AUDIO_TRACK&&i[r].hasAudioGroup(e)||t===We.SUBTITLE_TRACK&&i[r].hasSubtitleGroup(e))return i[r].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach(r=>{const{ID:a,"BASE-ID":l,"URI-REPLACEMENT":u}=r;if(t.some(d=>d.pathwayId===a))return;const h=this.getLevelsForPathway(l).map(d=>{const g=new Nt(d.attrs);g["PATHWAY-ID"]=a;const p=g.AUDIO&&`${g.AUDIO}_clone_${a}`,y=g.SUBTITLES&&`${g.SUBTITLES}_clone_${a}`;p&&(n[g.AUDIO]=p,g.AUDIO=p),y&&(i[g.SUBTITLES]=y,g.SUBTITLES=y);const v=cL(d.uri,g["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u),b=new td({attrs:g,audioCodec:d.audioCodec,bitrate:d.bitrate,height:d.height,name:d.name,url:v,videoCodec:d.videoCodec,width:d.width});if(d.audioGroups)for(let w=1;w<d.audioGroups.length;w++)b.addGroupId("audio",`${d.audioGroups[w]}_clone_${a}`);if(d.subtitleGroups)for(let w=1;w<d.subtitleGroups.length;w++)b.addGroupId("text",`${d.subtitleGroups[w]}_clone_${a}`);return b});t.push(...h),IT(this.audioTracks,n,u,a),IT(this.subtitleTracks,i,u,a)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const d=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+d)}const r={responseType:"json",url:i.href},a=t.steeringManifestLoadPolicy.default,l=a.errorRetry||a.timeoutRetry||{},u={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},h={onSuccess:(d,g,p,y)=>{this.log(`Loaded steering manifest: "${i}"`);const v=d.data;if((v==null?void 0:v.VERSION)!==1){this.log(`Steering VERSION ${v.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=v.TTL;const{"RELOAD-URI":b,"PATHWAY-CLONES":w,"PATHWAY-PRIORITY":A}=v;if(b)try{this.uri=new self.URL(b,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${b}`);return}this.scheduleRefresh(this.uri||p.url),w&&this.clonePathways(w);const S={steeringManifest:v,url:i.toString()};this.hls.trigger(_.STEERING_MANIFEST_LOADED,S),A&&this.updatePathwayPriority(A)},onError:(d,g,p,y)=>{if(this.log(`Error loading steering manifest: ${d.code} ${d.text} (${g.url})`),this.stopLoad(),d.code===410){this.enabled=!1,this.log(`Steering manifest ${g.url} no longer available`);return}let v=this.timeToLoad*1e3;if(d.code===429){const b=this.loader;if(typeof(b==null?void 0:b.getResponseHeader)=="function"){const w=b.getResponseHeader("Retry-After");w&&(v=parseFloat(w)*1e3)}this.log(`Steering manifest ${g.url} rate limited`);return}this.scheduleRefresh(this.uri||g.url,v)},onTimeout:(d,g,p)=>{this.log(`Timeout loading steering manifest (${g.url})`),this.scheduleRefresh(this.uri||g.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(r,u,h)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function IT(s,e,t,n){s&&Object.keys(e).forEach(i=>{const r=s.filter(a=>a.groupId===i).map(a=>{const l=yt({},a);return l.details=void 0,l.attrs=new Nt(l.attrs),l.url=l.attrs.URI=cL(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),l.groupId=l.attrs["GROUP-ID"]=e[i],l.attrs["PATHWAY-ID"]=n,l});s.push(...r)})}function cL(s,e,t,n){const{HOST:i,PARAMS:r,[t]:a}=n;let l;e&&(l=a==null?void 0:a[e],l&&(s=l));const u=new self.URL(s);return i&&!l&&(u.host=i),r&&Object.keys(r).sort().forEach(h=>{h&&u.searchParams.set(h,r[h])}),u.href}class nu extends ca{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=nu.CDMCleanupPromise?[nu.CDMCleanupPromise]:[],this.onMediaEncrypted=t=>{const{initDataType:n,initData:i}=t,r=`"${t.type}" event: init data type: "${n}"`;if(this.debug(r),i!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=g2(this.config));const l=a.map(sx).filter(u=>!!u);this.keyFormatPromise=this.getKeyFormatPromise(l)}this.keyFormatPromise.then(a=>{const l=tx(a);let u,h;if(n==="sinf"){if(l!==ft.FAIRPLAY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${n}" for selected key-system ${l}`);return}const v=un(new Uint8Array(i));try{const b=Cv(JSON.parse(v).sinf),w=hk(b);if(!w)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");u=new Uint8Array(w.subarray(8,24)),h=ft.FAIRPLAY}catch(b){this.warn(`${r} Failed to parse sinf: ${b}`);return}}else{if(l!==ft.WIDEVINE&&l!==ft.PLAYREADY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${n}" for selected key-system ${l}`);return}const v=pB(i),b=v.filter(A=>!!A.systemId&&nx(A.systemId)===l);b.length>1&&this.warn(`${r} Using first of ${b.length} pssh found for selected key-system ${l}`);const w=b[0];if(!w){v.length===0||v.some(A=>!A.systemId)?this.warn(`${r} contains incomplete or invalid pssh data`):this.log(`ignoring ${r} for ${v.map(A=>nx(A.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(h=nx(w.systemId),w.version===0&&w.data)if(h===ft.WIDEVINE){const A=w.data.length-22;u=new Uint8Array(w.data.subarray(A,A+16))}else h===ft.PLAYREADY&&(u=_k(w.data))}if(!h||!u)return;const d=Ui.hexDump(u),{keyIdToKeySessionPromise:g,mediaKeySessions:p}=this;let y=g[d];for(let v=0;v<p.length;v++){const b=p[v],w=b.decryptdata;if(!w.keyId)continue;const A=Ui.hexDump(w.keyId);if(d===A||w.uri.replace(/-/g,"").indexOf(d)!==-1){if(y=g[A],w.pssh)break;delete g[A],w.pssh=new Uint8Array(i),w.keyId=u,y=g[d]=y.then(()=>this.generateRequestWithPreferredKeySession(b,n,i,"encrypted-event-key-match")),y.catch(S=>this.handleError(S));break}}if(!y){if(h!==l){this.log(`Ignoring "${t.type}" event with ${h} init data for selected key-system ${l}`);return}y=g[d]=this.getKeySystemSelectionPromise([h]).then(({keySystem:v,mediaKeys:b})=>{var w;this.throwIfDestroyed();const A=new sd("ISO-23001-7",d,(w=sx(v))!=null?w:"");return A.pssh=new Uint8Array(i),A.keyId=u,this.attemptSetMediaKeys(v,b).then(()=>{this.throwIfDestroyed();const S=this.createMediaKeySessionContext({decryptdata:A,keySystem:v,mediaKeys:b});return this.generateRequestWithPreferredKeySession(S,n,i,"encrypted-event-no-match")})}),y.catch(v=>this.handleError(v))}})}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){const e=this.media;this.unregisterListeners(),this.onMediaDetached(),this._clear(e);const t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(_.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(_.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(_.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(_.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(_.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(_.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(_.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(_.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===ft.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(a,l,u)=>!!a&&u.indexOf(a)===l,i=t.map(a=>a.audioCodec).filter(n),r=t.map(a=>a.videoCodec).filter(n);return i.length+r.length===0&&r.push("avc1.42e01e"),new Promise((a,l)=>{const u=h=>{const d=h.shift();this.getMediaKeysPromise(d,i,r).then(g=>a({keySystem:d,mediaKeys:g})).catch(g=>{h.length?u(h):g instanceof Gs?l(g):l(new Gs({type:_e.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_NO_ACCESS,error:g,fatal:!0},g.message))})};u(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return Sk===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,t)}getMediaKeysPromise(e,t,n){const i=o8(e,t,n,this.config.drmSystemOptions),r=this.keySystemAccessPromises[e];let a=r==null?void 0:r.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Ct(i)}`),a=this.requestMediaKeySystemAccess(e,i);const l=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(u=>{this.log(`Failed to obtain access to key-system "${e}": ${u}`)}),a.then(u=>{this.log(`Access for key-system "${u.keySystem}" obtained`);const h=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),l.mediaKeys=u.createMediaKeys().then(d=>(this.log(`Media-keys created for "${e}"`),h.then(g=>g?this.setMediaKeysServerCertificate(d,e,g):d))),l.mediaKeys.catch(d=>{this.error(`Failed to create media-keys for "${e}"}: ${d}`)}),l.mediaKeys})}return a.then(()=>r.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Ui.hexDump(e.keyId||[])}`);const i=n.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),r="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,r,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Ui.hexDump(e.keyId)}updateKeySession(e,t){var n;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${Ui.hexDump(((n=e.decryptdata)==null?void 0:n.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),i.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,n)=>{const i=g2(this.config),r=e.map(tx).filter(a=>!!a&&i.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(r).then(({keySystem:a})=>{const l=sx(a);l?t(l):n(new Error(`Unable to find format for key-system "${a}"`))}).catch(n)})}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),i=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let r=this.keyIdToKeySessionPromise[n];return r||(r=this.getKeySystemForKeyPromise(t).then(({keySystem:l,mediaKeys:u})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(l,u).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:l,mediaKeys:u,decryptdata:t}))))),(this.keyIdToKeySessionPromise[n]=r.then(l=>{const u="cenc",h=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(l,u,h,"playlist-key")})).catch(l=>this.handleError(l))),r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Gs?this.hls.trigger(_.ERROR,e.data):this.hls.trigger(_.ERROR,{type:_e.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const i=tx(e.keyFormat),r=i?[i]:g2(this.config);return this.attemptKeySystemAccess(r)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=g2(this.config)),e.length===0)throw new Gs({type:_e.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Ct({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(r=>n.indexOf(r)===-1)})}generateRequestWithPreferredKeySession(e,t,n,i){var r,a;const l=(r=this.config.drmSystems)==null||(a=r[e.keySystem])==null?void 0:a.generateRequest;if(l)try{const v=l.call(this.hls,t,n,e);if(!v)throw new Error("Invalid response from configured generateRequest filter");t=v.initDataType,n=v.initData?v.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(v){var u;if(this.warn(v.message),(u=this.hls)!=null&&u.config.debug)throw v}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const h=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${h} (init data type: ${t} length: ${n?n.byteLength:null})`);const d=new Ov,g=e._onmessage=v=>{const b=e.mediaKeysSession;if(!b){d.emit("error",new Error("invalid state"));return}const{messageType:w,message:A}=v;this.log(`"${w}" message event for session "${b.sessionId}" message size: ${A.byteLength}`),w==="license-request"||w==="license-renewal"?this.renewLicense(e,A).catch(S=>{d.eventNames().length?d.emit("error",S):this.handleError(S)}):w==="license-release"?e.keySystem===ft.FAIRPLAY&&(this.updateKeySession(e,r3("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${w}"`)},p=e._onkeystatuseschange=v=>{if(!e.mediaKeysSession){d.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const w=e.keyStatus;d.emit("keyStatus",w),w==="expired"&&(this.warn(`${e.keySystem} expired for key ${h}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",g),e.mediaKeysSession.addEventListener("keystatuseschange",p);const y=new Promise((v,b)=>{d.on("error",b),d.on("keyStatus",w=>{w.startsWith("usable")?v():w==="output-restricted"?b(new Gs({type:_e.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):w==="internal-error"?b(new Gs({type:_e.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${w}"`)):w==="expired"?b(new Error("key expired while generating request")):this.warn(`unhandled key status change "${w}"`)})});return e.mediaKeysSession.generateRequest(t,n).then(()=>{var v;this.log(`Request generated for key-session "${(v=e.mediaKeysSession)==null?void 0:v.sessionId}" keyId: ${h}`)}).catch(v=>{throw new Gs({type:_e.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_NO_SESSION,error:v,fatal:!1},`Error generating key-session request: ${v}`)}).then(()=>y).catch(v=>{throw d.removeAllListeners(),this.removeSession(e),v}).then(()=>(d.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,n)=>{if(typeof n=="string"&&typeof t=="object"){const i=n;n=t,t=i}this.log(`key status change "${t}" for keyStatuses keyId: ${Ui.hexDump("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${Ui.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,n=t.loader,i=new n(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,l)=>{const u={responseType:"arraybuffer",url:r},h=t.certLoadPolicy.default,d={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},g={onSuccess:(p,y,v,b)=>{a(p.data)},onError:(p,y,v,b)=>{l(new Gs({type:_e.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:ht({url:u.url,data:void 0},p)},`"${e}" certificate request failed (${r}). Status: ${p.code} (${p.text})`))},onTimeout:(p,y,v)=>{l(new Gs({type:_e.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:{url:u.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(p,y,v)=>{l(new Error("aborted"))}};i.load(u,d,g)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((i,r)=>{e.setServerCertificate(n).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${n==null?void 0:n.byteLength}) on "${t}"`),i(e)}).catch(a=>{r(new Gs({type:_e.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new Gs({type:_e.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(n,"application/xml"),r=i.querySelectorAll("HttpHeader");if(r.length>0){let d;for(let g=0,p=r.length;g<p;g++){var a,l;d=r[g];const y=(a=d.querySelector("name"))==null?void 0:a.textContent,v=(l=d.querySelector("value"))==null?void 0:l.textContent;y&&v&&e.setRequestHeader(y,v)}}const u=i.querySelector("Challenge"),h=u==null?void 0:u.textContent;if(!h)throw new Error("Cannot find <Challenge> in key message");return r3(atob(h))}setupLicenseXHR(e,t,n,i){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,n,i)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",t,!0),r.call(this.hls,e,t,n,i)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((i,r)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const l=new XMLHttpRequest;l.responseType="arraybuffer",l.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(l.readyState===4)if(l.status===200){this._requestLicenseFailureCount=0;let u=l.response;this.log(`License received ${u instanceof ArrayBuffer?u.byteLength:u}`);const h=this.config.licenseResponseCallback;if(h)try{u=h.call(this.hls,l,a,e)}catch(d){this.error(d)}i(u)}else{const u=n.errorRetry,h=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>h||l.status>=400&&l.status<500)r(new Gs({type:_e.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:l,response:{url:a,data:void 0,code:l.status,text:l.statusText}},`License Request XHR failed (${a}). Status: ${l.status} (${l.statusText})`));else{const d=h-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${d} attempts left`),this.requestLicense(e,t).then(i,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=l,this.setupLicenseXHR(l,a,e,t).then(({xhr:u,licenseChallenge:h})=>{e.keySystem==ft.PLAYREADY&&(h=this.unpackPlayReadyKeyMessage(u,h)),u.send(h)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null)}_clear(e){var t;const n=this.mediaKeySessions;this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},sd.clearKeyUriToKeyIdMap();const i=n.length;nu.CDMCleanupPromise=Promise.all(n.map(r=>this.removeSession(r)).concat(e==null||(t=e.setMediaKeys(null))==null?void 0:t.catch(r=>{var a;this.log(`Could not clear media keys: ${r}`),(a=this.hls)==null||a.trigger(_.ERROR,{type:_e.OTHER_ERROR,details:Z.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${r}`)})}))).then(()=>{i&&(this.log("finished closing key sessions and clearing media keys"),n.length=0)}).catch(r=>{var a;this.log(`Could not close sessions and clear media keys: ${r}`),(a=this.hls)==null||a.trigger(_.ERROR,{type:_e.OTHER_ERROR,details:Z.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${r}`)})})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((i,r)=>(i.indexOf(r.keyFormat)===-1&&i.push(r.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{drmSystemOptions:r}=this.config;return(c8(r)?new Promise((l,u)=>{self.setTimeout(()=>u(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(l)}):Promise.resolve()).catch(l=>{var u;this.log(`Could not remove session: ${l}`),(u=this.hls)==null||u.trigger(_.ERROR,{type:_e.OTHER_ERROR,details:Z.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${l}`)})}).then(()=>t.close()).catch(l=>{var u;this.log(`Could not close session: ${l}`),(u=this.hls)==null||u.trigger(_.ERROR,{type:_e.OTHER_ERROR,details:Z.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${l}`)})})}}}nu.CDMCleanupPromise=void 0;class Gs extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}class yF{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(_.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(_.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(_.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(_.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const r=i-this.lastTime,a=n-this.lastDroppedFrames,l=t-this.lastDecodedFrames,u=1e3*a/r,h=this.hls;if(h.trigger(_.FPS_DROP,{currentDropped:a,currentDecoded:l,totalDroppedFrames:n}),u>0&&a>h.config.fpsDroppedMonitoringThreshold*l){let d=h.currentLevel;h.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(h.autoLevelCapping===-1||h.autoLevelCapping>=d)&&(d=d-1,h.trigger(_.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:h.currentLevel}),h.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function uL(s,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=s,e.dispatchEvent(t)}function hL(s,e){const t=s.mode;if(t==="disabled"&&(s.mode="hidden"),s.cues&&!s.cues.getCueById(e.id))try{if(s.addCue(e),!s.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){et.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,s.addCue(i)}catch(i){et.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(s.mode=t)}function qc(s,e){const t=s.mode;if(t==="disabled"&&(s.mode="hidden"),s.cues)for(let n=s.cues.length;n--;)e&&s.cues[n].removeEventListener("enter",e),s.removeCue(s.cues[n]);t==="disabled"&&(s.mode=t)}function d3(s,e,t,n){const i=s.mode;if(i==="disabled"&&(s.mode="hidden"),s.cues&&s.cues.length>0){const r=vF(s.cues,e,t);for(let a=0;a<r.length;a++)(!n||n(r[a]))&&s.removeCue(r[a])}i==="disabled"&&(s.mode=i)}function xF(s,e){if(e<=s[0].startTime)return 0;const t=s.length-1;if(e>s[t].endTime)return-1;let n=0,i=t,r;for(;n<=i;)if(r=Math.floor((i+n)/2),e<s[r].startTime)i=r-1;else if(e>s[r].startTime&&n<t)n=r+1;else return r;return s[n].startTime-e<e-s[i].startTime?n:i}function vF(s,e,t){const n=[],i=xF(s,e);if(i>-1)for(let r=i,a=s.length;r<a;r++){const l=s[r];if(l.startTime>=e&&l.endTime<=t)n.push(l);else if(l.startTime>t)return n}return n}function rg(s){const e=[];for(let t=0;t<s.length;t++){const n=s[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(s[t])}return e}class bF extends Hv{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=rg(this.media.textTracks);for(let r=0;r<n.length;r++)if(n[r].mode==="hidden")t=n[r];else if(n[r].mode==="showing"){t=n[r];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_.LEVEL_LOADING,this.onLevelLoading,this),e.on(_.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(_.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(_.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_.LEVEL_LOADING,this.onLevelLoading,this),e.off(_.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(_.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(_.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const i=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;rg(n.textTracks).forEach(a=>{qc(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:i,details:r}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const l=a.details;a.details=t.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${r.startSN}-${r.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,l)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,i=this.groupIds;let r=this.currentTrack;if(!n||(i==null?void 0:i.length)!==(n==null?void 0:n.length)||n!=null&&n.some(a=>(i==null?void 0:i.indexOf(a))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(d=>!n||n.indexOf(d.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(d=>d.default)&&(this.selectDefaultTrack=!1),a.forEach((d,g)=>{d.id=g});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.subtitlePreference;if(!r&&l){this.selectDefaultTrack=!1;const d=er(l,a);if(d>-1)r=a[d];else{const g=er(l,this.tracks);r=this.tracks[g]}}let u=this.findTrackId(r);u===-1&&r&&(u=this.findTrackId(null));const h={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${n==null?void 0:n.join(",")}" group-id`),this.hls.trigger(_.SUBTITLE_TRACKS_UPDATED,h),u!==-1&&this.trackId===-1&&this.setSubtitleTrack(u)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const r=t[i];if(!(n&&!r.default||!n&&!e)&&(!e||Ml(r,e)))return i}if(e){for(let i=0;i<t.length;i++){const r=t[i];if(od(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const r=t[i];if(od(e.attrs,r.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(u3(i,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===We.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&Ml(e,n))return n;const i=er(e,this.tracksInGroup);if(i>-1){const r=this.tracksInGroup[i];return this.setSubtitleTrack(i),r}else{if(n)return null;{const r=er(e,t);if(r>-1)return t[r]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,i=e.groupId,r=this.getUrlWithDirectives(e.url,t),a=e.details,l=a==null?void 0:a.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${l&&a.live?" age "+l.toFixed(1)+(a.type&&" "+a.type||""):""} ${r}`),this.hls.trigger(_.SUBTITLE_TRACK_LOADING,{url:r,id:n,groupId:i,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=rg(e.textTracks),n=this.currentTrack;let i;if(n&&(i=t.filter(r=>u3(n,r))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(r=>{r.mode!=="disabled"&&r!==i&&(r.mode="disabled")}),i){const r=this.subtitleDisplay?"showing":"hidden";i.mode!==r&&(i.mode=r)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!be(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(_.SUBTITLE_TRACK_SWITCH,{id:e});return}const r=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&r)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:a,groupId:l="",name:u,type:h,url:d}=i;this.hls.trigger(_.SUBTITLE_TRACK_SWITCH,{id:a,groupId:l,name:u,type:h,url:d});const g=this.switchParams(i.url,n==null?void 0:n.details,i.details);this.loadPlaylist(g)}}function $f(s){let e=5381,t=s.length;for(;t;)e=e*33^s.charCodeAt(--t);return(e>>>0).toString()}const su=.025;let Og=function(s){return s[s.Point=0]="Point",s[s.Range=1]="Range",s}({});function EF(s,e,t){return`${s.identifier}-${t+1}-${$f(e)}`}class wF{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){if(e>=this.assetList.length)return!0;const t=this.playoutLimit;return e<=0||isNaN(t)?!1:this.assetList[e].startOffset>t}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return fx(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,n=fx(t,e);return t-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=be(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return fx(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<su))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Og.Range:Og.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return AF(this)}}function fx(s,e){return s-e.start<e.duration/2&&!(Math.abs(s-(e.start+e.duration))<su)?e.start:e.start+e.duration}function fL(s,e,t){const n=new self.URL(s,t);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function AF(s){return`["${s.identifier}" ${s.cue.pre?"<pre>":s.cue.post?"<post>":""}${s.timelineStart.toFixed(2)}-${s.resumeTime.toFixed(2)}]`}function g3(s){const e=s.timelineStart,t=s.duration||0;return`["${s.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class TF{constructor(e,t,n,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{const h=this.interstitial.playoutLimit,d=this.currentTime;this.startOffset+d>=h&&this.hls.trigger(_.PLAYOUT_LIMIT_REACHED,{})};const r=this.hls=new e(t);this.interstitial=n,this.assetItem=i;let a=i.uri;try{a=fL(a,r.sessionId).href}catch{}r.loadSource(a);const l=()=>{this.hasDetails=!0};r.once(_.LEVEL_LOADED,l),r.once(_.AUDIO_TRACK_LOADED,l),r.once(_.SUBTITLE_TRACK_LOADED,l),r.on(_.MEDIA_ATTACHING,(u,{media:h})=>{this.removeMediaListeners(),this.mediaAttached=h,this.interstitial.playoutLimit&&h.addEventListener("timeupdate",this.checkPlayout)})}bufferedInPlaceToEnd(e){var t;if(!this.interstitial.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const n=this.timelineOffset,i=Ve.bufferInfo(e,n,0);return this.getAssetTime(i.end)>=this._bufferedEosTime-.02}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=Ve.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;return e||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}on(e,t,n){this.hls.on(e,t)}once(e,t,n){this.hls.once(e,t)}off(e,t,n){this.hls.off(e,t)}toString(){var e,t;return`HlsAssetPlayer: ${g3(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${(t=this.interstitial)!=null&&t.appendInPlace?"append-in-place":""}`}}const OT=.033;class SF extends ca{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,i)=>e<=i.startOffset&&t>i.startOffset?(delete i.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[n]||(t===void 0&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&(r=i[n])!=null&&r.event;){var r;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let i=0;i<n.length;i++){let r=n[i];if(t&&t!=="primary"&&(r=r[t]),e===r.start||e>r.start&&e<r.end)return i}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let i=e;i<=t&&n[i];i++){const r=n[i].event;if(r!=null&&r.restrictions.jump&&!r.appendInPlace)return i}return-1}findEventIndex(e){const t=this.items;if(t)for(let i=t.length;i--;){var n;if(((n=t[i].event)==null?void 0:n.identifier)===e)return i}return-1}findAssetIndex(e,t){const n=e.assetList,i=n.length;if(i>1)for(let r=0;r<i;r++){const a=n[r];if(!a.error){const l=a.timelineStart;if(t===l||t>l&&t<l+(a.duration||0))return r}}return 0}get assetIdAtEnd(){var e,t;const n=(e=this.items)==null||(t=e[this.length-1])==null?void 0:t.event;if(n){const i=n.assetList,r=i[i.length-1];if(r)return r.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:i}=n,r=this.events,a=this.parseDateRanges(i,{url:n.url},t),l=Object.keys(i),u=r?r.filter(h=>!l.includes(h.identifier)):[];a.length&&a.sort((h,d)=>{const g=h.cue.pre,p=h.cue.post,y=d.cue.pre,v=d.cue.post;if(g&&!y)return-1;if(y&&!g||p&&!v)return 1;if(v&&!p)return-1;if(!g&&!y&&!p&&!v){const b=h.startTime,w=d.startTime;if(b!==w)return b-w}return h.dateRange.tagOrder-d.dateRange.tagOrder}),this.events=a,u.forEach(h=>{this.removeEvent(h)}),this.updateSchedule(e,u)}updateSchedule(e,t=[]){const n=this.events||[];if(n.length||t.length||this.length<2){const i=this.items,r=this.parseSchedule(n,e);(t.length||(i==null?void 0:i.length)!==r.length||r.some((l,u)=>Math.abs(l.playout.start-i[u].playout.start)>.005||Math.abs(l.playout.end-i[u].playout.end)>.005))&&(this.items=r,this.onScheduleUpdate(t,i))}}parseDateRanges(e,t,n){const i=[],r=Object.keys(e);for(let a=0;a<r.length;a++){const l=r[a],u=e[l];if(u.isInterstitial){let h=this.eventMap[l];h?h.setDateRange(u):(h=new wF(u,t),this.eventMap[l]=h,n===!1&&(h.appendInPlace=n)),i.push(h)}}return i}parseSchedule(e,t){const n=[],i=t.main.details,r=i.live?1/0:i.edge;let a=0;if(e=e.filter(u=>!u.error&&!(u.cue.once&&u.hasPlayed)),e.length){this.resolveOffsets(e,t);let u=0,h=0;if(e.forEach((d,g)=>{const p=d.cue.pre,y=d.cue.post,v=e[g-1]||null,b=d.appendInPlace,w=y?r:d.startOffset,A=d.duration,S=d.timelineOccupancy===Og.Range?A:0,T=d.resumptionOffset,D=(v==null?void 0:v.startTime)===w,L=w+d.cumulativeDuration;let B=b?L+A:w+T;if(p||!y&&w<=0){const I=h;h+=S,d.timelineStart=L;const N=a;a+=A,n.push({event:d,start:L,end:B,playout:{start:N,end:a},integrated:{start:I,end:h}})}else if(w<=r){if(!D){const P=w-u;if(P>OT){const z=u,te=h;h+=P;const ye=a;a+=P;const me={previousEvent:e[g-1]||null,nextEvent:d,start:z,end:z+P,playout:{start:ye,end:a},integrated:{start:te,end:h}};n.push(me)}else P>0&&v&&(v.cumulativeDuration+=P,n[n.length-1].end=w)}y&&(B=L),d.timelineStart=L;const I=h;h+=S;const N=a;a+=A,n.push({event:d,start:L,end:B,playout:{start:N,end:a},integrated:{start:I,end:h}})}else return;const M=d.resumeTime;y||M>r?u=r:u=M}),u<r){var l;const d=u,g=h,p=r-u;h+=p;const y=a;a+=p,n.push({previousEvent:((l=n[n.length-1])==null?void 0:l.event)||null,nextEvent:null,start:u,end:d+p,playout:{start:y,end:a},integrated:{start:g,end:h}})}this.setDurations(r,a,h)}else n.push({previousEvent:null,nextEvent:null,start:0,end:r,playout:{start:0,end:r},integrated:{start:0,end:r}}),this.setDurations(r,r,r);return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,i=n.live?1/0:n.edge;let r=0,a=-1;e.forEach((l,u)=>{const h=l.cue.pre,d=l.cue.post,g=h?0:d?i:l.startTime;this.updateAssetDurations(l),a===g?l.cumulativeDuration=r:(r=0,a=g),!d&&l.snapOptions.in&&(l.resumeAnchor=Fl(null,n.fragments,l.startOffset+l.resumptionOffset,0,0)||void 0),l.appendInPlace&&!l.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(l,t)||(l.appendInPlace=!1)),!l.appendInPlace&&u+1<e.length&&e[u+1].startTime-e[u].resumeTime<OT&&(e[u+1].appendInPlace=!1,e[u+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${l}`));const y=be(l.resumeOffset)?l.resumeOffset:l.duration;r+=y})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(n-i)>su?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${i}`),!1):t?!Object.keys(t).some(a=>{const l=t[a].details,u=l.edge;if(n>=u)return this.log(`"${e.identifier}" resumption ${n} past ${a} playlist end ${u}`),!1;const h=Fl(null,l.fragments,n);if(!h)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${a} playlist (${l.fragStart}-${l.fragmentEnd})`),!0;const d=a==="audio"?.175:0;return Math.abs(h.start-n)<su+d||Math.abs(h.end-n)<su+d?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${a} fragment bounds (${h.start}-${h.end} sn: ${h.sn} cc: ${h.cc})`),!0)}):(this.log(`"${e.identifier}" resumption ${n} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,i=!1,r=!1;e.assetList.forEach((a,l)=>{const u=t+n;a.startOffset=n,a.timelineStart=u,i||(i=a.duration===null),r||(r=!!a.error);const h=a.error?0:a.duration||0;n+=h}),i&&!r?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Ma(s){return`[${s.event?'"'+s.event.identifier+'"':"primary"}: ${s.start.toFixed(2)}-${s.end.toFixed(2)}]`}class _F{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let i;try{i=fL(n,this.hls.sessionId,e.baseUrl)}catch(p){const y=this.assignAssetListError(e,Z.ASSET_LIST_LOAD_ERROR,p,n);this.hls.trigger(_.ERROR,y);return}t&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+t);const r=this.hls.config,a=r.loader,l=new a(r),u={responseType:"json",url:i.href},h=r.interstitialAssetListLoadPolicy.default,d={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},g={onSuccess:(p,y,v,b)=>{const w=p.data,A=w==null?void 0:w.ASSETS;if(!Array.isArray(A)){const S=this.assignAssetListError(e,Z.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),v.url,y,b);this.hls.trigger(_.ERROR,S);return}e.assetListResponse=w,this.hls.trigger(_.ASSET_LIST_LOADED,{event:e,assetListResponse:w,networkDetails:b})},onError:(p,y,v,b)=>{const w=this.assignAssetListError(e,Z.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${p.code} ${p.text} (${y.url})`),y.url,b,v);this.hls.trigger(_.ERROR,w)},onTimeout:(p,y,v)=>{const b=this.assignAssetListError(e,Z.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${y.url})`),y.url,p,v);this.hls.trigger(_.ERROR,b)}};return l.load(u,d,g),this.hls.trigger(_.ASSET_LIST_LOADING,{event:e}),l}assignAssetListError(e,t,n,i,r,a){return e.error=n,{type:_e.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:i,error:n,networkDetails:a,stats:r}}}function ea(s,e,t){nr(s,e,t),s.addEventListener(e,t)}function nr(s,e,t){s.removeEventListener(e,t)}function MT(s){s==null||s.play().catch(()=>{})}class RF extends ca{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;const i=n-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const a=i<=-.01;this.timelinePos=n,this.bufferedPos=n;const l=this.playingItem;if(!l){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(n,n-i)&&this.updateSchedule(),this.checkBuffer(),a&&n<l.start||n>=l.end){var u;const p=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(l)&&(u=this.media)!=null&&u.paused&&(this.shouldPlay=!1),!a){const y=this.findItemIndex(l);if(p>y){const v=this.schedule.findJumpRestrictedIndex(y+1,p);if(v>y){this.setSchedulePosition(v);return}}}this.setSchedulePosition(p);return}const h=this.playingAsset;if(!h){if(this.playingLastItem&&this.isInterstitial(l)){const p=l.event.assetList[0];p&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,p))}return}const d=h.timelineStart,g=h.duration||0;(a&&n<d||n>=d+g)&&this.setScheduleToAssetAtTime(n,h)},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(n>=i.end){this.timelinePos=i.end;const l=this.findItemIndex(i);this.setSchedulePosition(l+1)}const r=this.playingAsset;if(!r)return;const a=r.timelineStart+(r.duration||0);n>=a&&this.setScheduleToAssetAtTime(n,r)},this.onScheduleUpdate=(n,i)=>{const r=this.schedule,a=this.playingItem,l=r.events||[],u=r.items||[],h=r.durations,d=n.map(y=>y.identifier),g=!!(l.length||d.length);if(g&&this.log(`INTERSTITIALS_UPDATED (${l.length}): ${l}
Schedule: ${u.map(y=>Ma(y))}`),d.length&&this.log(`Removed events ${d}`),this.playerQueue.forEach(y=>{if(y.interstitial.appendInPlace){const v=y.assetItem.timelineStart,b=y.timelineOffset-v;if(b)try{y.timelineOffset=v}catch(w){Math.abs(b)>su&&this.warn(`${w} ("${y.assetId}" ${y.timelineOffset}->${v})`)}}}),a){const y=this.updateItem(a,this.timelinePos);this.itemsMatch(a,y)&&(this.playingItem=y,this.waitingItem=this.endedItem=null)}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const p=this.bufferingItem;if(p){const y=this.updateItem(p,this.bufferedPos);this.itemsMatch(p,y)?this.bufferingItem=y:p.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(p.event,null))}if(n.forEach(y=>{y.assetList.forEach(v=>{this.clearAssetPlayer(v.identifier,null)})}),g||i){if(this.hls.trigger(_.INTERSTITIALS_UPDATED,{events:l.slice(0),schedule:u.slice(0),durations:h,removedIds:d}),this.isInterstitial(a)&&d.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new _F(e),this.schedule=new SF(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(_.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(_.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(_.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(_.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(_.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(_.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(_.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(_.BUFFER_APPENDED,this.onBufferAppended,this),e.on(_.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(_.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(_.MEDIA_ENDED,this.onMediaEnded,this),e.on(_.ERROR,this.onError,this),e.on(_.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(_.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(_.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(_.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(_.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(_.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(_.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(_.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(_.BUFFER_CODECS,this.onBufferCodecs,this),e.off(_.BUFFER_APPENDED,this.onBufferAppended,this),e.off(_.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(_.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(_.MEDIA_ENDED,this.onMediaEnded,this),e.off(_.ERROR,this.onError,this),e.off(_.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){nr(e,"play",this.onPlay),nr(e,"pause",this.onPause),nr(e,"seeking",this.onSeeking),nr(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;ea(n,"seeking",this.onSeeking),ea(n,"timeupdate",this.onTimeupdate),ea(n,"play",this.onPlay),ea(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!i){this.clearScheduleState();const r=this.findItemIndex(n);this.setSchedulePosition(r)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,i=this.media;if(this.media=null,!n&&(i&&this.removeMediaListeners(i),this.detachedData)){const r=this.getBufferingPlayer();r&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,r.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=g=>g&&e.getAssetPlayer(g.identifier),i=(g,p,y,v,b)=>{if(g){let w=g[p].start;const A=g.event;if(A){if(p==="playout"||A.timelineOccupancy!==Og.Point){const S=n(y);(S==null?void 0:S.interstitial)===A&&(w+=S.assetItem.startOffset+S[b])}}else{const S=v==="bufferedPos"?a():e[v];w+=S-g.start}return w}return 0},r=(g,p)=>{if(g!==0&&p!=="primary"&&e.schedule.length){var y;const v=e.schedule.findItemIndexAtTime(g),b=(y=e.schedule.items)==null?void 0:y[v];if(b){const w=b[p].start-b.start;return g+w}}return g},a=()=>{const g=e.bufferedPos;return g===Number.MAX_VALUE?l("primary"):Math.max(g,0)},l=g=>{var p;return(p=e.primaryDetails)!=null&&p.live?e.primaryDetails.edge:e.schedule.durations[g]},u=(g,p)=>{var y,v;const b=e.effectivePlayingItem;if(b!=null&&(y=b.event)!=null&&y.restrictions.skip)return;e.log(`seek to ${g} "${p}"`);const w=e.effectivePlayingItem,A=e.schedule.findItemIndexAtTime(g,p),S=(v=e.schedule.items)==null?void 0:v[A],T=e.getBufferingPlayer(),D=T==null?void 0:T.interstitial,L=D==null?void 0:D.appendInPlace,B=w&&e.itemsMatch(w,S);if(w&&(L||B)){const I=n(e.playingAsset),N=(I==null?void 0:I.media)||e.primaryMedia;if(N){const P=p==="primary"?N.currentTime:i(w,p,e.playingAsset,"timelinePos","currentTime"),z=g-P,te=(L?P:N.currentTime)+z;if(te>=0&&(!I||L||te<=I.duration)){N.currentTime=te;return}}}if(S){let I=g;if(p!=="primary"){const P=S[p].start,z=g-P;I=S.start+z}const N=!e.isInterstitial(S);if((!e.isInterstitial(w)||w.event.appendInPlace)&&(N||S.event.appendInPlace)){const P=e.media||(L?T==null?void 0:T.media:null);P&&(P.currentTime=I)}else if(w){const P=e.findItemIndex(w);if(A>P){const te=e.schedule.findJumpRestrictedIndex(P+1,A);if(te>P){e.setSchedulePosition(te);return}}let z=0;if(N)e.timelinePos=I,e.checkBuffer();else{var M;const te=S==null||(M=S.event)==null?void 0:M.assetList;if(te){const ye=g-(S[p]||S).start;for(let me=te.length;me--;){const K=te[me];if(K.duration&&ye>=K.startOffset&&ye<K.startOffset+K.duration){z=me;break}}}}e.setSchedulePosition(A,z)}}},h=()=>{const g=e.effectivePlayingItem;if(e.isInterstitial(g))return g;const p=t();return e.isInterstitial(p)?p:null},d={get currentTime(){const g=h(),p=e.effectivePlayingItem;return p&&p===g?i(p,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-p.playout.start:0},set currentTime(g){const p=h(),y=e.effectivePlayingItem;y&&y===p&&u(g+y.playout.start,"playout")},get duration(){const g=h();return g?g.playout.end-g.playout.start:0},get assetPlayers(){var g;const p=(g=h())==null?void 0:g.event.assetList;return p?p.map(y=>e.getAssetPlayer(y.identifier)):[]},get playingIndex(){var g;const p=(g=h())==null?void 0:g.event;return p&&e.effectivePlayingAsset?p.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return h()}};this.manager={get events(){var g,p;return((g=e.schedule)==null||(p=g.events)==null?void 0:p.slice(0))||[]},get schedule(){var g,p;return((g=e.schedule)==null||(p=g.items)==null?void 0:p.slice(0))||[]},get interstitialPlayer(){return h()?d:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const g=t();return e.findItemIndex(g)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const g=e.effectivePlayingItem;return e.findItemIndex(g)},primary:{get bufferedEnd(){return a()},get currentTime(){const g=e.timelinePos;return g>0?g:0},set currentTime(g){u(g,"primary")},get duration(){return l("primary")},get seekableStart(){var g;return((g=e.primaryDetails)==null?void 0:g.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(g){u(g,"integrated")},get duration(){return l("integrated")},get seekableStart(){var g;return r(((g=e.primaryDetails)==null?void 0:g.fragmentStart)||0,"integrated")}},skip:()=>{const g=e.effectivePlayingItem,p=g==null?void 0:g.event;if(p&&!p.restrictions.skip){const y=e.findItemIndex(g);if(p.appendInPlace){const v=g.playout.start+g.event.duration;u(v+.001,"playout")}else e.advanceAfterAssetEnded(p,y,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!n?!1:this.findItemIndex(t)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t,n;if(this.mediaSelection===null)return;const i=this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&!i.event.appendInPlace)return;let r=this.media;!r&&(e=this.bufferingItem)!=null&&(t=e.event)!=null&&t.appendInPlace&&(r=this.primaryMedia);const a=(n=r)==null?void 0:n.currentTime;if(!(a===void 0||!be(a)))return a}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,i=e.media;if(n&&i===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&i){this.detachedData={media:i};return}const r=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Ct(r)}`),this.detachedData=r}else t&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,t){var n,i;if(e.media===t)return;let r=null;const a=this.hls,l=e!==a,u=l&&e.interstitial.appendInPlace,h=(n=this.detachedData)==null?void 0:n.mediaSource;let d;if(a.media)u&&(r=a.transferMedia(),this.detachedData=r),d="Primary";else if(h){const y=this.getBufferingPlayer();y?(r=y.transferMedia(),d=`${y}`):d="detached MediaSource"}else d="detached media";if(!r){if(h)r=this.detachedData,this.log(`using detachedData: MediaSource ${Ct(r)}`);else if(!this.detachedData||a.media===t){const y=this.playerQueue;y.length>1&&y.forEach(v=>{if(l&&v.interstitial.appendInPlace!==u){const b=v.interstitial;this.clearInterstitial(v.interstitial,null),b.appendInPlace=!1,b.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${b}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const g=r&&"mediaSource"in r&&((i=r.mediaSource)==null?void 0:i.readyState)!=="closed",p=g&&r?r:t;if(this.log(`${g?"transfering MediaSource":"attaching media"} to ${l?e:"Primary"} from ${d}`),p===r){const y=l&&e.assetId===this.schedule.assetIdAtEnd;p.overrides={duration:this.schedule.duration,endOfStream:!l||y,cueRemoval:!l}}e.attachMedia(p)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,i=this.effectivePlayingItem;if(n===-1){const r=this.hls.startPosition;if(this.timelinePos=r,t.length&&t[0].cue.pre){const a=e.findEventIndex(t[0].identifier);this.setSchedulePosition(a)}else if(r>=0||!this.primaryLive){const a=this.timelinePos=r>0?r:0,l=e.findItemIndexAtTime(a);this.setSchedulePosition(l)}}else if(i&&!this.playingItem){const r=e.findItemIndex(i);this.setSchedulePosition(r)}}advanceAfterAssetEnded(e,t,n){const i=n+1;if(!e.isAssetPastPlayoutLimit(i)&&!e.assetList[i].error)this.setSchedulePosition(t,i);else{const r=this.schedule.items;if(r){const a=t+1,l=r.length;if(a>=l){this.setSchedulePosition(-1);return}const u=e.resumeTime;this.timelinePos<u&&(this.timelinePos=u,this.checkBuffer()),this.setSchedulePosition(a)}}}setScheduleToAssetAtTime(e,t){const n=this.schedule,i=t.parentIdentifier,r=n.getEvent(i);if(r){const a=n.findEventIndex(i),l=n.findAssetIndex(r,e);this.setSchedulePosition(a,l)}}setSchedulePosition(e,t){const n=this.schedule.items;if(!n||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${t}`);const i=e>=0?n[e]:null,r=this.playingItem,a=this.playingLastItem;if(this.isInterstitial(r)){var l;const h=r.event,d=this.playingAsset,g=d==null?void 0:d.identifier,p=g?this.getAssetPlayer(g):null;if(p&&g&&(!this.eventItemsMatch(r,i)||t!==void 0&&g!==((l=h.assetList)==null?void 0:l[t].identifier))){var u;const y=h.findAssetIndex(d);this.log(`INTERSTITIAL_ASSET_ENDED ${y+1}/${h.assetList.length} ${g3(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(_.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:y,event:h,schedule:n.slice(0),scheduleIndex:e,player:p}),this.retreiveMediaSource(g,i),p.media&&!((u=this.detachedData)!=null&&u.mediaSource)&&p.detachMedia()}if(!this.eventItemsMatch(r,i)&&(this.endedItem=r,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${h} ${Ma(r)}`),h.hasPlayed=!0,this.hls.trigger(_.INTERSTITIAL_ENDED,{event:h,schedule:n.slice(0),scheduleIndex:e}),h.cue.once)){this.updateSchedule();const y=this.schedule.items;if(i&&y){const v=this.schedule.findItemIndex(i);this.advanceSchedule(v,y,t,r,a)}return}}this.advanceSchedule(e,n,t,r,a)}advanceSchedule(e,t,n,i,r){const a=e>=0?t[e]:null,l=this.primaryMedia,u=this.playerQueue;if(u.length&&u.forEach(h=>{const d=h.interstitial,g=this.schedule.findEventIndex(d.identifier);(g<e||g>e+1)&&this.clearInterstitial(d,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const h=a.event;n===void 0&&(n=this.schedule.findAssetIndex(h,this.timelinePos));const d=this.waitingItem;this.assetsBuffered(a,l)||this.setBufferingItem(a);let g=this.preloadAssets(h,n);if(this.eventItemsMatch(a,d||i)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${Ma(a)} ${h.appendInPlace?"append in place":""}`),this.hls.trigger(_.INTERSTITIAL_STARTED,{event:h,schedule:t.slice(0),scheduleIndex:e})),!h.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${h}`);return}if(h.assetListLoader&&(h.assetListLoader.destroy(),h.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${h}`);return}this.waitingItem=this.endedItem=null,this.playingItem=a;const p=h.assetList[n];if(!p){const y=t[e+1],v=this.media;y&&v&&!this.isInterstitial(y)&&v.currentTime<y.start&&(v.currentTime=this.timelinePos=y.start),this.advanceAfterAssetEnded(h,e,n||0);return}if(g||(g=this.getAssetPlayer(p.identifier)),g===null||g.destroyed){const y=h.assetList.length;this.warn(`asset ${n+1}/${y} player destroyed ${h}`),g=this.createAssetPlayer(h,p,n)}if(!this.eventItemsMatch(a,this.bufferingItem)&&h.appendInPlace&&this.isAssetBuffered(p))return;this.startAssetPlayer(g,n,t,e,l),this.shouldPlay&&MT(g.media)}else a!==null?(this.resumePrimary(a,e,i),this.shouldPlay&&MT(this.hls.media)):r&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e,t;return(e=this.mediaSelection)==null||(t=e.main)==null?void 0:t.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,n){var i;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Ma(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let a=this.timelinePos;(a<e.start||a>=e.end)&&(a=this.getPrimaryResumption(e,t),this.timelinePos=a),this.attachPrimary(a,e)}if(!n)return;const r=this.schedule.items;r&&(this.log(`resumed ${Ma(e)}`),this.hls.trigger(_.INTERSTITIALS_PRIMARY_RESUMED,{schedule:r.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const i=this.primaryDetails;if(t===0)return this.hls.startPosition;if(i&&(n<i.fragmentStart||n>i.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:Ve.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const r=this.hls;r.media?this.checkBuffer():(this.transferMediaTo(r,i),n&&this.startLoadingPrimaryAt(e,n)),n||(this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((n=i.mainForwardBufferInfo)==null?void 0:n.start)||i.media.currentTime)-e)>.5?i.startLoad(e,t):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(_.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(_.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1)return;const n=this.hls.levels[t.level],i=ht(ht({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=ht(ht({},this.altSelection),{},{audio:n});return}const r=ht(ht({},i),{},{audio:n});this.mediaSelection=r}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=ht(ht({},this.altSelection),{},{subtitles:n});return}const r=ht(ht({},i),{},{subtitles:n});this.mediaSelection=r}onAudioTrackSwitching(e,t){const n=KA(t);this.playerQueue.forEach(i=>i.hls.setAudioOption(t)||i.hls.setAudioOption(n))}onSubtitleTrackSwitch(e,t){const n=KA(t);this.playerQueue.forEach(i=>i.hls.setSubtitleOption(t)||t.id!==-1&&i.hls.setSubtitleOption(n))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let i=0;i<t.length;i++){const r=t[i];if(r.cue.post){var n;const a=this.schedule.findEventIndex(r.identifier),l=(n=this.schedule.items)==null?void 0:n[a];this.isInterstitial(l)&&this.eventItemsMatch(l,this.bufferingItem)&&this.bufferedToItem(l,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const n=this.findItemIndex(t);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,t){const n=this.schedule.items;if(e&&n){const i=this.findItemIndex(e,t);return n[i]||null}return null}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===((n=t.event)==null?void 0:n.identifier))}findItemIndex(e,t){return e?this.schedule.findItemIndex(e,t):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const t=this.schedule.items;if(!t)return;const n=Ve.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=n.len<1),this.updateBufferedPos(n.end,t,e)}updateBufferedPos(e,t,n){const i=this.schedule,r=this.bufferingItem;if(this.bufferedPos>e)return;if(t.length===1&&this.itemsMatch(t[0],r)){this.bufferedPos=e;return}const a=this.playingItem,l=this.findItemIndex(a);let u=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var h,d;const g=this.findItemIndex(r),p=Math.min(g+1,t.length-1),y=t[p];if((u===-1&&r&&e>=r.end||(h=y.event)!=null&&h.appendInPlace&&e+.01>=y.start)&&(u=p),p-l>1&&(r==null||(d=r.event)==null?void 0:d.appendInPlace)===!1)return;if(this.bufferedPos=e,u>g&&u>l)this.bufferedToItem(y);else{const v=this.primaryDetails;this.primaryLive&&v&&e>v.edge-v.targetduration&&y.start<v.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(y)&&this.preloadAssets(y.event,0)}}else n&&a&&!this.itemsMatch(a,r)&&(u===l?this.bufferedToItem(a):u===l+1&&this.bufferedToItem(t[u]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const r=this.getAssetPlayer(i.identifier);return!(r!=null&&r.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(this.itemsMatch(e,t))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:i,events:r}=n;if(!i||!r)return t;const a=this.isInterstitial(e),l=this.getBufferingPlayer();if(this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos)),!this.playbackDisabled){const u=l?l.remaining:t?t.end-this.timelinePos:0;this.log(`buffered to boundary ${Ma(e)}`+(t?` (${u.toFixed(2)} remaining)`:"")),a?e.event.assetList.forEach(h=>{const d=this.getAssetPlayer(h.identifier);d&&d.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(h=>h.pauseBuffering()))}this.hls.trigger(_.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:r.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(n!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,i=n.assetList.length===0&&!n.assetListLoader,r=n.cue.once;if(i||!r){const a=this.preloadAssets(n,t);if(a!=null&&a.interstitial.appendInPlace){const l=n.assetList[t],u=this.primaryMedia;l&&u&&this.bufferAssetPlayer(a,u)}}}preloadAssets(e,t){const n=e.assetUrl,i=e.assetList.length,r=i===0&&!e.assetListLoader,a=e.cue.once;if(r){const u=e.timelineStart;if(e.appendInPlace){var l;const p=this.playingItem;!this.isInterstitial(p)&&(p==null||(l=p.nextEvent)==null?void 0:l.identifier)===e.identifier&&this.flushFrontBuffer(u+.25)}let h,d=0;if(!this.playingItem&&this.primaryLive&&(d=this.hls.startPosition,d===-1&&(d=this.hls.liveSyncPosition||0)),d&&!(e.cue.pre||e.cue.post)){const p=d-u;p>0&&(h=Math.round(p*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:i} ${e}${h?` live-start: ${d} start-offset: ${h}`:""}`),n)return this.createAsset(e,0,0,u,e.duration,n);const g=this.assetListLoader.loadAssetList(e,h);g&&(e.assetListLoader=g)}else if(!a&&i){for(let u=t;u<i;u++){const h=e.assetList[u],d=this.getAssetPlayerQueueIndex(h.identifier);(d===-1||this.playerQueue[d].destroyed)&&!h.error&&this.createAssetPlayer(e,h,u)}return this.getAssetPlayer(e.assetList[t].identifier)}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(i=>{this.hls.trigger(_.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n]}return null}createAsset(e,t,n,i,r,a){const l={parentIdentifier:e.identifier,identifier:EF(e,a,t),duration:r,startOffset:n,timelineStart:i,uri:a};return this.createAssetPlayer(e,l,t)}createAssetPlayer(e,t,n){this.log(`create HLSAssetPlayer for ${g3(t)}`);const i=this.hls,r=i.userConfig;let a=r.videoPreference;const l=i.loadLevelObj||i.levels[i.currentLevel];(a||l)&&(a=yt({},a),l.videoCodec&&(a.videoCodec=l.videoCodec),l.videoRange&&(a.allowedVideoRanges=[l.videoRange]));const u=i.audioTracks[i.audioTrack],h=i.subtitleTracks[i.subtitleTrack];let d=0;if(this.primaryLive||e.appendInPlace){const T=this.timelinePos-t.timelineStart;if(T>1){const D=t.duration;D&&T<D&&(d=T)}}const g=t.identifier,p=ht(ht({},r),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:g,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:d,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:u||r.audioPreference,subtitlePreference:h||r.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(p.timelineOffset=t.timelineStart));const y=p.cmcd;y!=null&&y.sessionId&&y.contentId&&(p.cmcd=yt({},y,{contentId:$f(t.uri)})),this.getAssetPlayer(g)&&this.warn(`Duplicate date range identifier ${e} and asset ${g}`);const v=new TF(this.HlsPlayerClass,p,e,t);this.playerQueue.push(v),e.assetList[n]=t;const b=T=>{if(T.live){const B=new Error(`Interstitials MUST be VOD assets ${e}`),M={fatal:!0,type:_e.OTHER_ERROR,details:Z.INTERSTITIAL_ASSET_ITEM_ERROR,error:B};this.handleAssetItemError(M,e,this.schedule.findEventIndex(e.identifier),n,B.message);return}const D=T.edge-T.fragmentStart,L=t.duration;(L===null||D>L)&&(this.log(`Interstitial asset "${g}" duration change ${L} > ${D}`),t.duration=D,this.updateSchedule())};v.on(_.LEVEL_UPDATED,(T,{details:D})=>b(D)),v.on(_.LEVEL_PTS_UPDATED,(T,{details:D})=>b(D));const w=(T,D)=>{const L=this.getAssetPlayer(g);if(L&&D.tracks){L.off(_.BUFFER_CODECS,w),L.tracks=D.tracks;const B=this.primaryMedia;this.bufferingAsset===L.assetItem&&B&&!L.media&&this.bufferAssetPlayer(L,B)}};v.on(_.BUFFER_CODECS,w);const A=()=>{var T;const D=this.getAssetPlayer(g);if(this.log(`buffered to end of asset ${D}`),!D)return;const L=this.schedule.findEventIndex(e.identifier),B=e.findAssetIndex(t),M=B+1,I=(T=this.schedule.items)==null?void 0:T[L];if(this.isInterstitial(I))if(B!==-1&&!e.isAssetPastPlayoutLimit(M)&&!e.assetList[M].error)this.bufferedToItem(I,M);else{var N;const P=(N=this.schedule.items)==null?void 0:N[L+1];P&&this.bufferedToItem(P)}};v.on(_.BUFFERED_TO_END,A);const S=T=>()=>{if(!this.getAssetPlayer(g))return;this.shouldPlay=!0;const L=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,L,T)};return v.once(_.MEDIA_ENDED,S(n)),v.once(_.PLAYOUT_LIMIT_REACHED,S(1/0)),v.on(_.ERROR,(T,D)=>{const L=this.getAssetPlayer(g);if(D.details===Z.BUFFER_STALLED_ERROR){if(L!=null&&L.media){const B=L.currentTime,M=L.duration-B;B&&e.appendInPlace&&M/L.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${g} ${e} at ${L.media.currentTime}`),A()):(this.warn(`Stalled at ${B} of ${B+M} in asset ${g} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}return}this.handleAssetItemError(D,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${D.error} ${e}`)}),v.on(_.DESTROYING,()=>{if(!this.getAssetPlayer(g))return;const D=new Error(`Asset player destroyed unexpectedly ${g}`),L={fatal:!0,type:_e.OTHER_ERROR,details:Z.INTERSTITIAL_ASSET_ITEM_ERROR,error:D};this.handleAssetItemError(L,e,this.schedule.findEventIndex(e.identifier),n,D.message)}),this.hls.trigger(_.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:v}),v}clearInterstitial(e,t){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,t)}),e.reset()}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){this.log(`clearAssetPlayer "${e}" toSegment: ${t&&Ma(t)}`);const i=this.playerQueue[n];this.transferMediaFromPlayer(i,t),this.playerQueue.splice(n,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,i,r){const{interstitial:a,assetItem:l,assetId:u}=e,h=a.assetList.length,d=this.playingAsset;this.endedAsset=null,this.playingAsset=l,(!d||d.identifier!==u)&&(d&&(this.clearAssetPlayer(d.identifier,n[i]),delete d.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${h} ${e}`),this.hls.trigger(_.INTERSTITIAL_ASSET_STARTED,{asset:l,assetListIndex:t,event:a,schedule:n.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,r)}bufferAssetPlayer(e,t){var n,i;const{interstitial:r,assetItem:a,assetId:l}=e,u=this.schedule.findEventIndex(r.identifier),h=(n=this.schedule.items)==null?void 0:n[u];if(!h)return;this.setBufferingItem(h),this.bufferingAsset=a;const d=this.getBufferingPlayer();if(d===e)return;const g=r.appendInPlace;if(g&&(d==null?void 0:d.interstitial.appendInPlace)===!1)return;const p=(d==null?void 0:d.tracks)||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(g&&a!==this.playingAsset){if(!e.tracks)return;if(p&&!ik(p,e.tracks)){const y=new Error(`Asset "${l}" SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(p)}')`),v={fatal:!0,type:_e.OTHER_ERROR,details:Z.INTERSTITIAL_ASSET_ITEM_ERROR,error:y},b=r.findAssetIndex(a);this.handleAssetItemError(v,r,u,b,y.message);return}}this.transferMediaTo(e,t)}handleAssetItemError(e,t,n,i,r){if(e.details===Z.BUFFER_STALLED_ERROR)return;const a=t.assetList[i]||null;let l=null;if(a){const g=this.getAssetPlayerQueueIndex(a.identifier);l=this.playerQueue[g]||null}const u=this.schedule.items,h=yt({},e,{fatal:!1,errorAction:nd(!0),asset:a,assetListIndex:i,event:t,schedule:u,scheduleIndex:n,player:l});if(this.warn(`Asset item error: ${e.error}`),this.hls.trigger(_.INTERSTITIAL_ASSET_ERROR,h),!e.fatal)return;const d=new Error(r);a&&(this.playingAsset!==a&&this.clearAssetPlayer(a.identifier,null),a.error=d),t.assetList.some(g=>!g.error)?t.appendInPlace&&(t.error=d):t.error=d,this.primaryFallback(t)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;if(this.updateSchedule(),n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${n?Ma(n):"<none>"} error: ${e.error}`),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t));let i=this.timelinePos;i===-1&&(i=this.hls.startPosition);const r=this.updateItem(n,i);if(this.itemsMatch(n,r))this.clearInterstitial(e,null);else{const a=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(a)}}else this.checkStart()}onAssetListLoaded(e,t){var n;const i=t.event,r=i.identifier,a=t.assetListResponse.ASSETS;if(!this.schedule.hasEvent(r))return;const l=i.timelineStart,u=i.duration;let h=0;a.forEach((v,b)=>{const w=parseFloat(v.DURATION);this.createAsset(i,b,h,l+h,w,v.URI),h+=w}),i.duration=h,this.log(`Loaded asset-list with duration: ${h} (was: ${u}) ${i}`);const d=this.waitingItem,g=(d==null?void 0:d.event.identifier)===r;this.updateSchedule();const p=(n=this.bufferingItem)==null?void 0:n.event;if(g){var y;const v=this.schedule.findEventIndex(r),b=(y=this.schedule.items)==null?void 0:y[v];if(b){if(!this.playingItem&&this.timelinePos>b.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==v){i.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${i}`),this.primaryFallback(i);return}this.setBufferingItem(b)}this.setSchedulePosition(v)}else if((p==null?void 0:p.identifier)===r&&p.appendInPlace){const v=i.assetList[0],b=this.getAssetPlayer(v.identifier),w=this.primaryMedia;v&&b&&w&&this.bufferAssetPlayer(b,w)}}onError(e,t){switch(t.details){case Z.ASSET_LIST_PARSING_ERROR:case Z.ASSET_LIST_LOAD_ERROR:case Z.ASSET_LIST_LOAD_TIMEOUT:{const n=t.interstitial;n&&this.primaryFallback(n);break}case Z.BUFFER_STALLED_ERROR:{this.onTimeupdate(),this.checkBuffer(!0);break}}}}const PT=500;class kF extends Iv{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",Te.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(_.LEVEL_LOADED,this.onLevelLoaded,this),e.on(_.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(_.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(_.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(_.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(_.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(_.LEVEL_LOADED,this.onLevelLoaded,this),e.off(_.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(_.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(_.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(_.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(_.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=ue.IDLE,this.setInterval(PT),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(En(n)&&(this.fragPrevious=n),this.state=ue.IDLE,!i)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let a;const l=n.start;for(let h=0;h<r.length;h++)if(l>=r[h].start&&l<=r[h].end){a=r[h];break}const u=n.start+n.duration;a?a.end=u:(a={start:l,end:u},r.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(n===0&&i!==Number.POSITIVE_INFINITY){const r=i-1;if(r<=0)return;t.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach(a=>{for(let l=0;l<a.length;){if(a[l].end<=r){a.shift();continue}else if(a[l].start<r)a[l].start=r;else break;l++}}),this.fragmentTracker.removeFragmentsInRange(n,r,Te.SUBTITLE)}}onError(e,t){const n=t.frag;(n==null?void 0:n.type)===Te.SUBTITLE&&(t.details===Z.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ue.STOPPED&&(this.state=ue.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&sL(this.levels,t)){this.levels=t.map(n=>new td(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const i=new td(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Te.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==ue.STOPPED&&this.setInterval(PT)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:i,levels:r}=this,{details:a,id:l}=t;if(!r){this.warn(`Subtitle tracks were reset while loading level ${l}`);return}const u=r[l];if(l>=r.length||!u)return;this.log(`Subtitle track ${l} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let h=0;if(a.live||(n=u.details)!=null&&n.live){const g=this.mainDetails;if(a.deltaUpdateFailed||!g)return;const p=g.fragments[0];if(!u.details)a.hasProgramDateTime&&g.hasProgramDateTime?(Cg(a,g),h=a.fragmentStart):p&&(h=p.start,o3(a,h));else{var d;h=this.alignPlaylists(a,u.details,(d=this.levelLastLoaded)==null?void 0:d.details),h===0&&p&&(h=p.start,o3(a,h))}}u.details=a,this.levelLastLoaded=u,l===i&&(this.hls.trigger(_.SUBTITLE_TRACK_UPDATED,{details:a,id:l,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===ue.IDLE&&(Fl(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),u.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&tu(i.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,Dv(i.method)).catch(l=>{throw r.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:t}),l}).then(l=>{const u=performance.now();r.trigger(_.FRAG_DECRYPTED,{frag:t,payload:l,stats:{tstart:a,tdecrypt:u}})}).catch(l=>{this.warn(`${l.name}: ${l.message}`),this.state=ue.IDLE})}}doTick(){if(!this.media){this.state=ue.IDLE;return}if(this.state===ue.IDLE){const{currentTrackId:e,levels:t}=this,n=t==null?void 0:t[e];if(!n||!t.length||!n.details||this.waitForLive(n))return;const{config:i}=this,r=this.getLoadPosition(),a=Ve.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,i.maxBufferHole),{end:l,len:u}=a,h=n.details,d=this.hls.maxBufferLength+h.levelTargetDuration;if(u>d)return;const g=h.fragments,p=g.length,y=h.edge;let v=null;const b=this.fragPrevious;if(l<y){const S=i.maxFragLookUpTolerance,T=l>y-S?0:S;v=Fl(b,g,Math.max(g[0].start,l),T),!v&&b&&b.start<g[0].start&&(v=g[0])}else v=g[p-1];if(v=this.filterReplacedPrimary(v,n.details),!v)return;const w=v.sn-h.startSN,A=g[w-1];if(A&&A.cc===v.cc&&this.fragmentTracker.getState(A)===hn.NOT_LOADED&&(v=A),this.fragmentTracker.getState(v)===hn.NOT_LOADED){const S=this.mapToInitFragWhenRequired(v);S&&this.loadFragment(S,n,l)}}}loadFragment(e,t,n){En(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new LF(this.tracksBuffered[this.currentTrackId]||[])}}class LF{constructor(e){this.buffered=void 0;const t=(n,i,r)=>{if(i=i>>>0,i>r-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${r})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}const DF={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},dL=s=>String.fromCharCode(DF[s]||s),ai=15,Rr=100,CF={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},IF={17:2,18:4,21:6,22:8,23:10,19:13,20:15},OF={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},MF={25:2,26:4,29:6,30:8,31:10,27:13,28:15},PF=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class NF{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;et.log(`${this.time} [${e}] ${n}`)}}}const Ko=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class gL{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class BF{constructor(){this.uchar=" ",this.penState=new gL}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class FF{constructor(e){this.chars=[],this.pos=0,this.currPenState=new gL,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Rr;t++)this.chars.push(new BF);this.logger=e}equals(e){for(let t=0;t<Rr;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Rr;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Rr;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Rr&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Rr)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=dL(e);if(this.pos>=Rr){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Rr;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<Rr;n++){const i=this.chars[n].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class dx{constructor(e){this.rows=[],this.currRow=ai-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<ai;t++)this.rows.push(new FF(e));this.logger=e}reset(){for(let e=0;e<ai;e++)this.rows[e].clear();this.currRow=ai-1}equals(e){let t=!0;for(let n=0;n<ai;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<ai;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<ai;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Ct(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let l=0;l<ai;l++)this.rows[l].clear();const r=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const l=a.rows[r].cueStartTime,u=this.logger.time;if(l!==null&&u!==null&&l<u)for(let h=0;h<this.nrRollUpRows;h++)this.rows[t-this.nrRollUpRows+h+1].copy(a.rows[r+h])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const r=e.indent,a=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[a].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Ct(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let r=0;r<ai;r++){const a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class NT{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new dx(n),this.nonDisplayedMemory=new dx(n),this.lastOutputScreen=new dx(n),this.currRollUpRow=this.displayedMemory.rows[ai-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[ai-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+Ct(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class BT{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=HF(),this.logger=void 0;const i=this.logger=new NF;this.channels=[null,new NT(e,t,i),new NT(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const i=t[n]&127,r=t[n+1]&127;let a=!1,l=null;if(i===0&&r===0)continue;this.logger.log(3,()=>"["+Ko([t[n],t[n+1]])+"] -> ("+Ko([i,r])+")");const u=this.cmdHistory;if(i>=16&&i<=31){if(UF(i,r,u)){v2(null,null,u),this.logger.log(3,()=>"Repeated command ("+Ko([i,r])+") is dropped");continue}v2(i,r,this.cmdHistory),a=this.parseCmd(i,r),a||(a=this.parseMidrow(i,r)),a||(a=this.parsePAC(i,r)),a||(a=this.parseBackgroundAttributes(i,r))}else v2(null,null,u);if(!a&&(l=this.parseChars(i,r),l)){const d=this.currentChannel;d&&d>0?this.channels[d].insertChars(l):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!l&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Ko([i,r])+" orig: "+Ko([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(n||i))return!1;const r=e===20||e===21||e===23?1:2,a=this.channels[r];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=r,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Ko([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,r=(e===16||e===24)&&t>=64&&t<=95;if(!(i||r))return!1;const a=e<=23?1:2;t>=64&&t<=95?n=a===1?CF[e]:OF[e]:n=a===1?IF[e]:MF[e];const l=this.channels[a];return l?(l.setPAC(this.interpretPAC(n,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,t){let n,i=null,r=null;if(e>=25?(n=2,r=e-8):(n=1,r=e),r>=17&&r<=19){let a;r===17?a=t+80:r===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+dL(a)+"' in channel "+n),i=[a]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+Ko(i).join(",")),i}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(n||i))return!1;let r;const a={};e===16||e===24?(r=Math.floor((t-32)/2),a.background=PF[r],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const l=e<=23?1:2;return this.channels[l].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}v2(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function v2(s,e,t){t.a=s,t.b=e}function UF(s,e,t){return t.a===s&&t.b===e}function HF(){return{a:null,b:null}}var $v=function(){if(Dg!=null&&Dg.VTTCue)return self.VTTCue;const s=["","lr","rl"],e=["start","middle","end","left","right"];function t(l,u){if(typeof u!="string"||!Array.isArray(l))return!1;const h=u.toLowerCase();return~l.indexOf(h)?h:!1}function n(l){return t(s,l)}function i(l){return t(e,l)}function r(l,...u){let h=1;for(;h<arguments.length;h++){const d=arguments[h];for(const g in d)l[g]=d[g]}return l}function a(l,u,h){const d=this,g={enumerable:!0};d.hasBeenReset=!1;let p="",y=!1,v=l,b=u,w=h,A=null,S="",T=!0,D="auto",L="start",B=50,M="middle",I=50,N="middle";Object.defineProperty(d,"id",r({},g,{get:function(){return p},set:function(P){p=""+P}})),Object.defineProperty(d,"pauseOnExit",r({},g,{get:function(){return y},set:function(P){y=!!P}})),Object.defineProperty(d,"startTime",r({},g,{get:function(){return v},set:function(P){if(typeof P!="number")throw new TypeError("Start time must be set to a number.");v=P,this.hasBeenReset=!0}})),Object.defineProperty(d,"endTime",r({},g,{get:function(){return b},set:function(P){if(typeof P!="number")throw new TypeError("End time must be set to a number.");b=P,this.hasBeenReset=!0}})),Object.defineProperty(d,"text",r({},g,{get:function(){return w},set:function(P){w=""+P,this.hasBeenReset=!0}})),Object.defineProperty(d,"region",r({},g,{get:function(){return A},set:function(P){A=P,this.hasBeenReset=!0}})),Object.defineProperty(d,"vertical",r({},g,{get:function(){return S},set:function(P){const z=n(P);if(z===!1)throw new SyntaxError("An invalid or illegal string was specified.");S=z,this.hasBeenReset=!0}})),Object.defineProperty(d,"snapToLines",r({},g,{get:function(){return T},set:function(P){T=!!P,this.hasBeenReset=!0}})),Object.defineProperty(d,"line",r({},g,{get:function(){return D},set:function(P){if(typeof P!="number"&&P!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");D=P,this.hasBeenReset=!0}})),Object.defineProperty(d,"lineAlign",r({},g,{get:function(){return L},set:function(P){const z=i(P);if(!z)throw new SyntaxError("An invalid or illegal string was specified.");L=z,this.hasBeenReset=!0}})),Object.defineProperty(d,"position",r({},g,{get:function(){return B},set:function(P){if(P<0||P>100)throw new Error("Position must be between 0 and 100.");B=P,this.hasBeenReset=!0}})),Object.defineProperty(d,"positionAlign",r({},g,{get:function(){return M},set:function(P){const z=i(P);if(!z)throw new SyntaxError("An invalid or illegal string was specified.");M=z,this.hasBeenReset=!0}})),Object.defineProperty(d,"size",r({},g,{get:function(){return I},set:function(P){if(P<0||P>100)throw new Error("Size must be between 0 and 100.");I=P,this.hasBeenReset=!0}})),Object.defineProperty(d,"align",r({},g,{get:function(){return N},set:function(P){const z=i(P);if(!z)throw new SyntaxError("An invalid or illegal string was specified.");N=z,this.hasBeenReset=!0}})),d.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class GF{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function mL(s){function e(n,i,r,a){return(n|0)*3600+(i|0)*60+(r|0)+parseFloat(a||0)}const t=s.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class zF{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function pL(s,e,t,n){const i=n?s.split(n):[s];for(const r in i){if(typeof i[r]!="string")continue;const a=i[r].split(t);if(a.length!==2)continue;const l=a[0],u=a[1];e(l,u)}}const m3=new $v(0,0,""),b2=m3.align==="middle"?"middle":"center";function $F(s,e,t){const n=s;function i(){const l=mL(s);if(l===null)throw new Error("Malformed timestamp: "+n);return s=s.replace(/^[^\sa-zA-Z-]+/,""),l}function r(l,u){const h=new zF;pL(l,function(p,y){let v;switch(p){case"region":for(let b=t.length-1;b>=0;b--)if(t[b].id===y){h.set(p,t[b].region);break}break;case"vertical":h.alt(p,y,["rl","lr"]);break;case"line":v=y.split(","),h.integer(p,v[0]),h.percent(p,v[0])&&h.set("snapToLines",!1),h.alt(p,v[0],["auto"]),v.length===2&&h.alt("lineAlign",v[1],["start",b2,"end"]);break;case"position":v=y.split(","),h.percent(p,v[0]),v.length===2&&h.alt("positionAlign",v[1],["start",b2,"end","line-left","line-right","auto"]);break;case"size":h.percent(p,y);break;case"align":h.alt(p,y,["start",b2,"end","left","right"]);break}},/:/,/\s/),u.region=h.get("region",null),u.vertical=h.get("vertical","");let d=h.get("line","auto");d==="auto"&&m3.line===-1&&(d=-1),u.line=d,u.lineAlign=h.get("lineAlign","start"),u.snapToLines=h.get("snapToLines",!0),u.size=h.get("size",100),u.align=h.get("align",b2);let g=h.get("position","auto");g==="auto"&&m3.position===50&&(g=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=g}function a(){s=s.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),s.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);s=s.slice(3),a(),e.endTime=i(),a(),r(s,e)}function yL(s){return s.replace(/<br(?: \/)?>/gi,`
`)}class VF{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new GF,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let r=t.buffer,a=0;for(r=yL(r);a<r.length&&r[a]!=="\r"&&r[a]!==`
`;)++a;const l=r.slice(0,a);return r[a]==="\r"&&++a,r[a]===`
`&&++a,t.buffer=r.slice(a),l}function i(r){pL(r,function(a,l){},/:/)}try{let r="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;r=n();const l=r.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(l!=null&&l[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new $v(0,0,""),t.state="CUE",r.indexOf("-->")===-1){t.cue.id=r;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{$F(r,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const l=r.indexOf("-->")!==-1;if(!r||l&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=r}continue;case"BADCUE":r||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const YF=/\r\n|\n\r|\n|\r/g,gx=function(e,t,n=0){return e.slice(n,n+t.length)===t},KF=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!be(t)||!be(n)||!be(i)||!be(r))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*i,t+=60*60*1e3*r,t};function Vv(s,e,t){return $f(s.toString())+$f(e.toString())+$f(t)}const jF=function(e,t,n){let i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(a=r)!=null&&a.new;){var a;e.ccOffset+=i.start-r.start,i.new=!1,i=r,r=e[i.prevCC]}e.presentationOffset=n};function qF(s,e,t,n,i,r,a){const l=new VF,u=Rs(new Uint8Array(s)).trim().replace(YF,`
`).split(`
`),h=[],d=e?f4(e.baseTime,e.timescale):0;let g="00:00.000",p=0,y=0,v,b=!0;l.oncue=function(w){const A=t[n];let S=t.ccOffset;const T=(p-d)/9e4;if(A!=null&&A.new&&(y!==void 0?S=t.ccOffset=A.start:jF(t,n,T)),T){if(!e){v=new Error("Missing initPTS for VTT MPEGTS");return}S=T-t.presentationOffset}const D=w.endTime-w.startTime,L=Ws((w.startTime+S-y)*9e4,i*9e4)/9e4;w.startTime=Math.max(L,0),w.endTime=Math.max(L+D,0);const B=w.text.trim();w.text=decodeURIComponent(encodeURIComponent(B)),w.id||(w.id=Vv(w.startTime,w.endTime,B)),w.endTime>0&&h.push(w)},l.onparsingerror=function(w){v=w},l.onflush=function(){if(v){a(v);return}r(h)},u.forEach(w=>{if(b)if(gx(w,"X-TIMESTAMP-MAP=")){b=!1,w.slice(16).split(",").forEach(A=>{gx(A,"LOCAL:")?g=A.slice(6):gx(A,"MPEGTS:")&&(p=parseInt(A.slice(7)))});try{y=KF(g)/1e3}catch(A){v=A}return}else w===""&&(b=!1);l.parse(w+`
`)}),l.flush()}const mx="stpp.ttml.im1t",xL=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,vL=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,QF={left:"start",center:"center",right:"end",start:"start",end:"end"};function FT(s,e,t,n){const i=He(new Uint8Array(s),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const r=i.map(l=>Rs(l)),a=h4(e.baseTime,1,e.timescale);try{r.forEach(l=>t(WF(l,a)))}catch(l){n(l)}}function WF(s,e){const i=new DOMParser().parseFromString(s,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(r).reduce((g,p)=>(g[p]=i.getAttribute(`ttp:${p}`)||r[p],g),{}),l=i.getAttribute("xml:space")!=="preserve",u=UT(px(i,"styling","style")),h=UT(px(i,"layout","region")),d=px(i,"body","[begin]");return[].map.call(d,g=>{const p=bL(g,l);if(!p||!g.hasAttribute("begin"))return null;const y=xx(g.getAttribute("begin"),a),v=xx(g.getAttribute("dur"),a);let b=xx(g.getAttribute("end"),a);if(y===null)throw HT(g);if(b===null){if(v===null)throw HT(g);b=y+v}const w=new $v(y-e,b-e,p);w.id=Vv(w.startTime,w.endTime,w.text);const A=h[g.getAttribute("region")],S=u[g.getAttribute("style")],T=XF(A,S,u),{textAlign:D}=T;if(D){const L=QF[D];L&&(w.lineAlign=L),w.align=D}return yt(w,T),w}).filter(g=>g!==null)}function px(s,e,t){const n=s.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function UT(s){return s.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function bL(s,e){return[].slice.call(s.childNodes).reduce((t,n,i)=>{var r;return n.nodeName==="br"&&i?t+`
`:(r=n.childNodes)!=null&&r.length?bL(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function XF(s,e,t){const n="http://www.w3.org/ns/ttml#styling";let i=null;const r=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=s!=null&&s.hasAttribute("style")?s.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(i=t[a]),r.reduce((l,u)=>{const h=yx(e,n,u)||yx(s,n,u)||yx(i,n,u);return h&&(l[u]=h),l},{})}function yx(s,e,t){return s&&s.hasAttributeNS(e,t)?s.getAttributeNS(e,t):null}function HT(s){return new Error(`Could not parse ttml timestamp ${s}`)}function xx(s,e){if(!s)return null;let t=mL(s);return t===null&&(xL.test(s)?t=ZF(s,e):vL.test(s)&&(t=JF(s,e))),t}function ZF(s,e){const t=xL.exec(s),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function JF(s,e){const t=vL.exec(s),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class E2{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class e5{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=zT(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(_.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(_.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(_.FRAG_LOADING,this.onFragLoading,this),e.on(_.FRAG_LOADED,this.onFragLoaded,this),e.on(_.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(_.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(_.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(_.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(_.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(_.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(_.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(_.FRAG_LOADING,this.onFragLoading,this),e.off(_.FRAG_LOADED,this.onFragLoaded,this),e.off(_.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(_.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(_.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(_.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(_.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new E2(this,"textTrack1"),t=new E2(this,"textTrack2"),n=new E2(this,"textTrack3"),i=new E2(this,"textTrack4");this.cea608Parser1=new BT(1,e,t),this.cea608Parser2=new BT(3,n,i)}addCues(e,t,n,i,r){let a=!1;for(let l=r.length;l--;){const u=r[l],h=t5(u[0],u[1],t,n);if(h>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],n),a=!0,h/(n-t)>.5))return}if(a||r.push([t,n]),this.config.renderTextTracksNatively){const l=this.captionsTracks[e];this.Cues.newCue(l,t,n,i)}else{const l=this.Cues.newCue(null,t,n,i);this.hls.trigger(_.CUES_PARSED,{type:"captions",cues:l,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:r}){const{unparsedVttFrags:a}=this;n===Te.MAIN&&(this.initPTS[t.cc]={baseTime:i,timescale:r}),a.length&&(this.unparsedVttFrags=[],a.forEach(l=>{this.onFragLoaded(_.FRAG_LOADED,l)}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const r=n.textTracks[i];if(GT(r,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:r,languageCode:a}=t[e],l=this.getExistingTrack(r,a);if(l)n[e]=l,qc(n[e]),uL(n[e],i);else{const u=this.createTextTrack("captions",r,a);u&&(u[e]=!0,n[e]=u)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,i={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(_.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,n){const i=this.media;if(i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:i}=this;Object.keys(i).forEach(r=>{qc(i[r]),delete i[r]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=zT(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)qc(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some(r=>r.textCodec===mx);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(sL(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const a=this.media,l=a?rg(a.textTracks):null;if(this.tracks.forEach((u,h)=>{let d;if(l){let g=null;for(let p=0;p<l.length;p++)if(l[p]&&GT(l[p],u)){g=l[p],l[p]=null;break}g&&(d=g)}if(d)qc(d);else{const g=EL(u);d=this.createTextTrack(g,u.name,u.lang),d&&(d.mode="disabled")}d&&this.textTracks.push(d)}),l!=null&&l.length){const u=l.filter(h=>h!==null).map(h=>h.label);u.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${u.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(l=>({label:l.name,kind:l.type.toLowerCase(),default:l.default,subtitleTrack:l}));this.hls.trigger(_.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const r=`textTrack${i[1]}`,a=this.captionsProperties[r];a&&(a.label=n.name,n.lang&&(a.languageCode=n.lang),a.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Te.MAIN){var n,i;const{cea608Parser1:r,cea608Parser2:a,lastSn:l}=this,{cc:u,sn:h}=t.frag,d=(n=(i=t.part)==null?void 0:i.index)!=null?n:-1;r&&a&&(h!==l+1||h===l&&d!==this.lastPartIndex+1||u!==this.lastCc)&&(r.reset(),a.reset()),this.lastCc=u,this.lastSn=h,this.lastPartIndex=d}}onFragLoaded(e,t){const{frag:n,payload:i}=t;if(n.type===Te.SUBTITLE)if(i.byteLength){const r=n.decryptdata,a="stats"in t;if(r==null||!r.encrypted||a){const l=this.tracks[n.level],u=this.vttCCs;u[n.cc]||(u[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),l&&l.textCodec===mx?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger(_.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;FT(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(_.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{n.logger.log(`Failed to parse IMSC1: ${i}`),n.trigger(_.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:n,payload:i}=e,{initPTS:r,unparsedVttFrags:a}=this,l=r.length-1;if(!r[n.cc]&&l===-1){a.push(e);return}const u=this.hls,h=(t=n.initSegment)!=null&&t.data?Js(n.initSegment.data,new Uint8Array(i)).buffer:i;qF(h,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,d=>{this._appendCues(d,n.level),u.trigger(_.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},d=>{const g=d.message==="Missing initPTS for VTT MPEGTS";g?a.push(e):this._fallbackToIMSC1(n,i),u.logger.log(`Failed to parse VTT cue: ${d}`),!(g&&l>n.cc)&&u.trigger(_.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:d})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||FT(t,this.initPTS[e.cc],()=>{n.textCodec=mx,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(r=>hL(i,r))}else{const i=this.tracks[t];if(!i)return;const r=i.default?"default":"subtitles"+t;n.trigger(_.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===Te.SUBTITLE&&this.onFragLoaded(_.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:i}=t;if(!(n.type===Te.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let r=0;r<i.length;r++){const a=i[r].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const l=this.extractCea608Data(a);this.cea608Parser1.addData(i[r].pts,l[0]),this.cea608Parser2.addData(i[r].pts,l[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:r}){const{media:a}=this;if(!(!a||a.currentTime<n)){if(!r||r==="video"){const{captionsTracks:l}=this;Object.keys(l).forEach(u=>d3(l[u],t,n))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:l}=this;Object.keys(l).forEach(u=>d3(l[u],t,i))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let i=2;for(let r=0;r<n;r++){const a=e[i++],l=127&e[i++],u=127&e[i++];if(l===0&&u===0)continue;if((4&a)!==0){const d=3&a;(d===0||d===1)&&(t[d].push(l),t[d].push(u))}}return t}}function EL(s){return s.characteristics&&/transcribes-spoken-dialog/gi.test(s.characteristics)&&/describes-music-and-sound/gi.test(s.characteristics)?"captions":"subtitles"}function GT(s,e){return!!s&&s.kind===EL(e)&&u3(e,s)}function t5(s,e,t,n){return Math.min(e,n)-Math.max(s,t)}function zT(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const n5=/\s/,s5={newCue(s,e,t,n){const i=[];let r,a,l,u,h;const d=self.VTTCue||self.TextTrackCue;for(let p=0;p<n.rows.length;p++)if(r=n.rows[p],l=!0,u=0,h="",!r.isEmpty()){var g;for(let b=0;b<r.chars.length;b++)n5.test(r.chars[b].uchar)&&l?u++:(h+=r.chars[b].uchar,l=!1);r.cueStartTime=e,e===t&&(t+=1e-4),u>=16?u--:u++;const y=yL(h.trim()),v=Vv(e,t,y);s!=null&&(g=s.cues)!=null&&g.getCueById(v)||(a=new d(e,t,y),a.id=v,a.line=p+1,a.align="left",a.position=10+Math.min(80,Math.floor(u*8/32)*10),i.push(a))}return s&&i.length&&(i.sort((p,y)=>p.line==="auto"||y.line==="auto"?0:p.line>8&&y.line>8?y.line-p.line:p.line-y.line),i.forEach(p=>hL(s,p))),i}};function i5(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const r5=/(\d+)-(\d+)\/(\d+)/;class $T{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||c5,this.controller=new self.AbortController,this.stats=new Tv}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const r=a5(e,this.controller.signal),a=e.responseType==="arraybuffer",l=a?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:h}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=u&&be(u)?u:h,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},t.timeout),(ad(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(g=>{var p;this.response=this.loader=g;const y=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=h,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},h-(y-i.loading.start)),!g.ok){const{status:b,statusText:w}=g;throw new u5(w||"fetch, bad network response",b,g)}i.loading.first=y,i.total=l5(g.headers)||i.total;const v=(p=this.callbacks)==null?void 0:p.onProgress;return v&&be(t.highWaterMark)?this.loadProgressively(g,i,e,t.highWaterMark,v):a?g.arrayBuffer():e.responseType==="json"?g.json():g.text()}).then(g=>{var p,y;const v=this.response;if(!v)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const b=g[l];b&&(i.loaded=i.total=b);const w={url:v.url,data:g,code:v.status},A=(p=this.callbacks)==null?void 0:p.onProgress;A&&!be(t.highWaterMark)&&A(i,e,g,v),(y=this.callbacks)==null||y.onSuccess(w,i,e,v)}).catch(g=>{var p;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const y=g&&g.code||0,v=g?g.message:null;(p=this.callbacks)==null||p.onError({code:y,text:v},e,g?g.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,r){const a=new Nk,l=e.body.getReader(),u=()=>l.read().then(h=>{if(h.done)return a.dataLength&&r(t,n,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const d=h.value,g=d.length;return t.loaded+=g,g<i||a.dataLength?(a.push(d),a.dataLength>=i&&r(t,n,a.flush().buffer,e)):r(t,n,d.buffer,e),u()}).catch(()=>Promise.reject());return u()}}function a5(s,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(yt({},s.headers))};return s.rangeEnd&&t.headers.set("Range","bytes="+s.rangeStart+"-"+String(s.rangeEnd-1)),t}function o5(s){const e=r5.exec(s);if(e)return parseInt(e[2])-parseInt(e[1])+1}function l5(s){const e=s.get("Content-Range");if(e){const n=o5(e);if(be(n))return n}const t=s.get("Content-Length");if(t)return parseInt(t)}function c5(s,e){return new self.Request(s.url,e)}class u5 extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const h5=/^age:\s*[\d.]+\s*$/im;class wL{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Tv,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return r(n,t.url)}).catch(a=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),r(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(a=>{var l;(l=this.callbacks)==null||l.onError({code:n.status,text:a.message},t,n,i)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:a}=n.loadPolicy;if(i)for(const l in i)e.setRequestHeader(l,i[l]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=r&&be(r)?r:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,r=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const h=t.status,d=t.responseType==="text"?t.responseText:null;if(h>=200&&h<300){const v=d??t.response;if(v!=null){var a,l;n.loading.end=Math.max(self.performance.now(),n.loading.first);const b=t.responseType==="arraybuffer"?v.byteLength:v.length;n.loaded=n.total=b,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const w=(a=this.callbacks)==null?void 0:a.onProgress;w&&w(n,e,v,t);const A={url:t.responseURL,data:v,code:h};(l=this.callbacks)==null||l.onSuccess(A,n,e,t);return}}const g=r.loadPolicy.errorRetry,p=n.retry,y={url:e.url,data:void 0,code:h};if(Lg(g,p,!1,y))this.retry(g);else{var u;et.error(`${h} while loading ${e.url}`),(u=this.callbacks)==null||u.onError({code:h,text:t.statusText},e,t,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(Lg(e,t,!0))this.retry(e);else{var n;et.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=Rv(e,n.retry),n.retry++,et.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&h5.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const f5={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},d5=ht(ht({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:wL,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:PB,bufferController:R4,capLevelController:Gv,errorController:GB,fpsController:yF,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Sk,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,certLoadPolicy:{default:f5},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},g5()),{},{subtitleStreamController:kF,subtitleTrackController:bF,timelineController:e5,audioStreamController:A4,audioTrackController:T4,emeController:nu,cmcdController:gF,contentSteeringController:pF,interstitialsController:RF});function g5(){return{cueHandler:s5,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function m5(s,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=p3(s),i=["manifest","level","frag"],r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(a=>{const l=`${a==="level"?"playlist":a}LoadPolicy`,u=e[l]===void 0,h=[];r.forEach(d=>{const g=`${a}Loading${d}`,p=e[g];if(p!==void 0&&u){h.push(g);const y=n[l].default;switch(e[l]={default:y},d){case"TimeOut":y.maxLoadTimeMs=p,y.maxTimeToFirstByteMs=p;break;case"MaxRetry":y.errorRetry.maxNumRetry=p,y.timeoutRetry.maxNumRetry=p;break;case"RetryDelay":y.errorRetry.retryDelayMs=p,y.timeoutRetry.retryDelayMs=p;break;case"MaxRetryTimeout":y.errorRetry.maxRetryDelayMs=p,y.timeoutRetry.maxRetryDelayMs=p;break}}}),h.length&&t.warn(`hls.js config: "${h.join('", "')}" setting(s) are deprecated, use "${l}": ${Ct(e[l])}`)}),ht(ht({},n),e)}function p3(s){return s&&typeof s=="object"?Array.isArray(s)?s.map(p3):Object.keys(s).reduce((e,t)=>(e[t]=p3(s[t]),e),{}):s}function p5(s,e){const t=s.loader;t!==$T&&t!==wL?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),s.progressive=!1):i5()&&(s.loader=$T,s.progressive=!0,s.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const ag=2,y5=.1,x5=.05,v5=100;class b5 extends wk{constructor(e,t){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(_.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(v5),this.mediaSource=t.mediaSource;const n=this.media=t.media;ea(n,"playing",this.onMediaPlaying),ea(n,"waiting",this.onMediaWaiting),ea(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(nr(n,"playing",this.onMediaPlaying),nr(n,"waiting",this.onMediaWaiting),nr(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,i;const r=(n=this.hls)==null?void 0:n.config;if(!r)return;const{media:a,stalled:l}=this;if(!a)return;const{seeking:u}=a,h=this.seeking&&!u,d=!this.seeking&&u,g=a.paused&&!u||a.ended||a.playbackRate===0;if(this.seeking=u,e!==t){t&&(this.ended=0),this.moved=!0,u||(this.nudgeRetry=0,r.nudgeOnVideoHole&&!g&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(d||h){h&&this.stallResolved(e);return}if(g){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(_.MEDIA_ENDED,{stalled:!1}));return}if(!Ve.getBuffered(a).length){this.nudgeRetry=0;return}const p=Ve.bufferInfo(a,e,0),y=p.nextStart||0,v=this.fragmentTracker;if(u&&v&&this.hls){const B=VT(this.hls.inFlightFragments,e),M=p.len>ag,I=!y||B||y-e>ag&&!v.getPartialFragment(e);if(M||I)return;this.moved=!1}const b=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&v){if(!(p.len>0)&&!y)return;const M=Math.max(y,p.start||0)-e,N=!!(b!=null&&b.live)?b.targetduration*2:ag,P=v.getPartialFragment(e);if(M>0&&(M<=N||P)){a.paused||this._trySkipBufferHole(P);return}}const w=r.detectStallWithCurrentTimeMs,A=self.performance.now(),S=this.waiting;if(l===null){S>0&&A-S<w?this.stalled=S:this.stalled=A;return}const T=A-l;if(!u&&(T>=w||S)&&this.hls){var D;if(((D=this.mediaSource)==null?void 0:D.readyState)==="ended"&&!(b!=null&&b.live)&&Math.abs(e-((b==null?void 0:b.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(_.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(p),!this.media||!this.hls)return}const L=Ve.bufferInfo(a,e,r.maxBufferHole);this._tryFixBufferStall(L,T)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(_.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&i&&i.length>1&&e>i.end(0)){const r=Ve.bufferedInfo(Ve.timeRangesToArray(this.buffered.audio),e,0);if(r.len>1&&t>=r.start){const a=Ve.timeRangesToArray(i),l=Ve.bufferedInfo(a,t,0).bufferedIndex;if(l>-1&&l<a.length-1){const u=Ve.bufferedInfo(a,e,0).bufferedIndex,h=a[l].end,d=a[l+1].start;if((u===-1||u>l)&&d-h<1&&e-h<2){const g=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${h} -> ${d} buffered index: ${u}`);this.warn(g.message),this.media.currentTime+=1e-6;const p=this.fragmentTracker.getPartialFragment(e)||void 0,y=Ve.bufferInfo(this.media,e,0);this.hls.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:g,reason:g.message,frag:p,buffer:y.len,bufferInfo:y})}}}}}_tryFixBufferStall(e,t){var n,i;const{fragmentTracker:r,media:a}=this,l=(n=this.hls)==null?void 0:n.config;if(!a||!r||!l)return;const u=a.currentTime,h=(i=this.hls)==null?void 0:i.latestLevelDetails,d=r.getPartialFragment(u);if((d||h!=null&&h.live&&u<h.fragmentStart)&&(this._trySkipBufferHole(d)||!this.media))return;const g=e.buffered;(g&&g.length>1&&e.len>l.maxBufferHole||e.nextStart&&e.nextStart-u<l.maxBufferHole)&&(t>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}_reportStall(e){const{hls:t,media:n,stallReported:i,stalled:r}=this;if(!i&&r!==null&&n&&t){this.stallReported=!0;const a=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${Ct(e)})`);this.warn(a.message),t.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:r}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:i}=this,r=(t=this.hls)==null?void 0:t.config;if(!i||!n||!r)return 0;const a=i.currentTime,l=Ve.bufferInfo(i,a,0),u=a<l.start?l.start:l.nextStart;if(u&&this.hls){const d=l.len<=r.maxBufferHole,g=l.len>0&&l.len<1&&i.readyState<3,p=u-a;if(p>0&&(d||g)){if(p>r.maxBufferHole){let v=!1;if(a===0){const b=n.getAppendedFrag(0,Te.MAIN);b&&u<b.end&&(v=!0)}if(!v){const b=e||n.getAppendedFrag(a,Te.MAIN);if(b){var h;if(!((h=this.hls.loadLevelObj)!=null&&h.details)||VT(this.hls.inFlightFragments,u))return 0;let A=!1,S=b.end;for(;S<u;){const T=n.getPartialFragment(S);if(T)S+=T.duration;else{A=!0;break}}if(A)return 0}}}const y=Math.max(u+x5,a+y5);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${y}`),this.moved=!0,i.currentTime=y,!(e!=null&&e.gap)){const v=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${y}`);this.hls.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:v,reason:v.message,frag:e||void 0,buffer:l.len,bufferInfo:l})}return y}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:i}=this,r=t==null?void 0:t.config;if(!n||!r)return 0;const a=n.currentTime;if(this.nudgeRetry++,i<r.nudgeMaxRetry){const l=a+(i+1)*r.nudgeOffset,u=new Error(`Nudging 'currentTime' from ${a} to ${l}`);this.warn(u.message),n.currentTime=l,t.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.BUFFER_NUDGE_ON_STALL,error:u,fatal:!1,buffer:e.len,bufferInfo:e})}else{const l=new Error(`Playhead still not moving while enough data buffered @${a} after ${r.nudgeMaxRetry} nudges`);this.error(l.message),t.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.BUFFER_STALLED_ERROR,error:l,fatal:!0,buffer:e.len,bufferInfo:e})}}}function VT(s,e){const t=YT(s.main);if(t&&t.start<=e)return t;const n=YT(s.audio);return n&&n.start<=e?n:null}function YT(s){if(!s)return null;switch(s.state){case ue.IDLE:case ue.STOPPED:case ue.ENDED:case ue.ERROR:return null}return s.frag}const E5=.25;function y3(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function KT(s,e,t,n,i){let r=new s(e,t,"");try{r.value=n,i&&(r.type=i)}catch{r=new s(e,t,Ct(i?ht({type:i},n):n))}return r}const w2=(()=>{const s=y3();try{s&&new s(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function w5(s){return Uint8Array.from(s.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class A5{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(_.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(_.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(_.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(_.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(_.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(_.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(_.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(_.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(_.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,t){var n;this.media=t.media,((n=t.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&qc(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return uL(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:i}}}=this;if(!n&&!i)return;const{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=y3();if(a)for(let l=0;l<r.length;l++){const u=r[l].type;if(u===_s.emsg&&!n||!i)continue;const h=Vk(r[l].data);if(h){const d=r[l].pts;let g=d+r[l].duration;g>w2&&(g=w2),g-d<=0&&(g=d+E5);for(let y=0;y<h.length;y++){const v=h[y];if(!Yk(v)){this.updateId3CueEnds(d,u);const b=KT(a,d,g,v,u);b&&this.id3Track.addCue(b)}}}}}updateId3CueEnds(e,t){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let r=i.length;r--;){const a=i[r];a.type===t&&a.startTime<e&&a.endTime===w2&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:r,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:l,enableID3MetadataCues:u}}=a;if(r&&(l||u)){let h;i==="audio"?h=d=>d.type===_s.audioId3&&u:i==="video"?h=d=>d.type===_s.emsg&&l:h=d=>d.type===_s.audioId3&&u||d.type===_s.emsg&&l,d3(r,t,n,h)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:n}=this,{dateRanges:i}=e,r=Object.keys(i);let a=this.dateRangeCuesAppended;if(n&&t){var l;if((l=n.cues)!=null&&l.length){const d=Object.keys(a).filter(g=>!r.includes(g));for(let g=d.length;g--;){const p=d[g],y=a[p].cues;delete a[p],Object.keys(y).forEach(v=>{try{const b=y[v];b.removeEventListener("enter",this.onEventCueEnter),n.removeCue(b)}catch{}})}}else a=this.dateRangeCuesAppended={}}const u=e.fragments[e.fragments.length-1];if(r.length===0||!be(u==null?void 0:u.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const h=y3();for(let d=0;d<r.length;d++){const g=r[d],p=i[g],y=p.startTime,v=a[g],b=(v==null?void 0:v.cues)||{};let w=(v==null?void 0:v.durationKnown)||!1,A=w2;const{duration:S,endDate:T}=p;if(T&&S!==null)A=y+S,w=!0;else if(p.endOnNext&&!w){const L=r.reduce((B,M)=>{if(M!==p.id){const I=i[M];if(I.class===p.class&&I.startDate>p.startDate&&(!B||p.startDate<B.startDate))return I}return B},null);L&&(A=L.startTime,w=!0)}const D=Object.keys(p.attr);for(let L=0;L<D.length;L++){const B=D[L];if(!e8(B))continue;const M=b[B];if(M)w&&!v.durationKnown?M.endTime=A:Math.abs(M.startTime-y)>.01&&(M.startTime=y,M.endTime=A);else if(h){let I=p.attr[B];t8(B)&&(I=w5(I));const P=KT(h,y,A,{key:B,data:I},_s.dateRange);P&&(P.id=g,this.id3Track.addCue(P),b[B]=P,this.hls.config.interstitialsController&&(B==="X-ASSET-LIST"||B==="X-ASSET-URL")&&P.addEventListener("enter",this.onEventCueEnter))}}a[g]={cues:b,dateRange:p,durationKnown:w}}}}class T5{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,n=this.levelDetails;if(!t||!n)return;this.currentTime=t.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:a}=this.config;if(!r||a===1||!n.live)return;const l=this.targetLatency;if(l===null)return;const u=i-l,h=Math.min(this.maxLatency,l+n.targetduration);if(u<h&&u>.05&&this.forwardBufferLength>1){const g=Math.min(2,Math.max(1,a)),p=Math.round(2/(1+Math.exp(-.75*u-this.edgeStalled))*20)/20,y=Math.min(g,Math.max(1,p));this.changeMediaPlaybackRate(t,y)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:r,liveSyncDurationCount:a,lowLatencyMode:l}=this.config,u=this.hls.userConfig;let h=l&&n||t;(this._targetLatencyUpdated||u.liveSyncDuration||u.liveSyncDurationCount||h===0)&&(h=r!==void 0?r:a*i);const d=i;return h+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,d)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const n=this.levelDetails;if(n===null)return null;const i=n.edge,r=e-t-this.edgeStalled,a=i-n.totalduration,l=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,r),l)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(_.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(_.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(_.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===Z.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,i;e.playbackRate!==t&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class S5 extends Hv{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(_.LEVEL_LOADED,this.onLevelLoaded,this),e.on(_.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(_.FRAG_BUFFERED,this.onFragBuffered,this),e.on(_.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(_.LEVEL_LOADED,this.onLevelLoaded,this),e.off(_.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(_.FRAG_BUFFERED,this.onFragBuffered,this),e.off(_.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,i=[],r={},a={};let l=!1,u=!1,h=!1;t.levels.forEach(d=>{var g;const p=d.attrs;let{audioCodec:y,videoCodec:v}=d;y&&(d.audioCodec=y=Sg(y,n)||void 0),((g=v)==null?void 0:g.indexOf("avc1"))===0&&(v=d.videoCodec=EB(v));const{width:b,height:w,unknownCodecs:A}=d;let S=A?A.length:0;if(A)for(let z=S;z--;){const te=A[z];this.isAudioSupported(te)?(d.audioCodec=y=y?`${y},${te}`:te,S--,Qu.audio[y.substring(0,4)]=2):this.isVideoSupported(te)&&(d.videoCodec=v=v?`${v},${te}`:te,S--,Qu.video[v.substring(0,4)]=2)}if(l||(l=!!(b&&w)),u||(u=!!v),h||(h=!!y),S||y&&!this.isAudioSupported(y)||v&&!this.isVideoSupported(v)){this.log(`Some or all CODECS not supported "${p.CODECS}"`);return}const{CODECS:T,"FRAME-RATE":D,"HDCP-LEVEL":L,"PATHWAY-ID":B,RESOLUTION:M,"VIDEO-RANGE":I}=p,P=`${`${B||"."}-`}${d.bitrate}-${M}-${D}-${T}-${I}-${L}`;if(r[P])if(r[P].uri!==d.url&&!d.attrs["PATHWAY-ID"]){const z=a[P]+=1;d.attrs["PATHWAY-ID"]=new Array(z+1).join(".");const te=this.createLevel(d);r[P]=te,i.push(te)}else r[P].addGroupId("audio",p.AUDIO),r[P].addGroupId("text",p.SUBTITLES);else{const z=this.createLevel(d);r[P]=z,a[P]=1,i.push(z)}}),this.filterAndSortMediaOptions(i,t,l,u,h)}createLevel(e){const t=new td(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(i.message),t.supportedResult=xk(i,[])}return t}isAudioSupported(e){return n3(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return n3(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,i,r){let a=[],l=[],u=e;if((n||i)&&r&&(u=u.filter(({videoCodec:w,videoRange:A,width:S,height:T})=>(!!w||!!(S&&T))&&_B(A))),u.length===0){Promise.resolve().then(()=>{if(this.hls){let w="no level with compatible codecs found in manifest",A=w;t.levels.length&&(A=`one or more CODECS in variant not supported: ${Ct(t.levels.map(T=>T.attrs.CODECS).filter((T,D,L)=>L.indexOf(T)===D))}`,this.warn(A),w+=` (${A})`);const S=new Error(w);this.hls.trigger(_.ERROR,{type:_e.MEDIA_ERROR,details:Z.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:S,reason:A})}});return}t.audioTracks&&(a=t.audioTracks.filter(w=>!w.audioCodec||this.isAudioSupported(w.audioCodec)),jT(a)),t.subtitles&&(l=t.subtitles,jT(l));const h=u.slice(0);u.sort((w,A)=>{if(w.attrs["HDCP-LEVEL"]!==A.attrs["HDCP-LEVEL"])return(w.attrs["HDCP-LEVEL"]||"")>(A.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&w.height!==A.height)return w.height-A.height;if(w.frameRate!==A.frameRate)return w.frameRate-A.frameRate;if(w.videoRange!==A.videoRange)return _g.indexOf(w.videoRange)-_g.indexOf(A.videoRange);if(w.videoCodec!==A.videoCodec){const S=HA(w.videoCodec),T=HA(A.videoCodec);if(S!==T)return T-S}if(w.uri===A.uri&&w.codecSet!==A.codecSet){const S=Tg(w.codecSet),T=Tg(A.codecSet);if(S!==T)return T-S}return w.averageBitrate!==A.averageBitrate?w.averageBitrate-A.averageBitrate:0});let d=h[0];if(this.steering&&(u=this.steering.filterParsedLevels(u),u.length!==h.length)){for(let w=0;w<h.length;w++)if(h[w].pathwayId===u[0].pathwayId){d=h[w];break}}this._levels=u;for(let w=0;w<u.length;w++)if(u[w]===d){var g;this._firstLevel=w;const A=d.bitrate,S=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${u.length} level(s) found, first bitrate: ${A}`),((g=this.hls.userConfig)==null?void 0:g.abrEwmaDefaultEstimate)===void 0){const T=Math.min(A,this.hls.config.abrEwmaDefaultEstimateMax);T>S&&S===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=T)}break}const p=r&&!i,y=this.hls.config,v=!!(y.audioStreamController&&y.audioTrackController),b={levels:u,audioTracks:a,subtitleTracks:l,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:r,video:i,altAudio:v&&!p&&a.some(w=>!!w.url)};this.hls.trigger(_.MANIFEST_PARSED,b)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const d=new Error("invalid level idx"),g=e<0;if(this.hls.trigger(_.ERROR,{type:_e.OTHER_ERROR,details:Z.LEVEL_SWITCH_ERROR,level:e,fatal:g,error:d,reason:d.message}),g)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,r=i?i.attrs["PATHWAY-ID"]:void 0,a=t[e],l=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&i&&r===l)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${l?" with Pathway "+l:""} from level ${n}${r?" with Pathway "+r:""}`);const u={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(_.LEVEL_SWITCHING,u);const h=a.details;if(!h||h.live){const d=this.switchParams(a.uri,i==null?void 0:i.details,h);this.loadPlaylist(d)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(i=>t.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=n}}onError(e,t){t.fatal||!t.context||t.context.type===We.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Te.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(r=>!!n[r]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:r}=t,a=t.levelInfo;if(!a){var l;this.warn(`Invalid level index ${i}`),(l=t.deliveryDirectives)!=null&&l.skip&&(r.deltaUpdateFailed=!0);return}if(a===this.currentLevel||t.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let u=a.details;u===t.details&&u.advanced&&(u=void 0),this.playlistLoaded(i,t,u)}else(n=t.deliveryDirectives)!=null&&n.skip&&(r.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),i=this.currentLevelIndex,r=e.attrs["PATHWAY-ID"],a=e.details,l=a==null?void 0:a.age;this.log(`Loading level index ${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${r?" Pathway "+r:""}${l&&a.live?" age "+l.toFixed(1)+(a.type&&" "+a.type||""):""} ${n}`),this.hls.trigger(_.LEVEL_LOADING,{url:n,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const n=this._levels.filter((r,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(r),r===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,r.details&&r.details.fragments.forEach(l=>l.level=-1)),!1));Ok(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=n.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(_.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(_.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function jT(s){const e={};s.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}function AL(){return self.SourceBuffer||self.WebKitSourceBuffer}function TL(){if(!mo())return!1;const e=AL();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function _5(){if(!TL())return!1;const s=mo();return typeof(s==null?void 0:s.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>s.isTypeSupported(ed(e,"video")))||["mp4a.40.2","fLaC"].some(e=>s.isTypeSupported(ed(e,"audio"))))}function R5(){var s;const e=AL();return typeof(e==null||(s=e.prototype)==null?void 0:s.changeType)=="function"}const k5=100;class L5 extends Iv{constructor(e,t,n){super(e,t,n,"stream-controller",Te.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,r=i?i.currentTime:null;if(r===null||!be(r)||(this.log(`Media seeked to ${r.toFixed(3)}`),!this.getBufferedFrag(r)))return;const a=this.getFwdBufferInfoAtPos(i,r,Te.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${r} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(_.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_.LEVEL_LOADING,this.onLevelLoading,this),e.on(_.LEVEL_LOADED,this.onLevelLoaded,this),e.on(_.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(_.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(_.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(_.BUFFER_CREATED,this.onBufferCreated,this),e.on(_.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(_.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(_.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(_.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_.LEVEL_LOADED,this.onLevelLoaded,this),e.off(_.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(_.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(_.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(_.BUFFER_CREATED,this.onBufferCreated,this),e.off(_.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(_.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(_.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(k5),this.level=-1,!this.startFragRequested){let r=i.startLevel;r===-1&&(i.config.testBandwidth&&this.levels.length>1?(r=0,this.bitrateTest=!0):r=i.firstAutoLevel),i.nextLoadLevel=r,this.level=i.loadLevel,this._hasEnoughToStart=!!t}n>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=ue.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=ue.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ue.WAITING_LEVEL:{const{levels:t,level:n}=this,i=t==null?void 0:t[n],r=i==null?void 0:i.details;if(r&&(!r.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(r))break;this.state=ue.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ue.IDLE;break}break}case ue.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),n=this.retryDate;if(!n||t>=n||(e=this.media)!=null&&e.seeking){const{levels:i,level:r}=this,a=i==null?void 0:i[r];this.resetStartWhenNotLoaded(a||null),this.state=ue.IDLE}}break}this.state===ue.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this;if(t===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const r=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[r]))return;const a=n[r],l=this.getMainFwdBufferInfo();if(l===null)return;const u=this.getLevelDetails();if(u&&this._streamEnded(l,u)){const b={};this.altAudio===2&&(b.type="video"),this.hls.trigger(_.BUFFER_EOS,b),this.state=ue.ENDED;return}if(!this.buffering)return;e.loadLevel!==r&&e.manualLevel===-1&&this.log(`Adapting to level ${r} from level ${this.level}`),this.level=e.nextLoadLevel=r;const h=a.details;if(!h||this.state===ue.WAITING_LEVEL||this.waitForLive(a)){this.level=r,this.state=ue.WAITING_LEVEL,this.startFragRequested=!1;return}const d=l.len,g=this.getMaxBufferLength(a.maxBitrate);if(d>=g)return;this.backtrackFragment&&this.backtrackFragment.start>l.end&&(this.backtrackFragment=null);const p=this.backtrackFragment?this.backtrackFragment.start:l.end;let y=this.getNextFragment(p,h);if(this.couldBacktrack&&!this.fragPrevious&&y&&En(y)&&this.fragmentTracker.getState(y)!==hn.OK){var v;const w=((v=this.backtrackFragment)!=null?v:y).sn-h.startSN,A=h.fragments[w-1];A&&y.cc===A.cc&&(y=A,this.fragmentTracker.removeFragment(A))}else this.backtrackFragment&&l.len&&(this.backtrackFragment=null);if(y&&this.isLoopLoading(y,p)){if(!y.gap){const w=this.audioOnly&&!this.altAudio?pt.AUDIO:pt.VIDEO,A=(w===pt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;A&&this.afterBufferFlushed(A,w,Te.MAIN)}y=this.getNextFragmentLoopLoading(y,h,l,Te.MAIN,g)}y&&(y.initSegment&&!y.initSegment.data&&!this.bitrateTest&&(y=y.initSegment),this.loadFragment(y,a,p))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);i===hn.NOT_LOADED||i===hn.PARTIAL?En(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Te.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const r=this.getLevelDetails();if(r!=null&&r.live){const l=this.getMainFwdBufferInfo();if(!l||l.len<r.targetduration*2)return}if(!t.paused&&e){const l=this.hls.nextLoadLevel,u=e[l],h=this.fragLastKbps;h&&this.fragCurrent?n=this.fragCurrent.duration*u.maxBitrate/(1e3*h)+1:n=0}else n=0;const a=this.getBufferedFrag(t.currentTime+n);if(a){const l=this.followingBufferedFrag(a);if(l){this.abortCurrentFrag();const u=l.maxStartPTS?l.maxStartPTS:l.start,h=l.duration,d=Math.max(a.end,u+Math.min(Math.max(h-this.config.maxFragLookUpTolerance,h*(this.couldBacktrack?.5:.125)),h*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(d,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ue.KEY_LOADING:case ue.FRAG_LOADING:case ue.FRAG_LOADING_WAITING_RETRY:case ue.PARSING:case ue.PARSED:this.state=ue.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;ea(n,"playing",this.onMediaPlaying),ea(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(nr(n,"playing",this.onMediaPlaying),nr(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(_.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,i=!1;t.levels.forEach(r=>{const a=r.audioCodec;a&&(n=n||a.indexOf("mp4a.40.2")!==-1,i=i||a.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=n&&i&&!R5(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==ue.IDLE)return;const i=t.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=ue.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:i,startFragRequested:r}=this,a=t.level,l=t.details,u=l.totalduration;if(!i){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""}, cc [${l.startCC}, ${l.endCC}] duration:${u}`);const h=t.levelInfo,d=this.fragCurrent;d&&(this.state===ue.FRAG_LOADING||this.state===ue.FRAG_LOADING_WAITING_RETRY)&&d.level!==t.level&&d.loader&&this.abortCurrentFrag();let g=0;if(l.live||(n=h.details)!=null&&n.live){var p;if(this.checkLiveUpdate(l),l.deltaUpdateFailed)return;g=this.alignPlaylists(l,h.details,(p=this.levelLastLoaded)==null?void 0:p.details)}if(h.details=l,this.levelLastLoaded=h,r||this.setStartPosition(l,g),this.hls.trigger(_.LEVEL_UPDATED,{details:l,level:a}),this.state===ue.WAITING_LEVEL){if(this.waitForCdnTuneIn(l))return;this.state=ue.IDLE}r&&l.live&&this.synchronizeToLiveEdge(l),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,r=this.getLoadPosition(),a=e.fragmentStart,l=e.edge,u=r>=a-t.maxFragLookUpTolerance&&r<=l;if(i!==null&&n.duration>i&&(r<i||!u)){const h=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!u&&n.readyState<4||r<l-h)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),n.readyState&&(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${l}, reset currentTime to : ${i.toFixed(3)}`),n.currentTime=i))}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:i,payload:r}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const l=a[n.level];if(!l){this.warn(`Level ${n.level} not found on progress`);return}const u=l.details;if(!u){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const h=l.videoCodec,d=u.PTSKnown||!u.live,g=(t=n.initSegment)==null?void 0:t.data,p=this._getAudioCodec(l),y=this.transmuxer=this.transmuxer||new nL(this.hls,Te.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),v=i?i.index:-1,b=v!==-1,w=new Lv(n.level,n.sn,n.stats.chunkCount,r.byteLength,v,b),A=this.initPTS[n.cc];y.push(r,g,p,h,n,i,u.totalduration,d,w,A)}onAudioTrackSwitching(e,t){const n=this.hls,i=this.altAudio===2;if(Rg(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.fragmentTracker.removeAllFragments(),n.once(_.BUFFER_FLUSHED,()=>{var a;(a=this.hls)==null||a.trigger(_.AUDIO_TRACK_SWITCHED,t)}),n.trigger(_.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(_.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=Rg(t.url,this.hls);if(n){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,r,a=!1;for(const l in n){const u=n[l];if(u.id==="main"){if(r=l,i=u,l==="video"){const h=n[l];h&&(this.videoBuffer=h.buffer)}}else a=!0}a&&i?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t,r=n.type===Te.MAIN;if(r){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ue.PARSED&&(this.state=ue.IDLE);return}const l=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*l.total/(l.buffering.end-l.loading.first)),En(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}const a=this.media;a&&(!this._hasEnoughToStart&&Ve.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),r&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal){this.state=ue.ERROR;return}switch(t.details){case Z.FRAG_GAP:case Z.FRAG_PARSING_ERROR:case Z.FRAG_DECRYPT_ERROR:case Z.FRAG_LOAD_ERROR:case Z.FRAG_LOAD_TIMEOUT:case Z.KEY_LOAD_ERROR:case Z.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Te.MAIN,t);break;case Z.LEVEL_LOAD_ERROR:case Z.LEVEL_LOAD_TIMEOUT:case Z.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ue.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===We.LEVEL&&(this.state=ue.IDLE);break;case Z.BUFFER_ADD_CODEC_ERROR:case Z.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.resetLoadingState();break;case Z.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Z.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=ue.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==pt.AUDIO||!this.altAudio){const n=(t===pt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,t,Te.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const i=this.timelineOffset;i&&n&&(n+=i);const r=this.getLevelDetails(),a=Ve.getBuffered(e),l=a.length?a.start(0):0,u=l-n,h=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);u>0&&(u<h||this.loadingParts&&u<2*((r==null?void 0:r.partTarget)||0))&&(this.log(`adjusting start position by ${u} to match buffer start`),n+=u,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${l}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:i}=this,r=n==null?void 0:n.frag;if(!r||this.fragContextChanged(r))return;t.fragmentError=0,this.state=ue.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=r.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),i.trigger(_.FRAG_LOADED,n),r.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const n=this.playlistType,{hls:i}=this,{remuxResult:r,chunkMeta:a}=e,l=this.getCurrentContext(a);if(!l){this.resetWhenMissingContext(a);return}const{frag:u,part:h,level:d}=l,{video:g,text:p,id3:y,initSegment:v}=r,{details:b}=d,w=this.altAudio?void 0:r.audio;if(this.fragContextChanged(u)){this.fragmentTracker.removeFragment(u);return}if(this.state=ue.PARSING,v){if(v!=null&&v.tracks){const T=u.initSegment||u;this._bufferInitSegment(d,v.tracks,T,a),i.trigger(_.FRAG_PARSING_INIT_SEGMENT,{frag:T,id:n,tracks:v.tracks})}const A=v.initPTS,S=v.timescale;be(A)&&(this.initPTS[u.cc]={baseTime:A,timescale:S},i.trigger(_.INIT_PTS_FOUND,{frag:u,id:n,initPTS:A,timescale:S}))}if(g&&b){w&&g.type==="audiovideo"&&this.logMuxedErr(u);const A=b.fragments[u.sn-1-b.startSN],S=u.sn===b.startSN,T=!A||u.cc>A.cc;if(r.independent!==!1){const{startPTS:D,endPTS:L,startDTS:B,endDTS:M}=g;if(h)h.elementaryStreams[g.type]={startPTS:D,endPTS:L,startDTS:B,endDTS:M};else if(g.firstKeyFrame&&g.independent&&a.id===1&&!T&&(this.couldBacktrack=!0),g.dropped&&g.independent){const I=this.getMainFwdBufferInfo(),N=(I?I.end:this.getLoadPosition())+this.config.maxBufferHole,P=g.firstKeyFramePTS?g.firstKeyFramePTS:D;if(!S&&N<P-this.config.maxBufferHole&&!T){this.backtrack(u);return}else T&&(u.gap=!0);u.setElementaryStreamInfo(g.type,u.start,L,u.start,M,!0)}else S&&D-(b.appliedTimelineOffset||0)>ag&&(u.gap=!0);u.setElementaryStreamInfo(g.type,D,L,B,M),this.backtrackFragment&&(this.backtrackFragment=u),this.bufferFragmentData(g,u,h,a,S||T)}else if(S||T)u.gap=!0;else{this.backtrack(u);return}}if(w){const{startPTS:A,endPTS:S,startDTS:T,endDTS:D}=w;h&&(h.elementaryStreams[pt.AUDIO]={startPTS:A,endPTS:S,startDTS:T,endDTS:D}),u.setElementaryStreamInfo(pt.AUDIO,A,S,T,D),this.bufferFragmentData(w,u,h,a)}if(b&&y!=null&&(t=y.samples)!=null&&t.length){const A={id:n,frag:u,details:b,samples:y.samples};i.trigger(_.FRAG_PARSING_METADATA,A)}if(b&&p){const A={id:n,frag:u,details:b,samples:p.samples};i.trigger(_.FRAG_PARSING_USERDATA,A)}}logMuxedErr(e){this.warn(`${En(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,i){if(this.state!==ue.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:r,video:a,audiovideo:l}=t;if(r){let h=eg(r.codec,e.audioCodec);h==="mp4a"&&(h="mp4a.40.5");const d=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){h&&(h.indexOf("mp4a.40.5")!==-1?h="mp4a.40.2":h="mp4a.40.5");const g=r.metadata;g&&"channelCount"in g&&(g.channelCount||1)!==1&&d.indexOf("firefox")===-1&&(h="mp4a.40.5")}h&&h.indexOf("mp4a.40.5")!==-1&&d.indexOf("android")!==-1&&r.container!=="audio/mpeg"&&(h="mp4a.40.2",this.log(`Android: force audio codec to ${h}`)),e.audioCodec&&e.audioCodec!==h&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${h}"`),r.levelCodec=h,r.id=Te.MAIN,this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${h||""}/${e.audioCodec||""}/${r.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=Te.MAIN;const h=a.codec;if((h==null?void 0:h.length)===4)switch(h){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${h}]${a.codec!==h?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}l&&(this.log(`Init audiovideo buffer, container:${l.container}, codecs[level/parsed]=[${e.codecs}/${l.codec}]`),delete t.video,delete t.audio);const u=Object.keys(t);if(u.length){if(this.hls.trigger(_.BUFFER_CODECS,t),!this.hls)return;u.forEach(h=>{const g=t[h].initSegment;g!=null&&g.byteLength&&this.hls.trigger(_.BUFFER_APPENDING,{type:h,data:g,frag:n,part:null,chunkMeta:i,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Te.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,n=e==null?void 0:e[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ue.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(Ve.isBuffered(e,n)?t=this.getAppendedFrag(n):Ve.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,r=t.level;(!i||t.sn!==i.sn||i.level!==r)&&(this.fragPlaying=t,this.hls.trigger(_.FRAG_CHANGED,{frag:t}),(!i||i.level!==r)&&this.hls.trigger(_.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return be(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(be(t)){const n=this.getLevelDetails(),i=this.currentFrag||(n?Fl(null,n.fragments,t):null);if(i){const r=i.programDateTime;if(r!==null){const a=r+(t-i.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class D5{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[n].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=Z.KEY_LOAD_ERROR,n,i,r){return new Or({type:_e.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:n,networkDetails:i})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:i}=e;for(let r=0;r<t.length;r++){const a=t[r];if(i<=a.cc&&(n==="initSegment"||a.sn==="initSegment"||n<a.sn)){this.emeController.selectKeySystemFormat(a).then(l=>{a.setKeyFormat(l)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const r=e.decryptdata;if(!r){const h=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,Z.KEY_LOAD_ERROR,h))}const a=r.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,Z.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let l=this.keyUriToKeyInfo[a];if((n=l)!=null&&n.decryptdata.key)return r.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if((i=l)!=null&&i.keyLoadPromise){var u;switch((u=l.mediaKeySessionContext)==null?void 0:u.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return l.keyLoadPromise.then(h=>(r.key=h.keyInfo.decryptdata.key,{frag:e,keyInfo:l}))}}switch(l=this.keyUriToKeyInfo[a]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return r.keyFormat==="identity"?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,Z.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(n);if(i)return(e.keyLoadPromise=i.then(r=>(e.mediaKeySessionContext=r,n))).catch(r=>{throw e.keyLoadPromise=null,r})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=n.loader,r=new i(n);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((a,l)=>{const u={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},h=n.keyLoadPolicy.default,d={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},g={onSuccess:(p,y,v,b)=>{const{frag:w,keyInfo:A,url:S}=v;if(!w.decryptdata||A!==this.keyUriToKeyInfo[S])return l(this.createKeyLoadError(w,Z.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),b));A.decryptdata.key=w.decryptdata.key=new Uint8Array(p.data),w.keyLoader=null,A.loader=null,a({frag:w,keyInfo:A})},onError:(p,y,v,b)=>{this.resetLoader(y),l(this.createKeyLoadError(t,Z.KEY_LOAD_ERROR,new Error(`HTTP Error ${p.code} loading key ${p.text}`),v,ht({url:u.url,data:void 0},p)))},onTimeout:(p,y,v)=>{this.resetLoader(y),l(this.createKeyLoadError(t,Z.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),v))},onAbort:(p,y,v)=>{this.resetLoader(y),l(this.createKeyLoadError(t,Z.INTERNAL_ABORTED,new Error("key loading aborted"),v))}};r.load(u,d,g)})}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,r=n.loader;t.keyLoader===r&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[i],r&&r.destroy()}}function qT(s){const{type:e}=s;switch(e){case We.AUDIO_TRACK:return Te.AUDIO;case We.SUBTITLE_TRACK:return Te.SUBTITLE;default:return Te.MAIN}}function vx(s,e){let t=s.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class C5{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(_.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_.LEVEL_LOADING,this.onLevelLoading,this),e.on(_.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(_.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(_.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(_.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_.LEVEL_LOADING,this.onLevelLoading,this),e.off(_.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(_.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(_.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,r=n||i,a=new r(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:We.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:i,pathwayId:r,url:a,deliveryDirectives:l,levelInfo:u}=t;this.load({id:n,level:i,pathwayId:r,responseType:"text",type:We.LEVEL,url:a,deliveryDirectives:l,levelOrTrack:u})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:r,deliveryDirectives:a,track:l}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:We.AUDIO_TRACK,url:r,deliveryDirectives:a,levelOrTrack:l})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:r,deliveryDirectives:a,track:l}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:We.SUBTITLE_TRACK,url:r,deliveryDirectives:a,levelOrTrack:l})}onLevelsUpdated(e,t){const n=this.loaders[We.LEVEL];if(n){const i=n.context;i&&!t.levels.some(r=>r===i.levelOrTrack)&&(n.abort(),delete this.loaders[We.LEVEL])}}load(e){var t;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const h=this.hls.logger,d=i.context;if(d&&d.levelOrTrack===e.levelOrTrack&&(d.url===e.url||d.deliveryDirectives&&!e.deliveryDirectives)){d.url===e.url?h.log(`[playlist-loader]: ignore ${e.url} ongoing request`):h.log(`[playlist-loader]: ignore ${e.url} in favor of ${d.url}`);return}h.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let r;if(e.type===We.MANIFEST?r=n.manifestLoadPolicy.default:r=yt({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),be((t=e.deliveryDirectives)==null?void 0:t.part)){let h;if(e.type===We.LEVEL&&e.level!==null?h=this.hls.levels[e.level].details:e.type===We.AUDIO_TRACK&&e.id!==null?h=this.hls.audioTracks[e.id].details:e.type===We.SUBTITLE_TRACK&&e.id!==null&&(h=this.hls.subtitleTracks[e.id].details),h){const d=h.partTarget,g=h.targetduration;if(d&&g){const p=Math.max(d*3,g*.8)*1e3;r=yt({},r,{maxTimeToFirstByteMs:Math.min(p,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(p,r.maxTimeToFirstByteMs)})}}}const a=r.errorRetry||r.timeoutRetry||{},l={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},u={onSuccess:(h,d,g,p)=>{const y=this.getInternalLoader(g);this.resetInternalLoader(g.type);const v=h.data;if(v.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(h,g,new Error("no EXTM3U delimiter"),p||null,d);return}d.parsing.start=performance.now(),tr.isMediaPlaylist(v)||g.type!==We.MANIFEST?this.handleTrackOrLevelPlaylist(h,d,g,p||null,y):this.handleMasterPlaylist(h,d,g,p)},onError:(h,d,g,p)=>{this.handleNetworkError(d,g,!1,h,p)},onTimeout:(h,d,g)=>{this.handleNetworkError(d,g,!0,void 0,h)}};i.load(e,l,u)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,i){const r=this.hls,a=e.data,l=vx(e,n),u=tr.parseMasterPlaylist(a,l);if(u.playlistParsingError){this.handleManifestParsingError(e,n,u.playlistParsingError,i,t);return}const{contentSteering:h,levels:d,sessionData:g,sessionKeys:p,startTimeOffset:y,variableList:v}=u;this.variableList=v;const{AUDIO:b=[],SUBTITLES:w,"CLOSED-CAPTIONS":A}=tr.parseMasterPlaylistMedia(a,l,u);b.length&&!b.some(T=>!T.url)&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),b.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Nt({}),bitrate:0,url:""})),r.trigger(_.MANIFEST_LOADED,{levels:d,audioTracks:b,subtitles:w,captions:A,contentSteering:h,url:l,stats:t,networkDetails:i,sessionData:g,sessionKeys:p,startTimeOffset:y,variableList:v})}handleTrackOrLevelPlaylist(e,t,n,i,r){const a=this.hls,{id:l,level:u,type:h}=n,d=vx(e,n),g=be(u)?u:be(l)?l:0,p=qT(n),y=tr.parseLevelPlaylist(e.data,d,g,p,0,this.variableList);if(h===We.MANIFEST){const v={attrs:new Nt({}),bitrate:0,details:y,name:"",url:d};y.requestScheduled=t.loading.start+Dk(y,0),a.trigger(_.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:d,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=y,this.handlePlaylistLoaded(y,e,t,n,i,r)}handleManifestParsingError(e,t,n,i,r){this.hls.trigger(_.ERROR,{type:_e.NETWORK_ERROR,details:Z.MANIFEST_PARSING_ERROR,fatal:t.type===We.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:r})}handleNetworkError(e,t,n=!1,i,r){let a=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===We.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===We.AUDIO_TRACK||e.type===We.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const l=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let u=Z.UNKNOWN,h=!1;const d=this.getInternalLoader(e);switch(e.type){case We.MANIFEST:u=n?Z.MANIFEST_LOAD_TIMEOUT:Z.MANIFEST_LOAD_ERROR,h=!0;break;case We.LEVEL:u=n?Z.LEVEL_LOAD_TIMEOUT:Z.LEVEL_LOAD_ERROR,h=!1;break;case We.AUDIO_TRACK:u=n?Z.AUDIO_TRACK_LOAD_TIMEOUT:Z.AUDIO_TRACK_LOAD_ERROR,h=!1;break;case We.SUBTITLE_TRACK:u=n?Z.SUBTITLE_TRACK_LOAD_TIMEOUT:Z.SUBTITLE_LOAD_ERROR,h=!1;break}d&&this.resetInternalLoader(e.type);const g={type:_e.NETWORK_ERROR,details:u,fatal:h,url:e.url,loader:d,context:e,error:l,networkDetails:t,stats:r};if(i){const p=(t==null?void 0:t.url)||e.url;g.response=ht({url:p,data:void 0},i)}this.hls.trigger(_.ERROR,g)}handlePlaylistLoaded(e,t,n,i,r,a){const l=this.hls,{type:u,level:h,id:d,groupId:g,deliveryDirectives:p}=i,y=vx(t,i),v=qT(i),b=typeof i.level=="number"&&v===Te.MAIN?h:void 0;if(!e.fragments.length){const A=e.playlistParsingError=new Error("No Segments found in Playlist");l.trigger(_.ERROR,{type:_e.NETWORK_ERROR,details:Z.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:A,reason:A.message,response:t,context:i,level:b,parent:v,networkDetails:r,stats:n});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const w=e.playlistParsingError;if(w){if(this.hls.logger.warn(w),!l.config.ignorePlaylistParsingErrors){l.trigger(_.ERROR,{type:_e.NETWORK_ERROR,details:Z.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:w,reason:w.message,response:t,context:i,level:b,parent:v,networkDetails:r,stats:n});return}e.playlistParsingError=null}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),u){case We.MANIFEST:case We.LEVEL:l.trigger(_.LEVEL_LOADED,{details:e,levelInfo:i.levelOrTrack||l.levels[0],level:b||0,id:d||0,stats:n,networkDetails:r,deliveryDirectives:p,withoutMultiVariant:u===We.MANIFEST});break;case We.AUDIO_TRACK:l.trigger(_.AUDIO_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:d||0,groupId:g||"",stats:n,networkDetails:r,deliveryDirectives:p});break;case We.SUBTITLE_TRACK:l.trigger(_.SUBTITLE_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:d||0,groupId:g||"",stats:n,networkDetails:r,deliveryDirectives:p});break}}}class Zr{static get version(){return id}static isMSESupported(){return TL()}static isSupported(){return _5()}static getMediaSource(){return mo()}static get Events(){return _}static get MetadataSchema(){return _s}static get ErrorTypes(){return _e}static get ErrorDetails(){return Z}static get DefaultConfig(){return Zr.defaultConfig?Zr.defaultConfig:d5}static set DefaultConfig(e){Zr.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Ov,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=WN(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=m5(Zr.DefaultConfig,e,t);this.userConfig=e,n.progressive&&p5(n,t);const{abrController:i,bufferController:r,capLevelController:a,errorController:l,fpsController:u}=n,h=new l(this),d=this.abrController=new i(this),g=new zB(this),p=n.interstitialsController,y=p?this.interstitialsController=new p(this,Zr):null,v=this.bufferController=new r(this,g),b=this.capLevelController=new a(this),w=new u(this),A=new C5(this),S=n.contentSteeringController,T=S?new S(this):null,D=this.levelController=new S5(this,T),L=new A5(this),B=new D5(this.config),M=this.streamController=new L5(this,g,B),I=this.gapController=new b5(this,g);b.setStreamController(M),w.setStreamController(M);const N=[A,D,M];y&&N.splice(1,0,y),T&&N.splice(1,0,T),this.networkControllers=N;const P=[d,v,I,b,w,L,g];this.audioTrackController=this.createController(n.audioTrackController,N);const z=n.audioStreamController;z&&N.push(this.audioStreamController=new z(this,g,B)),this.subtitleTrackController=this.createController(n.subtitleTrackController,N);const te=n.subtitleStreamController;te&&N.push(this.subtititleStreamController=new te(this,g,B)),this.createController(n.timelineController,P),B.emeController=this.emeController=this.createController(n.emeController,P),this.cmcdController=this.createController(n.cmcdController,P),this.latencyController=this.createController(T5,P),this.coreComponents=P,N.push(h);const ye=h.onErrorOut;typeof ye=="function"&&this.on(_.ERROR,ye,h),this.on(_.MANIFEST_LOADED,A.onManifestLoaded,A)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===_.ERROR;this.trigger(_.ERROR,{type:_e.OTHER_ERROR,details:Z.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(_.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const r=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(_.ERROR,{type:_e.OTHER_ERROR,details:Z.ATTACH_MEDIA_ERROR,fatal:!0,error:r});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,i=t?e:{media:n};this._media=n,this.trigger(_.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(_.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(_.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,i=this._url=Av.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(_.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Te.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Te.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Te.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=H8()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){SB(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,n)for(let r=i;r--;){const a=e[r].attrs["HDCP-LEVEL"];if(a&&a<=n)return r}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const n=bk(t);return vk(e,n,navigator.mediaCapabilities)}}Zr.defaultConfig=void 0;const I5=()=>{const s=Q.useRef(null);return Q.useEffect(()=>{const e=s.current,t="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8";if(e)if(e.canPlayType("application/vnd.apple.mpegurl"))e.src=t;else if(Zr.isSupported()){const n=new Zr;n.loadSource(t),n.attachMedia(e)}else console.error("This browser does not support HLS.")},[]),he.jsxs("div",{className:"min-h-screen bg-black flex flex-col mt-[60px] items-center justify-center px-4 py-10 text-white",children:[he.jsx("h1",{className:"text-4xl font-bold mb-6 text-neon",children:"Live Stream Demo"}),he.jsxs("div",{className:"relative w-full max-w-3xl aspect-video bg-gray-900 rounded-3xl shadow-[0_8px_30px_rgba(0,255,255,0.3)] overflow-hidden border-[12px] border-gray-700",children:[he.jsx("div",{className:"absolute top-4 right-4 w-[20px] h-[20px] bg-gray-800 rounded-full border-2 border-gray-600 shadow-inner"}),he.jsx("div",{className:"absolute bottom-4 right-4 w-[20px] h-[20px] bg-gray-800 rounded-full border-2 border-gray-600 shadow-inner"}),he.jsx("div",{className:"absolute inset-4 rounded-2xl bg-black overflow-hidden neon-scan-bg",children:he.jsx("video",{ref:s,controls:!0,autoPlay:!0,muted:!0,className:"w-full h-full object-cover rounded-2xl"})})]})]})},O5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpattern%20id='backbg'%20viewBox='0,0,2,2'%20x='6.5'%20y='6'%20width='16'%20height='16'%20patternUnits='userSpaceOnUse'%3e%3cpath%20d='M%200%200%20h%201%20l%20-1%201%20z%20m%200%202%20l%202%20-2%20v%201%20l%20-1%201%20z'%20style='fill:%20%2300f'%3e%3c/path%3e%3c/pattern%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3crect%20x='7'%20y='7'%20width='43'%20height='74'%20fill='url(%23backbg)'%3e%3c/rect%3e%3crect%20x='7'%20y='7'%20width='43'%20height='74'%20style='fill:%20none;%20stroke:%20%2300f;%20stroke-width:%202px'%3e%3c/rect%3e%3c/svg%3e",M5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%2010%20h%20-2%20v%20-5%20h%20-4%20v%205%20h%20-2%20v%20-10%20z%20m%200%202%20v%203%20h%204%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(20.5,%2034)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",P5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='10'%20height='12'%3e%3crect%20width='2'%20height='12'%3e%3c/rect%3e%3cpath%20d='M%206%200%20h%202%20l%202%202%20v%208%20l%20-2%202%20h%20-2%20l%20-2%20-2%20v%20-8%20z%20m%200%202%20v%208%20h%202%20v%20-8%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2020.5)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2020.5)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",N5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%2010%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-3%20h%202%20v%203%20h%204%20v%20-8%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%204%200%20h%201%20v%202%20l%202%20-2%20l%201%202%20v%203%20l%20-1%202%20l%20-2%20-2%20v%207%20h%20-1%20v%20-8%20h%20-2%20v%20-1%20h%202%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",B5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%206%20l%20-1%201%20l%201%201%20v%202%20h%20-2%20v%20-2%20h%20-4%20l%20-2%20-2%20v%20-6%20z%20m%200%202%20v%206%20h%204%20v%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%201%200%20l%202%203%20l%202%20-3%20l%202%203%20l%202%20-3%20v%2010%20h%20-8%20z'%3e%3c/path%3e%3crect%20x='1'%20y='11'%20width='8'%20height='1'%3e%3c/rect%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",F5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%202%20v%205%20l%204%20-5%20h%202%20l%20-4%205%20l%204%207%20h%20-2%20l%20-3%20-5%20h%20-1%20v%205%20h%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%201%202%20l%202%203%20l%202%20-3%20l%202%203%20l%202%20-3%20v%207%20h%20-8%20z'%3e%3c/path%3e%3cpath%20id='crown-dot'%20d='M%201%200%20l%201%201%20l%20-1%201%20l%20-1%20-1%20z'%3e%3c/path%3e%3cuse%20xlink:href='%23crown-dot'%20transform='translate(4,%200)'%3e%3c/use%3e%3cuse%20xlink:href='%23crown-dot'%20transform='translate(8,%200)'%3e%3c/use%3e%3crect%20x='1'%20y='10'%20width='8'%20height='2'%3e%3c/rect%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",U5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%204%20l%20-2%202%20h%20-4%20v%202%20h%206%20v%202%20h%20-8%20v%20-4%20l%202%20-2%20h%204%20v%20-4%20h%20-4%20v%202%20h%20-2%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='rotate(180,%2028.5,%2044)%20translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",H5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%208%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-3%20h%20-2%20v%20-2%20h%202%20v%20-3%20h%20-4%20v%202%20h%20-2%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='rotate(180,%2028.5,%2044)%20translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",G5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%205%200%20h%202%20v%206%20h%201%20v%202%20h%20-1%20v%204%20h%20-2%20v%20-4%20h%20-5%20v%20-2%20z%20m%200%203%20l%20-3%203%20h%203%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",z5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%202%20h%20-6%20v%202%20h%204%20l%202%202%20v%204%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-4%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",$5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%202%20h%20-2%20v%20-2%20h%20-4%20v%203%20h%204%20l%202%202%20v%203%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-8%20z%20m%200%207%20v%203%20h%204%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",V5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%204%20l%20-3%203%20v%205%20h%20-2%20v%20-6%20l%203%20-3%20v%20-1%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2038)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2038)%20scale(1.2)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Y5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%203%20l%20-1%201%20l%201%201%20v%203%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-3%20l%201%20-1%20l%20-1%20-1%20v%20-3%20z%20m%200%202%20v%202%20l%201%201%20h%202%20l%201%20-1%20v%20-2%20z%20m%200%206%20v%202%20h%204%20v%20-2%20l%20-1%20-1%20h%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2038)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2038)%20scale(1.2)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",K5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%203%200%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%202%20l%201%201%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20l%201%20-1%20h%202%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%206%2012%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-3%20h%20-4%20l%20-2%20-2%20v%20-3%20l%202%20-2%20h%204%20l%202%202%20v%208%20z%20m%200%20-7%20v%20-3%20h%20-4%20v%203%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2039.5)%20scale(0.9)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",j5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%2010%20h%20-2%20v%20-5%20h%20-4%20v%205%20h%20-2%20v%20-10%20z%20m%200%202%20v%203%20h%204%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(20.5,%2034)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",q5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='10'%20height='12'%3e%3crect%20width='2'%20height='12'%3e%3c/rect%3e%3cpath%20d='M%206%200%20h%202%20l%202%202%20v%208%20l%20-2%202%20h%20-2%20l%20-2%20-2%20v%20-8%20z%20m%200%202%20v%208%20h%202%20v%20-8%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2020.5)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2020.5)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Q5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%2010%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-3%20h%202%20v%203%20h%204%20v%20-8%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%204%200%20h%201%20v%202%20l%202%20-2%20l%201%202%20v%203%20l%20-1%202%20l%20-2%20-2%20v%207%20h%20-1%20v%20-8%20h%20-2%20v%20-1%20h%202%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",W5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%206%20l%20-1%201%20l%201%201%20v%202%20h%20-2%20v%20-2%20h%20-4%20l%20-2%20-2%20v%20-6%20z%20m%200%202%20v%206%20h%204%20v%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%201%200%20l%202%203%20l%202%20-3%20l%202%203%20l%202%20-3%20v%2010%20h%20-8%20z'%3e%3c/path%3e%3crect%20x='1'%20y='11'%20width='8'%20height='1'%3e%3c/rect%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",X5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%202%20v%205%20l%204%20-5%20h%202%20l%20-4%205%20l%204%207%20h%20-2%20l%20-3%20-5%20h%20-1%20v%205%20h%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%201%202%20l%202%203%20l%202%20-3%20l%202%203%20l%202%20-3%20v%207%20h%20-8%20z'%3e%3c/path%3e%3cpath%20id='crown-dot'%20d='M%201%200%20l%201%201%20l%20-1%201%20l%20-1%20-1%20z'%3e%3c/path%3e%3cuse%20xlink:href='%23crown-dot'%20transform='translate(4,%200)'%3e%3c/use%3e%3cuse%20xlink:href='%23crown-dot'%20transform='translate(8,%200)'%3e%3c/use%3e%3crect%20x='1'%20y='10'%20width='8'%20height='2'%3e%3c/rect%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",Z5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%204%20l%20-2%202%20h%20-4%20v%202%20h%206%20v%202%20h%20-8%20v%20-4%20l%202%20-2%20h%204%20v%20-4%20h%20-4%20v%202%20h%20-2%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='rotate(180,%2028.5,%2044)%20translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",J5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%208%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-3%20h%20-2%20v%20-2%20h%202%20v%20-3%20h%20-4%20v%202%20h%20-2%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='rotate(180,%2028.5,%2044)%20translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",eU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%205%200%20h%202%20v%206%20h%201%20v%202%20h%20-1%20v%204%20h%20-2%20v%20-4%20h%20-5%20v%20-2%20z%20m%200%203%20l%20-3%203%20h%203%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",tU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%202%20h%20-6%20v%202%20h%204%20l%202%202%20v%204%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-4%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",nU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%202%20h%20-2%20v%20-2%20h%20-4%20v%203%20h%204%20l%202%202%20v%203%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-8%20z%20m%200%207%20v%203%20h%204%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",sU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%204%20l%20-3%203%20v%205%20h%20-2%20v%20-6%20l%203%20-3%20v%20-1%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2038)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2038)%20scale(1.2)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",iU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%203%20l%20-1%201%20l%201%201%20v%203%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-3%20l%201%20-1%20l%20-1%20-1%20v%20-3%20z%20m%200%202%20v%202%20l%201%201%20h%202%20l%201%20-1%20v%20-2%20z%20m%200%206%20v%202%20h%204%20v%20-2%20l%20-1%20-1%20h%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2038)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2038)%20scale(1.2)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",rU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20l%20-4%205%20l%20-4%20-5%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%206%2012%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-3%20h%20-4%20l%20-2%20-2%20v%20-3%20l%202%20-2%20h%204%20l%202%202%20v%208%20z%20m%200%20-7%20v%20-3%20h%20-4%20v%203%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2039.5)%20scale(0.9)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",aU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%2010%20h%20-2%20v%20-5%20h%20-4%20v%205%20h%20-2%20v%20-10%20z%20m%200%202%20v%203%20h%204%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(20.5,%2034)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",oU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='10'%20height='12'%3e%3crect%20width='2'%20height='12'%3e%3c/rect%3e%3cpath%20d='M%206%200%20h%202%20l%202%202%20v%208%20l%20-2%202%20h%20-2%20l%20-2%20-2%20v%20-8%20z%20m%200%202%20v%208%20h%202%20v%20-8%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2020.5)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2020.5)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",lU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%2010%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-3%20h%202%20v%203%20h%204%20v%20-8%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%204%200%20h%201%20v%202%20l%202%20-2%20l%201%202%20v%203%20l%20-1%202%20l%20-2%20-2%20v%207%20h%20-1%20v%20-8%20h%20-2%20v%20-1%20h%202%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",cU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%206%20l%20-1%201%20l%201%201%20v%202%20h%20-2%20v%20-2%20h%20-4%20l%20-2%20-2%20v%20-6%20z%20m%200%202%20v%206%20h%204%20v%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%201%200%20l%202%203%20l%202%20-3%20l%202%203%20l%202%20-3%20v%2010%20h%20-8%20z'%3e%3c/path%3e%3crect%20x='1'%20y='11'%20width='8'%20height='1'%3e%3c/rect%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",uU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%202%20v%205%20l%204%20-5%20h%202%20l%20-4%205%20l%204%207%20h%20-2%20l%20-3%20-5%20h%20-1%20v%205%20h%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%201%202%20l%202%203%20l%202%20-3%20l%202%203%20l%202%20-3%20v%207%20h%20-8%20z'%3e%3c/path%3e%3cpath%20id='crown-dot'%20d='M%201%200%20l%201%201%20l%20-1%201%20l%20-1%20-1%20z'%3e%3c/path%3e%3cuse%20xlink:href='%23crown-dot'%20transform='translate(4,%200)'%3e%3c/use%3e%3cuse%20xlink:href='%23crown-dot'%20transform='translate(8,%200)'%3e%3c/use%3e%3crect%20x='1'%20y='10'%20width='8'%20height='2'%3e%3c/rect%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",hU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%204%20l%20-2%202%20h%20-4%20v%202%20h%206%20v%202%20h%20-8%20v%20-4%20l%202%20-2%20h%204%20v%20-4%20h%20-4%20v%202%20h%20-2%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='rotate(180,%2028.5,%2044)%20translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",fU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%208%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-3%20h%20-2%20v%20-2%20h%202%20v%20-3%20h%20-4%20v%202%20h%20-2%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='rotate(180,%2028.5,%2044)%20translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",dU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%205%200%20h%202%20v%206%20h%201%20v%202%20h%20-1%20v%204%20h%20-2%20v%20-4%20h%20-5%20v%20-2%20z%20m%200%203%20l%20-3%203%20h%203%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",gU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%202%20h%20-6%20v%202%20h%204%20l%202%202%20v%204%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-4%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",mU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%202%20h%20-2%20v%20-2%20h%20-4%20v%203%20h%204%20l%202%202%20v%203%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-8%20z%20m%200%207%20v%203%20h%204%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",pU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%204%20l%20-3%203%20v%205%20h%20-2%20v%20-6%20l%203%20-3%20v%20-1%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2038)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2038)%20scale(1.2)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",yU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%203%20l%20-1%201%20l%201%201%20v%203%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-3%20l%201%20-1%20l%20-1%20-1%20v%20-3%20z%20m%200%202%20v%202%20l%201%201%20h%202%20l%201%20-1%20v%20-2%20z%20m%200%206%20v%202%20h%204%20v%20-2%20l%20-1%20-1%20h%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2038)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2038)%20scale(1.2)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",xU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%202%200%20l%202%202%20l%202%20-2%20l%202%202%20v%203%20l%20-4%205%20l%20-4%20-5%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%206%2012%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-3%20h%20-4%20l%20-2%20-2%20v%20-3%20l%202%20-2%20h%204%20l%202%202%20v%208%20z%20m%200%20-7%20v%20-3%20h%20-4%20v%203%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23f00;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2039.5)%20scale(0.9)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",vU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%2010%20h%20-2%20v%20-5%20h%20-4%20v%205%20h%20-2%20v%20-10%20z%20m%200%202%20v%203%20h%204%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(20.5,%2034)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",bU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='10'%20height='12'%3e%3crect%20width='2'%20height='12'%3e%3c/rect%3e%3cpath%20d='M%206%200%20h%202%20l%202%202%20v%208%20l%20-2%202%20h%20-2%20l%20-2%20-2%20v%20-8%20z%20m%200%202%20v%208%20h%202%20v%20-8%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2020.5)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2020.5)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",EU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%2010%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-3%20h%202%20v%203%20h%204%20v%20-8%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%204%200%20h%201%20v%202%20l%202%20-2%20l%201%202%20v%203%20l%20-1%202%20l%20-2%20-2%20v%207%20h%20-1%20v%20-8%20h%20-2%20v%20-1%20h%202%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",wU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%206%20l%20-1%201%20l%201%201%20v%202%20h%20-2%20v%20-2%20h%20-4%20l%20-2%20-2%20v%20-6%20z%20m%200%202%20v%206%20h%204%20v%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%201%200%20l%202%203%20l%202%20-3%20l%202%203%20l%202%20-3%20v%2010%20h%20-8%20z'%3e%3c/path%3e%3crect%20x='1'%20y='11'%20width='8'%20height='1'%3e%3c/rect%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",AU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%202%20v%205%20l%204%20-5%20h%202%20l%20-4%205%20l%204%207%20h%20-2%20l%20-3%20-5%20h%20-1%20v%205%20h%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='special'%20width='10'%20height='12'%3e%3cpath%20d='M%201%202%20l%202%203%20l%202%20-3%20l%202%203%20l%202%20-3%20v%207%20h%20-8%20z'%3e%3c/path%3e%3cpath%20id='crown-dot'%20d='M%201%200%20l%201%201%20l%20-1%201%20l%20-1%20-1%20z'%3e%3c/path%3e%3cuse%20xlink:href='%23crown-dot'%20transform='translate(4,%200)'%3e%3c/use%3e%3cuse%20xlink:href='%23crown-dot'%20transform='translate(8,%200)'%3e%3c/use%3e%3crect%20x='1'%20y='10'%20width='8'%20height='2'%3e%3c/rect%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23special'%20transform='translate(18.5,%2032)%20scale(2)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",TU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%204%20l%20-2%202%20h%20-4%20v%202%20h%206%20v%202%20h%20-8%20v%20-4%20l%202%20-2%20h%204%20v%20-4%20h%20-4%20v%202%20h%20-2%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='rotate(180,%2028.5,%2044)%20translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",SU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%208%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-3%20h%20-2%20v%20-2%20h%202%20v%20-3%20h%20-4%20v%202%20h%20-2%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='rotate(180,%2028.5,%2044)%20translate(22.5,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/svg%3e",_U="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%205%200%20h%202%20v%206%20h%201%20v%202%20h%20-1%20v%204%20h%20-2%20v%20-4%20h%20-5%20v%20-2%20z%20m%200%203%20l%20-3%203%20h%203%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",RU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%202%20h%20-6%20v%202%20h%204%20l%202%202%20v%204%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-4%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(22.5,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",kU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%202%20h%20-2%20v%20-2%20h%20-4%20v%203%20h%204%20l%202%202%20v%203%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-8%20z%20m%200%207%20v%203%20h%204%20v%20-3%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2036.5)%20scale(1.5)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.5)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(29,%2011)%20scale(1.5)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",LU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%200%200%20h%208%20v%204%20l%20-3%203%20v%205%20h%20-2%20v%20-6%20l%203%20-3%20v%20-1%20h%20-6%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2038)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2038)%20scale(1.2)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",DU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%202%200%20h%204%20l%202%202%20v%203%20l%20-1%201%20l%201%201%20v%203%20l%20-2%202%20h%20-4%20l%20-2%20-2%20v%20-3%20l%201%20-1%20l%20-1%20-1%20v%20-3%20z%20m%200%202%20v%202%20l%201%201%20h%202%20l%201%20-1%20v%20-2%20z%20m%200%206%20v%202%20h%204%20v%20-2%20l%20-1%20-1%20h%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2038)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2038)%20scale(1.2)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(16,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(31.4,%2011)%20scale(1.2)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(23.7,%2024.5)%20scale(1.2)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",CU="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='57'%20height='88'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3csymbol%20id='suit'%20width='8'%20height='10'%3e%3cpath%20d='M%204%200%20l%204%205%20v%202%20l%20-1%201%20h%20-1%20l%20-1%20-1%20l%201%203%20h%20-4%20l%201%20-3%20l%20-1%201%20h%20-1%20l%20-1%20-1%20v%20-2%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='rank'%20width='8'%20height='12'%3e%3cpath%20d='M%206%2012%20h%20-4%20l%20-2%20-2%20v%20-2%20h%202%20v%202%20h%204%20v%20-3%20h%20-4%20l%20-2%20-2%20v%20-3%20l%202%20-2%20h%204%20l%202%202%20v%208%20z%20m%200%20-7%20v%20-3%20h%20-4%20v%203%20z'%3e%3c/path%3e%3c/symbol%3e%3csymbol%20id='index'%20width='57'%20height='88'%3e%3cuse%20xlink:href='%23rank'%20x='6'%20y='6'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20x='6'%20y='20'%3e%3c/use%3e%3c/symbol%3e%3crect%20x='1.5'%20y='1.5'%20width='54'%20height='85'%20fill='%23fff'%3e%3c/rect%3e%3cpath%20d='M%202%200%20h%2053%20l%202%202%20v%2084%20l%20-2%202%20h%20-53%20l%20-2%20-2%20v%20-84%20z%20m%200%202%20v%2084%20h%2053%20v%20-84%20z'%3e%3c/path%3e%3cg%20style='fill:%20%23000;'%3e%3cuse%20xlink:href='%23index'%3e%3c/use%3e%3cuse%20xlink:href='%23index'%20transform='rotate(180,%2028.5,%2044)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(24.9,%2039.5)%20scale(0.9)'%3e%3c/use%3e%3cg%20transform='rotate(180,%2028.5,%2044)'%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2011)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(32.8,%2030)%20scale(0.9)'%3e%3c/use%3e%3cuse%20xlink:href='%23suit'%20transform='translate(17,%2030)%20scale(0.9)'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/svg%3e",IU=Object.assign({"../assets/cards/BACK.svg":O5,"../assets/cards/C_1.svg":M5,"../assets/cards/C_10.svg":P5,"../assets/cards/C_11.svg":N5,"../assets/cards/C_12.svg":B5,"../assets/cards/C_13.svg":F5,"../assets/cards/C_2.svg":U5,"../assets/cards/C_3.svg":H5,"../assets/cards/C_4.svg":G5,"../assets/cards/C_5.svg":z5,"../assets/cards/C_6.svg":$5,"../assets/cards/C_7.svg":V5,"../assets/cards/C_8.svg":Y5,"../assets/cards/C_9.svg":K5,"../assets/cards/D_1.svg":j5,"../assets/cards/D_10.svg":q5,"../assets/cards/D_11.svg":Q5,"../assets/cards/D_12.svg":W5,"../assets/cards/D_13.svg":X5,"../assets/cards/D_2.svg":Z5,"../assets/cards/D_3.svg":J5,"../assets/cards/D_4.svg":eU,"../assets/cards/D_5.svg":tU,"../assets/cards/D_6.svg":nU,"../assets/cards/D_7.svg":sU,"../assets/cards/D_8.svg":iU,"../assets/cards/D_9.svg":rU,"../assets/cards/H_1.svg":aU,"../assets/cards/H_10.svg":oU,"../assets/cards/H_11.svg":lU,"../assets/cards/H_12.svg":cU,"../assets/cards/H_13.svg":uU,"../assets/cards/H_2.svg":hU,"../assets/cards/H_3.svg":fU,"../assets/cards/H_4.svg":dU,"../assets/cards/H_5.svg":gU,"../assets/cards/H_6.svg":mU,"../assets/cards/H_7.svg":pU,"../assets/cards/H_8.svg":yU,"../assets/cards/H_9.svg":xU,"../assets/cards/S_1.svg":vU,"../assets/cards/S_10.svg":bU,"../assets/cards/S_11.svg":EU,"../assets/cards/S_12.svg":wU,"../assets/cards/S_13.svg":AU,"../assets/cards/S_2.svg":TU,"../assets/cards/S_3.svg":SU,"../assets/cards/S_4.svg":_U,"../assets/cards/S_5.svg":RU,"../assets/cards/S_6.svg":kU,"../assets/cards/S_7.svg":LU,"../assets/cards/S_8.svg":DU,"../assets/cards/S_9.svg":CU}),A2=s=>IU[`../assets/cards/${s}.svg`];function OU(){const s=Array.from({length:52},(e,t)=>t);for(let e=s.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[s[e],s[t]]=[s[t],s[e]]}return s}function T2(s){if(typeof s=="number")return s;if(typeof s=="string")if(s.includes("/")){const e=s.split("/").map(t=>parseInt(t.trim()));return Math.max(...e)}else return s.includes("Bust"),parseInt(s);return 0}const MU="6.13.5";function PU(s,e,t){const n=e.split("|").map(r=>r.trim());for(let r=0;r<n.length;r++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof s===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=s,i}async function jn(s){const e=Object.keys(s);return(await Promise.all(e.map(n=>Promise.resolve(s[n])))).reduce((n,i,r)=>(n[e[r]]=i,n),{})}function Oe(s,e,t){for(let n in e){let i=e[n];const r=t?t[n]:null;r&&PU(i,r,n),Object.defineProperty(s,n,{enumerable:!0,value:i,writable:!1})}}function Qc(s){if(s==null)return"null";if(Array.isArray(s))return"[ "+s.map(Qc).join(", ")+" ]";if(s instanceof Uint8Array){const e="0123456789abcdef";let t="0x";for(let n=0;n<s.length;n++)t+=e[s[n]>>4],t+=e[s[n]&15];return t}if(typeof s=="object"&&typeof s.toJSON=="function")return Qc(s.toJSON());switch(typeof s){case"boolean":case"symbol":return s.toString();case"bigint":return BigInt(s).toString();case"number":return s.toString();case"string":return JSON.stringify(s);case"object":{const e=Object.keys(s);return e.sort(),"{ "+e.map(t=>`${Qc(t)}: ${Qc(s[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Dn(s,e){return s&&s.code===e}function Yv(s){return Dn(s,"CALL_EXCEPTION")}function Vt(s,e,t){let n=s;{const r=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${Qc(t)}`);for(const a in t){if(a==="shortMessage")continue;const l=t[a];r.push(a+"="+Qc(l))}}r.push(`code=${e}`),r.push(`version=${MU}`),r.length&&(s+=" ("+r.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(s);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(s);break;default:i=new Error(s)}return Oe(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&Oe(i,{shortMessage:n}),i}function de(s,e,t,n){if(!s)throw Vt(e,t,n)}function V(s,e,t,n){de(s,e,"INVALID_ARGUMENT",{argument:t,value:n})}function SL(s,e,t){t==null&&(t=""),t&&(t=": "+t),de(s>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:s,expectedCount:e}),de(s<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:s,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((s,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");s.push(e)}catch{}return s},[]);function Ud(s,e,t){if(t==null&&(t=""),s!==e){let n=t,i="new";t&&(n+=".",i+=" "+t),de(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function _L(s,e,t){if(s instanceof Uint8Array)return t?new Uint8Array(s):s;if(typeof s=="string"&&s.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((s.length-2)/2);let i=2;for(let r=0;r<n.length;r++)n[r]=parseInt(s.substring(i,i+2),16),i+=2;return n}V(!1,"invalid BytesLike value",e||"value",s)}function it(s,e){return _L(s,e,!1)}function qn(s,e){return _L(s,e,!0)}function Rt(s,e){return!(typeof s!="string"||!s.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&s.length!==2+2*e||e===!0&&s.length%2!==0)}function Kv(s){return Rt(s,!0)||s instanceof Uint8Array}const QT="0123456789abcdef";function we(s){const e=it(s);let t="0x";for(let n=0;n<e.length;n++){const i=e[n];t+=QT[(i&240)>>4]+QT[i&15]}return t}function nn(s){return"0x"+s.map(e=>we(e).substring(2)).join("")}function iu(s){return Rt(s,!0)?(s.length-2)/2:it(s).length}function Yt(s,e,t){const n=it(s);return t!=null&&t>n.length&&de(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:t}),we(n.slice(e??0,t??n.length))}function RL(s,e,t){const n=it(s);de(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(n,e-n.length):i.set(n,0),we(i)}function Ul(s,e){return RL(s,e,!0)}function NU(s,e){return RL(s,e,!1)}const mm=BigInt(0),pi=BigInt(1),x3=9007199254740991;function Mg(s,e){const t=pm(s,"value"),n=BigInt(Ye(e,"width"));if(de(t>>n===mm,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:s}),t>>n-pi){const i=(pi<<n)-pi;return-((~t&i)+pi)}return t}function kL(s,e){let t=Se(s,"value");const n=BigInt(Ye(e,"width")),i=pi<<n-pi;if(t<mm){t=-t,de(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:s});const r=(pi<<n)-pi;return(~t&r)+pi}else de(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:s});return t}function ll(s,e){const t=pm(s,"value"),n=BigInt(Ye(e,"bits"));return t&(pi<<n)-pi}function Se(s,e){switch(typeof s){case"bigint":return s;case"number":return V(Number.isInteger(s),"underflow",e||"value",s),V(s>=-9007199254740991&&s<=x3,"overflow",e||"value",s),BigInt(s);case"string":try{if(s==="")throw new Error("empty string");return s[0]==="-"&&s[1]!=="-"?-BigInt(s.substring(1)):BigInt(s)}catch(t){V(!1,`invalid BigNumberish string: ${t.message}`,e||"value",s)}}V(!1,"invalid BigNumberish value",e||"value",s)}function pm(s,e){const t=Se(s,e);return de(t>=mm,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:s}),t}const WT="0123456789abcdef";function ym(s){if(s instanceof Uint8Array){let e="0x0";for(const t of s)e+=WT[t>>4],e+=WT[t&15];return BigInt(e)}return Se(s)}function Ye(s,e){switch(typeof s){case"bigint":return V(s>=-9007199254740991&&s<=x3,"overflow",e||"value",s),Number(s);case"number":return V(Number.isInteger(s),"underflow",e||"value",s),V(s>=-9007199254740991&&s<=x3,"overflow",e||"value",s),s;case"string":try{if(s==="")throw new Error("empty string");return Ye(BigInt(s),e)}catch(t){V(!1,`invalid numeric string: ${t.message}`,e||"value",s)}}V(!1,"invalid numeric value",e||"value",s)}function BU(s){return Ye(ym(s))}function yo(s,e){let n=pm(s,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const i=Ye(e,"width");for(de(i*2>=n.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:s});n.length<i*2;)n="0"+n}return"0x"+n}function Qn(s){const e=pm(s,"value");if(e===mm)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const n=new Uint8Array(t.length/2);for(let i=0;i<n.length;i++){const r=i*2;n[i]=parseInt(t.substring(r,r+2),16)}return n}function Wc(s){let e=we(Kv(s)?s:Qn(s)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const XT="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const ZT=BigInt(58);function FU(s){const e=it(s);let t=ym(e),n="";for(;t;)n=XT[Number(t%ZT)]+n,t/=ZT;for(let i=0;i<e.length&&!e[i];i++)n=XT[0]+n;return n}function UU(s){s=atob(s);const e=new Uint8Array(s.length);for(let t=0;t<s.length;t++)e[t]=s.charCodeAt(t);return it(e)}function HU(s){const e=it(s);let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}var uu;class LL{constructor(e,t,n){F(this,"filter");F(this,"emitter");ie(this,uu);U(this,uu,t),Oe(this,{emitter:e,filter:n})}async removeListener(){k(this,uu)!=null&&await this.emitter.off(this.filter,k(this,uu))}}uu=new WeakMap;function GU(s,e,t,n,i){V(!1,`invalid codepoint at offset ${e}; ${s}`,"bytes",t)}function DL(s,e,t,n,i){if(s==="BAD_PREFIX"||s==="UNEXPECTED_CONTINUE"){let r=0;for(let a=e+1;a<t.length&&t[a]>>6===2;a++)r++;return r}return s==="OVERRUN"?t.length-e-1:0}function zU(s,e,t,n,i){return s==="OVERLONG"?(V(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),DL(s,e,t))}const $U=Object.freeze({error:GU,ignore:DL,replace:zU});function VU(s,e){e==null&&(e=$U.error);const t=it(s,"bytes"),n=[];let i=0;for(;i<t.length;){const r=t[i++];if(r>>7===0){n.push(r);continue}let a=null,l=null;if((r&224)===192)a=1,l=127;else if((r&240)===224)a=2,l=2047;else if((r&248)===240)a=3,l=65535;else{(r&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,n):i+=e("BAD_PREFIX",i-1,t,n);continue}if(i-1+a>=t.length){i+=e("OVERRUN",i-1,t,n);continue}let u=r&(1<<8-a-1)-1;for(let h=0;h<a;h++){let d=t[i];if((d&192)!=128){i+=e("MISSING_CONTINUE",i,t,n),u=null;break}u=u<<6|d&63,i++}if(u!==null){if(u>1114111){i+=e("OUT_OF_RANGE",i-1-a,t,n,u);continue}if(u>=55296&&u<=57343){i+=e("UTF16_SURROGATE",i-1-a,t,n,u);continue}if(u<=l){i+=e("OVERLONG",i-1-a,t,n,u);continue}n.push(u)}}return n}function sa(s,e){V(typeof s=="string","invalid string value","str",s);let t=[];for(let n=0;n<s.length;n++){const i=s.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const r=s.charCodeAt(n);V(n<s.length&&(r&64512)===56320,"invalid surrogate pair","str",s);const a=65536+((i&1023)<<10)+(r&1023);t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(a&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function YU(s){return s.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Pg(s,e){return YU(VU(s,e))}function CL(s){async function e(t,n){de(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();de(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),de(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let r=null;const a=new AbortController,l=setTimeout(()=>{r=Vt("request timeout","TIMEOUT"),a.abort()},t.timeout);n&&n.addListener(()=>{r=Vt("request cancelled","CANCELLED"),a.abort()});const u={method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:a.signal};let h;try{h=await fetch(t.url,u)}catch(y){throw clearTimeout(l),r||y}clearTimeout(l);const d={};h.headers.forEach((y,v)=>{d[v.toLowerCase()]=y});const g=await h.arrayBuffer(),p=g==null?null:new Uint8Array(g);return{statusCode:h.status,statusMessage:h.statusText,headers:d,body:p}}return e}const KU=12,jU=250;let JT=CL();const qU=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),QU=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let bx=!1;async function IL(s,e){try{const t=s.match(qU);if(!t)throw new Error("invalid data");return new ho(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?UU(t[3]):XU(t[3]))}catch{return new ho(599,"BAD REQUEST (invalid data: URI)",{},null,new xo(s))}}function OL(s){async function e(t,n){try{const i=t.match(QU);if(!i)throw new Error("invalid link");return new xo(`${s}${i[2]}`)}catch{return new ho(599,"BAD REQUEST (invalid IPFS URI)",{},null,new xo(t))}}return e}const S2={data:IL,ipfs:OL("https://gateway.ipfs.io/ipfs/")},ML=new WeakMap;var gl,Ka;class WU{constructor(e){ie(this,gl);ie(this,Ka);U(this,gl,[]),U(this,Ka,!1),ML.set(e,()=>{if(!k(this,Ka)){U(this,Ka,!0);for(const t of k(this,gl))setTimeout(()=>{t()},0);U(this,gl,[])}})}addListener(e){de(!k(this,Ka),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),k(this,gl).push(e)}get cancelled(){return k(this,Ka)}checkSignal(){de(!this.cancelled,"cancelled","CANCELLED",{})}}gl=new WeakMap,Ka=new WeakMap;function _2(s){if(s==null)throw new Error("missing signal; should not happen");return s.checkSignal(),s}var hu,fu,hi,Hr,du,gu,vn,ws,Gr,ml,pl,yl,Hi,fi,ja,xl,Cf;const im=class im{constructor(e){ie(this,xl);ie(this,hu);ie(this,fu);ie(this,hi);ie(this,Hr);ie(this,du);ie(this,gu);ie(this,vn);ie(this,ws);ie(this,Gr);ie(this,ml);ie(this,pl);ie(this,yl);ie(this,Hi);ie(this,fi);ie(this,ja);U(this,gu,String(e)),U(this,hu,!1),U(this,fu,!0),U(this,hi,{}),U(this,Hr,""),U(this,du,3e5),U(this,fi,{slotInterval:jU,maxAttempts:KU}),U(this,ja,null)}get url(){return k(this,gu)}set url(e){U(this,gu,String(e))}get body(){return k(this,vn)==null?null:new Uint8Array(k(this,vn))}set body(e){if(e==null)U(this,vn,void 0),U(this,ws,void 0);else if(typeof e=="string")U(this,vn,sa(e)),U(this,ws,"text/plain");else if(e instanceof Uint8Array)U(this,vn,e),U(this,ws,"application/octet-stream");else if(typeof e=="object")U(this,vn,sa(JSON.stringify(e))),U(this,ws,"application/json");else throw new Error("invalid body")}hasBody(){return k(this,vn)!=null}get method(){return k(this,Hr)?k(this,Hr):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),U(this,Hr,String(e).toUpperCase())}get headers(){const e=Object.assign({},k(this,hi));return k(this,Gr)&&(e.authorization=`Basic ${HU(sa(k(this,Gr)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&k(this,ws)&&(e["content-type"]=k(this,ws)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){k(this,hi)[String(e).toLowerCase()]=String(t)}clearHeaders(){U(this,hi,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return k(this,Gr)||null}setCredentials(e,t){V(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),U(this,Gr,`${e}:${t}`)}get allowGzip(){return k(this,fu)}set allowGzip(e){U(this,fu,!!e)}get allowInsecureAuthentication(){return!!k(this,hu)}set allowInsecureAuthentication(e){U(this,hu,!!e)}get timeout(){return k(this,du)}set timeout(e){V(e>=0,"timeout must be non-zero","timeout",e),U(this,du,e)}get preflightFunc(){return k(this,ml)||null}set preflightFunc(e){U(this,ml,e)}get processFunc(){return k(this,pl)||null}set processFunc(e){U(this,pl,e)}get retryFunc(){return k(this,yl)||null}set retryFunc(e){U(this,yl,e)}get getUrlFunc(){return k(this,ja)||JT}set getUrlFunc(e){U(this,ja,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${k(this,vn)?we(k(this,vn)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(k(this,fi).slotInterval=e.slotInterval),e.maxAttempts!=null&&(k(this,fi).maxAttempts=e.maxAttempts)}send(){return de(k(this,Hi)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),U(this,Hi,new WU(this)),pe(this,xl,Cf).call(this,0,eS()+this.timeout,0,this,new ho(0,"",{},null,this))}cancel(){de(k(this,Hi)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=ML.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();de(this.method==="GET"&&(t!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new im(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,U(i,hi,Object.assign({},k(this,hi))),k(this,vn)&&U(i,vn,new Uint8Array(k(this,vn))),U(i,ws,k(this,ws)),i}clone(){const e=new im(this.url);return U(e,Hr,k(this,Hr)),k(this,vn)&&U(e,vn,k(this,vn)),U(e,ws,k(this,ws)),U(e,hi,Object.assign({},k(this,hi))),U(e,Gr,k(this,Gr)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),U(e,ml,k(this,ml)),U(e,pl,k(this,pl)),U(e,yl,k(this,yl)),U(e,fi,Object.assign({},k(this,fi))),U(e,ja,k(this,ja)),e}static lockConfig(){bx=!0}static getGateway(e){return S2[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(bx)throw new Error("gateways locked");S2[e]=t}static registerGetUrl(e){if(bx)throw new Error("gateways locked");JT=e}static createGetUrlFunc(e){return CL()}static createDataGateway(){return IL}static createIpfsGatewayFunc(e){return OL(e)}};hu=new WeakMap,fu=new WeakMap,hi=new WeakMap,Hr=new WeakMap,du=new WeakMap,gu=new WeakMap,vn=new WeakMap,ws=new WeakMap,Gr=new WeakMap,ml=new WeakMap,pl=new WeakMap,yl=new WeakMap,Hi=new WeakMap,fi=new WeakMap,ja=new WeakMap,xl=new WeakSet,Cf=async function(e,t,n,i,r){var d,g,p;if(e>=k(this,fi).maxAttempts)return r.makeServerError("exceeded maximum retry limit");de(eS()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),n>0&&await ZU(n);let a=this.clone();const l=(a.url.split(":")[0]||"").toLowerCase();if(l in S2){const y=await S2[l](a.url,_2(k(i,Hi)));if(y instanceof ho){let v=y;if(this.processFunc){_2(k(i,Hi));try{v=await this.processFunc(a,v)}catch(b){(b.throttle==null||typeof b.stall!="number")&&v.makeServerError("error in post-processing function",b).assertOk()}}return v}a=y}this.preflightFunc&&(a=await this.preflightFunc(a));const u=await this.getUrlFunc(a,_2(k(i,Hi)));let h=new ho(u.statusCode,u.statusMessage,u.headers,u.body,i);if(h.statusCode===301||h.statusCode===302){try{const y=h.headers.location||"";return pe(d=a.redirect(y),xl,Cf).call(d,e+1,t,0,i,h)}catch{}return h}else if(h.statusCode===429&&(this.retryFunc==null||await this.retryFunc(a,h,e))){const y=h.headers["retry-after"];let v=k(this,fi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof y=="string"&&y.match(/^[1-9][0-9]*$/)&&(v=parseInt(y)),pe(g=a.clone(),xl,Cf).call(g,e+1,t,v,i,h)}if(this.processFunc){_2(k(i,Hi));try{h=await this.processFunc(a,h)}catch(y){(y.throttle==null||typeof y.stall!="number")&&h.makeServerError("error in post-processing function",y).assertOk();let v=k(this,fi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return y.stall>=0&&(v=y.stall),pe(p=a.clone(),xl,Cf).call(p,e+1,t,v,i,h)}}return h};let xo=im;var Td,Sd,_d,As,mu,vl;const Nb=class Nb{constructor(e,t,n,i,r){ie(this,Td);ie(this,Sd);ie(this,_d);ie(this,As);ie(this,mu);ie(this,vl);U(this,Td,e),U(this,Sd,t),U(this,_d,Object.keys(n).reduce((a,l)=>(a[l.toLowerCase()]=String(n[l]),a),{})),U(this,As,i==null?null:new Uint8Array(i)),U(this,mu,r||null),U(this,vl,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${k(this,As)?we(k(this,As)):"null"}>`}get statusCode(){return k(this,Td)}get statusMessage(){return k(this,Sd)}get headers(){return Object.assign({},k(this,_d))}get body(){return k(this,As)==null?null:new Uint8Array(k(this,As))}get bodyText(){try{return k(this,As)==null?"":Pg(k(this,As))}catch{de(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{de(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new Nb(599,n,this.headers,this.body,k(this,mu)||void 0);return U(i,vl,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:V(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw Oe(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return k(this,As)!=null}get request(){return k(this,mu)}ok(){return k(this,vl).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=k(this,vl);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let i=null;try{k(this,As)&&(i=Pg(k(this,As)))}catch{}de(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:n,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Td=new WeakMap,Sd=new WeakMap,_d=new WeakMap,As=new WeakMap,mu=new WeakMap,vl=new WeakMap;let ho=Nb;function eS(){return new Date().getTime()}function XU(s){return sa(s.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function ZU(s){return new Promise(e=>setTimeout(e,s))}const JU=BigInt(-1),oi=BigInt(0),Xc=BigInt(1),e6=BigInt(5),Uc={};let ru="0000";for(;ru.length<80;)ru+=ru;function jo(s){let e=ru;for(;e.length<s;)e+=e;return BigInt("1"+e.substring(0,s))}function mf(s,e,t){const n=BigInt(e.width);if(e.signed){const i=Xc<<n-Xc;de(t==null||s>=-i&&s<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:s}),s>oi?s=Mg(ll(s,n),n):s=-Mg(ll(-s,n),n)}else{const i=Xc<<n;de(t==null||s>=0&&s<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:s}),s=(s%i+i)%i&i-Xc}return s}function Ex(s){typeof s=="number"&&(s=`fixed128x${s}`);let e=!0,t=128,n=18;if(typeof s=="string"){if(s!=="fixed")if(s==="ufixed")e=!1;else{const r=s.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);V(r,"invalid fixed format","format",s),e=r[1]!=="u",t=parseInt(r[2]),n=parseInt(r[3])}}else if(s){const r=s,a=(l,u,h)=>r[l]==null?h:(V(typeof r[l]===u,"invalid fixed format ("+l+" not "+u+")","format."+l,r[l]),r[l]);e=a("signed","boolean",e),t=a("width","number",t),n=a("decimals","number",n)}V(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),V(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const i=(e?"":"u")+"fixed"+String(t)+"x"+String(n);return{signed:e,width:t,decimals:n,name:i}}function t6(s,e){let t="";s<oi&&(t="-",s*=JU);let n=s.toString();if(e===0)return t+n;for(;n.length<=e;)n=ru+n;const i=n.length-e;for(n=n.substring(0,i)+"."+n.substring(i);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return t+n}var di,bt,Yn,dt,Zo,Dr,v3,b3,E3,w3;const Ya=class Ya{constructor(e,t,n){ie(this,dt);F(this,"format");ie(this,di);ie(this,bt);ie(this,Yn);F(this,"_value");Ud(e,Uc,"FixedNumber"),U(this,bt,t),U(this,di,n);const i=t6(t,n.decimals);Oe(this,{format:n.name,_value:i}),U(this,Yn,jo(n.decimals))}get signed(){return k(this,di).signed}get width(){return k(this,di).width}get decimals(){return k(this,di).decimals}get value(){return k(this,bt)}addUnsafe(e){return pe(this,dt,v3).call(this,e)}add(e){return pe(this,dt,v3).call(this,e,"add")}subUnsafe(e){return pe(this,dt,b3).call(this,e)}sub(e){return pe(this,dt,b3).call(this,e,"sub")}mulUnsafe(e){return pe(this,dt,E3).call(this,e)}mul(e){return pe(this,dt,E3).call(this,e,"mul")}mulSignal(e){pe(this,dt,Zo).call(this,e);const t=k(this,bt)*k(e,bt);return de(t%k(this,Yn)===oi,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),pe(this,dt,Dr).call(this,t/k(this,Yn),"mulSignal")}divUnsafe(e){return pe(this,dt,w3).call(this,e)}div(e){return pe(this,dt,w3).call(this,e,"div")}divSignal(e){de(k(e,bt)!==oi,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),pe(this,dt,Zo).call(this,e);const t=k(this,bt)*k(this,Yn);return de(t%k(e,bt)===oi,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),pe(this,dt,Dr).call(this,t/k(e,bt),"divSignal")}cmp(e){let t=this.value,n=e.value;const i=this.decimals-e.decimals;return i>0?n*=jo(i):i<0&&(t*=jo(-i)),t<n?-1:t>n?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=k(this,bt);return k(this,bt)<oi&&(e-=k(this,Yn)-Xc),e=k(this,bt)/k(this,Yn)*k(this,Yn),pe(this,dt,Dr).call(this,e,"floor")}ceiling(){let e=k(this,bt);return k(this,bt)>oi&&(e+=k(this,Yn)-Xc),e=k(this,bt)/k(this,Yn)*k(this,Yn),pe(this,dt,Dr).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,n=e6*jo(t-1);let i=this.value+n;const r=jo(t);return i=i/r*r,mf(i,k(this,di),"round"),new Ya(Uc,i,k(this,di))}isZero(){return k(this,bt)===oi}isNegative(){return k(this,bt)<oi}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ya.fromString(this.toString(),e)}static fromValue(e,t,n){const i=t==null?0:Ye(t),r=Ex(n);let a=Se(e,"value");const l=i-r.decimals;if(l>0){const u=jo(l);de(a%u===oi,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),a/=u}else l<0&&(a*=jo(-l));return mf(a,r,"fromValue"),new Ya(Uc,a,r)}static fromString(e,t){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);V(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const i=Ex(t);let r=n[2]||"0",a=n[3]||"";for(;a.length<i.decimals;)a+=ru;de(a.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),a=a.substring(0,i.decimals);const l=BigInt(n[1]+r+a);return mf(l,i,"fromString"),new Ya(Uc,l,i)}static fromBytes(e,t){let n=ym(it(e,"value"));const i=Ex(t);return i.signed&&(n=Mg(n,i.width)),mf(n,i,"fromBytes"),new Ya(Uc,n,i)}};di=new WeakMap,bt=new WeakMap,Yn=new WeakMap,dt=new WeakSet,Zo=function(e){V(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Dr=function(e,t){return e=mf(e,k(this,di),t),new Ya(Uc,e,k(this,di))},v3=function(e,t){return pe(this,dt,Zo).call(this,e),pe(this,dt,Dr).call(this,k(this,bt)+k(e,bt),t)},b3=function(e,t){return pe(this,dt,Zo).call(this,e),pe(this,dt,Dr).call(this,k(this,bt)-k(e,bt),t)},E3=function(e,t){return pe(this,dt,Zo).call(this,e),pe(this,dt,Dr).call(this,k(this,bt)*k(e,bt)/k(this,Yn),t)},w3=function(e,t){return de(k(e,bt)!==oi,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),pe(this,dt,Zo).call(this,e),pe(this,dt,Dr).call(this,k(this,bt)*k(this,Yn)/k(e,bt),t)};let Ng=Ya;function n6(s){let e=s.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function tS(s,e,t){let n=0;for(let i=0;i<t;i++)n=n*256+s[e+i];return n}function nS(s,e,t,n){const i=[];for(;t<e+1+n;){const r=PL(s,t);i.push(r.result),t+=r.consumed,de(t<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:s,length:n,offset:e})}return{consumed:1+n,result:i}}function PL(s,e){de(s.length!==0,"data too short","BUFFER_OVERRUN",{buffer:s,length:0,offset:1});const t=n=>{de(n<=s.length,"data short segment too short","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n})};if(s[e]>=248){const n=s[e]-247;t(e+1+n);const i=tS(s,e+1,n);return t(e+1+n+i),nS(s,e,e+1+n,n+i)}else if(s[e]>=192){const n=s[e]-192;return t(e+1+n),nS(s,e,e+1,n)}else if(s[e]>=184){const n=s[e]-183;t(e+1+n);const i=tS(s,e+1,n);t(e+1+n+i);const r=we(s.slice(e+1+n,e+1+n+i));return{consumed:1+n+i,result:r}}else if(s[e]>=128){const n=s[e]-128;t(e+1+n);const i=we(s.slice(e+1,e+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:n6(s[e])}}function xm(s){const e=it(s,"data"),t=PL(e,0);return V(t.consumed===e.length,"unexpected junk after rlp payload","data",s),t.result}function sS(s){const e=[];for(;s;)e.unshift(s&255),s>>=8;return e}function NL(s){if(Array.isArray(s)){let n=[];if(s.forEach(function(r){n=n.concat(NL(r))}),n.length<=55)return n.unshift(192+n.length),n;const i=sS(n.length);return i.unshift(247+i.length),i.concat(n)}const e=Array.prototype.slice.call(it(s,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=sS(e.length);return t.unshift(183+t.length),t.concat(e)}const iS="0123456789abcdef";function Hl(s){let e="0x";for(const t of NL(s))e+=iS[t>>4],e+=iS[t&15];return e}function s6(s,e){let t=18;return t=Ye(e,"unit"),Ng.fromValue(s,t,{decimals:t,width:512}).toString()}function i6(s,e){V(typeof s=="string","value must be a string","value",s);let t=18;return t=Ye(e,"unit"),Ng.fromString(s,{decimals:t,width:512}).value}function r6(s){return s6(s,18)}function a6(s){return i6(s,18)}const Wn=32,A3=new Uint8Array(Wn),o6=["then"],R2={},BL=new WeakMap;function il(s){return BL.get(s)}function rS(s,e){BL.set(s,e)}function pf(s,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${s}`);throw t.error=e,t}function T3(s,e,t){return s.indexOf(null)>=0?e.map((n,i)=>n instanceof Zu?T3(il(n),n,t):n):s.reduce((n,i,r)=>{let a=e.getValue(i);return i in n||(t&&a instanceof Zu&&(a=T3(il(a),a,t)),n[i]=a),n},{})}var pu;const Zc=class Zc extends Array{constructor(...t){const n=t[0];let i=t[1],r=(t[2]||[]).slice(),a=!0;n!==R2&&(i=t,r=[],a=!1);super(i.length);ie(this,pu);i.forEach((h,d)=>{this[d]=h});const l=r.reduce((h,d)=>(typeof d=="string"&&h.set(d,(h.get(d)||0)+1),h),new Map);if(rS(this,Object.freeze(i.map((h,d)=>{const g=r[d];return g!=null&&l.get(g)===1?g:null}))),U(this,pu,[]),k(this,pu)==null&&k(this,pu),!a)return;Object.freeze(this);const u=new Proxy(this,{get:(h,d,g)=>{if(typeof d=="string"){if(d.match(/^[0-9]+$/)){const y=Ye(d,"%index");if(y<0||y>=this.length)throw new RangeError("out of result range");const v=h[y];return v instanceof Error&&pf(`index ${y}`,v),v}if(o6.indexOf(d)>=0)return Reflect.get(h,d,g);const p=h[d];if(p instanceof Function)return function(...y){return p.apply(this===g?h:this,y)};if(!(d in h))return h.getValue.apply(this===g?h:this,[d])}return Reflect.get(h,d,g)}});return rS(u,il(this)),u}toArray(t){const n=[];return this.forEach((i,r)=>{i instanceof Error&&pf(`index ${r}`,i),t&&i instanceof Zc&&(i=i.toArray(t)),n.push(i)}),n}toObject(t){const n=il(this);return n.reduce((i,r,a)=>(de(r!=null,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),T3(n,this,t)),{})}slice(t,n){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const i=il(this),r=[],a=[];for(let l=t;l<n;l++)r.push(this[l]),a.push(i[l]);return new Zc(R2,r,a)}filter(t,n){const i=il(this),r=[],a=[];for(let l=0;l<this.length;l++){const u=this[l];u instanceof Error&&pf(`index ${l}`,u),t.call(n,u,l,this)&&(r.push(u),a.push(i[l]))}return new Zc(R2,r,a)}map(t,n){const i=[];for(let r=0;r<this.length;r++){const a=this[r];a instanceof Error&&pf(`index ${r}`,a),i.push(t.call(n,a,r,this))}return i}getValue(t){const n=il(this).indexOf(t);if(n===-1)return;const i=this[n];return i instanceof Error&&pf(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,n){return new Zc(R2,t,n)}};pu=new WeakMap;let Zu=Zc;function aS(s){let e=Qn(s);return de(e.length<=Wn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Wn,offset:e.length}),e.length!==Wn&&(e=qn(nn([A3.slice(e.length%Wn),e]))),e}class ua{constructor(e,t,n,i){F(this,"name");F(this,"type");F(this,"localName");F(this,"dynamic");Oe(this,{name:e,type:t,localName:n,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){V(!1,e,this.localName,t)}}var zr,bl,yu,og;class S3{constructor(){ie(this,yu);ie(this,zr);ie(this,bl);U(this,zr,[]),U(this,bl,0)}get data(){return nn(k(this,zr))}get length(){return k(this,bl)}appendWriter(e){return pe(this,yu,og).call(this,qn(e.data))}writeBytes(e){let t=qn(e);const n=t.length%Wn;return n&&(t=qn(nn([t,A3.slice(n)]))),pe(this,yu,og).call(this,t)}writeValue(e){return pe(this,yu,og).call(this,aS(e))}writeUpdatableValue(){const e=k(this,zr).length;return k(this,zr).push(A3),U(this,bl,k(this,bl)+Wn),t=>{k(this,zr)[e]=aS(t)}}}zr=new WeakMap,bl=new WeakMap,yu=new WeakSet,og=function(e){return k(this,zr).push(e),U(this,bl,k(this,bl)+e.length),e.length};var is,Ts,El,wl,qa,Kl,R3,FL;const Bb=class Bb{constructor(e,t,n){ie(this,Kl);F(this,"allowLoose");ie(this,is);ie(this,Ts);ie(this,El);ie(this,wl);ie(this,qa);Oe(this,{allowLoose:!!t}),U(this,is,qn(e)),U(this,El,0),U(this,wl,null),U(this,qa,n??1024),U(this,Ts,0)}get data(){return we(k(this,is))}get dataLength(){return k(this,is).length}get consumed(){return k(this,Ts)}get bytes(){return new Uint8Array(k(this,is))}subReader(e){const t=new Bb(k(this,is).slice(k(this,Ts)+e),this.allowLoose,k(this,qa));return U(t,wl,this),t}readBytes(e,t){let n=pe(this,Kl,FL).call(this,0,e,!!t);return pe(this,Kl,R3).call(this,e),U(this,Ts,k(this,Ts)+n.length),n.slice(0,e)}readValue(){return ym(this.readBytes(Wn))}readIndex(){return BU(this.readBytes(Wn))}};is=new WeakMap,Ts=new WeakMap,El=new WeakMap,wl=new WeakMap,qa=new WeakMap,Kl=new WeakSet,R3=function(e){var t;if(k(this,wl))return pe(t=k(this,wl),Kl,R3).call(t,e);U(this,El,k(this,El)+e),de(k(this,qa)<1||k(this,El)<=k(this,qa)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${k(this,qa)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:qn(k(this,is)),offset:k(this,Ts),length:e,info:{bytesRead:k(this,El),dataLength:this.dataLength}})},FL=function(e,t,n){let i=Math.ceil(t/Wn)*Wn;return k(this,Ts)+i>k(this,is).length&&(this.allowLoose&&n&&k(this,Ts)+t<=k(this,is).length?i=t:de(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:qn(k(this,is)),length:k(this,is).length,offset:k(this,Ts)+i})),k(this,is).slice(k(this,Ts),k(this,Ts)+i)};let _3=Bb;function Bg(s){if(!Number.isSafeInteger(s)||s<0)throw new Error(`Wrong positive integer: ${s}`)}function jv(s,...e){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(s.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${s.length}`)}function l6(s){if(typeof s!="function"||typeof s.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Bg(s.outputLen),Bg(s.blockLen)}function Ju(s,e=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(e&&s.finished)throw new Error("Hash#digest() has already been called")}function UL(s,e){jv(s);const t=e.outputLen;if(s.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const wx=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const HL=s=>s instanceof Uint8Array,c6=s=>new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)),Ax=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),Mi=(s,e)=>s<<32-e|s>>>e,u6=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!u6)throw new Error("Non little-endian hardware is not supported");function h6(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function vm(s){if(typeof s=="string"&&(s=h6(s)),!HL(s))throw new Error(`expected Uint8Array, got ${typeof s}`);return s}function f6(...s){const e=new Uint8Array(s.reduce((n,i)=>n+i.length,0));let t=0;return s.forEach(n=>{if(!HL(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}let qv=class{clone(){return this._cloneInto()}};function Qv(s){const e=n=>s().update(vm(n)).digest(),t=s();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>s(),e}function d6(s=32){if(wx&&typeof wx.getRandomValues=="function")return wx.getRandomValues(new Uint8Array(s));throw new Error("crypto.getRandomValues must be defined")}class GL extends qv{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,l6(e);const n=vm(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,r=new Uint8Array(i);r.set(n.length>i?e.create().update(n).digest():n);for(let a=0;a<r.length;a++)r[a]^=54;this.iHash.update(r),this.oHash=e.create();for(let a=0;a<r.length;a++)r[a]^=106;this.oHash.update(r),r.fill(0)}update(e){return Ju(this),this.iHash.update(e),this}digestInto(e){Ju(this),jv(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:r,blockLen:a,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=r,e.blockLen=a,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const zL=(s,e,t)=>new GL(s,e).update(t).digest();zL.create=(s,e)=>new GL(s,e);function g6(s,e,t,n){if(typeof s.setBigUint64=="function")return s.setBigUint64(e,t,n);const i=BigInt(32),r=BigInt(4294967295),a=Number(t>>i&r),l=Number(t&r),u=n?4:0,h=n?0:4;s.setUint32(e+u,a,n),s.setUint32(e+h,l,n)}class $L extends qv{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ax(this.buffer)}update(e){Ju(this);const{view:t,buffer:n,blockLen:i}=this;e=vm(e);const r=e.length;for(let a=0;a<r;){const l=Math.min(i-this.pos,r-a);if(l===i){const u=Ax(e);for(;i<=r-a;a+=i)this.process(u,a);continue}n.set(e.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ju(this),UL(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:r}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let g=a;g<i;g++)t[g]=0;g6(n,i-8,BigInt(this.length*8),r),this.process(n,0);const l=Ax(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=u/4,d=this.get();if(h>d.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<h;g++)l.setUint32(4*g,d[g],r)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:r,destroyed:a,pos:l}=this;return e.length=i,e.pos=l,e.finished=r,e.destroyed=a,i%t&&e.buffer.set(n),e}}const m6=(s,e,t)=>s&e^~s&t,p6=(s,e,t)=>s&e^s&t^e&t,y6=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pa=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Na=new Uint32Array(64);class x6 extends $L{constructor(){super(64,32,8,!1),this.A=Pa[0]|0,this.B=Pa[1]|0,this.C=Pa[2]|0,this.D=Pa[3]|0,this.E=Pa[4]|0,this.F=Pa[5]|0,this.G=Pa[6]|0,this.H=Pa[7]|0}get(){const{A:e,B:t,C:n,D:i,E:r,F:a,G:l,H:u}=this;return[e,t,n,i,r,a,l,u]}set(e,t,n,i,r,a,l,u){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=r|0,this.F=a|0,this.G=l|0,this.H=u|0}process(e,t){for(let g=0;g<16;g++,t+=4)Na[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const p=Na[g-15],y=Na[g-2],v=Mi(p,7)^Mi(p,18)^p>>>3,b=Mi(y,17)^Mi(y,19)^y>>>10;Na[g]=b+Na[g-7]+v+Na[g-16]|0}let{A:n,B:i,C:r,D:a,E:l,F:u,G:h,H:d}=this;for(let g=0;g<64;g++){const p=Mi(l,6)^Mi(l,11)^Mi(l,25),y=d+p+m6(l,u,h)+y6[g]+Na[g]|0,b=(Mi(n,2)^Mi(n,13)^Mi(n,22))+p6(n,i,r)|0;d=h,h=u,u=l,l=a+y|0,a=r,r=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,r=r+this.C|0,a=a+this.D|0,l=l+this.E|0,u=u+this.F|0,h=h+this.G|0,d=d+this.H|0,this.set(n,i,r,a,l,u,h,d)}roundClean(){Na.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const VL=Qv(()=>new x6),k2=BigInt(2**32-1),k3=BigInt(32);function YL(s,e=!1){return e?{h:Number(s&k2),l:Number(s>>k3&k2)}:{h:Number(s>>k3&k2)|0,l:Number(s&k2)|0}}function KL(s,e=!1){let t=new Uint32Array(s.length),n=new Uint32Array(s.length);for(let i=0;i<s.length;i++){const{h:r,l:a}=YL(s[i],e);[t[i],n[i]]=[r,a]}return[t,n]}const v6=(s,e)=>BigInt(s>>>0)<<k3|BigInt(e>>>0),b6=(s,e,t)=>s>>>t,E6=(s,e,t)=>s<<32-t|e>>>t,w6=(s,e,t)=>s>>>t|e<<32-t,A6=(s,e,t)=>s<<32-t|e>>>t,T6=(s,e,t)=>s<<64-t|e>>>t-32,S6=(s,e,t)=>s>>>t-32|e<<64-t,_6=(s,e)=>e,R6=(s,e)=>s,jL=(s,e,t)=>s<<t|e>>>32-t,qL=(s,e,t)=>e<<t|s>>>32-t,QL=(s,e,t)=>e<<t-32|s>>>64-t,WL=(s,e,t)=>s<<t-32|e>>>64-t;function k6(s,e,t,n){const i=(e>>>0)+(n>>>0);return{h:s+t+(i/2**32|0)|0,l:i|0}}const L6=(s,e,t)=>(s>>>0)+(e>>>0)+(t>>>0),D6=(s,e,t,n)=>e+t+n+(s/2**32|0)|0,C6=(s,e,t,n)=>(s>>>0)+(e>>>0)+(t>>>0)+(n>>>0),I6=(s,e,t,n,i)=>e+t+n+i+(s/2**32|0)|0,O6=(s,e,t,n,i)=>(s>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),M6=(s,e,t,n,i,r)=>e+t+n+i+r+(s/2**32|0)|0,je={fromBig:YL,split:KL,toBig:v6,shrSH:b6,shrSL:E6,rotrSH:w6,rotrSL:A6,rotrBH:T6,rotrBL:S6,rotr32H:_6,rotr32L:R6,rotlSH:jL,rotlSL:qL,rotlBH:QL,rotlBL:WL,add:k6,add3L:L6,add3H:D6,add4L:C6,add4H:I6,add5H:M6,add5L:O6},[P6,N6]=je.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(s=>BigInt(s))),Ba=new Uint32Array(80),Fa=new Uint32Array(80);class B6 extends $L{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:r,Cl:a,Dh:l,Dl:u,Eh:h,El:d,Fh:g,Fl:p,Gh:y,Gl:v,Hh:b,Hl:w}=this;return[e,t,n,i,r,a,l,u,h,d,g,p,y,v,b,w]}set(e,t,n,i,r,a,l,u,h,d,g,p,y,v,b,w){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=r|0,this.Cl=a|0,this.Dh=l|0,this.Dl=u|0,this.Eh=h|0,this.El=d|0,this.Fh=g|0,this.Fl=p|0,this.Gh=y|0,this.Gl=v|0,this.Hh=b|0,this.Hl=w|0}process(e,t){for(let T=0;T<16;T++,t+=4)Ba[T]=e.getUint32(t),Fa[T]=e.getUint32(t+=4);for(let T=16;T<80;T++){const D=Ba[T-15]|0,L=Fa[T-15]|0,B=je.rotrSH(D,L,1)^je.rotrSH(D,L,8)^je.shrSH(D,L,7),M=je.rotrSL(D,L,1)^je.rotrSL(D,L,8)^je.shrSL(D,L,7),I=Ba[T-2]|0,N=Fa[T-2]|0,P=je.rotrSH(I,N,19)^je.rotrBH(I,N,61)^je.shrSH(I,N,6),z=je.rotrSL(I,N,19)^je.rotrBL(I,N,61)^je.shrSL(I,N,6),te=je.add4L(M,z,Fa[T-7],Fa[T-16]),ye=je.add4H(te,B,P,Ba[T-7],Ba[T-16]);Ba[T]=ye|0,Fa[T]=te|0}let{Ah:n,Al:i,Bh:r,Bl:a,Ch:l,Cl:u,Dh:h,Dl:d,Eh:g,El:p,Fh:y,Fl:v,Gh:b,Gl:w,Hh:A,Hl:S}=this;for(let T=0;T<80;T++){const D=je.rotrSH(g,p,14)^je.rotrSH(g,p,18)^je.rotrBH(g,p,41),L=je.rotrSL(g,p,14)^je.rotrSL(g,p,18)^je.rotrBL(g,p,41),B=g&y^~g&b,M=p&v^~p&w,I=je.add5L(S,L,M,N6[T],Fa[T]),N=je.add5H(I,A,D,B,P6[T],Ba[T]),P=I|0,z=je.rotrSH(n,i,28)^je.rotrBH(n,i,34)^je.rotrBH(n,i,39),te=je.rotrSL(n,i,28)^je.rotrBL(n,i,34)^je.rotrBL(n,i,39),ye=n&r^n&l^r&l,me=i&a^i&u^a&u;A=b|0,S=w|0,b=y|0,w=v|0,y=g|0,v=p|0,{h:g,l:p}=je.add(h|0,d|0,N|0,P|0),h=l|0,d=u|0,l=r|0,u=a|0,r=n|0,a=i|0;const K=je.add3L(P,te,me);n=je.add3H(K,N,z,ye),i=K|0}({h:n,l:i}=je.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:r,l:a}=je.add(this.Bh|0,this.Bl|0,r|0,a|0),{h:l,l:u}=je.add(this.Ch|0,this.Cl|0,l|0,u|0),{h,l:d}=je.add(this.Dh|0,this.Dl|0,h|0,d|0),{h:g,l:p}=je.add(this.Eh|0,this.El|0,g|0,p|0),{h:y,l:v}=je.add(this.Fh|0,this.Fl|0,y|0,v|0),{h:b,l:w}=je.add(this.Gh|0,this.Gl|0,b|0,w|0),{h:A,l:S}=je.add(this.Hh|0,this.Hl|0,A|0,S|0),this.set(n,i,r,a,l,u,h,d,g,p,y,v,b,w,A,S)}roundClean(){Ba.fill(0),Fa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const F6=Qv(()=>new B6);function U6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const oS=U6(),lS=oS.crypto||oS.msCrypto;function H6(s){switch(s){case"sha256":return VL.create();case"sha512":return F6.create()}V(!1,"invalid hashing algorithm name","algorithm",s)}function G6(s){de(lS!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),V(Number.isInteger(s)&&s>0&&s<=1024,"invalid length","length",s);const e=new Uint8Array(s);return lS.getRandomValues(e),e}const[XL,ZL,JL]=[[],[],[]],z6=BigInt(0),yf=BigInt(1),$6=BigInt(2),V6=BigInt(7),Y6=BigInt(256),K6=BigInt(113);for(let s=0,e=yf,t=1,n=0;s<24;s++){[t,n]=[n,(2*t+3*n)%5],XL.push(2*(5*n+t)),ZL.push((s+1)*(s+2)/2%64);let i=z6;for(let r=0;r<7;r++)e=(e<<yf^(e>>V6)*K6)%Y6,e&$6&&(i^=yf<<(yf<<BigInt(r))-yf);JL.push(i)}const[j6,q6]=KL(JL,!0),cS=(s,e,t)=>t>32?QL(s,e,t):jL(s,e,t),uS=(s,e,t)=>t>32?WL(s,e,t):qL(s,e,t);function Q6(s,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let a=0;a<10;a++)t[a]=s[a]^s[a+10]^s[a+20]^s[a+30]^s[a+40];for(let a=0;a<10;a+=2){const l=(a+8)%10,u=(a+2)%10,h=t[u],d=t[u+1],g=cS(h,d,1)^t[l],p=uS(h,d,1)^t[l+1];for(let y=0;y<50;y+=10)s[a+y]^=g,s[a+y+1]^=p}let i=s[2],r=s[3];for(let a=0;a<24;a++){const l=ZL[a],u=cS(i,r,l),h=uS(i,r,l),d=XL[a];i=s[d],r=s[d+1],s[d]=u,s[d+1]=h}for(let a=0;a<50;a+=10){for(let l=0;l<10;l++)t[l]=s[a+l];for(let l=0;l<10;l++)s[a+l]^=~t[(l+2)%10]&t[(l+4)%10]}s[0]^=j6[n],s[1]^=q6[n]}t.fill(0)}let W6=class eD extends qv{constructor(e,t,n,i=!1,r=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Bg(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=c6(this.state)}keccak(){Q6(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Ju(this);const{blockLen:t,state:n}=this;e=vm(e);const i=e.length;for(let r=0;r<i;){const a=Math.min(t-this.pos,i-r);for(let l=0;l<a;l++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,(t&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ju(this,!1),jv(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,r=e.length;i<r;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,r-i);e.set(t.subarray(this.posOut,this.posOut+a),i),this.posOut+=a,i+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Bg(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(UL(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:r,enableXOF:a}=this;return e||(e=new eD(t,n,i,a,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}};const X6=(s,e,t)=>Qv(()=>new W6(e,s,t)),Z6=X6(1,136,256/8);let tD=!1;const nD=function(s){return Z6(s)};let sD=nD;function Zt(s){const e=it(s,"data");return we(sD(e))}Zt._=nD;Zt.lock=function(){tD=!0};Zt.register=function(s){if(tD)throw new TypeError("keccak256 is locked");sD=s};Object.freeze(Zt);let iD=!1;const rD=function(s){return new Uint8Array(G6(s))};let aD=rD;function Hd(s){return aD(s)}Hd._=rD;Hd.lock=function(){iD=!0};Hd.register=function(s){if(iD)throw new Error("randomBytes is locked");aD=s};Object.freeze(Hd);const oD=function(s){return H6("sha256").update(s).digest()};let lD=oD,cD=!1;function hh(s){const e=it(s,"data");return we(lD(e))}hh._=oD;hh.lock=function(){cD=!0};hh.register=function(s){if(cD)throw new Error("sha256 is locked");lD=s};Object.freeze(hh);Object.freeze(hh);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uD=BigInt(0),bm=BigInt(1),J6=BigInt(2),Em=s=>s instanceof Uint8Array,eH=Array.from({length:256},(s,e)=>e.toString(16).padStart(2,"0"));function eh(s){if(!Em(s))throw new Error("Uint8Array expected");let e="";for(let t=0;t<s.length;t++)e+=eH[s[t]];return e}function hD(s){const e=s.toString(16);return e.length&1?`0${e}`:e}function Wv(s){if(typeof s!="string")throw new Error("hex string expected, got "+typeof s);return BigInt(s===""?"0":`0x${s}`)}function th(s){if(typeof s!="string")throw new Error("hex string expected, got "+typeof s);const e=s.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let n=0;n<t.length;n++){const i=n*2,r=s.slice(i,i+2),a=Number.parseInt(r,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");t[n]=a}return t}function Pl(s){return Wv(eh(s))}function Xv(s){if(!Em(s))throw new Error("Uint8Array expected");return Wv(eh(Uint8Array.from(s).reverse()))}function nh(s,e){return th(s.toString(16).padStart(e*2,"0"))}function Zv(s,e){return nh(s,e).reverse()}function tH(s){return th(hD(s))}function ui(s,e,t){let n;if(typeof e=="string")try{n=th(e)}catch(r){throw new Error(`${s} must be valid hex string, got "${e}". Cause: ${r}`)}else if(Em(e))n=Uint8Array.from(e);else throw new Error(`${s} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${s} expected ${t} bytes, got ${i}`);return n}function ld(...s){const e=new Uint8Array(s.reduce((n,i)=>n+i.length,0));let t=0;return s.forEach(n=>{if(!Em(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}function nH(s,e){if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!==e[t])return!1;return!0}function sH(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function iH(s){let e;for(e=0;s>uD;s>>=bm,e+=1);return e}function rH(s,e){return s>>BigInt(e)&bm}const aH=(s,e,t)=>s|(t?bm:uD)<<BigInt(e),Jv=s=>(J6<<BigInt(s-1))-bm,Tx=s=>new Uint8Array(s),hS=s=>Uint8Array.from(s);function fD(s,e,t){if(typeof s!="number"||s<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=Tx(s),i=Tx(s),r=0;const a=()=>{n.fill(1),i.fill(0),r=0},l=(...g)=>t(i,n,...g),u=(g=Tx())=>{i=l(hS([0]),g),n=l(),g.length!==0&&(i=l(hS([1]),g),n=l())},h=()=>{if(r++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const p=[];for(;g<e;){n=l();const y=n.slice();p.push(y),g+=n.length}return ld(...p)};return(g,p)=>{a(),u(g);let y;for(;!(y=p(h()));)u();return a(),y}}const oH={bigint:s=>typeof s=="bigint",function:s=>typeof s=="function",boolean:s=>typeof s=="boolean",string:s=>typeof s=="string",stringOrUint8Array:s=>typeof s=="string"||s instanceof Uint8Array,isSafeInteger:s=>Number.isSafeInteger(s),array:s=>Array.isArray(s),field:(s,e)=>e.Fp.isValid(s),hash:s=>typeof s=="function"&&Number.isSafeInteger(s.outputLen)};function Gd(s,e,t={}){const n=(i,r,a)=>{const l=oH[r];if(typeof l!="function")throw new Error(`Invalid validator "${r}", expected function`);const u=s[i];if(!(a&&u===void 0)&&!l(u,s))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${r}`)};for(const[i,r]of Object.entries(e))n(i,r,!1);for(const[i,r]of Object.entries(t))n(i,r,!0);return s}const lH=Object.freeze(Object.defineProperty({__proto__:null,bitGet:rH,bitLen:iH,bitMask:Jv,bitSet:aH,bytesToHex:eh,bytesToNumberBE:Pl,bytesToNumberLE:Xv,concatBytes:ld,createHmacDrbg:fD,ensureBytes:ui,equalBytes:nH,hexToBytes:th,hexToNumber:Wv,numberToBytesBE:nh,numberToBytesLE:Zv,numberToHexUnpadded:hD,numberToVarBytesBE:tH,utf8ToBytes:sH,validateObject:Gd},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wn=BigInt(0),Wt=BigInt(1),rl=BigInt(2),cH=BigInt(3),L3=BigInt(4),fS=BigInt(5),dS=BigInt(8);BigInt(9);BigInt(16);function as(s,e){const t=s%e;return t>=wn?t:e+t}function uH(s,e,t){if(t<=wn||e<wn)throw new Error("Expected power/modulo > 0");if(t===Wt)return wn;let n=Wt;for(;e>wn;)e&Wt&&(n=n*s%t),s=s*s%t,e>>=Wt;return n}function zs(s,e,t){let n=s;for(;e-- >wn;)n*=n,n%=t;return n}function D3(s,e){if(s===wn||e<=wn)throw new Error(`invert: expected positive integers, got n=${s} mod=${e}`);let t=as(s,e),n=e,i=wn,r=Wt;for(;t!==wn;){const l=n/t,u=n%t,h=i-r*l;n=t,t=u,i=r,r=h}if(n!==Wt)throw new Error("invert: does not exist");return as(i,e)}function hH(s){const e=(s-Wt)/rl;let t,n,i;for(t=s-Wt,n=0;t%rl===wn;t/=rl,n++);for(i=rl;i<s&&uH(i,e,s)!==s-Wt;i++);if(n===1){const a=(s+Wt)/L3;return function(u,h){const d=u.pow(h,a);if(!u.eql(u.sqr(d),h))throw new Error("Cannot find square root");return d}}const r=(t+Wt)/rl;return function(l,u){if(l.pow(u,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let h=n,d=l.pow(l.mul(l.ONE,i),t),g=l.pow(u,r),p=l.pow(u,t);for(;!l.eql(p,l.ONE);){if(l.eql(p,l.ZERO))return l.ZERO;let y=1;for(let b=l.sqr(p);y<h&&!l.eql(b,l.ONE);y++)b=l.sqr(b);const v=l.pow(d,Wt<<BigInt(h-y-1));d=l.sqr(v),g=l.mul(g,v),p=l.mul(p,d),h=y}return g}}function fH(s){if(s%L3===cH){const e=(s+Wt)/L3;return function(n,i){const r=n.pow(i,e);if(!n.eql(n.sqr(r),i))throw new Error("Cannot find square root");return r}}if(s%dS===fS){const e=(s-fS)/dS;return function(n,i){const r=n.mul(i,rl),a=n.pow(r,e),l=n.mul(i,a),u=n.mul(n.mul(l,rl),a),h=n.mul(l,n.sub(u,n.ONE));if(!n.eql(n.sqr(h),i))throw new Error("Cannot find square root");return h}}return hH(s)}const dH=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gH(s){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=dH.reduce((n,i)=>(n[i]="function",n),e);return Gd(s,t)}function mH(s,e,t){if(t<wn)throw new Error("Expected power > 0");if(t===wn)return s.ONE;if(t===Wt)return e;let n=s.ONE,i=e;for(;t>wn;)t&Wt&&(n=s.mul(n,i)),i=s.sqr(i),t>>=Wt;return n}function pH(s,e){const t=new Array(e.length),n=e.reduce((r,a,l)=>s.is0(a)?r:(t[l]=r,s.mul(r,a)),s.ONE),i=s.inv(n);return e.reduceRight((r,a,l)=>s.is0(a)?r:(t[l]=s.mul(r,t[l]),s.mul(r,a)),i),t}function dD(s,e){const t=e!==void 0?e:s.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function yH(s,e,t=!1,n={}){if(s<=wn)throw new Error(`Expected Field ORDER > 0, got ${s}`);const{nBitLength:i,nByteLength:r}=dD(s,e);if(r>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=fH(s),l=Object.freeze({ORDER:s,BITS:i,BYTES:r,MASK:Jv(i),ZERO:wn,ONE:Wt,create:u=>as(u,s),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return wn<=u&&u<s},is0:u=>u===wn,isOdd:u=>(u&Wt)===Wt,neg:u=>as(-u,s),eql:(u,h)=>u===h,sqr:u=>as(u*u,s),add:(u,h)=>as(u+h,s),sub:(u,h)=>as(u-h,s),mul:(u,h)=>as(u*h,s),pow:(u,h)=>mH(l,u,h),div:(u,h)=>as(u*D3(h,s),s),sqrN:u=>u*u,addN:(u,h)=>u+h,subN:(u,h)=>u-h,mulN:(u,h)=>u*h,inv:u=>D3(u,s),sqrt:n.sqrt||(u=>a(l,u)),invertBatch:u=>pH(l,u),cmov:(u,h,d)=>d?h:u,toBytes:u=>t?Zv(u,r):nh(u,r),fromBytes:u=>{if(u.length!==r)throw new Error(`Fp.fromBytes: expected ${r}, got ${u.length}`);return t?Xv(u):Pl(u)}});return Object.freeze(l)}function gD(s){if(typeof s!="bigint")throw new Error("field order must be bigint");const e=s.toString(2).length;return Math.ceil(e/8)}function mD(s){const e=gD(s);return e+Math.ceil(e/2)}function xH(s,e,t=!1){const n=s.length,i=gD(e),r=mD(e);if(n<16||n<r||n>1024)throw new Error(`expected ${r}-1024 bytes of input, got ${n}`);const a=t?Pl(s):Xv(s),l=as(a,e-Wt)+Wt;return t?Zv(l,i):nh(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vH=BigInt(0),Sx=BigInt(1);function bH(s,e){const t=(i,r)=>{const a=r.negate();return i?a:r},n=i=>{const r=Math.ceil(e/i)+1,a=2**(i-1);return{windows:r,windowSize:a}};return{constTimeNegate:t,unsafeLadder(i,r){let a=s.ZERO,l=i;for(;r>vH;)r&Sx&&(a=a.add(l)),l=l.double(),r>>=Sx;return a},precomputeWindow(i,r){const{windows:a,windowSize:l}=n(r),u=[];let h=i,d=h;for(let g=0;g<a;g++){d=h,u.push(d);for(let p=1;p<l;p++)d=d.add(h),u.push(d);h=d.double()}return u},wNAF(i,r,a){const{windows:l,windowSize:u}=n(i);let h=s.ZERO,d=s.BASE;const g=BigInt(2**i-1),p=2**i,y=BigInt(i);for(let v=0;v<l;v++){const b=v*u;let w=Number(a&g);a>>=y,w>u&&(w-=p,a+=Sx);const A=b,S=b+Math.abs(w)-1,T=v%2!==0,D=w<0;w===0?d=d.add(t(T,r[A])):h=h.add(t(D,r[S]))}return{p:h,f:d}},wNAFCached(i,r,a,l){const u=i._WINDOW_SIZE||1;let h=r.get(i);return h||(h=this.precomputeWindow(i,u),u!==1&&r.set(i,l(h))),this.wNAF(u,h,a)}}}function pD(s){return gH(s.Fp),Gd(s,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...dD(s.n,s.nBitLength),...s,p:s.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function EH(s){const e=pD(s);Gd(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:wH,hexToBytes:AH}=lH,cl={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(s){const{Err:e}=cl;if(s.length<2||s[0]!==2)throw new e("Invalid signature integer tag");const t=s[1],n=s.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:wH(n),l:s.subarray(t+2)}},toSig(s){const{Err:e}=cl,t=typeof s=="string"?AH(s):s;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:r}=cl._parseInt(t.subarray(2)),{d:a,l}=cl._parseInt(r);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(s){const e=h=>Number.parseInt(h[0],16)&8?"00"+h:h,t=h=>{const d=h.toString(16);return d.length&1?`0${d}`:d},n=e(t(s.s)),i=e(t(s.r)),r=n.length/2,a=i.length/2,l=t(r),u=t(a);return`30${t(a+r+4)}02${u}${i}02${l}${n}`}},Jr=BigInt(0),Xs=BigInt(1);BigInt(2);const gS=BigInt(3);BigInt(4);function TH(s){const e=EH(s),{Fp:t}=e,n=e.toBytes||((v,b,w)=>{const A=b.toAffine();return ld(Uint8Array.from([4]),t.toBytes(A.x),t.toBytes(A.y))}),i=e.fromBytes||(v=>{const b=v.subarray(1),w=t.fromBytes(b.subarray(0,t.BYTES)),A=t.fromBytes(b.subarray(t.BYTES,2*t.BYTES));return{x:w,y:A}});function r(v){const{a:b,b:w}=e,A=t.sqr(v),S=t.mul(A,v);return t.add(t.add(S,t.mul(v,b)),w)}if(!t.eql(t.sqr(e.Gy),r(e.Gx)))throw new Error("bad generator point: equation left != right");function a(v){return typeof v=="bigint"&&Jr<v&&v<e.n}function l(v){if(!a(v))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(v){const{allowedPrivateKeyLengths:b,nByteLength:w,wrapPrivateKey:A,n:S}=e;if(b&&typeof v!="bigint"){if(v instanceof Uint8Array&&(v=eh(v)),typeof v!="string"||!b.includes(v.length))throw new Error("Invalid key");v=v.padStart(w*2,"0")}let T;try{T=typeof v=="bigint"?v:Pl(ui("private key",v,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof v}`)}return A&&(T=as(T,S)),l(T),T}const h=new Map;function d(v){if(!(v instanceof g))throw new Error("ProjectivePoint expected")}class g{constructor(b,w,A){if(this.px=b,this.py=w,this.pz=A,b==null||!t.isValid(b))throw new Error("x required");if(w==null||!t.isValid(w))throw new Error("y required");if(A==null||!t.isValid(A))throw new Error("z required")}static fromAffine(b){const{x:w,y:A}=b||{};if(!b||!t.isValid(w)||!t.isValid(A))throw new Error("invalid affine point");if(b instanceof g)throw new Error("projective point not allowed");const S=T=>t.eql(T,t.ZERO);return S(w)&&S(A)?g.ZERO:new g(w,A,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const w=t.invertBatch(b.map(A=>A.pz));return b.map((A,S)=>A.toAffine(w[S])).map(g.fromAffine)}static fromHex(b){const w=g.fromAffine(i(ui("pointHex",b)));return w.assertValidity(),w}static fromPrivateKey(b){return g.BASE.multiply(u(b))}_setWindowSize(b){this._WINDOW_SIZE=b,h.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:b,y:w}=this.toAffine();if(!t.isValid(b)||!t.isValid(w))throw new Error("bad point: x or y not FE");const A=t.sqr(w),S=r(b);if(!t.eql(A,S))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(t.isOdd)return!t.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){d(b);const{px:w,py:A,pz:S}=this,{px:T,py:D,pz:L}=b,B=t.eql(t.mul(w,L),t.mul(T,S)),M=t.eql(t.mul(A,L),t.mul(D,S));return B&&M}negate(){return new g(this.px,t.neg(this.py),this.pz)}double(){const{a:b,b:w}=e,A=t.mul(w,gS),{px:S,py:T,pz:D}=this;let L=t.ZERO,B=t.ZERO,M=t.ZERO,I=t.mul(S,S),N=t.mul(T,T),P=t.mul(D,D),z=t.mul(S,T);return z=t.add(z,z),M=t.mul(S,D),M=t.add(M,M),L=t.mul(b,M),B=t.mul(A,P),B=t.add(L,B),L=t.sub(N,B),B=t.add(N,B),B=t.mul(L,B),L=t.mul(z,L),M=t.mul(A,M),P=t.mul(b,P),z=t.sub(I,P),z=t.mul(b,z),z=t.add(z,M),M=t.add(I,I),I=t.add(M,I),I=t.add(I,P),I=t.mul(I,z),B=t.add(B,I),P=t.mul(T,D),P=t.add(P,P),I=t.mul(P,z),L=t.sub(L,I),M=t.mul(P,N),M=t.add(M,M),M=t.add(M,M),new g(L,B,M)}add(b){d(b);const{px:w,py:A,pz:S}=this,{px:T,py:D,pz:L}=b;let B=t.ZERO,M=t.ZERO,I=t.ZERO;const N=e.a,P=t.mul(e.b,gS);let z=t.mul(w,T),te=t.mul(A,D),ye=t.mul(S,L),me=t.add(w,A),K=t.add(T,D);me=t.mul(me,K),K=t.add(z,te),me=t.sub(me,K),K=t.add(w,S);let G=t.add(T,L);return K=t.mul(K,G),G=t.add(z,ye),K=t.sub(K,G),G=t.add(A,S),B=t.add(D,L),G=t.mul(G,B),B=t.add(te,ye),G=t.sub(G,B),I=t.mul(N,K),B=t.mul(P,ye),I=t.add(B,I),B=t.sub(te,I),I=t.add(te,I),M=t.mul(B,I),te=t.add(z,z),te=t.add(te,z),ye=t.mul(N,ye),K=t.mul(P,K),te=t.add(te,ye),ye=t.sub(z,ye),ye=t.mul(N,ye),K=t.add(K,ye),z=t.mul(te,K),M=t.add(M,z),z=t.mul(G,K),B=t.mul(me,B),B=t.sub(B,z),z=t.mul(me,te),I=t.mul(G,I),I=t.add(I,z),new g(B,M,I)}subtract(b){return this.add(b.negate())}is0(){return this.equals(g.ZERO)}wNAF(b){return y.wNAFCached(this,h,b,w=>{const A=t.invertBatch(w.map(S=>S.pz));return w.map((S,T)=>S.toAffine(A[T])).map(g.fromAffine)})}multiplyUnsafe(b){const w=g.ZERO;if(b===Jr)return w;if(l(b),b===Xs)return this;const{endo:A}=e;if(!A)return y.unsafeLadder(this,b);let{k1neg:S,k1:T,k2neg:D,k2:L}=A.splitScalar(b),B=w,M=w,I=this;for(;T>Jr||L>Jr;)T&Xs&&(B=B.add(I)),L&Xs&&(M=M.add(I)),I=I.double(),T>>=Xs,L>>=Xs;return S&&(B=B.negate()),D&&(M=M.negate()),M=new g(t.mul(M.px,A.beta),M.py,M.pz),B.add(M)}multiply(b){l(b);let w=b,A,S;const{endo:T}=e;if(T){const{k1neg:D,k1:L,k2neg:B,k2:M}=T.splitScalar(w);let{p:I,f:N}=this.wNAF(L),{p:P,f:z}=this.wNAF(M);I=y.constTimeNegate(D,I),P=y.constTimeNegate(B,P),P=new g(t.mul(P.px,T.beta),P.py,P.pz),A=I.add(P),S=N.add(z)}else{const{p:D,f:L}=this.wNAF(w);A=D,S=L}return g.normalizeZ([A,S])[0]}multiplyAndAddUnsafe(b,w,A){const S=g.BASE,T=(L,B)=>B===Jr||B===Xs||!L.equals(S)?L.multiplyUnsafe(B):L.multiply(B),D=T(this,w).add(T(b,A));return D.is0()?void 0:D}toAffine(b){const{px:w,py:A,pz:S}=this,T=this.is0();b==null&&(b=T?t.ONE:t.inv(S));const D=t.mul(w,b),L=t.mul(A,b),B=t.mul(S,b);if(T)return{x:t.ZERO,y:t.ZERO};if(!t.eql(B,t.ONE))throw new Error("invZ was invalid");return{x:D,y:L}}isTorsionFree(){const{h:b,isTorsionFree:w}=e;if(b===Xs)return!0;if(w)return w(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:w}=e;return b===Xs?this:w?w(g,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return this.assertValidity(),n(g,this,b)}toHex(b=!0){return eh(this.toRawBytes(b))}}g.BASE=new g(e.Gx,e.Gy,t.ONE),g.ZERO=new g(t.ZERO,t.ONE,t.ZERO);const p=e.nBitLength,y=bH(g,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:u,weierstrassEquation:r,isWithinCurveOrder:a}}function SH(s){const e=pD(s);return Gd(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function _H(s){const e=SH(s),{Fp:t,n}=e,i=t.BYTES+1,r=2*t.BYTES+1;function a(K){return Jr<K&&K<t.ORDER}function l(K){return as(K,n)}function u(K){return D3(K,n)}const{ProjectivePoint:h,normPrivateKeyToScalar:d,weierstrassEquation:g,isWithinCurveOrder:p}=TH({...e,toBytes(K,G,J){const se=G.toAffine(),X=t.toBytes(se.x),C=ld;return J?C(Uint8Array.from([G.hasEvenY()?2:3]),X):C(Uint8Array.from([4]),X,t.toBytes(se.y))},fromBytes(K){const G=K.length,J=K[0],se=K.subarray(1);if(G===i&&(J===2||J===3)){const X=Pl(se);if(!a(X))throw new Error("Point is not on curve");const C=g(X);let j=t.sqrt(C);const re=(j&Xs)===Xs;return(J&1)===1!==re&&(j=t.neg(j)),{x:X,y:j}}else if(G===r&&J===4){const X=t.fromBytes(se.subarray(0,t.BYTES)),C=t.fromBytes(se.subarray(t.BYTES,2*t.BYTES));return{x:X,y:C}}else throw new Error(`Point of length ${G} was invalid. Expected ${i} compressed bytes or ${r} uncompressed bytes`)}}),y=K=>eh(nh(K,e.nByteLength));function v(K){const G=n>>Xs;return K>G}function b(K){return v(K)?l(-K):K}const w=(K,G,J)=>Pl(K.slice(G,J));class A{constructor(G,J,se){this.r=G,this.s=J,this.recovery=se,this.assertValidity()}static fromCompact(G){const J=e.nByteLength;return G=ui("compactSignature",G,J*2),new A(w(G,0,J),w(G,J,2*J))}static fromDER(G){const{r:J,s:se}=cl.toSig(ui("DER",G));return new A(J,se)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(G){return new A(this.r,this.s,G)}recoverPublicKey(G){const{r:J,s:se,recovery:X}=this,C=M(ui("msgHash",G));if(X==null||![0,1,2,3].includes(X))throw new Error("recovery id invalid");const j=X===2||X===3?J+e.n:J;if(j>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const re=(X&1)===0?"02":"03",le=h.fromHex(re+y(j)),ae=u(j),ve=l(-C*ae),xe=l(se*ae),ze=h.BASE.multiplyAndAddUnsafe(le,ve,xe);if(!ze)throw new Error("point at infinify");return ze.assertValidity(),ze}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return th(this.toDERHex())}toDERHex(){return cl.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return th(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const S={isValidPrivateKey(K){try{return d(K),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const K=mD(e.n);return xH(e.randomBytes(K),e.n)},precompute(K=8,G=h.BASE){return G._setWindowSize(K),G.multiply(BigInt(3)),G}};function T(K,G=!0){return h.fromPrivateKey(K).toRawBytes(G)}function D(K){const G=K instanceof Uint8Array,J=typeof K=="string",se=(G||J)&&K.length;return G?se===i||se===r:J?se===2*i||se===2*r:K instanceof h}function L(K,G,J=!0){if(D(K))throw new Error("first arg must be private key");if(!D(G))throw new Error("second arg must be public key");return h.fromHex(G).multiply(d(K)).toRawBytes(J)}const B=e.bits2int||function(K){const G=Pl(K),J=K.length*8-e.nBitLength;return J>0?G>>BigInt(J):G},M=e.bits2int_modN||function(K){return l(B(K))},I=Jv(e.nBitLength);function N(K){if(typeof K!="bigint")throw new Error("bigint expected");if(!(Jr<=K&&K<I))throw new Error(`bigint expected < 2^${e.nBitLength}`);return nh(K,e.nByteLength)}function P(K,G,J=z){if(["recovered","canonical"].some(Ne=>Ne in J))throw new Error("sign() legacy options not supported");const{hash:se,randomBytes:X}=e;let{lowS:C,prehash:j,extraEntropy:re}=J;C==null&&(C=!0),K=ui("msgHash",K),j&&(K=ui("prehashed msgHash",se(K)));const le=M(K),ae=d(G),ve=[N(ae),N(le)];if(re!=null){const Ne=re===!0?X(t.BYTES):re;ve.push(ui("extraEntropy",Ne))}const xe=ld(...ve),ze=le;function ke(Ne){const Ke=B(Ne);if(!p(Ke))return;const fn=u(Ke),On=h.BASE.multiply(Ke).toAffine(),At=l(On.x);if(At===Jr)return;const dn=l(fn*l(ze+At*ae));if(dn===Jr)return;let Si=(On.x===At?0:2)|Number(On.y&Xs),Fe=dn;return C&&v(dn)&&(Fe=b(dn),Si^=1),new A(At,Fe,Si)}return{seed:xe,k2sig:ke}}const z={lowS:e.lowS,prehash:!1},te={lowS:e.lowS,prehash:!1};function ye(K,G,J=z){const{seed:se,k2sig:X}=P(K,G,J),C=e;return fD(C.hash.outputLen,C.nByteLength,C.hmac)(se,X)}h.BASE._setWindowSize(8);function me(K,G,J,se=te){var On;const X=K;if(G=ui("msgHash",G),J=ui("publicKey",J),"strict"in se)throw new Error("options.strict was renamed to lowS");const{lowS:C,prehash:j}=se;let re,le;try{if(typeof X=="string"||X instanceof Uint8Array)try{re=A.fromDER(X)}catch(At){if(!(At instanceof cl.Err))throw At;re=A.fromCompact(X)}else if(typeof X=="object"&&typeof X.r=="bigint"&&typeof X.s=="bigint"){const{r:At,s:dn}=X;re=new A(At,dn)}else throw new Error("PARSE");le=h.fromHex(J)}catch(At){if(At.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(C&&re.hasHighS())return!1;j&&(G=e.hash(G));const{r:ae,s:ve}=re,xe=M(G),ze=u(ve),ke=l(xe*ze),Ne=l(ae*ze),Ke=(On=h.BASE.multiplyAndAddUnsafe(le,ke,Ne))==null?void 0:On.toAffine();return Ke?l(Ke.x)===ae:!1}return{CURVE:e,getPublicKey:T,getSharedSecret:L,sign:ye,verify:me,ProjectivePoint:h,Signature:A,utils:S}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function RH(s){return{hash:s,hmac:(e,...t)=>zL(s,e,f6(...t)),randomBytes:d6}}function kH(s,e){const t=n=>_H({...s,...RH(n)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yD=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),mS=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),LH=BigInt(1),C3=BigInt(2),pS=(s,e)=>(s+e/C3)/e;function DH(s){const e=yD,t=BigInt(3),n=BigInt(6),i=BigInt(11),r=BigInt(22),a=BigInt(23),l=BigInt(44),u=BigInt(88),h=s*s*s%e,d=h*h*s%e,g=zs(d,t,e)*d%e,p=zs(g,t,e)*d%e,y=zs(p,C3,e)*h%e,v=zs(y,i,e)*y%e,b=zs(v,r,e)*v%e,w=zs(b,l,e)*b%e,A=zs(w,u,e)*w%e,S=zs(A,l,e)*b%e,T=zs(S,t,e)*d%e,D=zs(T,a,e)*v%e,L=zs(D,n,e)*h%e,B=zs(L,C3,e);if(!I3.eql(I3.sqr(B),s))throw new Error("Cannot find square root");return B}const I3=yH(yD,void 0,void 0,{sqrt:DH}),Ga=kH({a:BigInt(0),b:BigInt(7),Fp:I3,n:mS,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:s=>{const e=mS,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-LH*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),r=t,a=BigInt("0x100000000000000000000000000000000"),l=pS(r*s,e),u=pS(-n*s,e);let h=as(s-l*t-u*i,e),d=as(-l*n-u*r,e);const g=h>a,p=d>a;if(g&&(h=e-h),p&&(d=e-d),h>a||d>a)throw new Error("splitScalar: Endomorphism failed, k="+s);return{k1neg:g,k1:h,k2neg:p,k2:d}}}},VL);BigInt(0);Ga.ProjectivePoint;const cd="0x0000000000000000000000000000000000000000",yS="0x0000000000000000000000000000000000000000000000000000000000000000",xS=BigInt(0),vS=BigInt(1),bS=BigInt(2),ES=BigInt(27),wS=BigInt(28),L2=BigInt(35),Hc={};function AS(s){return Ul(Qn(s),32)}var xu,vu,bu,Al;const li=class li{constructor(e,t,n,i){ie(this,xu);ie(this,vu);ie(this,bu);ie(this,Al);Ud(e,Hc,"Signature"),U(this,xu,t),U(this,vu,n),U(this,bu,i),U(this,Al,null)}get r(){return k(this,xu)}set r(e){V(iu(e)===32,"invalid r","value",e),U(this,xu,we(e))}get s(){return k(this,vu)}set s(e){V(iu(e)===32,"invalid s","value",e);const t=we(e);V(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),U(this,vu,t)}get v(){return k(this,bu)}set v(e){const t=Ye(e,"value");V(t===27||t===28,"invalid v","v",e),U(this,bu,t)}get networkV(){return k(this,Al)}get legacyChainId(){const e=this.networkV;return e==null?null:li.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=it(this.s);return this.yParity&&(e[0]|=128),we(e)}get compactSerialized(){return nn([this.r,this.yParityAndS])}get serialized(){return nn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new li(Hc,this.r,this.s,this.v);return this.networkV&&U(e,Al,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=Se(e,"v");return t==ES||t==wS?xS:(V(t>=L2,"invalid EIP-155 v","v",e),(t-L2)/bS)}static getChainIdV(e,t){return Se(e)*bS+BigInt(35+t-27)}static getNormalizedV(e){const t=Se(e);return t===xS||t===ES?27:t===vS||t===wS?28:(V(t>=L2,"invalid v","v",e),t&vS?27:28)}static from(e){function t(h,d){V(h,d,"signature",e)}if(e==null)return new li(Hc,yS,yS,27);if(typeof e=="string"){const h=it(e,"signature");if(h.length===64){const d=we(h.slice(0,32)),g=h.slice(32,64),p=g[0]&128?28:27;return g[0]&=127,new li(Hc,d,we(g),p)}if(h.length===65){const d=we(h.slice(0,32)),g=h.slice(32,64);t((g[0]&128)===0,"non-canonical s");const p=li.getNormalizedV(h[64]);return new li(Hc,d,we(g),p)}t(!1,"invalid raw signature length")}if(e instanceof li)return e.clone();const n=e.r;t(n!=null,"missing r");const i=AS(n),r=function(h,d){if(h!=null)return AS(h);if(d!=null){t(Rt(d,32),"invalid yParityAndS");const g=it(d);return g[0]&=127,we(g)}t(!1,"missing s")}(e.s,e.yParityAndS);t((it(r)[0]&128)==0,"non-canonical s");const{networkV:a,v:l}=function(h,d,g){if(h!=null){const p=Se(h);return{networkV:p>=L2?p:void 0,v:li.getNormalizedV(p)}}if(d!=null)return t(Rt(d,32),"invalid yParityAndS"),{v:it(d)[0]&128?28:27};if(g!=null){switch(Ye(g,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),u=new li(Hc,i,r,l);return a&&U(u,Al,a),t(e.yParity==null||Ye(e.yParity,"sig.yParity")===u.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===u.yParityAndS,"yParityAndS mismatch"),u}};xu=new WeakMap,vu=new WeakMap,bu=new WeakMap,Al=new WeakMap;let bi=li;var $r;const al=class al{constructor(e){ie(this,$r);V(iu(e)===32,"invalid private key","privateKey","[REDACTED]"),U(this,$r,we(e))}get privateKey(){return k(this,$r)}get publicKey(){return al.computePublicKey(k(this,$r))}get compressedPublicKey(){return al.computePublicKey(k(this,$r),!0)}sign(e){V(iu(e)===32,"invalid digest length","digest",e);const t=Ga.sign(qn(e),qn(k(this,$r)),{lowS:!0});return bi.from({r:yo(t.r,32),s:yo(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=al.computePublicKey(e);return we(Ga.getSharedSecret(qn(k(this,$r)),it(t),!1))}static computePublicKey(e,t){let n=it(e,"key");if(n.length===32){const r=Ga.getPublicKey(n,!!t);return we(r)}if(n.length===64){const r=new Uint8Array(65);r[0]=4,r.set(n,1),n=r}const i=Ga.ProjectivePoint.fromHex(n);return we(i.toRawBytes(t))}static recoverPublicKey(e,t){V(iu(e)===32,"invalid digest length","digest",e);const n=bi.from(t);let i=Ga.Signature.fromCompact(qn(nn([n.r,n.s])));i=i.addRecoveryBit(n.yParity);const r=i.recoverPublicKey(qn(e));return V(r!=null,"invalid signautre for digest","signature",t),"0x"+r.toHex(!1)}static addPoints(e,t,n){const i=Ga.ProjectivePoint.fromHex(al.computePublicKey(e).substring(2)),r=Ga.ProjectivePoint.fromHex(al.computePublicKey(t).substring(2));return"0x"+i.add(r).toHex(!!n)}};$r=new WeakMap;let ud=al;const CH=BigInt(0),IH=BigInt(36);function TS(s){s=s.toLowerCase();const e=s.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=it(Zt(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const eb={};for(let s=0;s<10;s++)eb[String(s)]=String(s);for(let s=0;s<26;s++)eb[String.fromCharCode(65+s)]=String(10+s);const SS=15;function OH(s){s=s.toUpperCase(),s=s.substring(4)+s.substring(0,2)+"00";let e=s.split("").map(n=>eb[n]).join("");for(;e.length>=SS;){let n=e.substring(0,SS);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const MH=function(){const s={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];s[t]=BigInt(e)}return s}();function PH(s){s=s.toLowerCase();let e=CH;for(let t=0;t<s.length;t++)e=e*IH+MH[s[t]];return e}function Et(s){if(V(typeof s=="string","invalid address","address",s),s.match(/^(0x)?[0-9a-fA-F]{40}$/)){s.startsWith("0x")||(s="0x"+s);const e=TS(s);return V(!s.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===s,"bad address checksum","address",s),e}if(s.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){V(s.substring(2,4)===OH(s),"bad icap checksum","address",s);let e=PH(s.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return TS("0x"+e)}V(!1,"invalid address","address",s)}function NH(s){const e=Et(s.from);let n=Se(s.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,Et(Yt(Zt(Hl([e,n])),12))}function xD(s){return s&&typeof s.getAddress=="function"}async function _x(s,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(de(typeof s!="string","unconfigured name","UNCONFIGURED_NAME",{value:s}),V(!1,"invalid AddressLike value; did not resolve to a value address","target",s)),Et(t)}function Xn(s,e){if(typeof s=="string")return s.match(/^0x[0-9a-f]{40}$/i)?Et(s):(de(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),_x(s,e.resolveName(s)));if(xD(s))return _x(s,s.getAddress());if(s&&typeof s.then=="function")return _x(s,s);V(!1,"unsupported addressable value","target",s)}const Pr={};function Ee(s,e){let t=!1;return e<0&&(t=!0,e*=-1),new Gn(Pr,`${t?"":"u"}int${e}`,s,{signed:t,width:e})}function ot(s,e){return new Gn(Pr,`bytes${e||""}`,s,{size:e})}const _S=Symbol.for("_ethers_typed");var Tl;const Nr=class Nr{constructor(e,t,n,i){F(this,"type");F(this,"value");ie(this,Tl);F(this,"_typedSymbol");i==null&&(i=null),Ud(Pr,e,"Typed"),Oe(this,{_typedSymbol:_S,type:t,value:n}),U(this,Tl,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return k(this,Tl)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return k(this,Tl)===!0?-1:k(this,Tl)===!1?this.value.length:null}static from(e,t){return new Nr(Pr,e,t)}static uint8(e){return Ee(e,8)}static uint16(e){return Ee(e,16)}static uint24(e){return Ee(e,24)}static uint32(e){return Ee(e,32)}static uint40(e){return Ee(e,40)}static uint48(e){return Ee(e,48)}static uint56(e){return Ee(e,56)}static uint64(e){return Ee(e,64)}static uint72(e){return Ee(e,72)}static uint80(e){return Ee(e,80)}static uint88(e){return Ee(e,88)}static uint96(e){return Ee(e,96)}static uint104(e){return Ee(e,104)}static uint112(e){return Ee(e,112)}static uint120(e){return Ee(e,120)}static uint128(e){return Ee(e,128)}static uint136(e){return Ee(e,136)}static uint144(e){return Ee(e,144)}static uint152(e){return Ee(e,152)}static uint160(e){return Ee(e,160)}static uint168(e){return Ee(e,168)}static uint176(e){return Ee(e,176)}static uint184(e){return Ee(e,184)}static uint192(e){return Ee(e,192)}static uint200(e){return Ee(e,200)}static uint208(e){return Ee(e,208)}static uint216(e){return Ee(e,216)}static uint224(e){return Ee(e,224)}static uint232(e){return Ee(e,232)}static uint240(e){return Ee(e,240)}static uint248(e){return Ee(e,248)}static uint256(e){return Ee(e,256)}static uint(e){return Ee(e,256)}static int8(e){return Ee(e,-8)}static int16(e){return Ee(e,-16)}static int24(e){return Ee(e,-24)}static int32(e){return Ee(e,-32)}static int40(e){return Ee(e,-40)}static int48(e){return Ee(e,-48)}static int56(e){return Ee(e,-56)}static int64(e){return Ee(e,-64)}static int72(e){return Ee(e,-72)}static int80(e){return Ee(e,-80)}static int88(e){return Ee(e,-88)}static int96(e){return Ee(e,-96)}static int104(e){return Ee(e,-104)}static int112(e){return Ee(e,-112)}static int120(e){return Ee(e,-120)}static int128(e){return Ee(e,-128)}static int136(e){return Ee(e,-136)}static int144(e){return Ee(e,-144)}static int152(e){return Ee(e,-152)}static int160(e){return Ee(e,-160)}static int168(e){return Ee(e,-168)}static int176(e){return Ee(e,-176)}static int184(e){return Ee(e,-184)}static int192(e){return Ee(e,-192)}static int200(e){return Ee(e,-200)}static int208(e){return Ee(e,-208)}static int216(e){return Ee(e,-216)}static int224(e){return Ee(e,-224)}static int232(e){return Ee(e,-232)}static int240(e){return Ee(e,-240)}static int248(e){return Ee(e,-248)}static int256(e){return Ee(e,-256)}static int(e){return Ee(e,-256)}static bytes1(e){return ot(e,1)}static bytes2(e){return ot(e,2)}static bytes3(e){return ot(e,3)}static bytes4(e){return ot(e,4)}static bytes5(e){return ot(e,5)}static bytes6(e){return ot(e,6)}static bytes7(e){return ot(e,7)}static bytes8(e){return ot(e,8)}static bytes9(e){return ot(e,9)}static bytes10(e){return ot(e,10)}static bytes11(e){return ot(e,11)}static bytes12(e){return ot(e,12)}static bytes13(e){return ot(e,13)}static bytes14(e){return ot(e,14)}static bytes15(e){return ot(e,15)}static bytes16(e){return ot(e,16)}static bytes17(e){return ot(e,17)}static bytes18(e){return ot(e,18)}static bytes19(e){return ot(e,19)}static bytes20(e){return ot(e,20)}static bytes21(e){return ot(e,21)}static bytes22(e){return ot(e,22)}static bytes23(e){return ot(e,23)}static bytes24(e){return ot(e,24)}static bytes25(e){return ot(e,25)}static bytes26(e){return ot(e,26)}static bytes27(e){return ot(e,27)}static bytes28(e){return ot(e,28)}static bytes29(e){return ot(e,29)}static bytes30(e){return ot(e,30)}static bytes31(e){return ot(e,31)}static bytes32(e){return ot(e,32)}static address(e){return new Nr(Pr,"address",e)}static bool(e){return new Nr(Pr,"bool",!!e)}static bytes(e){return new Nr(Pr,"bytes",e)}static string(e){return new Nr(Pr,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Nr(Pr,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===_S}static dereference(e,t){if(Nr.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};Tl=new WeakMap;let Gn=Nr;class BH extends ua{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=Gn.dereference(t,"string");try{n=Et(n)}catch(i){return this._throwError(i.message,t)}return e.writeValue(n)}decode(e){return Et(yo(e.readValue(),20))}}class FH extends ua{constructor(t){super(t.name,t.type,"_",t.dynamic);F(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,n){return this.coder.encode(t,n)}decode(t){return this.coder.decode(t)}}function vD(s,e,t){let n=[];if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let u={};n=e.map(h=>{const d=h.localName;return de(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:h},value:t}),de(!u[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:h},value:t}),u[d]=!0,t[d]})}else V(!1,"invalid tuple value","tuple",t);V(e.length===n.length,"types/value length mismatch","tuple",t);let i=new S3,r=new S3,a=[];e.forEach((u,h)=>{let d=n[h];if(u.dynamic){let g=r.length;u.encode(r,d);let p=i.writeUpdatableValue();a.push(y=>{p(y+g)})}else u.encode(i,d)}),a.forEach(u=>{u(i.length)});let l=s.appendWriter(i);return l+=s.appendWriter(r),l}function bD(s,e){let t=[],n=[],i=s.subReader(0);return e.forEach(r=>{let a=null;if(r.dynamic){let l=s.readIndex(),u=i.subReader(l);try{a=r.decode(u)}catch(h){if(Dn(h,"BUFFER_OVERRUN"))throw h;a=h,a.baseType=r.name,a.name=r.localName,a.type=r.type}}else try{a=r.decode(s)}catch(l){if(Dn(l,"BUFFER_OVERRUN"))throw l;a=l,a.baseType=r.name,a.name=r.localName,a.type=r.type}if(a==null)throw new Error("investigate");t.push(a),n.push(r.localName||null)}),Zu.fromItems(t,n)}class UH extends ua{constructor(t,n,i){const r=t.type+"["+(n>=0?n:"")+"]",a=n===-1||t.dynamic;super("array",r,i,a);F(this,"coder");F(this,"length");Oe(this,{coder:t,length:n})}defaultValue(){const t=this.coder.defaultValue(),n=[];for(let i=0;i<this.length;i++)n.push(t);return n}encode(t,n){const i=Gn.dereference(n,"array");Array.isArray(i)||this._throwError("expected array value",i);let r=this.length;r===-1&&(r=i.length,t.writeValue(i.length)),SL(i.length,r,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let l=0;l<i.length;l++)a.push(this.coder);return vD(t,a,i)}decode(t){let n=this.length;n===-1&&(n=t.readIndex(),de(n*Wn<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:n*Wn,length:t.dataLength}));let i=[];for(let r=0;r<n;r++)i.push(new FH(this.coder));return bD(t,i)}}class HH extends ua{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=Gn.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class ED extends ua{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=qn(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class GH extends ED{constructor(e){super("bytes",e)}decode(e){return we(super.decode(e))}}class zH extends ua{constructor(t,n){let i="bytes"+String(t);super(i,i,n,!1);F(this,"size");Oe(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,n){let i=qn(Gn.dereference(n,this.type));return i.length!==this.size&&this._throwError("incorrect data length",n),t.writeBytes(i)}decode(t){return we(t.readBytes(this.size))}}const $H=new Uint8Array([]);class VH extends ua{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes($H)}decode(e){return e.readBytes(0),null}}const YH=BigInt(0),KH=BigInt(1),jH=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class qH extends ua{constructor(t,n,i){const r=(n?"int":"uint")+t*8;super(r,r,i,!1);F(this,"size");F(this,"signed");Oe(this,{size:t,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,n){let i=Se(Gn.dereference(n,this.type)),r=ll(jH,Wn*8);if(this.signed){let a=ll(r,this.size*8-1);(i>a||i<-(a+KH))&&this._throwError("value out-of-bounds",n),i=kL(i,8*Wn)}else(i<YH||i>ll(r,this.size*8))&&this._throwError("value out-of-bounds",n);return t.writeValue(i)}decode(t){let n=ll(t.readValue(),this.size*8);return this.signed&&(n=Mg(n,this.size*8)),n}}class QH extends ED{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,sa(Gn.dereference(t,"string")))}decode(e){return Pg(super.decode(e))}}class D2 extends ua{constructor(t,n){let i=!1;const r=[];t.forEach(l=>{l.dynamic&&(i=!0),r.push(l.type)});const a="tuple("+r.join(",")+")";super("tuple",a,n,i);F(this,"coders");Oe(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const n=this.coders.reduce((i,r)=>{const a=r.localName;return a&&(i[a]||(i[a]=0),i[a]++),i},{});return this.coders.forEach((i,r)=>{let a=i.localName;!a||n[a]!==1||(a==="length"&&(a="_length"),t[a]==null&&(t[a]=t[r]))}),Object.freeze(t)}encode(t,n){const i=Gn.dereference(n,"tuple");return vD(t,this.coders,i)}decode(t){return bD(t,this.coders)}}function Gl(s){return Zt(sa(s))}var WH="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const RS=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),kS=4;function XH(s){let e=0;function t(){return s[e++]<<8|s[e++]}let n=t(),i=1,r=[0,1];for(let L=1;L<n;L++)r.push(i+=t());let a=t(),l=e;e+=a;let u=0,h=0;function d(){return u==0&&(h=h<<8|s[e++],u=8),h>>--u&1}const g=31,p=2**g,y=p>>>1,v=y>>1,b=p-1;let w=0;for(let L=0;L<g;L++)w=w<<1|d();let A=[],S=0,T=p;for(;;){let L=Math.floor(((w-S+1)*i-1)/T),B=0,M=n;for(;M-B>1;){let P=B+M>>>1;L<r[P]?M=P:B=P}if(B==0)break;A.push(B);let I=S+Math.floor(T*r[B]/i),N=S+Math.floor(T*r[B+1]/i)-1;for(;((I^N)&y)==0;)w=w<<1&b|d(),I=I<<1&b,N=N<<1&b|1;for(;I&~N&v;)w=w&y|w<<1&b>>>1|d(),I=I<<1^y,N=(N^y)<<1|y|1;S=I,T=1+N-I}let D=n-4;return A.map(L=>{switch(L-D){case 3:return D+65792+(s[l++]<<16|s[l++]<<8|s[l++]);case 2:return D+256+(s[l++]<<8|s[l++]);case 1:return D+s[l++];default:return L-1}})}function ZH(s){let e=0;return()=>s[e++]}function wD(s){return ZH(XH(JH(s)))}function JH(s){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,r)=>e[i.charCodeAt(0)]=r);let t=s.length,n=new Uint8Array(6*t>>3);for(let i=0,r=0,a=0,l=0;i<t;i++)l=l<<6|e[s.charCodeAt(i)],a+=6,a>=8&&(n[r++]=l>>(a-=8));return n}function eG(s){return s&1?~s>>1:s>>1}function tG(s,e){let t=Array(s);for(let n=0,i=0;n<s;n++)t[n]=i+=eG(e());return t}function hd(s,e=0){let t=[];for(;;){let n=s(),i=s();if(!i)break;e+=n;for(let r=0;r<i;r++)t.push(e+r);e+=i+1}return t}function AD(s){return fd(()=>{let e=hd(s);if(e.length)return e})}function TD(s){let e=[];for(;;){let t=s();if(t==0)break;e.push(nG(t,s))}for(;;){let t=s()-1;if(t<0)break;e.push(sG(t,s))}return e.flat()}function fd(s){let e=[];for(;;){let t=s(e.length);if(!t)break;e.push(t)}return e}function SD(s,e,t){let n=Array(s).fill().map(()=>[]);for(let i=0;i<e;i++)tG(s,t).forEach((r,a)=>n[a].push(r));return n}function nG(s,e){let t=1+e(),n=e(),i=fd(e);return SD(i.length,1+s,e).flatMap((a,l)=>{let[u,...h]=a;return Array(i[l]).fill().map((d,g)=>{let p=g*n;return[u+g*t,h.map(y=>y+p)]})})}function sG(s,e){let t=1+e();return SD(t,1+s,e).map(i=>[i[0],i.slice(1)])}function iG(s){let e=[],t=hd(s);return i(n([]),[]),e;function n(r){let a=s(),l=fd(()=>{let u=hd(s).map(h=>t[h]);if(u.length)return n(u)});return{S:a,B:l,Q:r}}function i({S:r,B:a},l,u){if(!(r&4&&u===l[l.length-1])){r&2&&(u=l[l.length-1]),r&1&&e.push(l);for(let h of a)for(let d of h.Q)i(h,[...l,d],u)}}}function rG(s){return s.toString(16).toUpperCase().padStart(2,"0")}function _D(s){return`{${rG(s)}}`}function aG(s){let e=[];for(let t=0,n=s.length;t<n;){let i=s.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function sh(s){let t=s.length;if(t<4096)return String.fromCodePoint(...s);let n=[];for(let i=0;i<t;)n.push(String.fromCodePoint(...s.slice(i,i+=4096)));return n.join("")}function oG(s,e){let t=s.length,n=t-e.length;for(let i=0;n==0&&i<t;i++)n=s[i]-e[i];return n}var lG="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const dd=44032,Fg=4352,Ug=4449,Hg=4519,RD=19,kD=21,ih=28,Gg=kD*ih,cG=RD*Gg,uG=dd+cG,hG=Fg+RD,fG=Ug+kD,dG=Hg+ih;function If(s){return s>>24&255}function LD(s){return s&16777215}let O3,LS,M3,lg;function gG(){let s=wD(lG);O3=new Map(AD(s).flatMap((e,t)=>e.map(n=>[n,t+1<<24]))),LS=new Set(hd(s)),M3=new Map,lg=new Map;for(let[e,t]of TD(s)){if(!LS.has(e)&&t.length==2){let[n,i]=t,r=lg.get(n);r||(r=new Map,lg.set(n,r)),r.set(i,e)}M3.set(e,t.reverse())}}function DD(s){return s>=dd&&s<uG}function mG(s,e){if(s>=Fg&&s<hG&&e>=Ug&&e<fG)return dd+(s-Fg)*Gg+(e-Ug)*ih;if(DD(s)&&e>Hg&&e<dG&&(s-dd)%ih==0)return s+(e-Hg);{let t=lg.get(s);return t&&(t=t.get(e),t)?t:-1}}function CD(s){O3||gG();let e=[],t=[],n=!1;function i(r){let a=O3.get(r);a&&(n=!0,r|=a),e.push(r)}for(let r of s)for(;;){if(r<128)e.push(r);else if(DD(r)){let a=r-dd,l=a/Gg|0,u=a%Gg/ih|0,h=a%ih;i(Fg+l),i(Ug+u),h>0&&i(Hg+h)}else{let a=M3.get(r);a?t.push(...a):i(r)}if(!t.length)break;r=t.pop()}if(n&&e.length>1){let r=If(e[0]);for(let a=1;a<e.length;a++){let l=If(e[a]);if(l==0||r<=l){r=l;continue}let u=a-1;for(;;){let h=e[u+1];if(e[u+1]=e[u],e[u]=h,!u||(r=If(e[--u]),r<=l))break}r=If(e[a])}}return e}function pG(s){let e=[],t=[],n=-1,i=0;for(let r of s){let a=If(r),l=LD(r);if(n==-1)a==0?n=l:e.push(l);else if(i>0&&i>=a)a==0?(e.push(n,...t),t.length=0,n=l):t.push(l),i=a;else{let u=mG(n,l);u>=0?n=u:i==0&&a==0?(e.push(n),n=l):(t.push(l),i=a)}}return n>=0&&e.push(n,...t),e}function ID(s){return CD(s).map(LD)}function yG(s){return pG(CD(s))}const DS=45,OD=".",MD=65039,PD=1,zg=s=>Array.from(s);function gd(s,e){return s.P.has(e)||s.Q.has(e)}class xG extends Array{get is_emoji(){return!0}}let P3,ND,ul,N3,BD,au,Rx,Yc,Jo,CS,B3;function tb(){if(P3)return;let s=wD(WH);const e=()=>hd(s),t=()=>new Set(e()),n=(d,g)=>g.forEach(p=>d.add(p));P3=new Map(TD(s)),ND=t(),ul=e(),N3=new Set(e().map(d=>ul[d])),ul=new Set(ul),BD=t(),t();let i=AD(s),r=s();const a=()=>{let d=new Set;return e().forEach(g=>n(d,i[g])),n(d,e()),d};au=fd(d=>{let g=fd(s).map(p=>p+96);if(g.length){let p=d>=r;g[0]-=32,g=sh(g),p&&(g=`Restricted[${g}]`);let y=a(),v=a(),b=!s();return{N:g,P:y,Q:v,M:b,R:p}}}),Rx=t(),Yc=new Map;let l=e().concat(zg(Rx)).sort((d,g)=>d-g);l.forEach((d,g)=>{let p=s(),y=l[g]=p?l[g-p]:{V:[],M:new Map};y.V.push(d),Rx.has(d)||Yc.set(d,y)});for(let{V:d,M:g}of new Set(Yc.values())){let p=[];for(let v of d){let b=au.filter(A=>gd(A,v)),w=p.find(({G:A})=>b.some(S=>A.has(S)));w||(w={G:new Set,V:[]},p.push(w)),w.V.push(v),n(w.G,b)}let y=p.flatMap(v=>zg(v.G));for(let{G:v,V:b}of p){let w=new Set(y.filter(A=>!v.has(A)));for(let A of b)g.set(A,w)}}Jo=new Set;let u=new Set;const h=d=>Jo.has(d)?u.add(d):Jo.add(d);for(let d of au){for(let g of d.P)h(g);for(let g of d.Q)h(g)}for(let d of Jo)!Yc.has(d)&&!u.has(d)&&Yc.set(d,PD);n(Jo,ID(Jo)),CS=iG(s).map(d=>xG.from(d)).sort(oG),B3=new Map;for(let d of CS){let g=[B3];for(let p of d){let y=g.map(v=>{let b=v.get(p);return b||(b=new Map,v.set(p,b)),b});p===MD?g.push(...y):g=y}for(let p of g)p.V=d}}function nb(s){return(FD(s)?"":`${sb(wm([s]))} `)+_D(s)}function sb(s){return`"${s}"‎`}function vG(s){if(s.length>=4&&s[2]==DS&&s[3]==DS)throw new Error(`invalid label extension: "${sh(s.slice(0,4))}"`)}function bG(s){for(let t=s.lastIndexOf(95);t>0;)if(s[--t]!==95)throw new Error("underscore allowed only at start")}function EG(s){let e=s[0],t=RS.get(e);if(t)throw Vf(`leading ${t}`);let n=s.length,i=-1;for(let r=1;r<n;r++){e=s[r];let a=RS.get(e);if(a){if(i==r)throw Vf(`${t} + ${a}`);i=r+1,t=a}}if(i==n)throw Vf(`trailing ${t}`)}function wm(s,e=1/0,t=_D){let n=[];wG(s[0])&&n.push("◌"),s.length>e&&(e>>=1,s=[...s.slice(0,e),8230,...s.slice(-e)]);let i=0,r=s.length;for(let a=0;a<r;a++){let l=s[a];FD(l)&&(n.push(sh(s.slice(i,a))),n.push(t(l)),i=a+1)}return n.push(sh(s.slice(i,r))),n.join("")}function wG(s){return tb(),ul.has(s)}function FD(s){return tb(),BD.has(s)}function AG(s){return RG(TG(s,yG,DG))}function TG(s,e,t){if(!s)return[];tb();let n=0;return s.split(OD).map(i=>{let r=aG(i),a={input:r,offset:n};n+=r.length+1;try{let l=a.tokens=LG(r,e,t),u=l.length,h;if(!u)throw new Error("empty label");let d=a.output=l.flat();if(bG(d),!(a.emoji=u>1||l[0].is_emoji)&&d.every(p=>p<128))vG(d),h="ASCII";else{let p=l.flatMap(y=>y.is_emoji?[]:y);if(!p.length)h="Emoji";else{if(ul.has(d[0]))throw Vf("leading combining mark");for(let b=1;b<u;b++){let w=l[b];if(!w.is_emoji&&ul.has(w[0]))throw Vf(`emoji + combining mark: "${sh(l[b-1])} + ${wm([w[0]])}"`)}EG(d);let y=zg(new Set(p)),[v]=_G(y);kG(v,p),SG(v,y),h=v.N}}a.type=h}catch(l){a.error=l}return a})}function SG(s,e){let t,n=[];for(let i of e){let r=Yc.get(i);if(r===PD)return;if(r){let a=r.M.get(i);if(t=t?t.filter(l=>a.has(l)):zg(a),!t.length)return}else n.push(i)}if(t){for(let i of t)if(n.every(r=>gd(i,r)))throw new Error(`whole-script confusable: ${s.N}/${i.N}`)}}function _G(s){let e=au;for(let t of s){let n=e.filter(i=>gd(i,t));if(!n.length)throw au.some(i=>gd(i,t))?HD(e[0],t):UD(t);if(e=n,n.length==1)break}return e}function RG(s){return s.map(({input:e,error:t,output:n})=>{if(t){let i=t.message;throw new Error(s.length==1?i:`Invalid label ${sb(wm(e,63))}: ${i}`)}return sh(n)}).join(OD)}function UD(s){return new Error(`disallowed character: ${nb(s)}`)}function HD(s,e){let t=nb(e),n=au.find(i=>i.P.has(e));return n&&(t=`${n.N} ${t}`),new Error(`illegal mixture: ${s.N} + ${t}`)}function Vf(s){return new Error(`illegal placement: ${s}`)}function kG(s,e){for(let t of e)if(!gd(s,t))throw HD(s,t);if(s.M){let t=ID(e);for(let n=1,i=t.length;n<i;n++)if(N3.has(t[n])){let r=n+1;for(let a;r<i&&N3.has(a=t[r]);r++)for(let l=n;l<r;l++)if(t[l]==a)throw new Error(`duplicate non-spacing marks: ${nb(a)}`);if(r-n>kS)throw new Error(`excessive non-spacing marks: ${sb(wm(t.slice(n-1,r)))} (${r-n}/${kS})`);n=r}}}function LG(s,e,t){let n=[],i=[];for(s=s.slice().reverse();s.length;){let r=CG(s);if(r)i.length&&(n.push(e(i)),i=[]),n.push(t(r));else{let a=s.pop();if(Jo.has(a))i.push(a);else{let l=P3.get(a);if(l)i.push(...l);else if(!ND.has(a))throw UD(a)}}}return i.length&&n.push(e(i)),n}function DG(s){return s.filter(e=>e!=MD)}function CG(s,e){let t=B3,n,i=s.length;for(;i&&(t=t.get(s[--i]),!!t);){let{V:r}=t;r&&(n=r,s.length=i)}return n}const GD=new Uint8Array(32);GD.fill(0);function IS(s){return V(s.length!==0,"invalid ENS name; empty component","comp",s),s}function zD(s){const e=sa(IG(s)),t=[];if(s.length===0)return t;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(IS(e.slice(n,i))),n=i+1);return V(n<e.length,"invalid ENS name; empty component","name",s),t.push(IS(e.slice(n))),t}function IG(s){try{if(s.length===0)throw new Error("empty label");return AG(s)}catch(e){V(!1,`invalid ENS name (${e.message})`,"name",s)}}function F3(s){V(typeof s=="string","invalid ENS name; not a string","name",s),V(s.length,"invalid ENS name (empty label)","name",s);let e=GD;const t=zD(s);for(;t.length;)e=Zt(nn([e,Zt(t.pop())]));return we(e)}function OG(s,e){const t=e;return V(t<=255,"DNS encoded label cannot exceed 255","length",t),we(nn(zD(s).map(n=>{V(n.length<=t,`label ${JSON.stringify(s)} exceeds ${t} bytes`,"name",s);const i=new Uint8Array(n.length+1);return i.set(n,1),i[0]=i.length-1,i})))+"00"}function kx(s,e){return{address:Et(s),storageKeys:e.map((t,n)=>(V(Rt(t,32),"invalid slot",`storageKeys[${n}]`,t),t.toLowerCase()))}}function ql(s){if(Array.isArray(s))return s.map((t,n)=>Array.isArray(t)?(V(t.length===2,"invalid slot set",`value[${n}]`,t),kx(t[0],t[1])):(V(t!=null&&typeof t=="object","invalid address-slot set","value",s),kx(t.address,t.storageKeys)));V(s!=null&&typeof s=="object","invalid access list","value",s);const e=Object.keys(s).map(t=>{const n=s[t].reduce((i,r)=>(i[r]=!0,i),{});return kx(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function MG(s){let e;return typeof s=="string"?e=ud.computePublicKey(s,!1):e=s.publicKey,Et(Zt("0x"+e.substring(4)).substring(26))}function PG(s,e){return MG(ud.recoverPublicKey(s,e))}const bn=BigInt(0),NG=BigInt(2),BG=BigInt(27),FG=BigInt(28),UG=BigInt(35),HG=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Lx=4096*32;function OS(s,e){let t=s.toString(16);for(;t.length<2;)t="0"+t;return t+=hh(e).substring(4),"0x"+t}function Am(s){return s==="0x"?null:Et(s)}function ib(s,e){try{return ql(s)}catch(t){V(!1,t.message,e,s)}}function zd(s,e){return s==="0x"?0:Ye(s,e)}function Xt(s,e){if(s==="0x")return bn;const t=Se(s,e);return V(t<=HG,"value exceeds uint size",e,t),t}function Dt(s,e){const t=Se(s,"value"),n=Qn(t);return V(n.length<=32,"value too large",`tx.${e}`,t),n}function rb(s){return ql(s).map(e=>[e.address,e.storageKeys])}function GG(s,e){V(Array.isArray(s),`invalid ${e}`,"value",s);for(let t=0;t<s.length;t++)V(Rt(s[t],32),"invalid ${ param } hash",`value[${t}]`,s[t]);return s}function zG(s){const e=xm(s);V(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",s);const t={type:0,nonce:zd(e[0],"nonce"),gasPrice:Xt(e[1],"gasPrice"),gasLimit:Xt(e[2],"gasLimit"),to:Am(e[3]),value:Xt(e[4],"value"),data:we(e[5]),chainId:bn};if(e.length===6)return t;const n=Xt(e[6],"v"),i=Xt(e[7],"r"),r=Xt(e[8],"s");if(i===bn&&r===bn)t.chainId=n;else{let a=(n-UG)/NG;a<bn&&(a=bn),t.chainId=a,V(a!==bn||n===BG||n===FG,"non-canonical legacy v","v",e[6]),t.signature=bi.from({r:Ul(e[7],32),s:Ul(e[8],32),v:n})}return t}function $G(s,e){const t=[Dt(s.nonce,"nonce"),Dt(s.gasPrice||0,"gasPrice"),Dt(s.gasLimit,"gasLimit"),s.to||"0x",Dt(s.value,"value"),s.data];let n=bn;if(s.chainId!=bn)n=Se(s.chainId,"tx.chainId"),V(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(s.signature){const r=s.signature.legacyChainId;r!=null&&(n=r)}if(!e)return n!==bn&&(t.push(Qn(n)),t.push("0x"),t.push("0x")),Hl(t);let i=BigInt(27+e.yParity);return n!==bn?i=bi.getChainIdV(n,e.v):BigInt(e.v)!==i&&V(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Qn(i)),t.push(Qn(e.r)),t.push(Qn(e.s)),Hl(t)}function ab(s,e){let t;try{if(t=zd(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{V(!1,"invalid yParity","yParity",e[0])}const n=Ul(e[1],32),i=Ul(e[2],32),r=bi.from({r:n,s:i,yParity:t});s.signature=r}function VG(s){const e=xm(it(s).slice(1));V(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",we(s));const t={type:2,chainId:Xt(e[0],"chainId"),nonce:zd(e[1],"nonce"),maxPriorityFeePerGas:Xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Xt(e[4],"gasLimit"),to:Am(e[5]),value:Xt(e[6],"value"),data:we(e[7]),accessList:ib(e[8],"accessList")};return e.length===9||ab(t,e.slice(9)),t}function YG(s,e){const t=[Dt(s.chainId,"chainId"),Dt(s.nonce,"nonce"),Dt(s.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Dt(s.maxFeePerGas||0,"maxFeePerGas"),Dt(s.gasLimit,"gasLimit"),s.to||"0x",Dt(s.value,"value"),s.data,rb(s.accessList||[])];return e&&(t.push(Dt(e.yParity,"yParity")),t.push(Qn(e.r)),t.push(Qn(e.s))),nn(["0x02",Hl(t)])}function KG(s){const e=xm(it(s).slice(1));V(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",we(s));const t={type:1,chainId:Xt(e[0],"chainId"),nonce:zd(e[1],"nonce"),gasPrice:Xt(e[2],"gasPrice"),gasLimit:Xt(e[3],"gasLimit"),to:Am(e[4]),value:Xt(e[5],"value"),data:we(e[6]),accessList:ib(e[7],"accessList")};return e.length===8||ab(t,e.slice(8)),t}function jG(s,e){const t=[Dt(s.chainId,"chainId"),Dt(s.nonce,"nonce"),Dt(s.gasPrice||0,"gasPrice"),Dt(s.gasLimit,"gasLimit"),s.to||"0x",Dt(s.value,"value"),s.data,rb(s.accessList||[])];return e&&(t.push(Dt(e.yParity,"recoveryParam")),t.push(Qn(e.r)),t.push(Qn(e.s))),nn(["0x01",Hl(t)])}function qG(s){let e=xm(it(s).slice(1)),t="3",n=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const r=e[1],a=e[2],l=e[3];V(Array.isArray(r),"invalid network format: blobs not an array","fields[1]",r),V(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),V(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),V(r.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),V(r.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let u=0;u<e[1].length;u++)n.push({data:r[u],commitment:a[u],proof:l[u]});e=e[0]}V(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",we(s));const i={type:3,chainId:Xt(e[0],"chainId"),nonce:zd(e[1],"nonce"),maxPriorityFeePerGas:Xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Xt(e[4],"gasLimit"),to:Am(e[5]),value:Xt(e[6],"value"),data:we(e[7]),accessList:ib(e[8],"accessList"),maxFeePerBlobGas:Xt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(i.blobs=n),V(i.to!=null,`invalid address for transaction type: ${t}`,"data",s),V(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",s);for(let r=0;r<i.blobVersionedHashes.length;r++)V(Rt(i.blobVersionedHashes[r],32),`invalid blobVersionedHash at index ${r}: must be length 32`,"data",s);return e.length===11||ab(i,e.slice(11)),i}function QG(s,e,t){const n=[Dt(s.chainId,"chainId"),Dt(s.nonce,"nonce"),Dt(s.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Dt(s.maxFeePerGas||0,"maxFeePerGas"),Dt(s.gasLimit,"gasLimit"),s.to||cd,Dt(s.value,"value"),s.data,rb(s.accessList||[]),Dt(s.maxFeePerBlobGas||0,"maxFeePerBlobGas"),GG(s.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(Dt(e.yParity,"yParity")),n.push(Qn(e.r)),n.push(Qn(e.s)),t)?nn(["0x03",Hl([n,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):nn(["0x03",Hl(n)])}var Gi,Eu,wu,Au,Tu,Su,_u,Ru,ku,Lu,Du,Cu,Sl,Qa,Vr,Wa,Iu,cg;const Br=class Br{constructor(){ie(this,Iu);ie(this,Gi);ie(this,Eu);ie(this,wu);ie(this,Au);ie(this,Tu);ie(this,Su);ie(this,_u);ie(this,Ru);ie(this,ku);ie(this,Lu);ie(this,Du);ie(this,Cu);ie(this,Sl);ie(this,Qa);ie(this,Vr);ie(this,Wa);U(this,Gi,null),U(this,Eu,null),U(this,Au,0),U(this,Tu,bn),U(this,Su,null),U(this,_u,null),U(this,Ru,null),U(this,wu,"0x"),U(this,ku,bn),U(this,Lu,bn),U(this,Du,null),U(this,Cu,null),U(this,Sl,null),U(this,Qa,null),U(this,Wa,null),U(this,Vr,null)}get type(){return k(this,Gi)}set type(e){switch(e){case null:U(this,Gi,null);break;case 0:case"legacy":U(this,Gi,0);break;case 1:case"berlin":case"eip-2930":U(this,Gi,1);break;case 2:case"london":case"eip-1559":U(this,Gi,2);break;case 3:case"cancun":case"eip-4844":U(this,Gi,3);break;default:V(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=k(this,Eu);return e==null&&this.type===3?cd:e}set to(e){U(this,Eu,e==null?null:Et(e))}get nonce(){return k(this,Au)}set nonce(e){U(this,Au,Ye(e,"value"))}get gasLimit(){return k(this,Tu)}set gasLimit(e){U(this,Tu,Se(e))}get gasPrice(){const e=k(this,Su);return e==null&&(this.type===0||this.type===1)?bn:e}set gasPrice(e){U(this,Su,e==null?null:Se(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=k(this,_u);return e??(this.type===2||this.type===3?bn:null)}set maxPriorityFeePerGas(e){U(this,_u,e==null?null:Se(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=k(this,Ru);return e??(this.type===2||this.type===3?bn:null)}set maxFeePerGas(e){U(this,Ru,e==null?null:Se(e,"maxFeePerGas"))}get data(){return k(this,wu)}set data(e){U(this,wu,we(e))}get value(){return k(this,ku)}set value(e){U(this,ku,Se(e,"value"))}get chainId(){return k(this,Lu)}set chainId(e){U(this,Lu,Se(e))}get signature(){return k(this,Du)||null}set signature(e){U(this,Du,e==null?null:bi.from(e))}get accessList(){const e=k(this,Cu)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){U(this,Cu,e==null?null:ql(e))}get maxFeePerBlobGas(){const e=k(this,Sl);return e==null&&this.type===3?bn:e}set maxFeePerBlobGas(e){U(this,Sl,e==null?null:Se(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=k(this,Qa);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){V(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)V(Rt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}U(this,Qa,e)}get blobs(){return k(this,Wa)==null?null:k(this,Wa).map(e=>Object.assign({},e))}set blobs(e){if(e==null){U(this,Wa,null);return}const t=[],n=[];for(let i=0;i<e.length;i++){const r=e[i];if(Kv(r)){de(k(this,Vr),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=it(r);if(V(a.length<=Lx,"blob is too large",`blobs[${i}]`,r),a.length!==Lx){const h=new Uint8Array(Lx);h.set(a),a=h}const l=k(this,Vr).blobToKzgCommitment(a),u=we(k(this,Vr).computeBlobKzgProof(a,l));t.push({data:we(a),commitment:we(l),proof:u}),n.push(OS(1,l))}else{const a=we(r.commitment);t.push({data:we(r.data),commitment:a,proof:we(r.proof)}),n.push(OS(1,a))}}U(this,Wa,t),U(this,Qa,n)}get kzg(){return k(this,Vr)}set kzg(e){U(this,Vr,e)}get hash(){return this.signature==null?null:Zt(pe(this,Iu,cg).call(this,!0,!1))}get unsignedHash(){return Zt(this.unsignedSerialized)}get from(){return this.signature==null?null:PG(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:ud.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return pe(this,Iu,cg).call(this,!0,!0)}get unsignedSerialized(){return pe(this,Iu,cg).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,i=k(this,Sl)!=null||k(this,Qa);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&de(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),de(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),de(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const r=[];return this.type!=null?r.push(this.type):t?r.push(2):e?(r.push(1),n||r.push(0)):n?(r.push(1),r.push(2)):(i&&this.to||(r.push(0),r.push(1),r.push(2)),r.push(3)),r.sort(),r}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Br.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Br;if(typeof e=="string"){const n=it(e);if(n[0]>=127)return Br.from(zG(n));switch(n[0]){case 1:return Br.from(KG(n));case 2:return Br.from(VG(n));case 3:return Br.from(qG(n))}de(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Br;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=bi.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(V(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),V(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(V(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),V(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};Gi=new WeakMap,Eu=new WeakMap,wu=new WeakMap,Au=new WeakMap,Tu=new WeakMap,Su=new WeakMap,_u=new WeakMap,Ru=new WeakMap,ku=new WeakMap,Lu=new WeakMap,Du=new WeakMap,Cu=new WeakMap,Sl=new WeakMap,Qa=new WeakMap,Vr=new WeakMap,Wa=new WeakMap,Iu=new WeakSet,cg=function(e,t){de(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return $G(this,n);case 1:return jG(this,n);case 2:return YG(this,n);case 3:return QG(this,n,t?this.blobs:null)}de(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let $g=Br;const $D=new Uint8Array(32);$D.fill(0);const WG=BigInt(-1),VD=BigInt(0),YD=BigInt(1),XG=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function ZG(s){const e=it(s),t=e.length%32;return t?nn([e,$D.slice(t)]):we(e)}const JG=yo(YD,32),ez=yo(VD,32),MS={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Dx=["name","version","chainId","verifyingContract","salt"];function PS(s){return function(e){return V(typeof e=="string",`invalid domain value for ${JSON.stringify(s)}`,`domain.${s}`,e),e}}const tz={name:PS("name"),version:PS("version"),chainId:function(s){const e=Se(s,"domain.chainId");return V(e>=0,"invalid chain ID","domain.chainId",s),Number.isSafeInteger(e)?Number(e):Wc(e)},verifyingContract:function(s){try{return Et(s).toLowerCase()}catch{}V(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",s)},salt:function(s){const e=it(s,"domain.salt");return V(e.length===32,'invalid domain value "salt"',"domain.salt",s),we(e)}};function Cx(s){{const e=s.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",n=parseInt(e[2]);V(n%8===0&&n!==0&&n<=256&&e[2]===String(n),"invalid numeric width","type",s);const i=ll(XG,t?n-1:n),r=t?(i+YD)*WG:VD;return function(a){const l=Se(a,"value");return V(l>=r&&l<=i,`value out-of-bounds for ${s}`,"value",l),yo(t?kL(l,256):l,32)}}}{const e=s.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return V(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",s),function(n){const i=it(n);return V(i.length===t,`invalid length for ${s}`,"value",n),ZG(n)}}}switch(s){case"address":return function(e){return Ul(Et(e),32)};case"bool":return function(e){return e?JG:ez};case"bytes":return function(e){return Zt(e)};case"string":return function(e){return Gl(e)}}return null}function NS(s,e){return`${s}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}function C2(s){const e=s.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:s}}var Rd,Yr,Ou,rm,KD;const Vs=class Vs{constructor(e){ie(this,rm);F(this,"primaryType");ie(this,Rd);ie(this,Yr);ie(this,Ou);U(this,Yr,new Map),U(this,Ou,new Map);const t=new Map,n=new Map,i=new Map,r={};Object.keys(e).forEach(u=>{r[u]=e[u].map(({name:h,type:d})=>{let{base:g,index:p}=C2(d);return g==="int"&&!e.int&&(g="int256"),g==="uint"&&!e.uint&&(g="uint256"),{name:h,type:g+(p||"")}}),t.set(u,new Set),n.set(u,[]),i.set(u,new Set)}),U(this,Rd,JSON.stringify(r));for(const u in r){const h=new Set;for(const d of r[u]){V(!h.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(u)}`,"types",e),h.add(d.name);const g=C2(d.type).base;V(g!==u,`circular type reference to ${JSON.stringify(g)}`,"types",e),!Cx(g)&&(V(n.has(g),`unknown type ${JSON.stringify(g)}`,"types",e),n.get(g).push(u),t.get(u).add(g))}}const a=Array.from(n.keys()).filter(u=>n.get(u).length===0);V(a.length!==0,"missing primary type","types",e),V(a.length===1,`ambiguous primary types or unused types: ${a.map(u=>JSON.stringify(u)).join(", ")}`,"types",e),Oe(this,{primaryType:a[0]});function l(u,h){V(!h.has(u),`circular type reference to ${JSON.stringify(u)}`,"types",e),h.add(u);for(const d of t.get(u))if(n.has(d)){l(d,h);for(const g of h)i.get(g).add(d)}h.delete(u)}l(this.primaryType,new Set);for(const[u,h]of i){const d=Array.from(h);d.sort(),k(this,Yr).set(u,NS(u,r[u])+d.map(g=>NS(g,r[g])).join(""))}}get types(){return JSON.parse(k(this,Rd))}getEncoder(e){let t=k(this,Ou).get(e);return t||(t=pe(this,rm,KD).call(this,e),k(this,Ou).set(e,t)),t}encodeType(e){const t=k(this,Yr).get(e);return V(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Zt(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Cx(e))return n(e,t);const i=C2(e).array;if(i)return V(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(a=>this._visit(i.prefix,a,n));const r=this.types[e];if(r)return r.reduce((a,{name:l,type:u})=>(a[l]=this._visit(u,t[l],n),a),{});V(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Vs(e)}static getPrimaryType(e){return Vs.from(e).primaryType}static hashStruct(e,t,n){return Vs.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(e[n]==null)continue;const i=MS[n];V(i,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:i})}return t.sort((n,i)=>Dx.indexOf(n.name)-Dx.indexOf(i.name)),Vs.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return nn(["0x1901",Vs.hashDomain(e),Vs.from(t).hash(n)])}static hash(e,t,n){return Zt(Vs.encode(e,t,n))}static async resolveNames(e,t,n,i){e=Object.assign({},e);for(const l in e)e[l]==null&&delete e[l];const r={};e.verifyingContract&&!Rt(e.verifyingContract,20)&&(r[e.verifyingContract]="0x");const a=Vs.from(t);a.visit(n,(l,u)=>(l==="address"&&!Rt(u,20)&&(r[u]="0x"),u));for(const l in r)r[l]=await i(l);return e.verifyingContract&&r[e.verifyingContract]&&(e.verifyingContract=r[e.verifyingContract]),n=a.visit(n,(l,u)=>l==="address"&&r[u]?r[u]:u),{domain:e,value:n}}static getPayload(e,t,n){Vs.hashDomain(e);const i={},r=[];Dx.forEach(u=>{const h=e[u];h!=null&&(i[u]=tz[u](h),r.push({name:u,type:MS[u]}))});const a=Vs.from(t);t=a.types;const l=Object.assign({},t);return V(l.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),l.EIP712Domain=r,a.encode(n),{types:l,domain:i,primaryType:a.primaryType,message:a.visit(n,(u,h)=>{if(u.match(/^bytes(\d*)/))return we(it(h));if(u.match(/^u?int/))return Se(h).toString();switch(u){case"address":return h.toLowerCase();case"bool":return!!h;case"string":return V(typeof h=="string","invalid string","value",h),h}V(!1,"unsupported type","type",u)})}}};Rd=new WeakMap,Yr=new WeakMap,Ou=new WeakMap,rm=new WeakSet,KD=function(e){{const i=Cx(e);if(i)return i}const t=C2(e).array;if(t){const i=t.prefix,r=this.getEncoder(i);return a=>{V(t.count===-1||t.count===a.length,`array length mismatch; expected length ${t.count}`,"value",a);let l=a.map(r);return k(this,Yr).has(i)&&(l=l.map(Zt)),Zt(nn(l))}}const n=this.types[e];if(n){const i=Gl(k(this,Yr).get(e));return r=>{const a=n.map(({name:l,type:u})=>{const h=this.getEncoder(u)(r[l]);return k(this,Yr).has(u)?Zt(h):h});return a.unshift(i),nn(a)}}V(!1,`unknown type: ${e}`,"type",e)};let Vg=Vs;function Zn(s){const e=new Set;return s.forEach(t=>e.add(t)),Object.freeze(e)}const nz="external public payable override",sz=Zn(nz.split(" ")),jD="constant external internal payable private public pure view override",iz=Zn(jD.split(" ")),qD="constructor error event fallback function receive struct",QD=Zn(qD.split(" ")),WD="calldata memory storage payable indexed",rz=Zn(WD.split(" ")),az="tuple returns",oz=[qD,WD,az,jD].join(" "),lz=Zn(oz.split(" ")),cz={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},uz=new RegExp("^(\\s*)"),hz=new RegExp("^([0-9]+)"),fz=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),XD=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),ZD=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var kn,gi,kd,U3;const am=class am{constructor(e){ie(this,kd);ie(this,kn);ie(this,gi);U(this,kn,0),U(this,gi,e.slice())}get offset(){return k(this,kn)}get length(){return k(this,gi).length-k(this,kn)}clone(){return new am(k(this,gi))}reset(){U(this,kn,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=pe(this,kd,U3).call(this,k(this,kn)+1,e.match+1);return U(this,kn,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;k(this,kn)<e.match-1;){const n=this.peek().linkNext;t.push(pe(this,kd,U3).call(this,k(this,kn)+1,n)),U(this,kn,n)}return U(this,kn,e.match+1),t}peek(){if(k(this,kn)>=k(this,gi).length)throw new Error("out-of-bounds");return k(this,gi)[k(this,kn)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return cf(this,kn)._++,e}toString(){const e=[];for(let t=k(this,kn);t<k(this,gi).length;t++){const n=k(this,gi)[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}};kn=new WeakMap,gi=new WeakMap,kd=new WeakSet,U3=function(e=0,t=0){return new am(k(this,gi).slice(e,t).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))};let Ei=am;function Ao(s){const e=[],t=a=>{const l=r<s.length?JSON.stringify(s[r]):"$EOI";throw new Error(`invalid token ${l} at ${r}: ${a}`)};let n=[],i=[],r=0;for(;r<s.length;){let a=s.substring(r),l=a.match(uz);l&&(r+=l[1].length,a=s.substring(r));const u={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:r,value:-1};e.push(u);let h=cz[a[0]]||"";if(h){if(u.type=h,u.text=a[0],r++,h==="OPEN_PAREN")n.push(e.length-1),i.push(e.length-1);else if(h=="CLOSE_PAREN")n.length===0&&t("no matching open bracket"),u.match=n.pop(),e[u.match].match=e.length-1,u.depth--,u.linkBack=i.pop(),e[u.linkBack].linkNext=e.length-1;else if(h==="COMMA")u.linkBack=i.pop(),e[u.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(h==="OPEN_BRACKET")u.type="BRACKET";else if(h==="CLOSE_BRACKET"){let d=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const g=e.pop().text;d=g+d,e[e.length-1].value=Ye(g)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=d}continue}if(l=a.match(fz),l){if(u.text=l[1],r+=u.text.length,lz.has(u.text)){u.type="KEYWORD";continue}if(u.text.match(ZD)){u.type="TYPE";continue}u.type="ID";continue}if(l=a.match(hz),l){u.text=l[1],u.type="NUMBER",r+=u.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${r}`)}return new Ei(e.map(a=>Object.freeze(a)))}function BS(s,e){let t=[];for(const n in e.keys())s.has(n)&&t.push(n);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function Tm(s,e){if(e.peekKeyword(QD)){const t=e.pop().text;if(t!==s)throw new Error(`expected ${s}, got ${t}`)}return e.popType("ID")}function oa(s,e){const t=new Set;for(;;){const n=s.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(s.pop(),t.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);t.add(n)}return Object.freeze(t)}function JD(s){let e=oa(s,iz);return BS(e,Zn("constant payable nonpayable".split(" "))),BS(e,Zn("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function ia(s,e){return s.popParams().map(t=>In.from(t,e))}function eC(s){if(s.peekType("AT")){if(s.pop(),s.peekType("NUMBER"))return Se(s.pop().text);throw new Error("invalid gas")}return null}function zl(s){if(s.length)throw new Error(`unexpected tokens at offset ${s.offset}: ${s.toString()}`)}const dz=new RegExp(/^(.*)\[([0-9]*)\]$/);function FS(s){const e=s.match(ZD);if(V(e,"invalid type","type",s),s==="uint")return"uint256";if(s==="int")return"int256";if(e[2]){const t=parseInt(e[2]);V(t!==0&&t<=32,"invalid bytes length","type",s)}else if(e[3]){const t=parseInt(e[3]);V(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",s)}return s}const Bt={},hs=Symbol.for("_ethers_internal"),US="_ParamTypeInternal",HS="_ErrorInternal",GS="_EventInternal",zS="_ConstructorInternal",$S="_FallbackInternal",VS="_FunctionInternal",YS="_StructInternal";var Mu,ug;const Ys=class Ys{constructor(e,t,n,i,r,a,l,u){ie(this,Mu);F(this,"name");F(this,"type");F(this,"baseType");F(this,"indexed");F(this,"components");F(this,"arrayLength");F(this,"arrayChildren");if(Ud(e,Bt,"ParamType"),Object.defineProperty(this,hs,{value:US}),a&&(a=Object.freeze(a.slice())),i==="array"){if(l==null||u==null)throw new Error("")}else if(l!=null||u!=null)throw new Error("");if(i==="tuple"){if(a==null)throw new Error("")}else if(a!=null)throw new Error("");Oe(this,{name:t,type:n,baseType:i,indexed:r,components:a,arrayLength:l,arrayChildren:u})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const r=JSON.parse(this.arrayChildren.format("json"));return r.name=n,r.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(r)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(r=>JSON.parse(r.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(i=>n.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((i,r)=>n.components[r].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const n=[],i=[e];return pe(this,Mu,ug).call(this,n,e,t,r=>{i[0]=r}),n.length&&await Promise.all(n),i[0]}static from(e,t){if(Ys.isParamType(e))return e;if(typeof e=="string")try{return Ys.from(Ao(e),t)}catch{V(!1,"invalid param type","obj",e)}else if(e instanceof Ei){let l="",u="",h=null;oa(e,Zn(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(u="tuple",h=e.popParams().map(b=>Ys.from(b)),l=`tuple(${h.map(b=>b.format()).join(",")})`):(l=FS(e.popType("TYPE")),u=l);let d=null,g=null;for(;e.length&&e.peekType("BRACKET");){const b=e.pop();d=new Ys(Bt,"",l,u,null,h,g,d),g=b.value,l+=b.text,u="array",h=null}let p=null;if(oa(e,rz).has("indexed")){if(!t)throw new Error("");p=!0}const v=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ys(Bt,v,l,u,p,h,g,d)}const n=e.name;V(!n||typeof n=="string"&&n.match(XD),"invalid name","obj.name",n);let i=e.indexed;i!=null&&(V(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let r=e.type,a=r.match(dz);if(a){const l=parseInt(a[2]||"-1"),u=Ys.from({type:a[1],components:e.components});return new Ys(Bt,n||"",r,"array",i,null,l,u)}if(r==="tuple"||r.startsWith("tuple(")||r.startsWith("(")){const l=e.components!=null?e.components.map(h=>Ys.from(h)):null;return new Ys(Bt,n||"",r,"tuple",i,l,null,null)}return r=FS(e.type),new Ys(Bt,n||"",r,r,i,null,null,null)}static isParamType(e){return e&&e[hs]===US}};Mu=new WeakSet,ug=function(e,t,n,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,l=t.slice();l.forEach((u,h)=>{var d;pe(d=a,Mu,ug).call(d,e,u,n,g=>{l[h]=g})}),i(l);return}if(this.isTuple()){const a=this.components;let l;if(Array.isArray(t))l=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");l=a.map(u=>{if(!u.name)throw new Error("cannot use object value with unnamed components");if(!(u.name in t))throw new Error(`missing value for component ${u.name}`);return t[u.name]})}if(l.length!==this.components.length)throw new Error("array is wrong length");l.forEach((u,h)=>{var d;pe(d=a[h],Mu,ug).call(d,e,u,n,g=>{l[h]=g})}),i(l);return}const r=n(this.type,t);r.then?e.push(async function(){i(await r)}()):i(r)};let In=Ys;class $l{constructor(e,t,n){F(this,"type");F(this,"inputs");Ud(e,Bt,"Fragment"),n=Object.freeze(n.slice()),Oe(this,{type:t,inputs:n})}static from(e){if(typeof e=="string"){try{$l.from(JSON.parse(e))}catch{}return $l.from(Ao(e))}if(e instanceof Ei)switch(e.peekKeyword(QD)){case"constructor":return ta.from(e);case"error":return ls.from(e);case"event":return Qi.from(e);case"fallback":case"receive":return Fr.from(e);case"function":return Wi.from(e);case"struct":return Nl.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return ta.from(e);case"error":return ls.from(e);case"event":return Qi.from(e);case"fallback":case"receive":return Fr.from(e);case"function":return Wi.from(e);case"struct":return Nl.from(e)}de(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}V(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return ta.isFragment(e)}static isError(e){return ls.isFragment(e)}static isEvent(e){return Qi.isFragment(e)}static isFunction(e){return Wi.isFragment(e)}static isStruct(e){return Nl.isFragment(e)}}class Sm extends $l{constructor(t,n,i,r){super(t,n,r);F(this,"name");V(typeof i=="string"&&i.match(XD),"invalid identifier","name",i),r=Object.freeze(r.slice()),Oe(this,{name:i})}}function md(s,e){return"("+e.map(t=>t.format(s)).join(s==="full"?", ":",")+")"}class ls extends Sm{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,hs,{value:HS})}get selector(){return Gl(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+md(e,this.inputs)),t.join(" ")}static from(e){if(ls.isFragment(e))return e;if(typeof e=="string")return ls.from(Ao(e));if(e instanceof Ei){const t=Tm("error",e),n=ia(e);return zl(e),new ls(Bt,t,n)}return new ls(Bt,e.name,e.inputs?e.inputs.map(In.from):[])}static isFragment(e){return e&&e[hs]===HS}}class Qi extends Sm{constructor(t,n,i,r){super(t,"event",n,i);F(this,"anonymous");Object.defineProperty(this,hs,{value:GS}),Oe(this,{anonymous:r})}get topicHash(){return Gl(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const n=[];return t!=="sighash"&&n.push("event"),n.push(this.name+md(t,this.inputs)),t!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(t,n){return n=(n||[]).map(r=>In.from(r)),new Qi(Bt,t,n,!1).topicHash}static from(t){if(Qi.isFragment(t))return t;if(typeof t=="string")try{return Qi.from(Ao(t))}catch{V(!1,"invalid event fragment","obj",t)}else if(t instanceof Ei){const n=Tm("event",t),i=ia(t,!0),r=!!oa(t,Zn(["anonymous"])).has("anonymous");return zl(t),new Qi(Bt,n,i,r)}return new Qi(Bt,t.name,t.inputs?t.inputs.map(n=>In.from(n,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[hs]===GS}}class ta extends $l{constructor(t,n,i,r,a){super(t,n,i);F(this,"payable");F(this,"gas");Object.defineProperty(this,hs,{value:zS}),Oe(this,{payable:r,gas:a})}format(t){if(de(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const n=[`constructor${md(t,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(t){if(ta.isFragment(t))return t;if(typeof t=="string")try{return ta.from(Ao(t))}catch{V(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Ei){oa(t,Zn(["constructor"]));const n=ia(t),i=!!oa(t,sz).has("payable"),r=eC(t);return zl(t),new ta(Bt,"constructor",n,i,r)}return new ta(Bt,"constructor",t.inputs?t.inputs.map(In.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[hs]===zS}}class Fr extends $l{constructor(t,n,i){super(t,"fallback",n);F(this,"payable");Object.defineProperty(this,hs,{value:$S}),Oe(this,{payable:i})}format(t){const n=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:i})}return`${n}()${this.payable?" payable":""}`}static from(t){if(Fr.isFragment(t))return t;if(typeof t=="string")try{return Fr.from(Ao(t))}catch{V(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Ei){const n=t.toString(),i=t.peekKeyword(Zn(["fallback","receive"]));if(V(i,"type must be fallback or receive","obj",n),t.popKeyword(Zn(["fallback","receive"]))==="receive"){const u=ia(t);return V(u.length===0,"receive cannot have arguments","obj.inputs",u),oa(t,Zn(["payable"])),zl(t),new Fr(Bt,[],!0)}let a=ia(t);a.length?V(a.length===1&&a[0].type==="bytes","invalid fallback inputs","obj.inputs",a.map(u=>u.format("minimal")).join(", ")):a=[In.from("bytes")];const l=JD(t);if(V(l==="nonpayable"||l==="payable","fallback cannot be constants","obj.stateMutability",l),oa(t,Zn(["returns"])).has("returns")){const u=ia(t);V(u.length===1&&u[0].type==="bytes","invalid fallback outputs","obj.outputs",u.map(h=>h.format("minimal")).join(", "))}return zl(t),new Fr(Bt,a,l==="payable")}if(t.type==="receive")return new Fr(Bt,[],!0);if(t.type==="fallback"){const n=[In.from("bytes")],i=t.stateMutability==="payable";return new Fr(Bt,n,i)}V(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[hs]===$S}}class Wi extends Sm{constructor(t,n,i,r,a,l){super(t,"function",n,r);F(this,"constant");F(this,"outputs");F(this,"stateMutability");F(this,"payable");F(this,"gas");Object.defineProperty(this,hs,{value:VS}),a=Object.freeze(a.slice()),Oe(this,{constant:i==="view"||i==="pure",gas:l,outputs:a,payable:i==="payable",stateMutability:i})}get selector(){return Gl(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const n=[];return t!=="sighash"&&n.push("function"),n.push(this.name+md(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(md(t,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(t,n){return n=(n||[]).map(r=>In.from(r)),new Wi(Bt,t,"view",n,[],null).selector}static from(t){if(Wi.isFragment(t))return t;if(typeof t=="string")try{return Wi.from(Ao(t))}catch{V(!1,"invalid function fragment","obj",t)}else if(t instanceof Ei){const i=Tm("function",t),r=ia(t),a=JD(t);let l=[];oa(t,Zn(["returns"])).has("returns")&&(l=ia(t));const u=eC(t);return zl(t),new Wi(Bt,i,a,r,l,u)}let n=t.stateMutability;return n==null&&(n="payable",typeof t.constant=="boolean"?(n="view",t.constant||(n="payable",typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable")),new Wi(Bt,t.name,n,t.inputs?t.inputs.map(In.from):[],t.outputs?t.outputs.map(In.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[hs]===VS}}class Nl extends Sm{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,hs,{value:YS})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Nl.from(Ao(e))}catch{V(!1,"invalid struct fragment","obj",e)}else if(e instanceof Ei){const t=Tm("struct",e),n=ia(e);return zl(e),new Nl(Bt,t,n)}return new Nl(Bt,e.name,e.inputs?e.inputs.map(In.from):[])}static isFragment(e){return e&&e[hs]===YS}}const Ti=new Map;Ti.set(0,"GENERIC_PANIC");Ti.set(1,"ASSERT_FALSE");Ti.set(17,"OVERFLOW");Ti.set(18,"DIVIDE_BY_ZERO");Ti.set(33,"ENUM_RANGE_ERROR");Ti.set(34,"BAD_STORAGE_DATA");Ti.set(49,"STACK_UNDERFLOW");Ti.set(50,"ARRAY_RANGE_ERROR");Ti.set(65,"OUT_OF_MEMORY");Ti.set(81,"UNINITIALIZED_FUNCTION_CALL");const gz=new RegExp(/^bytes([0-9]*)$/),mz=new RegExp(/^(u?int)([0-9]*)$/);let Ix=null,KS=1024;function pz(s,e,t,n){let i="missing revert data",r=null;const a=null;let l=null;if(t){i="execution reverted";const h=it(t);if(t=we(t),h.length===0)i+=" (no data present; likely require(false) occurred",r="require(false)";else if(h.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(we(h.slice(0,4))==="0x08c379a0")try{r=n.decode(["string"],h.slice(4))[0],l={signature:"Error(string)",name:"Error",args:[r]},i+=`: ${JSON.stringify(r)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(we(h.slice(0,4))==="0x4e487b71")try{const d=Number(n.decode(["uint256"],h.slice(4))[0]);l={signature:"Panic(uint256)",name:"Panic",args:[d]},r=`Panic due to ${Ti.get(d)||"UNKNOWN"}(${d})`,i+=`: ${r}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const u={to:e.to?Et(e.to):null,data:e.data||"0x"};return e.from&&(u.from=Et(e.from)),Vt(i,"CALL_EXCEPTION",{action:s,data:t,reason:r,transaction:u,invocation:a,revert:l})}var Xa,Kc;const om=class om{constructor(){ie(this,Xa)}getDefaultValue(e){const t=e.map(i=>pe(this,Xa,Kc).call(this,In.from(i)));return new D2(t,"_").defaultValue()}encode(e,t){SL(t.length,e.length,"types/values length mismatch");const n=e.map(a=>pe(this,Xa,Kc).call(this,In.from(a))),i=new D2(n,"_"),r=new S3;return i.encode(r,t),r.data}decode(e,t,n){const i=e.map(a=>pe(this,Xa,Kc).call(this,In.from(a)));return new D2(i,"_").decode(new _3(t,n,KS))}static _setDefaultMaxInflation(e){V(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),KS=e}static defaultAbiCoder(){return Ix==null&&(Ix=new om),Ix}static getBuiltinCallException(e,t,n){return pz(e,t,n,om.defaultAbiCoder())}};Xa=new WeakSet,Kc=function(e){if(e.isArray())return new UH(pe(this,Xa,Kc).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new D2(e.components.map(n=>pe(this,Xa,Kc).call(this,n)),e.name);switch(e.baseType){case"address":return new BH(e.name);case"bool":return new HH(e.name);case"string":return new QH(e.name);case"bytes":return new GH(e.name);case"":return new VH(e.name)}let t=e.type.match(mz);if(t){let n=parseInt(t[2]||"256");return V(n!==0&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new qH(n/8,t[1]==="int",e.name)}if(t=e.type.match(gz),t){let n=parseInt(t[1]);return V(n!==0&&n<=32,"invalid bytes length","param",e),new zH(n,e.name)}V(!1,"invalid type","type",e.type)};let pd=om;class yz{constructor(e,t,n){F(this,"fragment");F(this,"name");F(this,"signature");F(this,"topic");F(this,"args");const i=e.name,r=e.format();Oe(this,{fragment:e,name:i,signature:r,topic:t,args:n})}}class xz{constructor(e,t,n,i){F(this,"fragment");F(this,"name");F(this,"args");F(this,"signature");F(this,"selector");F(this,"value");const r=e.name,a=e.format();Oe(this,{fragment:e,name:r,args:n,signature:a,selector:t,value:i})}}class vz{constructor(e,t,n){F(this,"fragment");F(this,"name");F(this,"args");F(this,"signature");F(this,"selector");const i=e.name,r=e.format();Oe(this,{fragment:e,name:i,args:n,signature:r,selector:t})}}class jS{constructor(e){F(this,"hash");F(this,"_isIndexed");Oe(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const qS={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},QS={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:s=>`reverted with reason string ${JSON.stringify(s)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:s=>{let e="unknown panic code";return s>=0&&s<=255&&qS[s.toString()]&&(e=qS[s.toString()]),`reverted with panic code 0x${s.toString(16)} (${e})`}}};var zi,$i,Vi,Bn,rr,hg,fg;const ol=class ol{constructor(e){ie(this,rr);F(this,"fragments");F(this,"deploy");F(this,"fallback");F(this,"receive");ie(this,zi);ie(this,$i);ie(this,Vi);ie(this,Bn);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,U(this,Vi,new Map),U(this,zi,new Map),U(this,$i,new Map);const n=[];for(const a of t)try{n.push($l.from(a))}catch(l){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,l.message)}Oe(this,{fragments:Object.freeze(n)});let i=null,r=!1;U(this,Bn,this.getAbiCoder()),this.fragments.forEach((a,l)=>{let u;switch(a.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Oe(this,{deploy:a});return;case"fallback":a.inputs.length===0?r=!0:(V(!i||a.payable!==i.payable,"conflicting fallback fragments",`fragments[${l}]`,a),i=a,r=i.payable);return;case"function":u=k(this,Vi);break;case"event":u=k(this,$i);break;case"error":u=k(this,zi);break;default:return}const h=a.format();u.has(h)||u.set(h,a)}),this.deploy||Oe(this,{deploy:ta.from("constructor()")}),Oe(this,{fallback:i,receive:r})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return pd.defaultAbiCoder()}getFunctionName(e){const t=pe(this,rr,hg).call(this,e,null,!1);return V(t,"no matching function","key",e),t.name}hasFunction(e){return!!pe(this,rr,hg).call(this,e,null,!1)}getFunction(e,t){return pe(this,rr,hg).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(k(this,Vi).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(k(this,Vi).get(i),n)}}getEventName(e){const t=pe(this,rr,fg).call(this,e,null,!1);return V(t,"no matching event","key",e),t.name}hasEvent(e){return!!pe(this,rr,fg).call(this,e,null,!1)}getEvent(e,t){return pe(this,rr,fg).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(k(this,$i).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(k(this,$i).get(i),n)}}getError(e,t){if(Rt(e)){const i=e.toLowerCase();if(QS[i])return ls.from(QS[i].signature);for(const r of k(this,zi).values())if(i===r.selector)return r;return null}if(e.indexOf("(")===-1){const i=[];for(const[r,a]of k(this,zi))r.split("(")[0]===e&&i.push(a);if(i.length===0)return e==="Error"?ls.from("error Error(string)"):e==="Panic"?ls.from("error Panic(uint256)"):null;if(i.length>1){const r=i.map(a=>JSON.stringify(a.format())).join(", ");V(!1,`ambiguous error description (i.e. ${r})`,"name",e)}return i[0]}if(e=ls.from(e).format(),e==="Error(string)")return ls.from("error Error(string)");if(e==="Panic(uint256)")return ls.from("error Panic(uint256)");const n=k(this,zi).get(e);return n||null}forEachError(e){const t=Array.from(k(this,zi).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(k(this,zi).get(i),n)}}_decodeParams(e,t){return k(this,Bn).decode(e,t)}_encodeParams(e,t){return k(this,Bn).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);V(n,"unknown error","fragment",e),e=n}return V(Yt(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Yt(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);V(n,"unknown error","fragment",e),e=n}return nn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);V(n,"unknown function","fragment",e),e=n}return V(Yt(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Yt(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);V(n,"unknown function","fragment",e),e=n}return nn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const r=this.getFunction(e);V(r,"unknown function","fragment",e),e=r}let n="invalid length for result data";const i=qn(t);if(i.length%32===0)try{return k(this,Bn).decode(e.outputs,i)}catch{n="could not decode result data"}de(!1,n,"BAD_DATA",{value:we(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=it(e,"data"),i=pd.getBuiltinCallException("call",t,n);if(i.message.startsWith("execution reverted (unknown custom error)")){const l=we(n.slice(0,4)),u=this.getError(l);if(u)try{const h=k(this,Bn).decode(u.inputs,n.slice(4));i.revert={name:u.name,signature:u.format(),args:h},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const a=this.parseTransaction(t);return a&&(i.invocation={method:a.name,signature:a.signature,args:a.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const n=this.getFunction(e);V(n,"unknown function","fragment",e),e=n}return we(k(this,Bn).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const r=this.getEvent(e);V(r,"unknown event","eventFragment",e),e=r}de(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const i=(r,a)=>r.type==="string"?Gl(a):r.type==="bytes"?Zt(we(a)):(r.type==="bool"&&typeof a=="boolean"?a=a?"0x01":"0x00":r.type.match(/^u?int/)?a=yo(a):r.type.match(/^bytes/)?a=NU(a,32):r.type==="address"&&k(this,Bn).encode(["address"],[a]),Ul(we(a),32));for(t.forEach((r,a)=>{const l=e.inputs[a];if(!l.indexed){V(r==null,"cannot filter non-indexed parameters; must be null","contract."+l.name,r);return}r==null?n.push(null):l.baseType==="array"||l.baseType==="tuple"?V(!1,"filtering with tuples or arrays not supported","contract."+l.name,r):Array.isArray(r)?n.push(r.map(u=>i(l,u))):n.push(i(l,r))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){if(typeof e=="string"){const a=this.getEvent(e);V(a,"unknown event","eventFragment",e),e=a}const n=[],i=[],r=[];return e.anonymous||n.push(e.topicHash),V(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((a,l)=>{const u=t[l];if(a.indexed)if(a.type==="string")n.push(Gl(u));else if(a.type==="bytes")n.push(Zt(u));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(k(this,Bn).encode([a.type],[u]))}else i.push(a),r.push(u)}),{data:k(this,Bn).encode(i,r),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"){const y=this.getEvent(e);V(y,"unknown event","eventFragment",e),e=y}if(n!=null&&!e.anonymous){const y=e.topicHash;V(Rt(n[0],32)&&n[0].toLowerCase()===y,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const i=[],r=[],a=[];e.inputs.forEach((y,v)=>{y.indexed?y.type==="string"||y.type==="bytes"||y.baseType==="tuple"||y.baseType==="array"?(i.push(In.from({type:"bytes32",name:y.name})),a.push(!0)):(i.push(y),a.push(!1)):(r.push(y),a.push(!1))});const l=n!=null?k(this,Bn).decode(i,nn(n)):null,u=k(this,Bn).decode(r,t,!0),h=[],d=[];let g=0,p=0;return e.inputs.forEach((y,v)=>{let b=null;if(y.indexed)if(l==null)b=new jS(null);else if(a[v])b=new jS(l[p++]);else try{b=l[p++]}catch(w){b=w}else try{b=u[g++]}catch(w){b=w}h.push(b),d.push(y.name||null)}),Zu.fromItems(h,d)}parseTransaction(e){const t=it(e.data,"tx.data"),n=Se(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(we(t.slice(0,4)));if(!i)return null;const r=k(this,Bn).decode(i.inputs,t.slice(4));return new xz(i,i.selector,r,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new yz(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=we(e),n=this.getError(Yt(t,0,4));if(!n)return null;const i=k(this,Bn).decode(n.inputs,Yt(t,4));return new vz(n,n.selector,i)}static from(e){return e instanceof ol?e:typeof e=="string"?new ol(JSON.parse(e)):typeof e.formatJson=="function"?new ol(e.formatJson()):typeof e.format=="function"?new ol(e.format("json")):new ol(e)}};zi=new WeakMap,$i=new WeakMap,Vi=new WeakMap,Bn=new WeakMap,rr=new WeakSet,hg=function(e,t,n){if(Rt(e)){const r=e.toLowerCase();for(const a of k(this,Vi).values())if(r===a.selector)return a;return null}if(e.indexOf("(")===-1){const r=[];for(const[a,l]of k(this,Vi))a.split("(")[0]===e&&r.push(l);if(t){const a=t.length>0?t[t.length-1]:null;let l=t.length,u=!0;Gn.isTyped(a)&&a.type==="overrides"&&(u=!1,l--);for(let h=r.length-1;h>=0;h--){const d=r[h].inputs.length;d!==l&&(!u||d!==l-1)&&r.splice(h,1)}for(let h=r.length-1;h>=0;h--){const d=r[h].inputs;for(let g=0;g<t.length;g++)if(Gn.isTyped(t[g])){if(g>=d.length){if(t[g].type==="overrides")continue;r.splice(h,1);break}if(t[g].type!==d[g].baseType){r.splice(h,1);break}}}}if(r.length===1&&t&&t.length!==r[0].inputs.length){const a=t[t.length-1];(a==null||Array.isArray(a)||typeof a!="object")&&r.splice(0,1)}if(r.length===0)return null;if(r.length>1&&n){const a=r.map(l=>JSON.stringify(l.format())).join(", ");V(!1,`ambiguous function description (i.e. matches ${a})`,"key",e)}return r[0]}const i=k(this,Vi).get(Wi.from(e).format());return i||null},fg=function(e,t,n){if(Rt(e)){const r=e.toLowerCase();for(const a of k(this,$i).values())if(r===a.topicHash)return a;return null}if(e.indexOf("(")===-1){const r=[];for(const[a,l]of k(this,$i))a.split("(")[0]===e&&r.push(l);if(t){for(let a=r.length-1;a>=0;a--)r[a].inputs.length<t.length&&r.splice(a,1);for(let a=r.length-1;a>=0;a--){const l=r[a].inputs;for(let u=0;u<t.length;u++)if(Gn.isTyped(t[u])&&t[u].type!==l[u].baseType){r.splice(a,1);break}}}if(r.length===0)return null;if(r.length>1&&n){const a=r.map(l=>JSON.stringify(l.format())).join(", ");V(!1,`ambiguous event description (i.e. matches ${a})`,"key",e)}return r[0]}const i=k(this,$i).get(Qi.from(e).format());return i||null};let H3=ol;const tC=BigInt(0);function ou(s){return s??null}function Qt(s){return s==null?null:s.toString()}class WS{constructor(e,t,n){F(this,"gasPrice");F(this,"maxFeePerGas");F(this,"maxPriorityFeePerGas");Oe(this,{gasPrice:ou(e),maxFeePerGas:ou(t),maxPriorityFeePerGas:ou(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:Qt(e),maxFeePerGas:Qt(t),maxPriorityFeePerGas:Qt(n)}}}function Yg(s){const e={};s.to&&(e.to=s.to),s.from&&(e.from=s.from),s.data&&(e.data=we(s.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in s)||s[i]==null||(e[i]=Se(s[i],`request.${i}`));const n="type,nonce".split(/,/);for(const i of n)!(i in s)||s[i]==null||(e[i]=Ye(s[i],`request.${i}`));return s.accessList&&(e.accessList=ql(s.accessList)),"blockTag"in s&&(e.blockTag=s.blockTag),"enableCcipRead"in s&&(e.enableCcipRead=!!s.enableCcipRead),"customData"in s&&(e.customData=s.customData),"blobVersionedHashes"in s&&s.blobVersionedHashes&&(e.blobVersionedHashes=s.blobVersionedHashes.slice()),"kzg"in s&&(e.kzg=s.kzg),"blobs"in s&&s.blobs&&(e.blobs=s.blobs.map(i=>Kv(i)?we(i):Object.assign({},i))),e}var Kr;class bz{constructor(e,t){F(this,"provider");F(this,"number");F(this,"hash");F(this,"timestamp");F(this,"parentHash");F(this,"parentBeaconBlockRoot");F(this,"nonce");F(this,"difficulty");F(this,"gasLimit");F(this,"gasUsed");F(this,"stateRoot");F(this,"receiptsRoot");F(this,"blobGasUsed");F(this,"excessBlobGas");F(this,"miner");F(this,"prevRandao");F(this,"extraData");F(this,"baseFeePerGas");ie(this,Kr);U(this,Kr,e.transactions.map(n=>typeof n!="string"?new yd(n,t):n)),Oe(this,{provider:t,hash:ou(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:ou(e.prevRandao),extraData:e.extraData,baseFeePerGas:ou(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return k(this,Kr).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=k(this,Kr).slice();return e.length===0?[]:(de(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:i,gasUsed:r,hash:a,miner:l,prevRandao:u,nonce:h,number:d,parentHash:g,parentBeaconBlockRoot:p,stateRoot:y,receiptsRoot:v,timestamp:b,transactions:w}=this;return{_type:"Block",baseFeePerGas:Qt(e),difficulty:Qt(t),extraData:n,gasLimit:Qt(i),gasUsed:Qt(r),blobGasUsed:Qt(this.blobGasUsed),excessBlobGas:Qt(this.excessBlobGas),hash:a,miner:l,prevRandao:u,nonce:h,number:d,parentHash:g,timestamp:b,parentBeaconBlockRoot:p,stateRoot:y,receiptsRoot:v,transactions:w}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return k(this,Kr).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=k(this,Kr)[e];else{const n=e.toLowerCase();for(const i of k(this,Kr))if(typeof i=="string"){if(i!==n)continue;t=i;break}else{if(i.hash!==n)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;V(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return Ez(this)}}Kr=new WeakMap;class $d{constructor(e,t){F(this,"provider");F(this,"transactionHash");F(this,"blockHash");F(this,"blockNumber");F(this,"removed");F(this,"address");F(this,"data");F(this,"topics");F(this,"index");F(this,"transactionIndex");this.provider=t;const n=Object.freeze(e.topics.slice());Oe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:i,index:r,removed:a,topics:l,transactionHash:u,transactionIndex:h}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:i,index:r,removed:a,topics:l,transactionHash:u,transactionIndex:h}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return de(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return de(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return de(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return wz(this)}}var Ld;class nC{constructor(e,t){F(this,"provider");F(this,"to");F(this,"from");F(this,"contractAddress");F(this,"hash");F(this,"index");F(this,"blockHash");F(this,"blockNumber");F(this,"logsBloom");F(this,"gasUsed");F(this,"blobGasUsed");F(this,"cumulativeGasUsed");F(this,"gasPrice");F(this,"blobGasPrice");F(this,"type");F(this,"status");F(this,"root");ie(this,Ld);U(this,Ld,Object.freeze(e.logs.map(i=>new $d(i,t))));let n=tC;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),Oe(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return k(this,Ld)}toJSON(){const{to:e,from:t,contractAddress:n,hash:i,index:r,blockHash:a,blockNumber:l,logsBloom:u,logs:h,status:d,root:g}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:l,contractAddress:n,cumulativeGasUsed:Qt(this.cumulativeGasUsed),from:t,gasPrice:Qt(this.gasPrice),blobGasUsed:Qt(this.blobGasUsed),blobGasPrice:Qt(this.blobGasPrice),gasUsed:Qt(this.gasUsed),hash:i,index:r,logs:h,logsBloom:u,root:g,status:d,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return iC(this)}reorderedEvent(e){return de(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),sC(this,e)}}Ld=new WeakMap;var Za;const Fb=class Fb{constructor(e,t){F(this,"provider");F(this,"blockNumber");F(this,"blockHash");F(this,"index");F(this,"hash");F(this,"type");F(this,"to");F(this,"from");F(this,"nonce");F(this,"gasLimit");F(this,"gasPrice");F(this,"maxPriorityFeePerGas");F(this,"maxFeePerGas");F(this,"maxFeePerBlobGas");F(this,"data");F(this,"value");F(this,"chainId");F(this,"signature");F(this,"accessList");F(this,"blobVersionedHashes");ie(this,Za);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,U(this,Za,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:i,type:r,to:a,from:l,nonce:u,data:h,signature:d,accessList:g,blobVersionedHashes:p}=this;return{_type:"TransactionResponse",accessList:g,blockNumber:e,blockHash:t,blobVersionedHashes:p,chainId:Qt(this.chainId),data:h,from:l,gasLimit:Qt(this.gasLimit),gasPrice:Qt(this.gasPrice),hash:i,maxFeePerGas:Qt(this.maxFeePerGas),maxPriorityFeePerGas:Qt(this.maxPriorityFeePerGas),maxFeePerBlobGas:Qt(this.maxFeePerBlobGas),nonce:u,signature:d,to:a,index:n,type:r,value:Qt(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:n}=await jn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:n-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=e??1,i=t??0;let r=k(this,Za),a=-1,l=r===-1;const u=async()=>{if(l)return null;const{blockNumber:p,nonce:y}=await jn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(y<this.nonce){r=p;return}if(l)return null;const v=await this.getTransaction();if(!(v&&v.blockNumber!=null))for(a===-1&&(a=r-3,a<k(this,Za)&&(a=k(this,Za)));a<=p;){if(l)return null;const b=await this.provider.getBlock(a,!0);if(b==null)return;for(const w of b)if(w===this.hash)return;for(let w=0;w<b.length;w++){const A=await b.getTransaction(w);if(A.from===this.from&&A.nonce===this.nonce){if(l)return null;const S=await this.provider.getTransactionReceipt(A.hash);if(S==null||p-S.blockNumber+1<n)return;let T="replaced";A.data===this.data&&A.to===this.to&&A.value===this.value?T="repriced":A.data==="0x"&&A.from===A.to&&A.value===tC&&(T="cancelled"),de(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:T==="replaced"||T==="cancelled",reason:T,replacement:A.replaceableTransaction(r),hash:A.hash,receipt:S})}}a++}},h=p=>{if(p==null||p.status!==0)return p;de(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:p.to,from:p.from,data:""},receipt:p})},d=await this.provider.getTransactionReceipt(this.hash);if(n===0)return h(d);if(d){if(await d.confirmations()>=n)return h(d)}else if(await u(),n===0)return null;return await new Promise((p,y)=>{const v=[],b=()=>{v.forEach(A=>A())};if(v.push(()=>{l=!0}),i>0){const A=setTimeout(()=>{b(),y(Vt("wait for transaction timeout","TIMEOUT"))},i);v.push(()=>{clearTimeout(A)})}const w=async A=>{if(await A.confirmations()>=n){b();try{p(h(A))}catch(S){y(S)}}};if(v.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),r>=0){const A=async()=>{try{await u()}catch(S){if(Dn(S,"TRANSACTION_REPLACED")){b(),y(S);return}}l||this.provider.once("block",A)};v.push(()=>{this.provider.off("block",A)}),this.provider.once("block",A)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return de(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),iC(this)}reorderedEvent(e){return de(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),de(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),sC(this,e)}replaceableTransaction(e){V(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Fb(this,this.provider);return U(t,Za,e),t}};Za=new WeakMap;let yd=Fb;function Ez(s){return{orphan:"drop-block",hash:s.hash,number:s.number}}function sC(s,e){return{orphan:"reorder-transaction",tx:s,other:e}}function iC(s){return{orphan:"drop-transaction",tx:s}}function wz(s){return{orphan:"drop-log",log:{transactionHash:s.transactionHash,blockHash:s.blockHash,blockNumber:s.blockNumber,address:s.address,data:s.data,topics:Object.freeze(s.topics.slice()),index:s.index}}}class ob extends $d{constructor(t,n,i){super(t,t.provider);F(this,"interface");F(this,"fragment");F(this,"args");const r=n.decodeEventLog(i,t.data,t.topics);Oe(this,{args:r,fragment:i,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class rC extends $d{constructor(t,n){super(t,t.provider);F(this,"error");Oe(this,{error:n})}}var Pu;class Az extends nC{constructor(t,n,i){super(i,n);ie(this,Pu);U(this,Pu,t)}get logs(){return super.logs.map(t=>{const n=t.topics.length?k(this,Pu).getEvent(t.topics[0]):null;if(n)try{return new ob(t,k(this,Pu),n)}catch(i){return new rC(t,i)}return t})}}Pu=new WeakMap;var Dd;class lb extends yd{constructor(t,n,i){super(i,n);ie(this,Dd);U(this,Dd,t)}async wait(t,n){const i=await super.wait(t,n);return i==null?null:new Az(k(this,Dd),this.provider,i)}}Dd=new WeakMap;class aC extends LL{constructor(t,n,i,r){super(t,n,i);F(this,"log");Oe(this,{log:r})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Tz extends aC{constructor(e,t,n,i,r){super(e,t,n,new ob(r,e.interface,i));const a=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Oe(this,{args:a,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const XS=BigInt(0);function oC(s){return s&&typeof s.call=="function"}function lC(s){return s&&typeof s.estimateGas=="function"}function _m(s){return s&&typeof s.resolveName=="function"}function cC(s){return s&&typeof s.sendTransaction=="function"}function uC(s){if(s!=null){if(_m(s))return s;if(s.provider)return s.provider}}var Cd;class Sz{constructor(e,t,n){ie(this,Cd);F(this,"fragment");if(Oe(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const i=Vl(e.runner,"resolveName"),r=_m(i)?i:null;U(this,Cd,async function(){const a=await Promise.all(t.inputs.map((l,u)=>n[u]==null?null:l.walkAsync(n[u],(d,g)=>d==="address"?Array.isArray(g)?Promise.all(g.map(p=>Xn(p,r))):Xn(g,r):g)));return e.interface.encodeFilterTopics(t,a)}())}getTopicFilter(){return k(this,Cd)}}Cd=new WeakMap;function Vl(s,e){return s==null?null:typeof s[e]=="function"?s:s.provider&&typeof s.provider[e]=="function"?s.provider:null}function hl(s){return s==null?null:s.provider||null}async function hC(s,e){const t=Gn.dereference(s,"overrides");V(typeof t=="object","invalid overrides parameter","overrides",s);const n=Yg(t);return V(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),V(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function _z(s,e,t){const n=Vl(s,"resolveName"),i=_m(n)?n:null;return await Promise.all(e.map((r,a)=>r.walkAsync(t[a],(l,u)=>(u=Gn.dereference(u,l),l==="address"?Xn(u,i):u))))}function Rz(s){const e=async function(a){const l=await hC(a,["data"]);l.to=await s.getAddress(),l.from&&(l.from=await Xn(l.from,uC(s.runner)));const u=s.interface,h=Se(l.value||XS,"overrides.value")===XS,d=(l.data||"0x")==="0x";u.fallback&&!u.fallback.payable&&u.receive&&!d&&!h&&V(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),V(u.fallback||d,"cannot send data to receive-only contract","overrides.data",l.data);const g=u.receive||u.fallback&&u.fallback.payable;return V(g||h,"cannot send value to non-payable fallback","overrides.value",l.value),V(u.fallback||d,"cannot send data to receive-only contract","overrides.data",l.data),l},t=async function(a){const l=Vl(s.runner,"call");de(oC(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const u=await e(a);try{return await l.call(u)}catch(h){throw Yv(h)&&h.data?s.interface.makeError(h.data,u):h}},n=async function(a){const l=s.runner;de(cC(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const u=await l.sendTransaction(await e(a)),h=hl(s.runner);return new lb(s.interface,h,u)},i=async function(a){const l=Vl(s.runner,"estimateGas");return de(lC(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await e(a))},r=async a=>await n(a);return Oe(r,{_contract:s,estimateGas:i,populateTransaction:e,send:n,staticCall:t}),r}function kz(s,e){const t=function(...h){const d=s.interface.getFunction(e,h);return de(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:h}}),d},n=async function(...h){const d=t(...h);let g={};if(d.inputs.length+1===h.length&&(g=await hC(h.pop()),g.from&&(g.from=await Xn(g.from,uC(s.runner)))),d.inputs.length!==h.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const p=await _z(s.runner,d.inputs,h);return Object.assign({},g,await jn({to:s.getAddress(),data:s.interface.encodeFunctionData(d,p)}))},i=async function(...h){const d=await l(...h);return d.length===1?d[0]:d},r=async function(...h){const d=s.runner;de(cC(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const g=await d.sendTransaction(await n(...h)),p=hl(s.runner);return new lb(s.interface,p,g)},a=async function(...h){const d=Vl(s.runner,"estimateGas");return de(lC(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await n(...h))},l=async function(...h){const d=Vl(s.runner,"call");de(oC(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const g=await n(...h);let p="0x";try{p=await d.call(g)}catch(v){throw Yv(v)&&v.data?s.interface.makeError(v.data,g):v}const y=t(...h);return s.interface.decodeFunctionResult(y,p)},u=async(...h)=>t(...h).constant?await i(...h):await r(...h);return Oe(u,{name:s.interface.getFunctionName(e),_contract:s,_key:e,getFragment:t,estimateGas:a,populateTransaction:n,send:r,staticCall:i,staticCallResult:l}),Object.defineProperty(u,"fragment",{configurable:!1,enumerable:!0,get:()=>{const h=s.interface.getFunction(e);return de(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),h}}),u}function Lz(s,e){const t=function(...i){const r=s.interface.getEvent(e,i);return de(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),r},n=function(...i){return new Sz(s,t(...i),i)};return Oe(n,{name:s.interface.getEventName(e),_contract:s,_key:e,getFragment:t}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=s.interface.getEvent(e);return de(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),n}const Kg=Symbol.for("_ethersInternal_contract"),fC=new WeakMap;function Dz(s,e){fC.set(s[Kg],e)}function Es(s){return fC.get(s[Kg])}function Cz(s){return s&&typeof s=="object"&&"getTopicFilter"in s&&typeof s.getTopicFilter=="function"&&s.fragment}async function cb(s,e){let t,n=null;if(Array.isArray(e)){const r=function(a){if(Rt(a,32))return a;const l=s.interface.getEvent(a);return V(l,"unknown fragment","name",a),l.topicHash};t=e.map(a=>a==null?null:Array.isArray(a)?a.map(r):r(a))}else e==="*"?t=[null]:typeof e=="string"?Rt(e,32)?t=[e]:(n=s.interface.getEvent(e),V(n,"unknown fragment","event",e),t=[n.topicHash]):Cz(e)?t=await e.getTopicFilter():"fragment"in e?(n=e.fragment,t=[n.topicHash]):V(!1,"unknown event name","event",e);t=t.map(r=>{if(r==null)return null;if(Array.isArray(r)){const a=Array.from(new Set(r.map(l=>l.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return r.toLowerCase()});const i=t.map(r=>r==null?"null":Array.isArray(r)?r.join("|"):r).join("&");return{fragment:n,tag:i,topics:t}}async function Of(s,e){const{subs:t}=Es(s);return t.get((await cb(s,e)).tag)||null}async function ZS(s,e,t){const n=hl(s.runner);de(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:r,topics:a}=await cb(s,t),{addr:l,subs:u}=Es(s);let h=u.get(r);if(!h){const g={address:l||s,topics:a},p=w=>{let A=i;if(A==null)try{A=s.interface.getEvent(w.topics[0])}catch{}if(A){const S=A,T=i?s.interface.decodeEventLog(i,w.data,w.topics):[];z3(s,t,T,D=>new Tz(s,D,t,S,w))}else z3(s,t,[],S=>new aC(s,S,t,w))};let y=[];h={tag:r,listeners:[],start:()=>{y.length||y.push(n.on(g,p))},stop:async()=>{if(y.length==0)return;let w=y;y=[],await Promise.all(w),n.off(g,p)}},u.set(r,h)}return h}let G3=Promise.resolve();async function Iz(s,e,t,n){await G3;const i=await Of(s,e);if(!i)return!1;const r=i.listeners.length;return i.listeners=i.listeners.filter(({listener:a,once:l})=>{const u=Array.from(t);n&&u.push(n(l?null:a));try{a.call(s,...u)}catch{}return!l}),i.listeners.length===0&&(i.stop(),Es(s).subs.delete(i.tag)),r>0}async function z3(s,e,t,n){try{await G3}catch{}const i=Iz(s,e,t,n);return G3=i,await i}const I2=["then"];var HR;HR=Kg;const Zf=class Zf{constructor(e,t,n,i){F(this,"target");F(this,"interface");F(this,"runner");F(this,"filters");F(this,HR);F(this,"fallback");V(typeof e=="string"||xD(e),"invalid value for Contract target","target",e),n==null&&(n=null);const r=H3.from(t);Oe(this,{target:e,runner:n,interface:r}),Object.defineProperty(this,Kg,{value:{}});let a,l=null,u=null;if(i){const g=hl(n);u=new lb(this.interface,g,i)}let h=new Map;if(typeof e=="string")if(Rt(e))l=e,a=Promise.resolve(e);else{const g=Vl(n,"resolveName");if(!_m(g))throw Vt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=g.resolveName(e).then(p=>{if(p==null)throw Vt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Es(this).addr=p,p})}else a=e.getAddress().then(g=>{if(g==null)throw new Error("TODO");return Es(this).addr=g,g});Dz(this,{addrPromise:a,addr:l,deployTx:u,subs:h});const d=new Proxy({},{get:(g,p,y)=>{if(typeof p=="symbol"||I2.indexOf(p)>=0)return Reflect.get(g,p,y);try{return this.getEvent(p)}catch(v){if(!Dn(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(g,p)=>I2.indexOf(p)>=0?Reflect.has(g,p):Reflect.has(g,p)||this.interface.hasEvent(String(p))});return Oe(this,{filters:d}),Oe(this,{fallback:r.receive||r.fallback?Rz(this):null}),new Proxy(this,{get:(g,p,y)=>{if(typeof p=="symbol"||p in g||I2.indexOf(p)>=0)return Reflect.get(g,p,y);try{return g.getFunction(p)}catch(v){if(!Dn(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(g,p)=>typeof p=="symbol"||p in g||I2.indexOf(p)>=0?Reflect.has(g,p):g.interface.hasFunction(p)})}connect(e){return new Zf(this.target,this.interface,e)}attach(e){return new Zf(e,this.interface,this.runner)}async getAddress(){return await Es(this).addrPromise}async getDeployedCode(){const e=hl(this.runner);de(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=hl(this.runner);return de(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,r)=>{const a=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);n.once("block",a)}catch(l){r(l)}};a()})}deploymentTransaction(){return Es(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),kz(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),Lz(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){t==null&&(t=0),n==null&&(n="latest");const{addr:i,addrPromise:r}=Es(this),a=i||await r,{fragment:l,topics:u}=await cb(this,e),h={address:a,topics:u,fromBlock:t,toBlock:n},d=hl(this.runner);return de(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(h)).map(g=>{let p=l;if(p==null)try{p=this.interface.getEvent(g.topics[0])}catch{}if(p)try{return new ob(g,this.interface,p)}catch(y){return new rC(g,y)}return new $d(g,d)})}async on(e,t){const n=await ZS(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await ZS(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await z3(this,e,t,null)}async listenerCount(e){if(e){const i=await Of(this,e);return i?i.listeners.length:0}const{subs:t}=Es(this);let n=0;for(const{listeners:i}of t.values())n+=i.length;return n}async listeners(e){if(e){const i=await Of(this,e);return i?i.listeners.map(({listener:r})=>r):[]}const{subs:t}=Es(this);let n=[];for(const{listeners:i}of t.values())n=n.concat(i.map(({listener:r})=>r));return n}async off(e,t){const n=await Of(this,e);if(!n)return this;if(t){const i=n.listeners.map(({listener:r})=>r).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(t==null||n.listeners.length===0)&&(n.stop(),Es(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await Of(this,e);if(!t)return this;t.stop(),Es(this).subs.delete(t.tag)}else{const{subs:t}=Es(this);for(const{tag:n,stop:i}of t.values())i(),t.delete(n)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Zf{constructor(i,r=null){super(i,e,r)}}return t}static from(e,t,n){return n==null&&(n=null),new this(e,t,n)}};let $3=Zf;function Oz(){return $3}class lu extends Oz(){}function Ox(s){return s.match(/^ipfs:\/\/ipfs\//i)?s=s.substring(12):s.match(/^ipfs:\/\//i)?s=s.substring(7):V(!1,"unsupported IPFS format","link",s),`https://gateway.ipfs.io/ipfs/${s}`}class Mz{constructor(e){F(this,"name");Oe(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const dC=new RegExp("^(ipfs)://(.*)$","i"),JS=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),dC,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Ja,_l,eo,jc,lm,gC;const Jc=class Jc{constructor(e,t,n){ie(this,eo);F(this,"provider");F(this,"address");F(this,"name");ie(this,Ja);ie(this,_l);Oe(this,{provider:e,address:t,name:n}),U(this,Ja,null),U(this,_l,new lu(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return k(this,Ja)==null&&U(this,Ja,(async()=>{try{return await k(this,_l).supportsInterface("0x9061b923")}catch(e){if(Dn(e,"CALL_EXCEPTION"))return!1;throw U(this,Ja,null),e}})()),await k(this,Ja)}async getAddress(e){if(e==null&&(e=60),e===60)try{const r=await pe(this,eo,jc).call(this,"addr(bytes32)");return r==null||r===cd?null:r}catch(r){if(Dn(r,"CALL_EXCEPTION"))return null;throw r}if(e>=0&&e<2147483648){let r=e+2147483648;const a=await pe(this,eo,jc).call(this,"addr(bytes32,uint)",[r]);if(Rt(a,20))return Et(a)}let t=null;for(const r of this.provider.plugins)if(r instanceof Mz&&r.supportsCoinType(e)){t=r;break}if(t==null)return null;const n=await pe(this,eo,jc).call(this,"addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;const i=await t.decodeAddress(e,n);if(i!=null)return i;de(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await pe(this,eo,jc).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await pe(this,eo,jc).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",r=parseInt(t[4],16);if(t[5].length===r*2)return`${i}://${FU("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;de(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<JS.length;n++){const i=t.match(JS[n]);if(i==null)continue;const r=i[1].toLowerCase();switch(r){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const a=Ox(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:a}),{linkage:e,url:a}}case"erc721":case"erc1155":{const a=r==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:r,value:t});const l=await this.getAddress();if(l==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const u=(i[2]||"").split("/");if(u.length!==2)return e.push({type:`!${r}caip`,value:i[2]||""}),{url:null,linkage:e};const h=u[1],d=new lu(u[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(r==="erc721"){const b=await d.ownerOf(h);if(l!==b)return e.push({type:"!owner",value:b}),{url:null,linkage:e};e.push({type:"owner",value:b})}else if(r==="erc1155"){const b=await d.balanceOf(l,h);if(!b)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:b.toString()})}let g=await d[a](h);if(g==null||g==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:g}),r==="erc1155"&&(g=g.replace("{id}",yo(h,32).substring(2)),e.push({type:"metadata-url-expanded",value:g})),g.match(/^ipfs:/i)&&(g=Ox(g)),e.push({type:"metadata-url",value:g});let p={};const y=await new xo(g).send();y.assertOk();try{p=y.bodyJson}catch{try{e.push({type:"!metadata",value:y.bodyText})}catch{const A=y.body;return A&&e.push({type:"!metadata",value:we(A)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!p)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(p)});let v=p.image;if(typeof v!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!v.match(/^(https:\/\/|data:)/i)){if(v.match(dC)==null)return e.push({type:"!imageUrl-ipfs",value:v}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:v}),v=Ox(v)}return e.push({type:"url",value:v}),{linkage:e,url:v}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return de(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async fromName(e,t){var i;let n=t;for(;;){if(n===""||n==="."||t!=="eth"&&n==="eth")return null;const r=await pe(i=Jc,lm,gC).call(i,e,n);if(r!=null){const a=new Jc(e,r,t);return n!==t&&!await a.supportsWildcard()?null:a}n=n.split(".").slice(1).join(".")}}};Ja=new WeakMap,_l=new WeakMap,eo=new WeakSet,jc=async function(e,t){t=(t||[]).slice();const n=k(this,_l).interface;t.unshift(F3(this.name));let i=null;await this.supportsWildcard()&&(i=n.getFunction(e),de(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[OG(this.name,255),n.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const r=await k(this,_l)[e](...t);return i?n.decodeFunctionResult(i,r)[0]:r}catch(r){if(!Dn(r,"CALL_EXCEPTION"))throw r}return null},lm=new WeakSet,gC=async function(e,t){const n=await Jc.getEnsAddress(e);try{const r=await new lu(n,["function resolver(bytes32) view returns (address)"],e).resolver(F3(t),{enableCcipRead:!0});return r===cd?null:r}catch(i){throw i}return null},ie(Jc,lm);let jg=Jc;const e_=BigInt(0);function nt(s,e){return function(t){return t==null?e:s(t)}}function Rm(s,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(n=>s(n))}}function Vd(s,e){return t=>{const n={};for(const i in s){let r=i;if(e&&i in e&&!(r in t)){for(const a of e[i])if(a in t){r=a;break}}try{const a=s[i](t[r]);a!==void 0&&(n[i]=a)}catch(a){const l=a instanceof Error?a.message:"not-an-error";de(!1,`invalid value for value.${i} (${l})`,"BAD_DATA",{value:t})}}return n}}function Pz(s){switch(s){case!0:case"true":return!0;case!1:case"false":return!1}V(!1,`invalid boolean; ${JSON.stringify(s)}`,"value",s)}function rh(s){return V(Rt(s,!0),"invalid data","value",s),s}function Ln(s){return V(Rt(s,32),"invalid hash","value",s),s}const Nz=Vd({address:Et,blockHash:Ln,blockNumber:Ye,data:rh,index:Ye,removed:nt(Pz,!1),topics:Rm(Ln),transactionHash:Ln,transactionIndex:Ye},{index:["logIndex"]});function Bz(s){return Nz(s)}const Fz=Vd({hash:nt(Ln),parentHash:Ln,parentBeaconBlockRoot:nt(Ln,null),number:Ye,timestamp:Ye,nonce:nt(rh),difficulty:Se,gasLimit:Se,gasUsed:Se,stateRoot:nt(Ln,null),receiptsRoot:nt(Ln,null),blobGasUsed:nt(Se,null),excessBlobGas:nt(Se,null),miner:nt(Et),prevRandao:nt(Ln,null),extraData:rh,baseFeePerGas:nt(Se)},{prevRandao:["mixHash"]});function Uz(s){const e=Fz(s);return e.transactions=s.transactions.map(t=>typeof t=="string"?t:mC(t)),e}const Hz=Vd({transactionIndex:Ye,blockNumber:Ye,transactionHash:Ln,address:Et,topics:Rm(Ln),data:rh,index:Ye,blockHash:Ln},{index:["logIndex"]});function Gz(s){return Hz(s)}const zz=Vd({to:nt(Et,null),from:nt(Et,null),contractAddress:nt(Et,null),index:Ye,root:nt(we),gasUsed:Se,blobGasUsed:nt(Se,null),logsBloom:nt(rh),blockHash:Ln,hash:Ln,logs:Rm(Gz),blockNumber:Ye,cumulativeGasUsed:Se,effectiveGasPrice:nt(Se),blobGasPrice:nt(Se,null),status:nt(Ye),type:nt(Ye,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function $z(s){return zz(s)}function mC(s){s.to&&Se(s.to)===e_&&(s.to="0x0000000000000000000000000000000000000000");const e=Vd({hash:Ln,index:nt(Ye,void 0),type:t=>t==="0x"||t==null?0:Ye(t),accessList:nt(ql,null),blobVersionedHashes:nt(Rm(Ln,!0),null),blockHash:nt(Ln,null),blockNumber:nt(Ye,null),transactionIndex:nt(Ye,null),from:Et,gasPrice:nt(Se),maxPriorityFeePerGas:nt(Se),maxFeePerGas:nt(Se),maxFeePerBlobGas:nt(Se,null),gasLimit:Se,to:nt(Et,null),value:Se,nonce:Ye,data:rh,creates:nt(Et,null),chainId:nt(Se,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(s);if(e.to==null&&e.creates==null&&(e.creates=NH(e)),(s.type===1||s.type===2)&&s.accessList==null&&(e.accessList=[]),s.signature?e.signature=bi.from(s.signature):e.signature=bi.from(s),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Se(e.blockHash)===e_&&(e.blockHash=null),e}const Vz="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Yd{constructor(e){F(this,"name");Oe(this,{name:e})}clone(){return new Yd(this.name)}}class km extends Yd{constructor(t,n){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);F(this,"effectiveBlock");F(this,"txBase");F(this,"txCreate");F(this,"txDataZero");F(this,"txDataNonzero");F(this,"txAccessListStorageKey");F(this,"txAccessListAddress");const i={effectiveBlock:t};function r(a,l){let u=(n||{})[a];u==null&&(u=l),V(typeof u=="number",`invalud value for ${a}`,"costs",n),i[a]=u}r("txBase",21e3),r("txCreate",32e3),r("txDataZero",4),r("txDataNonzero",16),r("txAccessListStorageKey",1900),r("txAccessListAddress",2400),Oe(this,i)}clone(){return new km(this.effectiveBlock,this)}}class Lm extends Yd{constructor(t,n){super("org.ethers.plugins.network.Ens");F(this,"address");F(this,"targetNetwork");Oe(this,{address:t||Vz,targetNetwork:n??1})}clone(){return new Lm(this.address,this.targetNetwork)}}var Id,Od;class Yz extends Yd{constructor(t,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");ie(this,Id);ie(this,Od);U(this,Id,t),U(this,Od,n)}get url(){return k(this,Id)}get processFunc(){return k(this,Od)}clone(){return this}}Id=new WeakMap,Od=new WeakMap;const Mx=new Map;var Nu,Bu,to;const eu=class eu{constructor(e,t){ie(this,Nu);ie(this,Bu);ie(this,to);U(this,Nu,e),U(this,Bu,Se(t)),U(this,to,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return k(this,Nu)}set name(e){U(this,Nu,e)}get chainId(){return k(this,Bu)}set chainId(e){U(this,Bu,Se(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Se(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Se(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Se(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(k(this,to).values())}attachPlugin(e){if(k(this,to).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return k(this,to).set(e.name,e.clone()),this}getPlugin(e){return k(this,to).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new eu(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new km;let n=t.txBase;if(e.to==null&&(n+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const i=ql(e.accessList);for(const r in i)n+=t.txAccessListAddress+t.txAccessListStorageKey*i[r].storageKeys.length}return n}static from(e){if(Kz(),e==null)return eu.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=Mx.get(e);if(t)return t();if(typeof e=="bigint")return new eu("unknown",e);V(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){V(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new eu(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new Lm(e.ensAddress,e.ensNetwork)),t}V(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const n=Mx.get(e);n&&V(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),Mx.set(e,t)}};Nu=new WeakMap,Bu=new WeakMap,to=new WeakMap;let sr=eu;function t_(s,e){const t=String(s);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${s}`);const n=t.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${s}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let i=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||i++,n[1]=i.toString()}return BigInt(n[0]+n[1])}function n_(s){return new Yz(s,async(e,t,n)=>{n.setHeader("User-Agent","ethers");let i;try{const[r,a]=await Promise.all([n.send(),e()]);i=r;const l=i.bodyJson.standard;return{gasPrice:a.gasPrice,maxFeePerGas:t_(l.maxFee,9),maxPriorityFeePerGas:t_(l.maxPriorityFee,9)}}catch(r){de(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:i,error:r})}})}let s_=!1;function Kz(){if(s_)return;s_=!0;function s(e,t,n){const i=function(){const r=new sr(e,t);return n.ensNetwork!=null&&r.attachPlugin(new Lm(null,n.ensNetwork)),r.attachPlugin(new km),(n.plugins||[]).forEach(a=>{r.attachPlugin(a)}),r};sr.register(e,i),sr.register(t,i),n.altNames&&n.altNames.forEach(r=>{sr.register(r,i)})}s("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),s("ropsten",3,{ensNetwork:3}),s("rinkeby",4,{ensNetwork:4}),s("goerli",5,{ensNetwork:5}),s("kovan",42,{ensNetwork:42}),s("sepolia",11155111,{ensNetwork:11155111}),s("holesky",17e3,{ensNetwork:17e3}),s("classic",61,{}),s("classicKotti",6,{}),s("arbitrum",42161,{ensNetwork:1}),s("arbitrum-goerli",421613,{}),s("arbitrum-sepolia",421614,{}),s("base",8453,{ensNetwork:1}),s("base-goerli",84531,{}),s("base-sepolia",84532,{}),s("bnb",56,{ensNetwork:1}),s("bnbt",97,{}),s("linea",59144,{ensNetwork:1}),s("linea-goerli",59140,{}),s("linea-sepolia",59141,{}),s("matic",137,{ensNetwork:1,plugins:[n_("https://gasstation.polygon.technology/v2")]}),s("matic-amoy",80002,{}),s("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[n_("https://gasstation-testnet.polygon.technology/v2")]}),s("optimism",10,{ensNetwork:1,plugins:[]}),s("optimism-goerli",420,{}),s("optimism-sepolia",11155420,{}),s("xdai",100,{ensNetwork:1})}function V3(s){return JSON.parse(JSON.stringify(s))}var jr,Ks,no,Yi,Fu,dg;class jz{constructor(e){ie(this,Fu);ie(this,jr);ie(this,Ks);ie(this,no);ie(this,Yi);U(this,jr,e),U(this,Ks,null),U(this,no,4e3),U(this,Yi,-2)}get pollingInterval(){return k(this,no)}set pollingInterval(e){U(this,no,e)}start(){k(this,Ks)||(U(this,Ks,k(this,jr)._setTimeout(pe(this,Fu,dg).bind(this),k(this,no))),pe(this,Fu,dg).call(this))}stop(){k(this,Ks)&&(k(this,jr)._clearTimeout(k(this,Ks)),U(this,Ks,null))}pause(e){this.stop(),e&&U(this,Yi,-2)}resume(){this.start()}}jr=new WeakMap,Ks=new WeakMap,no=new WeakMap,Yi=new WeakMap,Fu=new WeakSet,dg=async function(){try{const e=await k(this,jr).getBlockNumber();if(k(this,Yi)===-2){U(this,Yi,e);return}if(e!==k(this,Yi)){for(let t=k(this,Yi)+1;t<=e;t++){if(k(this,Ks)==null)return;await k(this,jr).emit("block",t)}U(this,Yi,e)}}catch{}k(this,Ks)!=null&&U(this,Ks,k(this,jr)._setTimeout(pe(this,Fu,dg).bind(this),k(this,no)))};var Rl,kl,so;class ub{constructor(e){ie(this,Rl);ie(this,kl);ie(this,so);U(this,Rl,e),U(this,so,!1),U(this,kl,t=>{this._poll(t,k(this,Rl))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){k(this,so)||(U(this,so,!0),k(this,kl).call(this,-2),k(this,Rl).on("block",k(this,kl)))}stop(){k(this,so)&&(U(this,so,!1),k(this,Rl).off("block",k(this,kl)))}pause(e){this.stop()}resume(){this.start()}}Rl=new WeakMap,kl=new WeakMap,so=new WeakMap;var Uu,qr;class qz extends ub{constructor(t,n){super(t);ie(this,Uu);ie(this,qr);U(this,Uu,n),U(this,qr,-2)}pause(t){t&&U(this,qr,-2),super.pause(t)}async _poll(t,n){const i=await n.getBlock(k(this,Uu));i!=null&&(k(this,qr)===-2?U(this,qr,i.number):i.number>k(this,qr)&&(n.emit(k(this,Uu),i.number),U(this,qr,i.number)))}}Uu=new WeakMap,qr=new WeakMap;var cm;class Qz extends ub{constructor(t,n){super(t);ie(this,cm);U(this,cm,V3(n))}async _poll(t,n){throw new Error("@TODO")}}cm=new WeakMap;var Hu;class Wz extends ub{constructor(t,n){super(t);ie(this,Hu);U(this,Hu,n)}async _poll(t,n){const i=await n.getTransactionReceipt(k(this,Hu));i&&n.emit(k(this,Hu),i)}}Hu=new WeakMap;var Qr,Gu,zu,io,js,um,pC;class hb{constructor(e,t){ie(this,um);ie(this,Qr);ie(this,Gu);ie(this,zu);ie(this,io);ie(this,js);U(this,Qr,e),U(this,Gu,V3(t)),U(this,zu,pe(this,um,pC).bind(this)),U(this,io,!1),U(this,js,-2)}start(){k(this,io)||(U(this,io,!0),k(this,js)===-2&&k(this,Qr).getBlockNumber().then(e=>{U(this,js,e)}),k(this,Qr).on("block",k(this,zu)))}stop(){k(this,io)&&(U(this,io,!1),k(this,Qr).off("block",k(this,zu)))}pause(e){this.stop(),e&&U(this,js,-2)}resume(){this.start()}}Qr=new WeakMap,Gu=new WeakMap,zu=new WeakMap,io=new WeakMap,js=new WeakMap,um=new WeakSet,pC=async function(e){if(k(this,js)===-2)return;const t=V3(k(this,Gu));t.fromBlock=k(this,js)+1,t.toBlock=e;const n=await k(this,Qr).getLogs(t);if(n.length===0){k(this,js)<e-60&&U(this,js,e-60);return}for(const i of n)k(this,Qr).emit(k(this,Gu),i),U(this,js,i.blockNumber)};const Xz=BigInt(2),Zz=10;function O2(s){return s&&typeof s.then=="function"}function gg(s,e){return s+":"+JSON.stringify(e,(t,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const i=Object.keys(n);return i.sort(),i.reduce((r,a)=>(r[a]=n[a],r),{})}return n})}class yC{constructor(e){F(this,"name");Oe(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Jz(s){return JSON.parse(JSON.stringify(s))}function Y3(s){return s=Array.from(new Set(s).values()),s.sort(),s}async function Px(s,e){if(s==null)throw new Error("invalid event");if(Array.isArray(s)&&(s={topics:s}),typeof s=="string")switch(s){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:s,tag:s}}if(Rt(s,32)){const t=s.toLowerCase();return{type:"transaction",tag:gg("tx",{hash:t}),hash:t}}if(s.orphan){const t=s;return{type:"orphan",tag:gg("orphan",t),filter:Jz(t)}}if(s.address||s.topics){const t=s,n={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?Y3(i.map(r=>r.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],r=[],a=l=>{Rt(l)?i.push(l):r.push((async()=>{i.push(await Xn(l,e))})())};Array.isArray(t.address)?t.address.forEach(a):a(t.address),r.length&&await Promise.all(r),n.address=Y3(i.map(l=>l.toLowerCase()))}return{filter:n,tag:gg("event",n),type:"event"}}V(!1,"unknown ProviderEvent","event",s)}function Nx(){return new Date().getTime()}const e$={cacheTimeout:250,pollingInterval:4e3};var Fn,ro,Un,$u,Ss,Ll,ao,Wr,Md,qs,Vu,Yu,Xe,vs,K3,j3,Mf,q3,Pf,mg;class t${constructor(e,t){ie(this,Xe);ie(this,Fn);ie(this,ro);ie(this,Un);ie(this,$u);ie(this,Ss);ie(this,Ll);ie(this,ao);ie(this,Wr);ie(this,Md);ie(this,qs);ie(this,Vu);ie(this,Yu);if(U(this,Yu,Object.assign({},e$,t||{})),e==="any")U(this,Ll,!0),U(this,Ss,null);else if(e){const n=sr.from(e);U(this,Ll,!1),U(this,Ss,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else U(this,Ll,!1),U(this,Ss,null);U(this,Wr,-1),U(this,ao,new Map),U(this,Fn,new Map),U(this,ro,new Map),U(this,Un,null),U(this,$u,!1),U(this,Md,1),U(this,qs,new Map),U(this,Vu,!1)}get pollingInterval(){return k(this,Yu).pollingInterval}get provider(){return this}get plugins(){return Array.from(k(this,ro).values())}attachPlugin(e){if(k(this,ro).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return k(this,ro).set(e.name,e.connect(this)),this}getPlugin(e){return k(this,ro).get(e)||null}get disableCcipRead(){return k(this,Vu)}set disableCcipRead(e){U(this,Vu,!!e)}async ccipReadFetch(e,t,n){if(this.disableCcipRead||n.length===0||e.to==null)return null;const i=e.to.toLowerCase(),r=t.toLowerCase(),a=[];for(let l=0;l<n.length;l++){const u=n[l],h=u.replace("{sender}",i).replace("{data}",r),d=new xo(h);u.indexOf("{data}")===-1&&(d.body={data:r,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:l,urls:n});let g="unknown error",p;try{p=await d.send()}catch(y){a.push(y.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:y}});continue}try{const y=p.bodyJson;if(y.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:y}),y.data;y.message&&(g=y.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:y})}catch{}de(p.statusCode<400||p.statusCode>=500,`response not found during CCIP fetch: ${g}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:u,errorMessage:g}}),a.push(g)}de(!1,`error encountered during CCIP fetch: ${a.map(l=>JSON.stringify(l)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:a}})}_wrapBlock(e,t){return new bz(Uz(e),this)}_wrapLog(e,t){return new $d(Bz(e),this)}_wrapTransactionReceipt(e,t){return new nC($z(e),this)}_wrapTransactionResponse(e,t){return new yd(mC(e),this)}_detectNetwork(){de(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){de(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Ye(await pe(this,Xe,vs).call(this,{method:"getBlockNumber"}),"%response");return k(this,Wr)>=0&&U(this,Wr,e),e}_getAddress(e){return Xn(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Rt(e))return Rt(e,32)?e:Wc(e);if(typeof e=="bigint"&&(e=Ye(e,"blockTag")),typeof e=="number")return e>=0?Wc(e):k(this,Wr)>=0?Wc(k(this,Wr)+e):this.getBlockNumber().then(t=>Wc(t+e));V(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(u=>u==null?null:Array.isArray(u)?Y3(u.map(h=>h.toLowerCase())):u.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,i=(u,h,d)=>{let g;switch(u.length){case 0:break;case 1:g=u[0];break;default:u.sort(),g=u}if(n&&(h!=null||d!=null))throw new Error("invalid filter");const p={};return g&&(p.address=g),t.length&&(p.topics=t),h&&(p.fromBlock=h),d&&(p.toBlock=d),n&&(p.blockHash=n),p};let r=[];if(e.address)if(Array.isArray(e.address))for(const u of e.address)r.push(this._getAddress(u));else r.push(this._getAddress(e.address));let a;"fromBlock"in e&&(a=this._getBlockTag(e.fromBlock));let l;return"toBlock"in e&&(l=this._getBlockTag(e.toBlock)),r.filter(u=>typeof u!="string").length||a!=null&&typeof a!="string"||l!=null&&typeof l!="string"?Promise.all([Promise.all(r),a,l]).then(u=>i(u[0],u[1],u[2])):i(r,a,l)}_getTransactionRequest(e){const t=Yg(e),n=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const r=Xn(t[i],this);O2(r)?n.push(async function(){t[i]=await r}()):t[i]=r}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);O2(i)?n.push(async function(){t.blockTag=await i}()):t.blockTag=i}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(k(this,Ss)==null){const i=(async()=>{try{const r=await this._detectNetwork();return this.emit("network",r,null),r}catch(r){throw k(this,Ss)===i&&U(this,Ss,null),r}})();return U(this,Ss,i),(await i).clone()}const e=k(this,Ss),[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(k(this,Ll)?(this.emit("network",n,t),k(this,Ss)===e&&U(this,Ss,Promise.resolve(n))):de(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:r,priorityFee:a}=await jn({_block:pe(this,Xe,q3).call(this,"latest",!1),gasPrice:(async()=>{try{const d=await pe(this,Xe,vs).call(this,{method:"getGasPrice"});return Se(d,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const d=await pe(this,Xe,vs).call(this,{method:"getPriorityFee"});return Se(d,"%response")}catch{}return null})()});let l=null,u=null;const h=this._wrapBlock(i,e);return h&&h.baseFeePerGas&&(u=a??BigInt("1000000000"),l=h.baseFeePerGas*Xz+u),new WS(r,l,u)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const i=new xo(n.url),r=await n.processFunc(t,this,i);return new WS(r.gasPrice,r.maxFeePerGas,r.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return O2(t)&&(t=await t),Se(await pe(this,Xe,vs).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:n}=await jn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await pe(this,Xe,j3).call(this,pe(this,Xe,K3).call(this,t,n,e.enableCcipRead?0:-1))}async getBalance(e,t){return Se(await pe(this,Xe,Mf).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return Ye(await pe(this,Xe,Mf).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return we(await pe(this,Xe,Mf).call(this,{method:"getCode"},e,t))}async getStorage(e,t,n){const i=Se(t,"position");return we(await pe(this,Xe,Mf).call(this,{method:"getStorage",position:i},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:i}=await jn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),r=$g.from(e);if(r.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(r,i).replaceableTransaction(t)}async getBlock(e,t){const{network:n,params:i}=await jn({network:this.getNetwork(),params:pe(this,Xe,q3).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,n)}async getTransaction(e){const{network:t,params:n}=await jn({network:this.getNetwork(),params:pe(this,Xe,vs).call(this,{method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await jn({network:this.getNetwork(),params:pe(this,Xe,vs).call(this,{method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const i=await pe(this,Xe,vs).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await jn({network:this.getNetwork(),result:pe(this,Xe,vs).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:we(t)}async getLogs(e){let t=this._getFilter(e);O2(t)&&(t=await t);const{network:n,params:i}=await jn({network:this.getNetwork(),params:pe(this,Xe,vs).call(this,{method:"getLogs",filter:t})});return i.map(r=>this._wrapLog(r,n))}_getProvider(e){de(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await jg.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=Et(e);const t=F3(e.substring(2).toLowerCase()+".addr.reverse");try{const n=await jg.getEnsAddress(this),r=await new lu(n,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(r==null||r===cd)return null;const l=await new lu(r,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(l)!==e?null:l}catch(n){if(Dn(n,"BAD_DATA")&&n.value==="0x"||Dn(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,t,n){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(r,a)=>{let l=null;const u=async h=>{try{const d=await this.getTransactionReceipt(e);if(d!=null&&h-d.blockNumber+1>=i){r(d),l&&(clearTimeout(l),l=null);return}}catch(d){console.log("EEE",d)}this.once("block",u)};n!=null&&(l=setTimeout(()=>{l!=null&&(l=null,this.off("block",u),a(Vt("timeout","TIMEOUT",{reason:"timeout"})))},n)),u(await this.getBlockNumber())})}async waitForBlock(e){de(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=k(this,qs).get(e);t&&(t.timer&&clearTimeout(t.timer),k(this,qs).delete(e))}_setTimeout(e,t){t==null&&(t=0);const n=cf(this,Md)._++,i=()=>{k(this,qs).delete(n),e()};if(this.paused)k(this,qs).set(n,{timer:null,func:i,time:t});else{const r=setTimeout(i,t);k(this,qs).set(n,{timer:r,func:i,time:Nx()})}return n}_forEachSubscriber(e){for(const t of k(this,Fn).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new yC(e.type);case"block":{const t=new jz(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new qz(this,e.type);case"event":return new hb(this,e.filter);case"transaction":return new Wz(this,e.hash);case"orphan":return new Qz(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of k(this,Fn).values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),k(this,Un)!=null&&t.pause(k(this,Un));break}}async on(e,t){const n=await pe(this,Xe,mg).call(this,e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,k(this,Un)!=null&&n.subscriber.pause(k(this,Un))),this}async once(e,t){const n=await pe(this,Xe,mg).call(this,e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,k(this,Un)!=null&&n.subscriber.pause(k(this,Un))),this}async emit(e,...t){const n=await pe(this,Xe,Pf).call(this,e,t);if(!n||n.listeners.length===0)return!1;const i=n.listeners.length;return n.listeners=n.listeners.filter(({listener:r,once:a})=>{const l=new LL(this,a?null:r,e);try{r.call(this,...t,l)}catch{}return!a}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),k(this,Fn).delete(n.tag)),i>0}async listenerCount(e){if(e){const n=await pe(this,Xe,Pf).call(this,e);return n?n.listeners.length:0}let t=0;for(const{listeners:n}of k(this,Fn).values())t+=n.length;return t}async listeners(e){if(e){const n=await pe(this,Xe,Pf).call(this,e);return n?n.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:n}of k(this,Fn).values())t=t.concat(n.map(({listener:i})=>i));return t}async off(e,t){const n=await pe(this,Xe,Pf).call(this,e);if(!n)return this;if(t){const i=n.listeners.map(({listener:r})=>r).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(!t||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),k(this,Fn).delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:i}=await pe(this,Xe,mg).call(this,e);n&&i.stop(),k(this,Fn).delete(t)}else for(const[t,{started:n,subscriber:i}]of k(this,Fn))n&&i.stop(),k(this,Fn).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return k(this,$u)}destroy(){this.removeAllListeners();for(const e of k(this,qs).keys())this._clearTimeout(e);U(this,$u,!0)}get paused(){return k(this,Un)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(U(this,Wr,-1),k(this,Un)!=null){if(k(this,Un)==!!e)return;de(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),U(this,Un,!!e);for(const t of k(this,qs).values())t.timer&&clearTimeout(t.timer),t.time=Nx()-t.time}resume(){if(k(this,Un)!=null){this._forEachSubscriber(e=>e.resume()),U(this,Un,null);for(const e of k(this,qs).values()){let t=e.time;t<0&&(t=0),e.time=Nx(),setTimeout(e.func,t)}}}}Fn=new WeakMap,ro=new WeakMap,Un=new WeakMap,$u=new WeakMap,Ss=new WeakMap,Ll=new WeakMap,ao=new WeakMap,Wr=new WeakMap,Md=new WeakMap,qs=new WeakMap,Vu=new WeakMap,Yu=new WeakMap,Xe=new WeakSet,vs=async function(e){const t=k(this,Yu).cacheTimeout;if(t<0)return await this._perform(e);const n=gg(e.method,e);let i=k(this,ao).get(n);return i||(i=this._perform(e),k(this,ao).set(n,i),setTimeout(()=>{k(this,ao).get(n)===i&&k(this,ao).delete(n)},t)),await i},K3=async function(e,t,n){de(n<Zz,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=Yg(e);try{return we(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(r){if(!this.disableCcipRead&&Yv(r)&&r.data&&n>=0&&t==="latest"&&i.to!=null&&Yt(r.data,0,4)==="0x556f1830"){const a=r.data,l=await Xn(i.to,this);let u;try{u=a$(Yt(r.data,4))}catch(g){de(!1,g.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:a}})}de(u.sender.toLowerCase()===l.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:a,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:u.errorArgs}});const h=await this.ccipReadFetch(i,u.calldata,u.urls);de(h!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:r.data,errorArgs:u.errorArgs}});const d={to:l,data:nn([u.selector,r$([h,u.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const g=await pe(this,Xe,K3).call(this,d,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:g}),g}catch(g){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:g}),g}}throw r}},j3=async function(e){const{value:t}=await jn({network:this.getNetwork(),value:e});return t},Mf=async function(e,t,n){let i=this._getAddress(t),r=this._getBlockTag(n);return(typeof i!="string"||typeof r!="string")&&([i,r]=await Promise.all([i,r])),await pe(this,Xe,j3).call(this,pe(this,Xe,vs).call(this,Object.assign(e,{address:i,blockTag:r})))},q3=async function(e,t){if(Rt(e,32))return await pe(this,Xe,vs).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return typeof n!="string"&&(n=await n),await pe(this,Xe,vs).call(this,{method:"getBlock",blockTag:n,includeTransactions:t})},Pf=async function(e,t){let n=await Px(e,this);return n.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(n=await Px({orphan:"drop-log",log:t[0]},this)),k(this,Fn).get(n.tag)||null},mg=async function(e){const t=await Px(e,this),n=t.tag;let i=k(this,Fn).get(n);return i||(i={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},k(this,Fn).set(n,i)),i};function n$(s,e){try{const t=Q3(s,e);if(t)return Pg(t)}catch{}return null}function Q3(s,e){if(s==="0x")return null;try{const t=Ye(Yt(s,e,e+32)),n=Ye(Yt(s,t,t+32));return Yt(s,t+32,t+32+n)}catch{}return null}function i_(s){const e=Qn(s);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function s$(s){if(s.length%32===0)return s;const e=new Uint8Array(Math.ceil(s.length/32)*32);return e.set(s),e}const i$=new Uint8Array([]);function r$(s){const e=[];let t=0;for(let n=0;n<s.length;n++)e.push(i$),t+=32;for(let n=0;n<s.length;n++){const i=it(s[n]);e[n]=i_(t),e.push(i_(i.length)),e.push(s$(i)),t+=32+Math.ceil(i.length/32)*32}return nn(e)}const r_="0x0000000000000000000000000000000000000000000000000000000000000000";function a$(s){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};de(iu(s)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Yt(s,0,32);de(Yt(t,0,12)===Yt(r_,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Yt(t,12);try{const n=[],i=Ye(Yt(s,32,64)),r=Ye(Yt(s,i,i+32)),a=Yt(s,i+32);for(let l=0;l<r;l++){const u=n$(a,l*32);if(u==null)throw new Error("abort");n.push(u)}e.urls=n}catch{de(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Q3(s,64);if(n==null)throw new Error("abort");e.calldata=n}catch{de(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}de(Yt(s,100,128)===Yt(r_,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Yt(s,96,100);try{const n=Q3(s,128);if(n==null)throw new Error("abort");e.extraData=n}catch{de(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function Gc(s,e){if(s.provider)return s.provider;de(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function a_(s,e){let t=Yg(e);if(t.to!=null&&(t.to=Xn(t.to,s)),t.from!=null){const n=t.from;t.from=Promise.all([s.getAddress(),Xn(n,s)]).then(([i,r])=>(V(i.toLowerCase()===r.toLowerCase(),"transaction from mismatch","tx.from",r),i))}else t.from=s.getAddress();return await jn(t)}class o${constructor(e){F(this,"provider");Oe(this,{provider:e||null})}async getNonce(e){return Gc(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await a_(this,e)}async populateTransaction(e){const t=Gc(this,"populateTransaction"),n=await a_(this,e);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const i=await this.provider.getNetwork();if(n.chainId!=null){const a=Se(n.chainId);V(a===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=i.chainId;const r=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||r)?V(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&r&&V(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const a=await t.getFeeData();de(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=a.gasPrice)}else{const a=await t.getFeeData();if(n.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const l=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=l,n.maxPriorityFeePerGas=l}else n.maxFeePerGas==null&&(n.maxFeePerGas=a.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?(de(!r,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=a.gasPrice),n.type=0):de(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=a.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}return await jn(n)}async estimateGas(e){return Gc(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Gc(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Gc(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Gc(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const i=$g.from(n);return await t.broadcastTransaction(await this.signTransaction(i))}}function l$(s){return JSON.parse(JSON.stringify(s))}var Kn,Ki,Dl,oo,Cl,Ku,Eo,W3,X3;class xC{constructor(e){ie(this,Eo);ie(this,Kn);ie(this,Ki);ie(this,Dl);ie(this,oo);ie(this,Cl);ie(this,Ku);U(this,Kn,e),U(this,Ki,null),U(this,Dl,pe(this,Eo,W3).bind(this)),U(this,oo,!1),U(this,Cl,null),U(this,Ku,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){k(this,oo)||(U(this,oo,!0),pe(this,Eo,W3).call(this,-2))}stop(){k(this,oo)&&(U(this,oo,!1),U(this,Ku,!0),pe(this,Eo,X3).call(this),k(this,Kn).off("block",k(this,Dl)))}pause(e){e&&pe(this,Eo,X3).call(this),k(this,Kn).off("block",k(this,Dl))}resume(){this.start()}}Kn=new WeakMap,Ki=new WeakMap,Dl=new WeakMap,oo=new WeakMap,Cl=new WeakMap,Ku=new WeakMap,Eo=new WeakSet,W3=async function(e){try{k(this,Ki)==null&&U(this,Ki,this._subscribe(k(this,Kn)));let t=null;try{t=await k(this,Ki)}catch(r){if(!Dn(r,"UNSUPPORTED_OPERATION")||r.operation!=="eth_newFilter")throw r}if(t==null){U(this,Ki,null),k(this,Kn)._recoverSubscriber(this,this._recover(k(this,Kn)));return}const n=await k(this,Kn).getNetwork();if(k(this,Cl)||U(this,Cl,n),k(this,Cl).chainId!==n.chainId)throw new Error("chaid changed");if(k(this,Ku))return;const i=await k(this,Kn).send("eth_getFilterChanges",[t]);await this._emitResults(k(this,Kn),i)}catch(t){console.log("@TODO",t)}k(this,Kn).once("block",k(this,Dl))},X3=function(){const e=k(this,Ki);e&&(U(this,Ki,null),e.then(t=>{k(this,Kn).destroyed||k(this,Kn).send("eth_uninstallFilter",[t])}))};var Il;class c$ extends xC{constructor(t,n){super(t);ie(this,Il);U(this,Il,l$(n))}_recover(t){return new hb(t,k(this,Il))}async _subscribe(t){return await t.send("eth_newFilter",[k(this,Il)])}async _emitResults(t,n){for(const i of n)t.emit(k(this,Il),t._wrapLog(i,t._network))}}Il=new WeakMap;class u$ extends xC{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const h$="bigint,boolean,function,number,string,symbol".split(/,/g);function pg(s){if(s==null||h$.indexOf(typeof s)>=0||typeof s.getAddress=="function")return s;if(Array.isArray(s))return s.map(pg);if(typeof s=="object")return Object.keys(s).reduce((e,t)=>(e[t]=s[t],e),{});throw new Error(`should not happen: ${s} (${typeof s})`)}function f$(s){return new Promise(e=>{setTimeout(e,s)})}function zc(s){return s&&s.toLowerCase()}function o_(s){return s&&typeof s.pollingInterval=="number"}const vC={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Bx extends o${constructor(t,n){super(t);F(this,"address");n=Et(n),Oe(this,{address:n})}connect(t){de(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const n=pg(t),i=[];if(n.from){const a=n.from;i.push((async()=>{const l=await Xn(a,this.provider);V(l!=null&&l.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=l})())}else n.from=this.address;if(n.gasLimit==null&&i.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const a=n.to;i.push((async()=>{n.to=await Xn(a,this.provider)})())}i.length&&await Promise.all(i);const r=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[r])}async sendTransaction(t){const n=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((r,a)=>{const l=[1e3,100];let u=0;const h=async()=>{try{const d=await this.provider.getTransaction(i);if(d!=null){r(d.replaceableTransaction(n));return}}catch(d){if(Dn(d,"CANCELLED")||Dn(d,"BAD_DATA")||Dn(d,"NETWORK_ERROR")||Dn(d,"UNSUPPORTED_OPERATION")){d.info==null&&(d.info={}),d.info.sendTransactionHash=i,a(d);return}if(Dn(d,"INVALID_ARGUMENT")&&(u++,d.info==null&&(d.info={}),d.info.sendTransactionHash=i,u>10)){a(d);return}this.provider.emit("error",Vt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:d}))}this.provider._setTimeout(()=>{h()},l.pop()||4e3)};h()})}async signTransaction(t){const n=pg(t);if(n.from){const r=await Xn(n.from,this.provider);V(r!=null&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=r}else n.from=this.address;const i=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const n=typeof t=="string"?sa(t):t;return await this.provider.send("personal_sign",[we(n),this.address.toLowerCase()])}async signTypedData(t,n,i){const r=pg(i),a=await Vg.resolveNames(t,n,r,async l=>{const u=await Xn(l);return V(u!=null,"TypedData does not support null address","value",l),u});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Vg.getPayload(a.domain,n,a.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const n=typeof t=="string"?sa(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),we(n)])}}var Ol,ju,Xr,ji,mi,Qs,rs,Pd,Z3;class d$ extends t${constructor(t,n){super(t,n);ie(this,Pd);ie(this,Ol);ie(this,ju);ie(this,Xr);ie(this,ji);ie(this,mi);ie(this,Qs);ie(this,rs);U(this,ju,1),U(this,Ol,Object.assign({},vC,n||{})),U(this,Xr,[]),U(this,ji,null),U(this,Qs,null),U(this,rs,null);{let r=null;const a=new Promise(l=>{r=l});U(this,mi,{promise:a,resolve:r})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(V(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",n),i&&t!=null&&U(this,Qs,sr.from(t))):i&&(V(t==null||i.matches(t),"staticNetwork MUST match network object","options",n),U(this,Qs,i))}_getOption(t){return k(this,Ol)[t]}get _network(){return de(k(this,Qs),"network is not available yet","NETWORK_ERROR"),k(this,Qs)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&Se(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const r=await this.getFeeData();r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const n=this.getRpcRequest(t);return n!=null?await this.send(n.method,n.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(k(this,Qs))return k(this,Qs)}else return t;return k(this,rs)?await k(this,rs):this.ready?(U(this,rs,(async()=>{try{const n=sr.from(Se(await this.send("eth_chainId",[])));return U(this,rs,null),n}catch(n){throw U(this,rs,null),n}})()),await k(this,rs)):(U(this,rs,(async()=>{const n={id:cf(this,ju)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let i;try{i=(await this._send(n))[0],U(this,rs,null)}catch(r){throw U(this,rs,null),this.emit("debug",{action:"receiveRpcError",error:r}),r}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return sr.from(Se(i.result));throw this.getRpcError(n,i)})()),await k(this,rs))}_start(){k(this,mi)==null||k(this,mi).resolve==null||(k(this,mi).resolve(),U(this,mi,null),(async()=>{for(;k(this,Qs)==null&&!this.destroyed;)try{U(this,Qs,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Vt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await f$(1e3)}pe(this,Pd,Z3).call(this)})())}async _waitUntilReady(){if(k(this,mi)!=null)return await k(this,mi).promise}_getSubscriber(t){return t.type==="pending"?new u$(this):t.type==="event"?this._getOption("polling")?new hb(this,t.filter):new c$(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new yC("orphan"):super._getSubscriber(t)}get ready(){return k(this,mi)==null}getRpcTransaction(t){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let r=i;i==="gasLimit"&&(r="gas"),n[r]=Wc(Se(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(n[i]=we(t[i]))}),t.accessList&&(n.accessList=ql(t.accessList)),t.blobVersionedHashes&&(n.blobVersionedHashes=t.blobVersionedHashes.map(i=>i.toLowerCase())),n}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[zc(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[zc(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[zc(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[zc(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(zc):t.filter.address=zc(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,n){const{method:i}=t,{error:r}=n;if(i==="eth_estimateGas"&&r.message){const u=r.message;if(!u.match(/revert/i)&&u.match(/insufficient funds/i))return Vt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:r}})}if(i==="eth_call"||i==="eth_estimateGas"){const u=J3(r),h=pd.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],u?u.data:null);return h.info={error:r,payload:t},h}const a=JSON.stringify(m$(r));if(typeof r.message=="string"&&r.message.match(/user denied|ethers-user-denied/i))return Vt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:r}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const u=t.params[0];if(a.match(/insufficient funds|base fee exceeds gas limit/i))return Vt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:u,info:{error:r}});if(a.match(/nonce/i)&&a.match(/too low/i))return Vt("nonce has already been used","NONCE_EXPIRED",{transaction:u,info:{error:r}});if(a.match(/replacement transaction/i)&&a.match(/underpriced/i))return Vt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:u,info:{error:r}});if(a.match(/only replay-protected/i))return Vt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:u,info:{error:r}}})}let l=!!a.match(/the method .* does not exist/i);return l||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(l=!0),l?Vt("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:r,payload:t}}):Vt("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:t})}send(t,n){if(this.destroyed)return Promise.reject(Vt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=cf(this,ju)._++,r=new Promise((a,l)=>{k(this,Xr).push({resolve:a,reject:l,payload:{method:t,params:n,id:i,jsonrpc:"2.0"}})});return pe(this,Pd,Z3).call(this),r}async getSigner(t){t==null&&(t=0);const n=this.send("eth_accounts",[]);if(typeof t=="number"){const r=await n;if(t>=r.length)throw new Error("no such account");return new Bx(this,r[t])}const{accounts:i}=await jn({network:this.getNetwork(),accounts:n});t=Et(t);for(const r of i)if(Et(r)===t)return new Bx(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new Bx(this,n))}destroy(){k(this,ji)&&(clearTimeout(k(this,ji)),U(this,ji,null));for(const{payload:t,reject:n}of k(this,Xr))n(Vt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));U(this,Xr,[]),super.destroy()}}Ol=new WeakMap,ju=new WeakMap,Xr=new WeakMap,ji=new WeakMap,mi=new WeakMap,Qs=new WeakMap,rs=new WeakMap,Pd=new WeakSet,Z3=function(){if(k(this,ji))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");U(this,ji,setTimeout(()=>{U(this,ji,null);const n=k(this,Xr);for(U(this,Xr,[]);n.length;){const i=[n.shift()];for(;n.length&&i.length!==k(this,Ol).batchMaxCount;)if(i.push(n.shift()),JSON.stringify(i.map(a=>a.payload)).length>k(this,Ol).batchMaxSize){n.unshift(i.pop());break}(async()=>{const r=i.length===1?i[0].payload:i.map(a=>a.payload);this.emit("debug",{action:"sendRpcPayload",payload:r});try{const a=await this._send(r);this.emit("debug",{action:"receiveRpcResult",result:a});for(const{resolve:l,reject:u,payload:h}of i){if(this.destroyed){u(Vt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:h.method}));continue}const d=a.filter(g=>g.id===h.id)[0];if(d==null){const g=Vt("missing response for request","BAD_DATA",{value:a,info:{payload:h}});this.emit("error",g),u(g);continue}if("error"in d){u(this.getRpcError(h,d));continue}l(d.result)}}catch(a){this.emit("debug",{action:"receiveRpcError",error:a});for(const{reject:l}of i)l(a)}})()}},t))};var lo;class g$ extends d${constructor(t,n){super(t,n);ie(this,lo);let i=this._getOption("pollingInterval");i==null&&(i=vC.pollingInterval),U(this,lo,i)}_getSubscriber(t){const n=super._getSubscriber(t);return o_(n)&&(n.pollingInterval=k(this,lo)),n}get pollingInterval(){return k(this,lo)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");U(this,lo,t),this._forEachSubscriber(n=>{o_(n)&&(n.pollingInterval=k(this,lo))})}}lo=new WeakMap;function J3(s){if(s==null)return null;if(typeof s.message=="string"&&s.message.match(/revert/i)&&Rt(s.data))return{message:s.message,data:s.data};if(typeof s=="object"){for(const e in s){const t=J3(s[e]);if(t)return t}return null}if(typeof s=="string")try{return J3(JSON.parse(s))}catch{}return null}function ev(s,e){if(s!=null){if(typeof s.message=="string"&&e.push(s.message),typeof s=="object")for(const t in s)ev(s[t],e);if(typeof s=="string")try{return ev(JSON.parse(s),e)}catch{}}}function m$(s){const e=[];return ev(s,e),e}var qu;class bC extends g${constructor(t,n,i){const r=Object.assign({},i??{},{batchMaxCount:1});V(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(n,r);ie(this,qu);U(this,qu,async(a,l)=>{const u={method:a,params:l};this.emit("debug",{action:"sendEip1193Request",payload:u});try{const h=await t.request(u);return this.emit("debug",{action:"receiveEip1193Result",result:h}),h}catch(h){const d=new Error(h.message);throw d.code=h.code,d.data=h.data,d.payload=u,this.emit("debug",{action:"receiveEip1193Error",error:d}),d}})}async send(t,n){return await this._start(),await super.send(t,n)}async _send(t){V(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const n=await k(this,qu).call(this,t.method,t.params||[]);return[{id:t.id,result:n}]}catch(n){return[{id:t.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(t,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(t,n)}async hasSigner(t){t==null&&(t=0);const n=await this.send("eth_accounts",[]);return typeof t=="number"?n.length>t:(t=t.toLowerCase(),n.filter(i=>i.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await k(this,qu).call(this,"eth_requestAccounts",[])}catch(n){const i=n.payload;throw this.getRpcError(i,{id:i.id,error:n})}return await super.getSigner(t)}}qu=new WeakMap;const p$=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"score",type:"uint8"}],name:"DealerScore",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"label",type:"string"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"DebugUint",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"label",type:"string"},{indexed:!1,internalType:"uint8[]",name:"values",type:"uint8[]"}],name:"DebugUintArray",type:"event"},{inputs:[{internalType:"uint256",name:"gameId",type:"uint256"},{internalType:"bytes32",name:"seed",type:"bytes32"},{internalType:"uint8[]",name:"revealedCards",type:"uint8[]"},{internalType:"uint8",name:"playerCardCount",type:"uint8"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"gameId",type:"uint256"},{indexed:!0,internalType:"address",name:"player",type:"address"},{indexed:!1,internalType:"uint256",name:"bet",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"deckHash",type:"bytes32"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"gameId",type:"uint256"},{indexed:!1,internalType:"bool",name:"playerWon",type:"bool"},{indexed:!1,internalType:"string",name:"message",type:"string"}],name:"GameEnded",type:"event"},{inputs:[{internalType:"bytes32",name:"deckHash",type:"bytes32"}],name:"newGame",outputs:[],stateMutability:"payable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"score",type:"uint8"}],name:"PlayerScore",type:"event"},{inputs:[{internalType:"address payable",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdraw",type:"event"},{stateMutability:"payable",type:"receive"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"games",outputs:[{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"bet",type:"uint256"},{internalType:"bytes32",name:"deckHash",type:"bytes32"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_gameId",type:"uint256"}],name:"getGameInfo",outputs:[{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"bet",type:"uint256"},{internalType:"bytes32",name:"deckSeed",type:"bytes32"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextGameId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"seed",type:"bytes32"}],name:"testShuffle",outputs:[{internalType:"uint8[52]",name:"",type:"uint8[52]"}],stateMutability:"pure",type:"function"}],y$="0xb957db5e482cd63d2e42244594eec09bea22fa0c",l_=async()=>{if(!window.ethereum)throw new Error("請安裝 MetaMask");const e=await new bC(window.ethereum).getSigner();return new lu(y$,p$,e)},x$=(s,e,t,n)=>{const[i,r]=Q.useState({canHit:!1,canStand:!1,canDouble:!1,canSplit:!1,canSurrender:!1,canInsurance:!1});return Q.useEffect(()=>{if(!t){r({canHit:!1,canStand:!1,canDouble:!1,canSplit:!1,canSurrender:!1,canInsurance:!1});return}if(n){r(()=>({canHit:!1,canStand:!1,canDouble:!1,canSplit:!1,canSurrender:!1,canInsurance:!1}));return}const a=v$(s),l=typeof a=="string"&&a.includes("Bust"),u=s.length===2&&a==="21! Blackjack!";r({canHit:!l&&!u,canStand:!l&&t,canDouble:s.length===2&&!l,canSplit:s.length===2&&b$(s),canSurrender:s.length===2,canInsurance:e.length>0&&E$(e[1])&&s.length===2})},[s,e,t,n]),i};function v$(s){let e=0,t=0;for(const i of s){const r=i%13+1;r===1?(t++,e+=11):r>=10?e+=10:e+=r}let n=e;for(;n>21&&t>0;)n-=10,t--;return n>21?`${n} Bust🧨`:n===21&&s.length===2?"21! Blackjack!":n}function b$(s){const e=s[0]%13+1,t=s[1]%13+1;return s.length===2&&e===t}function E$(s){return s%13+1===1}function w$({onConnect:s,onClose:e}){return he.jsx("div",{className:"fixed inset-0 bg-[#000000c8] flex items-center justify-center z-40",children:he.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-[90%] max-w-md",children:[he.jsx("h2",{className:"text-xl font-semibold mb-4 text-center text-[#000000]",children:"Connect To wallet"}),he.jsxs("div",{className:"flex flex-col gap-3",children:[he.jsx("button",{onClick:s,className:"px-6 py-2 rounded-md bg-black text-white hover:bg-blue-500 cursor-pointer transition-colors duration-200",children:"MetaMask"}),he.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700  hover:underline text-sm text-center",children:"Cancel (Test Mode)"})]})]})})}function fb(s,{strict:e=!0}={}){return!s||typeof s!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(s):s.startsWith("0x")}function c_(s){return fb(s,{strict:!1})?Math.ceil((s.length-2)/2):s.length}const EC="2.29.0";let xf={getDocsUrl:({docsBaseUrl:s,docsPath:e="",docsSlug:t})=>e?`${s??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${EC}`};class wi extends Error{constructor(e,t={}){var l;const n=(()=>{var u;return t.cause instanceof wi?t.cause.details:(u=t.cause)!=null&&u.message?t.cause.message:t.details})(),i=t.cause instanceof wi&&t.cause.docsPath||t.docsPath,r=(l=xf.getDocsUrl)==null?void 0:l.call(xf,{...t,docsPath:i}),a=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...r?[`Docs: ${r}`]:[],...n?[`Details: ${n}`]:[],...xf.version?[`Version: ${xf.version}`]:[]].join(`
`);super(a,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=EC}walk(e){return wC(this,e)}}function wC(s,e){return e!=null&&e(s)?s:s&&typeof s=="object"&&"cause"in s&&s.cause!==void 0?wC(s.cause,e):e?null:s}class A$ extends wi{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class T$ extends wi{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}}class S$ extends wi{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}class AC extends wi{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function ra(s,{dir:e,size:t=32}={}){return typeof s=="string"?_$(s,{dir:e,size:t}):R$(s,{dir:e,size:t})}function _$(s,{dir:e,size:t=32}={}){if(t===null)return s;const n=s.replace("0x","");if(n.length>t*2)throw new AC({size:Math.ceil(n.length/2),targetSize:t,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function R$(s,{dir:e,size:t=32}={}){if(t===null)return s;if(s.length>t)throw new AC({size:s.length,targetSize:t,type:"bytes"});const n=new Uint8Array(t);for(let i=0;i<t;i++){const r=e==="right";n[r?i:t-i-1]=s[r?i:s.length-i-1]}return n}class k$ extends wi{constructor({max:e,min:t,signed:n,size:i,value:r}){super(`Number "${r}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class L$ extends wi{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Kd(s,{size:e}){if(c_(s)>e)throw new L$({givenSize:c_(s),maxSize:e})}const D$=Array.from({length:256},(s,e)=>e.toString(16).padStart(2,"0"));function C$(s,e={}){return typeof s=="number"||typeof s=="bigint"?db(s,e):typeof s=="string"?_C(s,e):typeof s=="boolean"?TC(s,e):SC(s,e)}function TC(s,e={}){const t=`0x${Number(s)}`;return typeof e.size=="number"?(Kd(t,{size:e.size}),ra(t,{size:e.size})):t}function SC(s,e={}){let t="";for(let i=0;i<s.length;i++)t+=D$[s[i]];const n=`0x${t}`;return typeof e.size=="number"?(Kd(n,{size:e.size}),ra(n,{dir:"right",size:e.size})):n}function db(s,e={}){const{signed:t,size:n}=e,i=BigInt(s);let r;n?t?r=(1n<<BigInt(n)*8n-1n)-1n:r=2n**(BigInt(n)*8n)-1n:typeof s=="number"&&(r=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof r=="bigint"&&t?-r-1n:0;if(r&&i>r||i<a){const u=typeof s=="bigint"?"n":"";throw new k$({max:r?`${r}${u}`:void 0,min:`${a}${u}`,signed:t,size:n,value:`${s}${u}`})}const l=`0x${(t&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?ra(l,{size:n}):l}const I$=new TextEncoder;function _C(s,e={}){const t=I$.encode(s);return SC(t,e)}const O$=new TextEncoder;function M$(s,e={}){return typeof s=="number"||typeof s=="bigint"?N$(s,e):typeof s=="boolean"?P$(s,e):fb(s)?RC(s,e):kC(s,e)}function P$(s,e={}){const t=new Uint8Array(1);return t[0]=Number(s),typeof e.size=="number"?(Kd(t,{size:e.size}),ra(t,{size:e.size})):t}const kr={zero:48,nine:57,A:65,F:70,a:97,f:102};function u_(s){if(s>=kr.zero&&s<=kr.nine)return s-kr.zero;if(s>=kr.A&&s<=kr.F)return s-(kr.A-10);if(s>=kr.a&&s<=kr.f)return s-(kr.a-10)}function RC(s,e={}){let t=s;e.size&&(Kd(t,{size:e.size}),t=ra(t,{dir:"right",size:e.size}));let n=t.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,r=new Uint8Array(i);for(let a=0,l=0;a<i;a++){const u=u_(n.charCodeAt(l++)),h=u_(n.charCodeAt(l++));if(u===void 0||h===void 0)throw new wi(`Invalid byte sequence ("${n[l-2]}${n[l-1]}" in "${n}").`);r[a]=u*16+h}return r}function N$(s,e){const t=db(s,e);return RC(t)}function kC(s,e={}){const t=O$.encode(s);return typeof e.size=="number"?(Kd(t,{size:e.size}),ra(t,{dir:"right",size:e.size})):t}function h_(s){if(!Number.isSafeInteger(s)||s<0)throw new Error("positive integer expected, got "+s)}function B$(s){return s instanceof Uint8Array||ArrayBuffer.isView(s)&&s.constructor.name==="Uint8Array"}function gb(s,...e){if(!B$(s))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(s.length))throw new Error("Uint8Array expected of length "+e+", got length="+s.length)}function f_(s,e=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(e&&s.finished)throw new Error("Hash#digest() has already been called")}function F$(s,e){gb(s);const t=e.outputLen;if(s.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const M2=BigInt(2**32-1),d_=BigInt(32);function U$(s,e=!1){return e?{h:Number(s&M2),l:Number(s>>d_&M2)}:{h:Number(s>>d_&M2)|0,l:Number(s&M2)|0}}function H$(s,e=!1){let t=new Uint32Array(s.length),n=new Uint32Array(s.length);for(let i=0;i<s.length;i++){const{h:r,l:a}=U$(s[i],e);[t[i],n[i]]=[r,a]}return[t,n]}const G$=(s,e,t)=>s<<t|e>>>32-t,z$=(s,e,t)=>e<<t|s>>>32-t,$$=(s,e,t)=>e<<t-32|s>>>64-t,V$=(s,e,t)=>s<<t-32|e>>>64-t;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Y$(s){return new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4))}const g_=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function K$(s){return s<<24&4278190080|s<<8&16711680|s>>>8&65280|s>>>24&255}function m_(s){for(let e=0;e<s.length;e++)s[e]=K$(s[e])}typeof Uint8Array.from([]).toHex=="function"&&Uint8Array.fromHex;function j$(s){if(typeof s!="string")throw new Error("utf8ToBytes expected string, got "+typeof s);return new Uint8Array(new TextEncoder().encode(s))}function LC(s){return typeof s=="string"&&(s=j$(s)),gb(s),s}class q${clone(){return this._cloneInto()}}function Q$(s){const e=n=>s().update(LC(n)).digest(),t=s();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>s(),e}const DC=[],CC=[],IC=[],W$=BigInt(0),vf=BigInt(1),X$=BigInt(2),Z$=BigInt(7),J$=BigInt(256),e9=BigInt(113);for(let s=0,e=vf,t=1,n=0;s<24;s++){[t,n]=[n,(2*t+3*n)%5],DC.push(2*(5*n+t)),CC.push((s+1)*(s+2)/2%64);let i=W$;for(let r=0;r<7;r++)e=(e<<vf^(e>>Z$)*e9)%J$,e&X$&&(i^=vf<<(vf<<BigInt(r))-vf);IC.push(i)}const[t9,n9]=H$(IC,!0),p_=(s,e,t)=>t>32?$$(s,e,t):G$(s,e,t),y_=(s,e,t)=>t>32?V$(s,e,t):z$(s,e,t);function s9(s,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let a=0;a<10;a++)t[a]=s[a]^s[a+10]^s[a+20]^s[a+30]^s[a+40];for(let a=0;a<10;a+=2){const l=(a+8)%10,u=(a+2)%10,h=t[u],d=t[u+1],g=p_(h,d,1)^t[l],p=y_(h,d,1)^t[l+1];for(let y=0;y<50;y+=10)s[a+y]^=g,s[a+y+1]^=p}let i=s[2],r=s[3];for(let a=0;a<24;a++){const l=CC[a],u=p_(i,r,l),h=y_(i,r,l),d=DC[a];i=s[d],r=s[d+1],s[d]=u,s[d+1]=h}for(let a=0;a<50;a+=10){for(let l=0;l<10;l++)t[l]=s[a+l];for(let l=0;l<10;l++)s[a+l]^=~t[(l+2)%10]&t[(l+4)%10]}s[0]^=t9[n],s[1]^=n9[n]}t.fill(0)}class mb extends q${constructor(e,t,n,i=!1,r=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=r,h_(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Y$(this.state)}keccak(){g_||m_(this.state32),s9(this.state32,this.rounds),g_||m_(this.state32),this.posOut=0,this.pos=0}update(e){f_(this);const{blockLen:t,state:n}=this;e=LC(e);const i=e.length;for(let r=0;r<i;){const a=Math.min(t-this.pos,i-r);for(let l=0;l<a;l++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,(t&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){f_(this,!1),gb(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,r=e.length;i<r;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,r-i);e.set(t.subarray(this.posOut,this.posOut+a),i),this.posOut+=a,i+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return h_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(F$(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:r,enableXOF:a}=this;return e||(e=new mb(t,n,i,a,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}}const i9=(s,e,t)=>Q$(()=>new mb(e,s,t)),r9=i9(1,136,256/8);function OC(s,e){const t=e||"hex",n=r9(fb(s,{strict:!1})?M$(s):s);return t==="bytes"?n:C$(n)}class a9 extends wi{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class MC extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const Fx=new MC(8192);function o9(s,e){if(Fx.has(`${s}.${e}`))return Fx.get(`${s}.${e}`);const t=s.substring(2).toLowerCase(),n=OC(kC(t),"bytes"),i=t.split("");for(let a=0;a<40;a+=2)n[a>>1]>>4>=8&&i[a]&&(i[a]=i[a].toUpperCase()),(n[a>>1]&15)>=8&&i[a+1]&&(i[a+1]=i[a+1].toUpperCase());const r=`0x${i.join("")}`;return Fx.set(`${s}.${e}`,r),r}const l9=/^0x[a-fA-F0-9]{40}$/,Ux=new MC(8192);function c9(s,e){const{strict:t=!0}={},n=`${s}.${t}`;if(Ux.has(n))return Ux.get(n);const i=l9.test(s)?s.toLowerCase()===s?!0:t?o9(s)===s:!0:!1;return Ux.set(n,i),i}function PC(s){return`0x${s.reduce((e,t)=>e+t.replace("0x",""),"")}`}const u9=/^(.*)\[([0-9]*)\]$/,h9=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,f9=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function d9(s,e){if(s.length!==e.length)throw new A$({expectedLength:s.length,givenLength:e.length});const t=[];for(let n=0;n<s.length;n++){const i=s[n],r=e[n];t.push(NC(i,r))}return PC(t)}function NC(s,e,t=!1){if(s==="address"){const a=e;if(!c9(a))throw new a9({address:a});return ra(a.toLowerCase(),{size:t?32:null})}if(s==="string")return _C(e);if(s==="bytes")return e;if(s==="bool")return ra(TC(e),{size:t?32:1});const n=s.match(f9);if(n){const[a,l,u="256"]=n,h=Number.parseInt(u)/8;return db(e,{size:t?32:h,signed:l==="int"})}const i=s.match(h9);if(i){const[a,l]=i;if(Number.parseInt(l)!==(e.length-2)/2)throw new T$({expectedSize:Number.parseInt(l),givenSize:(e.length-2)/2});return ra(e,{dir:"right",size:t?32:null})}const r=s.match(u9);if(r&&Array.isArray(e)){const[a,l]=r,u=[];for(let h=0;h<e.length;h++)u.push(NC(l,e[h],!0));return u.length===0?"0x":PC(u)}throw new S$(s)}const g9=()=>{const[s,e]=Q.useState(!0),[t,n]=Q.useState(!1),[i,r]=Q.useState(""),[a,l]=Q.useState(!1),[u,h]=Q.useState(!1),[d,g]=Q.useState("betting"),[p,y]=Q.useState([]),[v,b]=Q.useState(""),[w,A]=Q.useState(""),[S,T]=Q.useState([]),[D,L]=Q.useState(0),[B,M]=Q.useState(0),[I,N]=Q.useState(0),[P,z]=Q.useState(0),[te,ye]=Q.useState([]),[me,K]=Q.useState([]),[G,J]=Q.useState(""),[se,X]=Q.useState(""),[C,j]=Q.useState([]),[re,le]=Q.useState([]),[ae,ve]=Q.useState(!1),[xe,ze]=Q.useState(!1),ke=x$(me,te,ae,xe);Q.useEffect(()=>()=>{},[p]);const Ne=De=>{let Be=0,Me=0;for(const Ht of De){const lt=Ht%13+1;lt===1?(Me++,Be+=11):lt>=10?Be+=10:Be+=lt}let Ie=Be,kt=!1;for(console.log(kt);Ie>21&&Me>0;)Ie-=10,Me--,kt=!0;if(Ie>21)return`${Ie} Bust🧨`;if(Ie===21&&De.length===2)return"21! Blackjack!";if(Me>0&&(Ie!==Be||Be===Ie)){const Ht=Ie-10;if(Ht>0&&Ie!==Ht)return`${Ht} / ${Ie}`}return Ie},Ke=De=>{const Be=["C","D","H","S"],Me=Math.floor(De/13),Ie=De%13+1;return`${Be[Me]}_${Ie}`},fn=(De,Be=!1)=>De.length===0?he.jsxs("div",{className:"flex",children:[he.jsx("img",{src:A2("BACK"),alt:"empty-card",className:"w-[80px] h-auto mx-1 drop-shadow-md"}),he.jsx("img",{src:A2("BACK"),alt:"empty-card",className:"w-[80px] h-auto mx-1 drop-shadow-md"})]}):De.map((Me,Ie)=>he.jsx("img",{src:A2(Be&&Ie===0?"BACK":Me),alt:`card-${Ie}`,className:"w-[80px] h-auto mx-1 drop-shadow-md"},Ie)),On=(De,Be)=>{ye(De.map(Me=>Me)),K(Be.map(Me=>Me)),j(De.map(Me=>Ke(Me))),le(Be.map(Me=>Ke(Me))),J(Ne(De.map(Me=>Number(Me))).toString()),console.log(G),X(Ne(Be.map(Me=>Number(Me))).toString())},At=De=>{const Be=De.target.value;isNaN(Be)||N(Be)},dn=async De=>{const Be=De,Me=[Be[0],Be[1]],Ie=[Be[2],Be[3]];On(Me,Ie);const kt=Be.slice(4);T([Me[0],Me[1],Ie[0],Ie[1]]),L(2),y(kt)},Si=De=>{const Be=Array.from({length:52},(Ie,kt)=>kt);let Me=BigInt(De);for(let Ie=51;Ie>0;Ie--){const kt=d9(["uint256","uint256"],[Me,BigInt(Ie)]),Ht=OC(kt);Me=BigInt(Ht);const lt=Number(Me%BigInt(Ie+1));[Be[Ie],Be[lt]]=[Be[lt],Be[Ie]]}return Be},Fe=async()=>{try{const De=await l_(),Be=Hd(32),Me=we(Be),Ie=Zt(Be);b(Me);const Ht=await(await De.newGame(Ie,{value:a6(I.toString())})).wait(),lt=await De.queryFilter(De.filters.GameCreated(),Ht.blockNumber,Ht.blockNumber);if(lt.length>0){const Xd=lt[0].args.gameId;await De.getGameInfo(Xd),A(Xd.toString());const Ri=Si(Me);dn(Ri)}else console.warn("⚠️ Missing GameCreated Event (queryFilter)")}catch(De){console.error("❌ Error Code:",De)}},It=async(De,Be)=>{var Me;h(!0);try{const Ie=await l_(),Ht=await(await Ie.endGame(w,v,De,Be)).wait();(Me=Ht.events)==null||Me.forEach(Ot=>{console.log("Event:",Ot.event,Ot.args)});const lt=await Ie.queryFilter(Ie.filters.GameEnded(),Ht.blockNumber,Ht.blockNumber);if(lt.length>0){const Ot=lt[0];console.log("✅ GameEnded Event:",Ot.args)}else console.warn("⚠️ GameEnded event not found in block.")}catch(Ie){console.error("❌ handleGameOver error:",Ie),r("Failed to submit game result to contract ❌"),n(!0)}},on=()=>{const De=p[0],Be=[...S,De];T(Be);const Me=[...me,De];K(Me);const Ie=D+1;L(Ie),le(Me.map(lt=>Ke(Number(lt))));const kt=Ne(Me.map(lt=>Number(lt))).toString();X(kt);const Ht=p.slice(1);y(Ht),T2(Ne(Me.map(lt=>Number(lt))))>21&&(g("over"),setTimeout(()=>{a&&It(Be,Ie),g("over"),r("You Bust! 😢"),n(!0)},1e3))},fs=()=>{ze(!0),g("dealer");let De=[...te],Be=[...p],Me=[...S];const Ie=()=>{const kt=Ne(De);if(T2(kt)>=17){ye(De),j(De.map(lt=>Ke(Number(lt)))),J(kt.toString()),g("over"),setTimeout(async()=>{const lt=T2(se),Ot=T2(kt);g("over"),lt>Ot||Ot>21?(r("You Win! 🎉"),M(B+P*2)):lt<Ot?r("You Lose! 😢"):(r("It's a Tie! 🤝"),M(B+P)),n(!0),a&&(await It(Me,D),h(!1))},1200);return}const Ht=Be.shift();Ht!==void 0&&(De.push(Ht),Me.push(Ht),ye([...De]),j(De.map(lt=>Ke(Number(lt)))),y([...Be]),T([...Me])),setTimeout(Ie,800)};setTimeout(Ie,1e3)},An=async()=>{if(I<=0||I>B)return alert("Please enter a valid bet amount!");M(B-I),z(Number(I)),a?(g("waiting"),await Fe()):dn(OU()),g("player"),ve(!0),N(0)},ks=()=>{b(""),A(""),T([]),L(0),y([]),ye([]),K([]),j([]),le([]),J(""),X(""),ze(!1),ve(!1),g("betting"),r(""),z(0),n(!1)},ti=async()=>{try{if(window.ethereum){const De=await window.ethereum.request({method:"eth_requestAccounts"});if(De&&De.length>0){l(!0);const Me=await new bC(window.ethereum).getBalance(De[0]),Ie=r6(Me);M(Number(Ie))}}else alert("Please install MetaMask!")}catch(De){console.error("MetaMask Error",De)}finally{e(!1)}},Zl=()=>{e(!1),M(2e3)},Tn=[{label:"Hit",show:ke.canHit,onclick:on},{label:"Stand",show:ke.canStand,onclick:fs},{label:"Double",show:ke.canDouble},{label:"Split",show:ke.canSplit},{label:"Surrender",show:ke.canSurrender},{label:"Insurance",show:ke.canInsurance}],Jl=Ne(xe?te:te.slice(1)),_i=Ne(me)?Ne(me):Ne(me).toString();return he.jsx("div",{className:"w-full min-h-screen pt-[50px] bg-gradient-to-b from-green-900 to-green-600 flex flex-col items-center justify-center",children:he.jsxs("div",{className:"min-h-[80vh] flex flex-col items-center py-10 px-4 text-white font-semibold",children:[he.jsxs("div",{className:"flex flex-col items-center",children:[he.jsx("h2",{className:"text-xl mb-2",children:"Dealer"}),he.jsx("div",{className:"flex",children:fn(C,!xe)}),he.jsxs("h2",{className:"mt-1",children:["Dealer Score: ",Jl]})]}),he.jsxs("div",{className:"flex flex-col items-center my-3 relative",children:[he.jsxs("p",{className:"text-white mb-2 text-lg",children:["Your Current Bet Amount: ",B," ETH"]}),he.jsxs("div",{className:"text-lg",children:[d==="over"&&he.jsx("p",{className:"text-yellow-500 animate-pulse py-4",children:"Game Over..."}),d==="dealer"&&he.jsx("p",{className:"text-fuchsia-500 animate-pulse py-4",children:"Dealer Drawing Cards..."}),d==="player"&&he.jsx("p",{className:"text-red-500 animate-pulse py-4",children:"Player turn..."}),d==="waiting"&&he.jsx("p",{className:"text-yellow-500 animate-pulse py-4",children:"Waiting for transaction confirmation..."}),d!=="betting"&&he.jsxs("p",{className:"text-white",children:[" Your Bet Amount: ",P," ETH"]}),d==="betting"&&he.jsxs("div",{className:"flex flex-col items-center",children:[he.jsx("label",{className:"text-white mb-2 text-lg",children:"Place Your Bet"}),he.jsx("input",{value:I,onChange:At,className:"px-4 py-2 rounded-lg border-2 border-[#1a1a1a] focus:outline-none w-60 text-white",placeholder:"Enter bet amount"}),he.jsx("button",{onClick:An,className:".common_button mt-4 px-6 py-2 rounded-md bg-black text-white hover:bg-blue-500 cursor-pointer transition-colors duration-200",children:"Bet"})]})]})]}),he.jsxs("div",{className:"flex flex-col items-center",children:[he.jsx("h2",{className:"text-xl mb-2",children:"You"}),he.jsx("div",{className:"flex",children:fn(re)}),he.jsxs("h2",{className:"mt-1",children:["Your Score: ",_i]}),he.jsx("div",{className:"flex gap-2 mt-4",children:Tn.map(De=>De.show&&he.jsx("button",{className:"px-6 py-2 rounded-md bg-black text-white hover:bg-blue-500 cursor-pointer transition-colors duration-200",onClick:De.onclick,children:De.label},De.label))})]}),s&&he.jsx(w$,{onConnect:()=>ti(),onClose:()=>Zl()}),t&&he.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:he.jsxs("div",{className:"bg-white rounded-lg p-6 text-center shadow-lg w-[300px]",children:[he.jsx("h2",{className:"text-xl text-black font-bold mb-4",children:i}),u?he.jsx("p",{className:"text-yellow-500 text-lg animate-pulse mt-4",children:"Waiting for transaction confirmation..."}):he.jsx("button",{onClick:()=>ks(),className:"mt-4 px-6 py-2 rounded-md bg-black text-white hover:bg-blue-500 cursor-pointer transition-colors duration-200",children:"Confirm"})]})})]})})};function Dm(s,e,t,n){return new(t||(t=Promise))(function(i,r){function a(h){try{u(n.next(h))}catch(d){r(d)}}function l(h){try{u(n.throw(h))}catch(d){r(d)}}function u(h){var d;h.done?i(h.value):(d=h.value,d instanceof t?d:new t(function(g){g(d)})).then(a,l)}u((n=n.apply(s,[])).next())})}function fo(s,e){var t,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function l(u){return function(h){return function(d){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(i=2&d[0]?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return a.label++,{value:d[1],done:!1};case 5:a.label++,n=d[1],d=[0];continue;case 7:d=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||d[0]!==6&&d[0]!==2)){a=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){a.label=d[1];break}if(d[0]===6&&a.label<i[1]){a.label=i[1],i=d;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(d);break}i[2]&&a.ops.pop(),a.trys.pop();continue}d=e.call(s,a)}catch(g){d=[6,g],n=0}finally{t=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([u,h])}}}function tv(s){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&s[e],n=0;if(t)return t.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&n>=s.length&&(s=void 0),{value:s&&s[n++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yi(s,e){var t=typeof Symbol=="function"&&s[Symbol.iterator];if(!t)return s;var n,i,r=t.call(s),a=[];try{for(;(e===void 0||e-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(l){i={error:l}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(i)throw i.error}}return a}function Xi(s,e,t){if(arguments.length===2)for(var n,i=0,r=e.length;i<r;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return s.concat(n||Array.prototype.slice.call(e))}function x_(s,e,t,n,i){for(var r=[],a=5;a<arguments.length;a++)r[a-5]=arguments[a];return Dm(this,void 0,void 0,function(){var l,u,h,d,g,p;return fo(this,function(y){switch(y.label){case 0:y.trys.push([0,12,13,14]),l=tv(r),u=l.next(),y.label=1;case 1:if(u.done)return[3,11];switch(h=u.value,typeof h){case"string":return[3,2];case"number":return[3,4];case"function":return[3,6]}return[3,8];case 2:return[4,m9(s,e,h,t,n,i)];case 3:return y.sent(),[3,10];case 4:return[4,BC(h)];case 5:return y.sent(),[3,10];case 6:return[4,h.apply(void 0,Xi([s,e,t,n,i],yi(r),!1))];case 7:return y.sent(),[3,10];case 8:return[4,h];case 9:y.sent(),y.label=10;case 10:return u=l.next(),[3,1];case 11:return[3,14];case 12:return d=y.sent(),g={error:d},[3,14];case 13:try{u&&!u.done&&(p=l.return)&&p.call(l)}finally{if(g)throw g.error}return[7];case 14:return[2]}})})}function m9(s,e,t,n,i,r){return Dm(this,void 0,void 0,function(){var a,l;return fo(this,function(u){switch(u.label){case 0:return a=s.textContent||"",l=function(h,d){var g=yi(d).slice(0);return Xi(Xi([],yi(h),!1),[NaN],!1).findIndex(function(p,y){return g[y]!==p})}(a,t),[4,p9(s,Xi(Xi([],yi(x9(a,e,l)),!1),yi(y9(t,e,l)),!1),n,i,r)];case 1:return u.sent(),[2]}})})}function BC(s){return Dm(this,void 0,void 0,function(){return fo(this,function(e){switch(e.label){case 0:return[4,new Promise(function(t){return setTimeout(t,s)})];case 1:return e.sent(),[2]}})})}function p9(s,e,t,n,i){return Dm(this,void 0,void 0,function(){var r,a,l,u,h,d,g,p,y,v,b,w,A;return fo(this,function(S){switch(S.label){case 0:if(r=e,i){for(a=0,l=1;l<e.length;l++)if(u=yi([e[l-1],e[l]],2),h=u[0],(d=u[1]).length>h.length||d===""){a=l;break}r=e.slice(a,e.length)}S.label=1;case 1:S.trys.push([1,6,7,8]),g=tv(function(T){var D,L,B,M,I,N,P;return fo(this,function(z){switch(z.label){case 0:D=function(te){return fo(this,function(ye){switch(ye.label){case 0:return[4,{op:function(me){return requestAnimationFrame(function(){return me.textContent=te})},opCode:function(me){var K=me.textContent||"";return te===""||K.length>te.length?"DELETE":"WRITING"}}];case 1:return ye.sent(),[2]}})},z.label=1;case 1:z.trys.push([1,6,7,8]),L=tv(T),B=L.next(),z.label=2;case 2:return B.done?[3,5]:(M=B.value,[5,D(M)]);case 3:z.sent(),z.label=4;case 4:return B=L.next(),[3,2];case 5:return[3,8];case 6:return I=z.sent(),N={error:I},[3,8];case 7:try{B&&!B.done&&(P=L.return)&&P.call(L)}finally{if(N)throw N.error}return[7];case 8:return[2]}})}(r)),p=g.next(),S.label=2;case 2:return p.done?[3,5]:(y=p.value,v=y.opCode(s)==="WRITING"?t+t*(Math.random()-.5):n+n*(Math.random()-.5),y.op(s),[4,BC(v)]);case 3:S.sent(),S.label=4;case 4:return p=g.next(),[3,2];case 5:return[3,8];case 6:return b=S.sent(),w={error:b},[3,8];case 7:try{p&&!p.done&&(A=g.return)&&A.call(g)}finally{if(w)throw w.error}return[7];case 8:return[2]}})})}function y9(s,e,t){var n,i;return t===void 0&&(t=0),fo(this,function(r){switch(r.label){case 0:n=e(s),i=n.length,r.label=1;case 1:return t<i?[4,n.slice(0,++t).join("")]:[3,3];case 2:return r.sent(),[3,1];case 3:return[2]}})}function x9(s,e,t){var n,i;return t===void 0&&(t=0),fo(this,function(r){switch(r.label){case 0:n=e(s),i=n.length,r.label=1;case 1:return i>t?[4,n.slice(0,--i).join("")]:[3,3];case 2:return r.sent(),[3,1];case 3:return[2]}})}var v9="index-module_type__E-SaG";(function(s,e){e===void 0&&(e={});var t=e.insertAt;if(typeof document<"u"){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=s:i.appendChild(document.createTextNode(s))}})(`.index-module_type__E-SaG::after {
  content: '|';
  animation: index-module_cursor__PQg0P 1.1s infinite step-start;
}

@keyframes index-module_cursor__PQg0P {
  50% {
    opacity: 0;
  }
}
`);var Hx=Q.memo(Q.forwardRef(function(s,e){var t=s.sequence,n=s.repeat,i=s.className,r=s.speed,a=r===void 0?40:r,l=s.deletionSpeed,u=s.omitDeletionAnimation,h=u!==void 0&&u,d=s.preRenderFirstString,g=d!==void 0&&d,p=s.wrapper,y=p===void 0?"span":p,v=s.splitter,b=v===void 0?function(C){return Xi([],yi(C),!1)}:v,w=s.cursor,A=w===void 0||w,S=s.style,T=function(C,j){var re={};for(var le in C)Object.prototype.hasOwnProperty.call(C,le)&&j.indexOf(le)<0&&(re[le]=C[le]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function"){var ae=0;for(le=Object.getOwnPropertySymbols(C);ae<le.length;ae++)j.indexOf(le[ae])<0&&Object.prototype.propertyIsEnumerable.call(C,le[ae])&&(re[le[ae]]=C[le[ae]])}return re}(s,["sequence","repeat","className","speed","deletionSpeed","omitDeletionAnimation","preRenderFirstString","wrapper","splitter","cursor","style"]),D=T["aria-label"],L=T["aria-hidden"],B=T.role;l||(l=a);var M=new Array(2).fill(40);[a,l].forEach(function(C,j){switch(typeof C){case"number":M[j]=Math.abs(C-100);break;case"object":var re=C.type,le=C.value;if(typeof le!="number")break;re==="keyStrokeDelayInMs"&&(M[j]=le)}});var I,N,P,z,te,ye,me=M[0],K=M[1],G=function(C,j){j===void 0&&(j=null);var re=Q.useRef(j);return Q.useEffect(function(){C&&(typeof C=="function"?C(re.current):C.current=re.current)},[C]),re}(e),J=v9;I=i?"".concat(A?J+" ":"").concat(i):A?J:"",N=Q.useRef(function(){var C,j=t;n===1/0?C=x_:typeof n=="number"&&(j=Array(1+n).fill(t).flat());var re=C?Xi(Xi([],yi(j),!1),[C],!1):Xi([],yi(j),!1);return x_.apply(void 0,Xi([G.current,b,me,K,h],yi(re),!1)),function(){G.current}}),P=Q.useRef(),z=Q.useRef(!1),te=Q.useRef(!1),ye=yi(Q.useState(0),2)[1],z.current&&(te.current=!0),Q.useEffect(function(){return z.current||(P.current=N.current(),z.current=!0),ye(function(C){return C+1}),function(){te.current&&P.current&&P.current()}},[]);var se=y,X=g?t.find(function(C){return typeof C=="string"})||"":null;return Eg.createElement(se,{"aria-hidden":L,"aria-label":D,role:B,style:S,className:I,children:D?Eg.createElement("span",{"aria-hidden":"true",ref:G,children:X}):X,ref:D?void 0:G})}),function(s,e){return!0});const bf=({children:s,onClick:e,className:t="",type:n="button"})=>he.jsx("button",{type:n,onClick:e,className:`px-8 py-3 border-2 border-cyan-400 rounded-xl text-cyan-300 font-medium text-lg hover:bg-cyan-400 hover:text-black transition text-neon-soft inline-block cursor-pointer ${t}`,children:s}),v_=["(T_T)","(ಥ﹏ಥ)","(；＿；)","(ಥ_ಥ)"],b9=()=>{const[s,e]=Q.useState(0);return Q.useEffect(()=>{const t=setInterval(()=>{e(n=>(n+1)%v_.length)},2e3);return()=>clearInterval(t)},[]),he.jsx("div",{className:"text-4xl md:text-6xl text-cyan-300 text-neon-soft animate-pulse mt-6",children:v_[s]})},E9=()=>{const[s,e]=Q.useState("intro"),[t,n]=Q.useState(""),[i,r]=Q.useState(""),a=WR();return he.jsxs("div",{className:"neon-scan-bg min-h-screen relative flex items-center justify-center px-4 text-center",children:[s==="intro"&&he.jsxs("div",{className:"z-10 space-y-6 animate-fadeIn",children:[he.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white text-neon",children:"Welcome to Cyber Park"}),he.jsx("p",{className:"text-xl text-cyan-200 text-neon-soft",children:"Feel the glow, embrace the night"}),he.jsx(bf,{onClick:()=>e("name"),children:"Explore"})]}),s==="name"&&he.jsxs("div",{className:"z-10 space-y-10 animate-fadeIn px-4 text-center",children:[he.jsx(Hx,{sequence:["What's your name, explorer?",800],speed:50,wrapper:"p",className:"text-2xl md:text-4xl text-cyan-300 text-neon-soft"}),he.jsx("input",{type:"text",value:t,onChange:l=>n(l.target.value),placeholder:"Enter your name",className:"px-4 py-3 w-[280px] md:w-[320px] rounded-lg bg-black border-2 border-cyan-400 text-cyan-300 text-center text-xl focus:outline-none focus:ring-2 focus:ring-cyan-500 mx-auto"}),he.jsx("div",{className:"flex flex-col items-center space-y-4",children:he.jsx(bf,{onClick:()=>{r(t||"Explorer"),e("question")},children:"Confirm"})})]}),s==="question"&&he.jsxs("div",{className:"z-10 animate-fadeIn space-y-8",children:[he.jsx(Hx,{sequence:[`Hello ${i}, which part are you interested in?`,1200],speed:55,wrapper:"div",className:"text-2xl md:text-4xl text-cyan-300 text-neon-soft"}),he.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-8",children:[he.jsx(bf,{onClick:()=>e("frontendMessage"),children:"Frontend"}),he.jsx(bf,{onClick:()=>a("/blackjackTable"),children:"Smart Contract"})]})]}),s==="frontendMessage"&&he.jsxs("div",{className:"z-10 space-y-10 animate-fadeIn text-center px-4",children:[he.jsx(Hx,{sequence:["Sorry... Frontend is still under construction.",1200],speed:50,wrapper:"div",className:"text-2xl md:text-4xl text-cyan-300 text-neon-soft"}),he.jsx(b9,{}),he.jsx("div",{className:"flex justify-center",children:he.jsx(bf,{onClick:()=>a("/blackjackTable"),children:"Go to Blackjack instead"})})]})]})};var nv=new Map,P2=new WeakMap,b_=0,w9=void 0;function A9(s){return s?(P2.has(s)||(b_+=1,P2.set(s,b_.toString())),P2.get(s)):"0"}function T9(s){return Object.keys(s).sort().filter(e=>s[e]!==void 0).map(e=>`${e}_${e==="root"?A9(s.root):s[e]}`).toString()}function S9(s){const e=T9(s);let t=nv.get(e);if(!t){const n=new Map;let i;const r=new IntersectionObserver(a=>{a.forEach(l=>{var u;const h=l.isIntersecting&&i.some(d=>l.intersectionRatio>=d);s.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=h),(u=n.get(l.target))==null||u.forEach(d=>{d(h,l)})})},s);i=r.thresholds||(Array.isArray(s.threshold)?s.threshold:[s.threshold||0]),t={id:e,observer:r,elements:n},nv.set(e,t)}return t}function _9(s,e,t={},n=w9){if(typeof window.IntersectionObserver>"u"&&n!==void 0){const u=s.getBoundingClientRect();return e(n,{isIntersecting:n,target:s,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:u,intersectionRect:u,rootBounds:u}),()=>{}}const{id:i,observer:r,elements:a}=S9(t),l=a.get(s)||[];return a.has(s)||a.set(s,l),l.push(e),r.observe(s),function(){l.splice(l.indexOf(e),1),l.length===0&&(a.delete(s),r.unobserve(s)),a.size===0&&(r.disconnect(),nv.delete(i))}}function R9({threshold:s,delay:e,trackVisibility:t,rootMargin:n,root:i,triggerOnce:r,skip:a,initialInView:l,fallbackInView:u,onChange:h}={}){var d;const[g,p]=Q.useState(null),y=Q.useRef(h),[v,b]=Q.useState({inView:!!l,entry:void 0});y.current=h,Q.useEffect(()=>{if(a||!g)return;let T;return T=_9(g,(D,L)=>{b({inView:D,entry:L}),y.current&&y.current(D,L),L.isIntersecting&&r&&T&&(T(),T=void 0)},{root:i,rootMargin:n,threshold:s,trackVisibility:t,delay:e},u),()=>{T&&T()}},[Array.isArray(s)?s.toString():s,g,i,n,r,a,t,u,e]);const w=(d=v.entry)==null?void 0:d.target,A=Q.useRef(void 0);!g&&w&&!r&&!a&&A.current!==w&&(A.current=w,b({inView:!!l,entry:void 0}));const S=[p,v.inView,v.entry];return S.ref=S[0],S.inView=S[1],S.entry=S[2],S}const k9=({children:s})=>he.jsxs("div",{className:"relative w-full max-w-4xl h-[400px] mx-auto p-4 bg-black rounded-xl border w-full border-cyan-500 shadow-[0_0_20px_#0ff] overflow-hidden",children:[he.jsx("div",{className:"absolute inset-0 pointer-events-none neon-scan-bg z-10"}),he.jsx("div",{className:"relative z-20 w-full h-full",children:s})]});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function jd(s){return s+.5|0}const co=(s,e,t)=>Math.max(Math.min(s,t),e);function Nf(s){return co(jd(s*2.55),0,255)}function go(s){return co(jd(s*255),0,255)}function Ur(s){return co(jd(s/2.55)/100,0,1)}function E_(s){return co(jd(s*100),0,100)}const $s={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},sv=[..."0123456789ABCDEF"],L9=s=>sv[s&15],D9=s=>sv[(s&240)>>4]+sv[s&15],N2=s=>(s&240)>>4===(s&15),C9=s=>N2(s.r)&&N2(s.g)&&N2(s.b)&&N2(s.a);function I9(s){var e=s.length,t;return s[0]==="#"&&(e===4||e===5?t={r:255&$s[s[1]]*17,g:255&$s[s[2]]*17,b:255&$s[s[3]]*17,a:e===5?$s[s[4]]*17:255}:(e===7||e===9)&&(t={r:$s[s[1]]<<4|$s[s[2]],g:$s[s[3]]<<4|$s[s[4]],b:$s[s[5]]<<4|$s[s[6]],a:e===9?$s[s[7]]<<4|$s[s[8]]:255})),t}const O9=(s,e)=>s<255?e(s):"";function M9(s){var e=C9(s)?L9:D9;return s?"#"+e(s.r)+e(s.g)+e(s.b)+O9(s.a,e):void 0}const P9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function FC(s,e,t){const n=e*Math.min(t,1-t),i=(r,a=(r+s/30)%12)=>t-n*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function N9(s,e,t){const n=(i,r=(i+s/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function B9(s,e,t){const n=FC(s,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)n[i]*=1-e-t,n[i]+=e;return n}function F9(s,e,t,n,i){return s===i?(e-t)/n+(e<t?6:0):e===i?(t-s)/n+2:(s-e)/n+4}function pb(s){const t=s.r/255,n=s.g/255,i=s.b/255,r=Math.max(t,n,i),a=Math.min(t,n,i),l=(r+a)/2;let u,h,d;return r!==a&&(d=r-a,h=l>.5?d/(2-r-a):d/(r+a),u=F9(t,n,i,d,r),u=u*60+.5),[u|0,h||0,l]}function yb(s,e,t,n){return(Array.isArray(e)?s(e[0],e[1],e[2]):s(e,t,n)).map(go)}function xb(s,e,t){return yb(FC,s,e,t)}function U9(s,e,t){return yb(B9,s,e,t)}function H9(s,e,t){return yb(N9,s,e,t)}function UC(s){return(s%360+360)%360}function G9(s){const e=P9.exec(s);let t=255,n;if(!e)return;e[5]!==n&&(t=e[6]?Nf(+e[5]):go(+e[5]));const i=UC(+e[2]),r=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?n=U9(i,r,a):e[1]==="hsv"?n=H9(i,r,a):n=xb(i,r,a),{r:n[0],g:n[1],b:n[2],a:t}}function z9(s,e){var t=pb(s);t[0]=UC(t[0]+e),t=xb(t),s.r=t[0],s.g=t[1],s.b=t[2]}function $9(s){if(!s)return;const e=pb(s),t=e[0],n=E_(e[1]),i=E_(e[2]);return s.a<255?`hsla(${t}, ${n}%, ${i}%, ${Ur(s.a)})`:`hsl(${t}, ${n}%, ${i}%)`}const w_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},A_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function V9(){const s={},e=Object.keys(A_),t=Object.keys(w_);let n,i,r,a,l;for(n=0;n<e.length;n++){for(a=l=e[n],i=0;i<t.length;i++)r=t[i],l=l.replace(r,w_[r]);r=parseInt(A_[a],16),s[l]=[r>>16&255,r>>8&255,r&255]}return s}let B2;function Y9(s){B2||(B2=V9(),B2.transparent=[0,0,0,0]);const e=B2[s.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const K9=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function j9(s){const e=K9.exec(s);let t=255,n,i,r;if(e){if(e[7]!==n){const a=+e[7];t=e[8]?Nf(a):co(a*255,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?Nf(n):co(n,0,255)),i=255&(e[4]?Nf(i):co(i,0,255)),r=255&(e[6]?Nf(r):co(r,0,255)),{r:n,g:i,b:r,a:t}}}function q9(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${Ur(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Gx=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,$c=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function Q9(s,e,t){const n=$c(Ur(s.r)),i=$c(Ur(s.g)),r=$c(Ur(s.b));return{r:go(Gx(n+t*($c(Ur(e.r))-n))),g:go(Gx(i+t*($c(Ur(e.g))-i))),b:go(Gx(r+t*($c(Ur(e.b))-r))),a:s.a+t*(e.a-s.a)}}function F2(s,e,t){if(s){let n=pb(s);n[e]=Math.max(0,Math.min(n[e]+n[e]*t,e===0?360:1)),n=xb(n),s.r=n[0],s.g=n[1],s.b=n[2]}}function HC(s,e){return s&&Object.assign(e||{},s)}function T_(s){var e={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(e={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(e.a=go(s[3]))):(e=HC(s,{r:0,g:0,b:0,a:1}),e.a=go(e.a)),e}function W9(s){return s.charAt(0)==="r"?j9(s):G9(s)}class xd{constructor(e){if(e instanceof xd)return e;const t=typeof e;let n;t==="object"?n=T_(e):t==="string"&&(n=I9(e)||Y9(e)||W9(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=HC(this._rgb);return e&&(e.a=Ur(e.a)),e}set rgb(e){this._rgb=T_(e)}rgbString(){return this._valid?q9(this._rgb):void 0}hexString(){return this._valid?M9(this._rgb):void 0}hslString(){return this._valid?$9(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const a=t===r?.5:t,l=2*a-1,u=n.a-i.a,h=((l*u===-1?l:(l+u)/(1+l*u))+1)/2;r=1-h,n.r=255&h*n.r+r*i.r+.5,n.g=255&h*n.g+r*i.g+.5,n.b=255&h*n.b+r*i.b+.5,n.a=a*n.a+(1-a)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=Q9(this._rgb,e._rgb,t)),this}clone(){return new xd(this.rgb)}alpha(e){return this._rgb.a=go(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=jd(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return F2(this._rgb,2,e),this}darken(e){return F2(this._rgb,2,-e),this}saturate(e){return F2(this._rgb,1,e),this}desaturate(e){return F2(this._rgb,1,-e),this}rotate(e){return z9(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Lr(){}const X9=(()=>{let s=0;return()=>s++})();function _t(s){return s==null}function Cn(s){if(Array.isArray&&Array.isArray(s))return!0;const e=Object.prototype.toString.call(s);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ct(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function ei(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function Pi(s,e){return ei(s)?s:e}function st(s,e){return typeof s>"u"?e:s}const Z9=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*e:+s;function Lt(s,e,t){if(s&&typeof s.call=="function")return s.apply(t,e)}function mt(s,e,t,n){let i,r,a;if(Cn(s))for(r=s.length,i=0;i<r;i++)e.call(t,s[i],i);else if(ct(s))for(a=Object.keys(s),r=a.length,i=0;i<r;i++)e.call(t,s[a[i]],a[i])}function qg(s,e){let t,n,i,r;if(!s||!e||s.length!==e.length)return!1;for(t=0,n=s.length;t<n;++t)if(i=s[t],r=e[t],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Qg(s){if(Cn(s))return s.map(Qg);if(ct(s)){const e=Object.create(null),t=Object.keys(s),n=t.length;let i=0;for(;i<n;++i)e[t[i]]=Qg(s[t[i]]);return e}return s}function GC(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function J9(s,e,t,n){if(!GC(s))return;const i=e[s],r=t[s];ct(i)&&ct(r)?vd(i,r,n):e[s]=Qg(r)}function vd(s,e,t){const n=Cn(e)?e:[e],i=n.length;if(!ct(s))return s;t=t||{};const r=t.merger||J9;let a;for(let l=0;l<i;++l){if(a=n[l],!ct(a))continue;const u=Object.keys(a);for(let h=0,d=u.length;h<d;++h)r(u[h],s,a,t)}return s}function Yf(s,e){return vd(s,e,{merger:e7})}function e7(s,e,t){if(!GC(s))return;const n=e[s],i=t[s];ct(n)&&ct(i)?Yf(n,i):Object.prototype.hasOwnProperty.call(e,s)||(e[s]=Qg(i))}const S_={"":s=>s,x:s=>s.x,y:s=>s.y};function t7(s){const e=s.split("."),t=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}function n7(s){const e=t7(s);return t=>{for(const n of e){if(n==="")break;t=t&&t[n]}return t}}function Wg(s,e){return(S_[e]||(S_[e]=n7(e)))(s)}function vb(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Xg=s=>typeof s<"u",vo=s=>typeof s=="function",__=(s,e)=>{if(s.size!==e.size)return!1;for(const t of s)if(!e.has(t))return!1;return!0};function s7(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const zn=Math.PI,ir=2*zn,i7=ir+zn,Zg=Number.POSITIVE_INFINITY,r7=zn/180,xi=zn/2,qo=zn/4,R_=zn*2/3,zC=Math.log10,ah=Math.sign;function Kf(s,e,t){return Math.abs(s-e)<t}function k_(s){const e=Math.round(s);s=Kf(s,e,s/1e3)?e:s;const t=Math.pow(10,Math.floor(zC(s))),n=s/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function a7(s){const e=[],t=Math.sqrt(s);let n;for(n=1;n<t;n++)s%n===0&&(e.push(n),e.push(s/n));return t===(t|0)&&e.push(t),e.sort((i,r)=>i-r).pop(),e}function o7(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function bd(s){return!o7(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function l7(s,e){const t=Math.round(s);return t-e<=s&&t+e>=s}function c7(s,e,t){let n,i,r;for(n=0,i=s.length;n<i;n++)r=s[n][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function fl(s){return s*(zn/180)}function u7(s){return s*(180/zn)}function L_(s){if(!ei(s))return;let e=1,t=0;for(;Math.round(s*e)/e!==s;)e*=10,t++;return t}function h7(s,e){const t=e.x-s.x,n=e.y-s.y,i=Math.sqrt(t*t+n*n);let r=Math.atan2(n,t);return r<-.5*zn&&(r+=ir),{angle:r,distance:i}}function iv(s,e){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}function f7(s,e){return(s-e+i7)%ir-zn}function za(s){return(s%ir+ir)%ir}function $C(s,e,t,n){const i=za(s),r=za(e),a=za(t),l=za(r-i),u=za(a-i),h=za(i-r),d=za(i-a);return i===r||i===a||n&&r===a||l>u&&h<d}function Zs(s,e,t){return Math.max(e,Math.min(t,s))}function d7(s){return Zs(s,-32768,32767)}function Bf(s,e,t,n=1e-6){return s>=Math.min(e,t)-n&&s<=Math.max(e,t)+n}function bb(s,e,t){t=t||(a=>s[a]<e);let n=s.length-1,i=0,r;for(;n-i>1;)r=i+n>>1,t(r)?i=r:n=r;return{lo:i,hi:n}}const dl=(s,e,t,n)=>bb(s,t,n?i=>{const r=s[i][e];return r<t||r===t&&s[i+1][e]===t}:i=>s[i][e]<t),g7=(s,e,t)=>bb(s,t,n=>s[n][e]>=t);function m7(s,e,t){let n=0,i=s.length;for(;n<i&&s[n]<e;)n++;for(;i>n&&s[i-1]>t;)i--;return n>0||i<s.length?s.slice(n,i):s}const VC=["push","pop","shift","splice","unshift"];function p7(s,e){if(s._chartjs){s._chartjs.listeners.push(e);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),VC.forEach(t=>{const n="_onData"+vb(t),i=s[t];Object.defineProperty(s,t,{configurable:!0,enumerable:!1,value(...r){const a=i.apply(this,r);return s._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...r)}),a}})})}function D_(s,e){const t=s._chartjs;if(!t)return;const n=t.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(VC.forEach(r=>{delete s[r]}),delete s._chartjs)}function y7(s){const e=new Set(s);return e.size===s.length?s:Array.from(e)}const YC=function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame}();function KC(s,e){let t=[],n=!1;return function(...i){t=i,n||(n=!0,YC.call(window,()=>{n=!1,s.apply(e,t)}))}}function x7(s,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(s,e,n)):s.apply(this,n),e}}const jC=s=>s==="start"?"left":s==="end"?"right":"center",bs=(s,e,t)=>s==="start"?e:s==="end"?t:(e+t)/2,v7=(s,e,t,n)=>s===(n?"left":"right")?t:s==="center"?(e+t)/2:e;function b7(s,e,t){const n=e.length;let i=0,r=n;if(s._sorted){const{iScale:a,vScale:l,_parsed:u}=s,h=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,d=a.axis,{min:g,max:p,minDefined:y,maxDefined:v}=a.getUserBounds();if(y){if(i=Math.min(dl(u,d,g).lo,t?n:dl(e,d,a.getPixelForValue(g)).lo),h){const b=u.slice(0,i+1).reverse().findIndex(w=>!_t(w[l.axis]));i-=Math.max(0,b)}i=Zs(i,0,n-1)}if(v){let b=Math.max(dl(u,a.axis,p,!0).hi+1,t?0:dl(e,d,a.getPixelForValue(p),!0).hi+1);if(h){const w=u.slice(b-1).findIndex(A=>!_t(A[l.axis]));b+=Math.max(0,w)}r=Zs(b,i,n)-i}else r=n-i}return{start:i,count:r}}function E7(s){const{xScale:e,yScale:t,_scaleRanges:n}=s,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!n)return s._scaleRanges=i,!0;const r=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,i),r}const U2=s=>s===0||s===1,C_=(s,e,t)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-e)*ir/t)),I_=(s,e,t)=>Math.pow(2,-10*s)*Math.sin((s-e)*ir/t)+1,jf={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*xi)+1,easeOutSine:s=>Math.sin(s*xi),easeInOutSine:s=>-.5*(Math.cos(zn*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>U2(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>U2(s)?s:C_(s,.075,.3),easeOutElastic:s=>U2(s)?s:I_(s,.075,.3),easeInOutElastic(s){return U2(s)?s:s<.5?.5*C_(s*2,.1125,.45):.5+.5*I_(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let e=1.70158;return(s/=.5)<1?.5*(s*s*(((e*=1.525)+1)*s-e)):.5*((s-=2)*s*(((e*=1.525)+1)*s+e)+2)},easeInBounce:s=>1-jf.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?jf.easeInBounce(s*2)*.5:jf.easeOutBounce(s*2-1)*.5+.5};function Eb(s){if(s&&typeof s=="object"){const e=s.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function O_(s){return Eb(s)?s:new xd(s)}function zx(s){return Eb(s)?s:new xd(s).saturate(.5).darken(.1).hexString()}const w7=["x","y","borderWidth","radius","tension"],A7=["color","borderColor","backgroundColor"];function T7(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),s.set("animations",{colors:{type:"color",properties:A7},numbers:{type:"number",properties:w7}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function S7(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const M_=new Map;function _7(s,e){e=e||{};const t=s+JSON.stringify(e);let n=M_.get(t);return n||(n=new Intl.NumberFormat(s,e),M_.set(t,n)),n}function qC(s,e,t){return _7(e,t).format(s)}const R7={values(s){return Cn(s)?s:""+s},numeric(s,e,t){if(s===0)return"0";const n=this.chart.options.locale;let i,r=s;if(t.length>1){const h=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),r=k7(s,t)}const a=zC(Math.abs(r)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:i,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),qC(s,n,u)}};function k7(s,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&s!==Math.floor(s)&&(t=s-Math.floor(s)),t}var QC={formatters:R7};function L7(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:QC.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Yl=Object.create(null),rv=Object.create(null);function qf(s,e){if(!e)return s;const t=e.split(".");for(let n=0,i=t.length;n<i;++n){const r=t[n];s=s[r]||(s[r]=Object.create(null))}return s}function $x(s,e,t){return typeof e=="string"?vd(qf(s,e),t):vd(qf(s,""),e)}class D7{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>zx(i.backgroundColor),this.hoverBorderColor=(n,i)=>zx(i.borderColor),this.hoverColor=(n,i)=>zx(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return $x(this,e,t)}get(e){return qf(this,e)}describe(e,t){return $x(rv,e,t)}override(e,t){return $x(Yl,e,t)}route(e,t,n,i){const r=qf(this,e),a=qf(this,n),l="_"+t;Object.defineProperties(r,{[l]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const u=this[l],h=a[i];return ct(u)?Object.assign({},h,u):st(u,h)},set(u){this[l]=u}}})}apply(e){e.forEach(t=>t(this))}}var Jt=new D7({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[T7,S7,L7]);function C7(s){return!s||_t(s.size)||_t(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function P_(s,e,t,n,i){let r=e[i];return r||(r=e[i]=s.measureText(i).width,t.push(i)),r>n&&(n=r),n}function Qo(s,e,t){const n=s.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*n)/n+i}function N_(s,e){!e&&!s||(e=e||s.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,s.width,s.height),e.restore())}function av(s,e,t,n){WC(s,e,t,n,null)}function WC(s,e,t,n,i){let r,a,l,u,h,d,g,p;const y=e.pointStyle,v=e.rotation,b=e.radius;let w=(v||0)*r7;if(y&&typeof y=="object"&&(r=y.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){s.save(),s.translate(t,n),s.rotate(w),s.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),s.restore();return}if(!(isNaN(b)||b<=0)){switch(s.beginPath(),y){default:i?s.ellipse(t,n,i/2,b,0,0,ir):s.arc(t,n,b,0,ir),s.closePath();break;case"triangle":d=i?i/2:b,s.moveTo(t+Math.sin(w)*d,n-Math.cos(w)*b),w+=R_,s.lineTo(t+Math.sin(w)*d,n-Math.cos(w)*b),w+=R_,s.lineTo(t+Math.sin(w)*d,n-Math.cos(w)*b),s.closePath();break;case"rectRounded":h=b*.516,u=b-h,a=Math.cos(w+qo)*u,g=Math.cos(w+qo)*(i?i/2-h:u),l=Math.sin(w+qo)*u,p=Math.sin(w+qo)*(i?i/2-h:u),s.arc(t-g,n-l,h,w-zn,w-xi),s.arc(t+p,n-a,h,w-xi,w),s.arc(t+g,n+l,h,w,w+xi),s.arc(t-p,n+a,h,w+xi,w+zn),s.closePath();break;case"rect":if(!v){u=Math.SQRT1_2*b,d=i?i/2:u,s.rect(t-d,n-u,2*d,2*u);break}w+=qo;case"rectRot":g=Math.cos(w)*(i?i/2:b),a=Math.cos(w)*b,l=Math.sin(w)*b,p=Math.sin(w)*(i?i/2:b),s.moveTo(t-g,n-l),s.lineTo(t+p,n-a),s.lineTo(t+g,n+l),s.lineTo(t-p,n+a),s.closePath();break;case"crossRot":w+=qo;case"cross":g=Math.cos(w)*(i?i/2:b),a=Math.cos(w)*b,l=Math.sin(w)*b,p=Math.sin(w)*(i?i/2:b),s.moveTo(t-g,n-l),s.lineTo(t+g,n+l),s.moveTo(t+p,n-a),s.lineTo(t-p,n+a);break;case"star":g=Math.cos(w)*(i?i/2:b),a=Math.cos(w)*b,l=Math.sin(w)*b,p=Math.sin(w)*(i?i/2:b),s.moveTo(t-g,n-l),s.lineTo(t+g,n+l),s.moveTo(t+p,n-a),s.lineTo(t-p,n+a),w+=qo,g=Math.cos(w)*(i?i/2:b),a=Math.cos(w)*b,l=Math.sin(w)*b,p=Math.sin(w)*(i?i/2:b),s.moveTo(t-g,n-l),s.lineTo(t+g,n+l),s.moveTo(t+p,n-a),s.lineTo(t-p,n+a);break;case"line":a=i?i/2:Math.cos(w)*b,l=Math.sin(w)*b,s.moveTo(t-a,n-l),s.lineTo(t+a,n+l);break;case"dash":s.moveTo(t,n),s.lineTo(t+Math.cos(w)*(i?i/2:b),n+Math.sin(w)*b);break;case!1:s.closePath();break}s.fill(),e.borderWidth>0&&s.stroke()}}function Ed(s,e,t){return t=t||.5,!e||s&&s.x>e.left-t&&s.x<e.right+t&&s.y>e.top-t&&s.y<e.bottom+t}function wb(s,e){s.save(),s.beginPath(),s.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),s.clip()}function Ab(s){s.restore()}function I7(s,e,t,n,i){if(!e)return s.lineTo(t.x,t.y);if(i==="middle"){const r=(e.x+t.x)/2;s.lineTo(r,e.y),s.lineTo(r,t.y)}else i==="after"!=!!n?s.lineTo(e.x,t.y):s.lineTo(t.x,e.y);s.lineTo(t.x,t.y)}function O7(s,e,t,n){if(!e)return s.lineTo(t.x,t.y);s.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?t.cp2x:t.cp1x,n?t.cp2y:t.cp1y,t.x,t.y)}function M7(s,e){e.translation&&s.translate(e.translation[0],e.translation[1]),_t(e.rotation)||s.rotate(e.rotation),e.color&&(s.fillStyle=e.color),e.textAlign&&(s.textAlign=e.textAlign),e.textBaseline&&(s.textBaseline=e.textBaseline)}function P7(s,e,t,n,i){if(i.strikethrough||i.underline){const r=s.measureText(n),a=e-r.actualBoundingBoxLeft,l=e+r.actualBoundingBoxRight,u=t-r.actualBoundingBoxAscent,h=t+r.actualBoundingBoxDescent,d=i.strikethrough?(u+h)/2:h;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=i.decorationWidth||2,s.moveTo(a,d),s.lineTo(l,d),s.stroke()}}function N7(s,e){const t=s.fillStyle;s.fillStyle=e.color,s.fillRect(e.left,e.top,e.width,e.height),s.fillStyle=t}function Jg(s,e,t,n,i,r={}){const a=Cn(e)?e:[e],l=r.strokeWidth>0&&r.strokeColor!=="";let u,h;for(s.save(),s.font=i.string,M7(s,r),u=0;u<a.length;++u)h=a[u],r.backdrop&&N7(s,r.backdrop),l&&(r.strokeColor&&(s.strokeStyle=r.strokeColor),_t(r.strokeWidth)||(s.lineWidth=r.strokeWidth),s.strokeText(h,t,n,r.maxWidth)),s.fillText(h,t,n,r.maxWidth),P7(s,t,n,h,r),n+=Number(i.lineHeight);s.restore()}function ov(s,e){const{x:t,y:n,w:i,h:r,radius:a}=e;s.arc(t+a.topLeft,n+a.topLeft,a.topLeft,1.5*zn,zn,!0),s.lineTo(t,n+r-a.bottomLeft),s.arc(t+a.bottomLeft,n+r-a.bottomLeft,a.bottomLeft,zn,xi,!0),s.lineTo(t+i-a.bottomRight,n+r),s.arc(t+i-a.bottomRight,n+r-a.bottomRight,a.bottomRight,xi,0,!0),s.lineTo(t+i,n+a.topRight),s.arc(t+i-a.topRight,n+a.topRight,a.topRight,0,-xi,!0),s.lineTo(t+a.topLeft,n)}const B7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,F7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function U7(s,e){const t=(""+s).match(B7);if(!t||t[1]==="normal")return e*1.2;switch(s=+t[2],t[3]){case"px":return s;case"%":s/=100;break}return e*s}const H7=s=>+s||0;function XC(s,e){const t={},n=ct(e),i=n?Object.keys(e):e,r=ct(s)?n?a=>st(s[a],s[e[a]]):a=>s[a]:()=>s;for(const a of i)t[a]=H7(r(a));return t}function G7(s){return XC(s,{top:"y",right:"x",bottom:"y",left:"x"})}function Qf(s){return XC(s,["topLeft","topRight","bottomLeft","bottomRight"])}function Ai(s){const e=G7(s);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function us(s,e){s=s||{},e=e||Jt.font;let t=st(s.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=st(s.style,e.style);n&&!(""+n).match(F7)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:st(s.family,e.family),lineHeight:U7(st(s.lineHeight,e.lineHeight),t),size:t,style:n,weight:st(s.weight,e.weight),string:""};return i.string=C7(i),i}function H2(s,e,t,n){let i,r,a;for(i=0,r=s.length;i<r;++i)if(a=s[i],a!==void 0&&a!==void 0)return a}function z7(s,e,t){const{min:n,max:i}=s,r=Z9(e,(i-n)/2),a=(l,u)=>t&&l===0?0:l+u;return{min:a(n,-Math.abs(r)),max:a(i,r)}}function Ql(s,e){return Object.assign(Object.create(s),e)}function Tb(s,e=[""],t,n,i=()=>s[0]){const r=t||s;typeof n>"u"&&(n=tI("_fallback",s));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:r,_fallback:n,_getTarget:i,override:l=>Tb([l,...s],e,r,n)};return new Proxy(a,{deleteProperty(l,u){return delete l[u],delete l._keys,delete s[0][u],!0},get(l,u){return JC(l,u,()=>W7(u,e,s,l))},getOwnPropertyDescriptor(l,u){return Reflect.getOwnPropertyDescriptor(l._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(l,u){return F_(l).includes(u)},ownKeys(l){return F_(l)},set(l,u,h){const d=l._storage||(l._storage=i());return l[u]=d[u]=h,delete l._keys,!0}})}function oh(s,e,t,n){const i={_cacheable:!1,_proxy:s,_context:e,_subProxy:t,_stack:new Set,_descriptors:ZC(s,n),setContext:r=>oh(s,r,t,n),override:r=>oh(s.override(r),e,t,n)};return new Proxy(i,{deleteProperty(r,a){return delete r[a],delete s[a],!0},get(r,a,l){return JC(r,a,()=>V7(r,a,l))},getOwnPropertyDescriptor(r,a){return r._descriptors.allKeys?Reflect.has(s,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,a)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(r,a){return Reflect.has(s,a)},ownKeys(){return Reflect.ownKeys(s)},set(r,a,l){return s[a]=l,delete r[a],!0}})}function ZC(s,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=s;return{allKeys:i,scriptable:t,indexable:n,isScriptable:vo(t)?t:()=>t,isIndexable:vo(n)?n:()=>n}}const $7=(s,e)=>s?s+vb(e):e,Sb=(s,e)=>ct(e)&&s!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function JC(s,e,t){if(Object.prototype.hasOwnProperty.call(s,e)||e==="constructor")return s[e];const n=t();return s[e]=n,n}function V7(s,e,t){const{_proxy:n,_context:i,_subProxy:r,_descriptors:a}=s;let l=n[e];return vo(l)&&a.isScriptable(e)&&(l=Y7(e,l,s,t)),Cn(l)&&l.length&&(l=K7(e,l,s,a.isIndexable)),Sb(e,l)&&(l=oh(l,i,r&&r[e],a)),l}function Y7(s,e,t,n){const{_proxy:i,_context:r,_subProxy:a,_stack:l}=t;if(l.has(s))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+s);l.add(s);let u=e(r,a||n);return l.delete(s),Sb(s,u)&&(u=_b(i._scopes,i,s,u)),u}function K7(s,e,t,n){const{_proxy:i,_context:r,_subProxy:a,_descriptors:l}=t;if(typeof r.index<"u"&&n(s))return e[r.index%e.length];if(ct(e[0])){const u=e,h=i._scopes.filter(d=>d!==u);e=[];for(const d of u){const g=_b(h,i,s,d);e.push(oh(g,r,a&&a[s],l))}}return e}function eI(s,e,t){return vo(s)?s(e,t):s}const j7=(s,e)=>s===!0?e:typeof s=="string"?Wg(e,s):void 0;function q7(s,e,t,n,i){for(const r of e){const a=j7(t,r);if(a){s.add(a);const l=eI(a._fallback,t,i);if(typeof l<"u"&&l!==t&&l!==n)return l}else if(a===!1&&typeof n<"u"&&t!==n)return null}return!1}function _b(s,e,t,n){const i=e._rootScopes,r=eI(e._fallback,t,n),a=[...s,...i],l=new Set;l.add(n);let u=B_(l,a,t,r||t,n);return u===null||typeof r<"u"&&r!==t&&(u=B_(l,a,r,u,n),u===null)?!1:Tb(Array.from(l),[""],i,r,()=>Q7(e,t,n))}function B_(s,e,t,n,i){for(;t;)t=q7(s,e,t,n,i);return t}function Q7(s,e,t){const n=s._getTarget();e in n||(n[e]={});const i=n[e];return Cn(i)&&ct(t)?t:i||{}}function W7(s,e,t,n){let i;for(const r of e)if(i=tI($7(r,s),t),typeof i<"u")return Sb(s,i)?_b(t,n,s,i):i}function tI(s,e){for(const t of e){if(!t)continue;const n=t[s];if(typeof n<"u")return n}}function F_(s){let e=s._keys;return e||(e=s._keys=X7(s._scopes)),e}function X7(s){const e=new Set;for(const t of s)for(const n of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}const Z7=Number.EPSILON||1e-14,lh=(s,e)=>e<s.length&&!s[e].skip&&s[e],nI=s=>s==="x"?"y":"x";function J7(s,e,t,n){const i=s.skip?e:s,r=e,a=t.skip?e:t,l=iv(r,i),u=iv(a,r);let h=l/(l+u),d=u/(l+u);h=isNaN(h)?0:h,d=isNaN(d)?0:d;const g=n*h,p=n*d;return{previous:{x:r.x-g*(a.x-i.x),y:r.y-g*(a.y-i.y)},next:{x:r.x+p*(a.x-i.x),y:r.y+p*(a.y-i.y)}}}function eV(s,e,t){const n=s.length;let i,r,a,l,u,h=lh(s,0);for(let d=0;d<n-1;++d)if(u=h,h=lh(s,d+1),!(!u||!h)){if(Kf(e[d],0,Z7)){t[d]=t[d+1]=0;continue}i=t[d]/e[d],r=t[d+1]/e[d],l=Math.pow(i,2)+Math.pow(r,2),!(l<=9)&&(a=3/Math.sqrt(l),t[d]=i*a*e[d],t[d+1]=r*a*e[d])}}function tV(s,e,t="x"){const n=nI(t),i=s.length;let r,a,l,u=lh(s,0);for(let h=0;h<i;++h){if(a=l,l=u,u=lh(s,h+1),!l)continue;const d=l[t],g=l[n];a&&(r=(d-a[t])/3,l[`cp1${t}`]=d-r,l[`cp1${n}`]=g-r*e[h]),u&&(r=(u[t]-d)/3,l[`cp2${t}`]=d+r,l[`cp2${n}`]=g+r*e[h])}}function nV(s,e="x"){const t=nI(e),n=s.length,i=Array(n).fill(0),r=Array(n);let a,l,u,h=lh(s,0);for(a=0;a<n;++a)if(l=u,u=h,h=lh(s,a+1),!!u){if(h){const d=h[e]-u[e];i[a]=d!==0?(h[t]-u[t])/d:0}r[a]=l?h?ah(i[a-1])!==ah(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}eV(s,i,r),tV(s,r,e)}function G2(s,e,t){return Math.max(Math.min(s,t),e)}function sV(s,e){let t,n,i,r,a,l=Ed(s[0],e);for(t=0,n=s.length;t<n;++t)a=r,r=l,l=t<n-1&&Ed(s[t+1],e),r&&(i=s[t],a&&(i.cp1x=G2(i.cp1x,e.left,e.right),i.cp1y=G2(i.cp1y,e.top,e.bottom)),l&&(i.cp2x=G2(i.cp2x,e.left,e.right),i.cp2y=G2(i.cp2y,e.top,e.bottom)))}function iV(s,e,t,n,i){let r,a,l,u;if(e.spanGaps&&(s=s.filter(h=>!h.skip)),e.cubicInterpolationMode==="monotone")nV(s,i);else{let h=n?s[s.length-1]:s[0];for(r=0,a=s.length;r<a;++r)l=s[r],u=J7(h,l,s[Math.min(r+1,a-(n?0:1))%a],e.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,h=l}e.capBezierPoints&&sV(s,t)}function Rb(){return typeof window<"u"&&typeof document<"u"}function kb(s){let e=s.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function em(s,e,t){let n;return typeof s=="string"?(n=parseInt(s,10),s.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=s,n}const Cm=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function rV(s,e){return Cm(s).getPropertyValue(e)}const aV=["top","right","bottom","left"];function Bl(s,e,t){const n={};t=t?"-"+t:"";for(let i=0;i<4;i++){const r=aV[i];n[r]=parseFloat(s[e+"-"+r+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const oV=(s,e,t)=>(s>0||e>0)&&(!t||!t.shadowRoot);function lV(s,e){const t=s.touches,n=t&&t.length?t[0]:s,{offsetX:i,offsetY:r}=n;let a=!1,l,u;if(oV(i,r,s.target))l=i,u=r;else{const h=e.getBoundingClientRect();l=n.clientX-h.left,u=n.clientY-h.top,a=!0}return{x:l,y:u,box:a}}function el(s,e){if("native"in s)return s;const{canvas:t,currentDevicePixelRatio:n}=e,i=Cm(t),r=i.boxSizing==="border-box",a=Bl(i,"padding"),l=Bl(i,"border","width"),{x:u,y:h,box:d}=lV(s,t),g=a.left+(d&&l.left),p=a.top+(d&&l.top);let{width:y,height:v}=e;return r&&(y-=a.width+l.width,v-=a.height+l.height),{x:Math.round((u-g)/y*t.width/n),y:Math.round((h-p)/v*t.height/n)}}function cV(s,e,t){let n,i;if(e===void 0||t===void 0){const r=s&&kb(s);if(!r)e=s.clientWidth,t=s.clientHeight;else{const a=r.getBoundingClientRect(),l=Cm(r),u=Bl(l,"border","width"),h=Bl(l,"padding");e=a.width-h.width-u.width,t=a.height-h.height-u.height,n=em(l.maxWidth,r,"clientWidth"),i=em(l.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:n||Zg,maxHeight:i||Zg}}const z2=s=>Math.round(s*10)/10;function uV(s,e,t,n){const i=Cm(s),r=Bl(i,"margin"),a=em(i.maxWidth,s,"clientWidth")||Zg,l=em(i.maxHeight,s,"clientHeight")||Zg,u=cV(s,e,t);let{width:h,height:d}=u;if(i.boxSizing==="content-box"){const p=Bl(i,"border","width"),y=Bl(i,"padding");h-=y.width+p.width,d-=y.height+p.height}return h=Math.max(0,h-r.width),d=Math.max(0,n?h/n:d-r.height),h=z2(Math.min(h,a,u.maxWidth)),d=z2(Math.min(d,l,u.maxHeight)),h&&!d&&(d=z2(h/2)),(e!==void 0||t!==void 0)&&n&&u.height&&d>u.height&&(d=u.height,h=z2(Math.floor(d*n))),{width:h,height:d}}function U_(s,e,t){const n=e||1,i=Math.floor(s.height*n),r=Math.floor(s.width*n);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const a=s.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${s.height}px`,a.style.width=`${s.width}px`),s.currentDevicePixelRatio!==n||a.height!==i||a.width!==r?(s.currentDevicePixelRatio=n,a.height=i,a.width=r,s.ctx.setTransform(n,0,0,n,0,0),!0):!1}const hV=function(){let s=!1;try{const e={get passive(){return s=!0,!1}};Rb()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return s}();function H_(s,e){const t=rV(s,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function tl(s,e,t,n){return{x:s.x+t*(e.x-s.x),y:s.y+t*(e.y-s.y)}}function fV(s,e,t,n){return{x:s.x+t*(e.x-s.x),y:n==="middle"?t<.5?s.y:e.y:n==="after"?t<1?s.y:e.y:t>0?e.y:s.y}}function dV(s,e,t,n){const i={x:s.cp2x,y:s.cp2y},r={x:e.cp1x,y:e.cp1y},a=tl(s,i,t),l=tl(i,r,t),u=tl(r,e,t),h=tl(a,l,t),d=tl(l,u,t);return tl(h,d,t)}const gV=function(s,e){return{x(t){return s+s+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,n){return t-n},leftForLtr(t,n){return t-n}}},mV=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,e){return s+e},leftForLtr(s,e){return s}}};function cu(s,e,t){return s?gV(e,t):mV()}function sI(s,e){let t,n;(e==="ltr"||e==="rtl")&&(t=s.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),s.prevTextDirection=n)}function iI(s,e){e!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",e[0],e[1]))}function rI(s){return s==="angle"?{between:$C,compare:f7,normalize:za}:{between:Bf,compare:(e,t)=>e-t,normalize:e=>e}}function G_({start:s,end:e,count:t,loop:n,style:i}){return{start:s%t,end:e%t,loop:n&&(e-s+1)%t===0,style:i}}function pV(s,e,t){const{property:n,start:i,end:r}=t,{between:a,normalize:l}=rI(n),u=e.length;let{start:h,end:d,loop:g}=s,p,y;if(g){for(h+=u,d+=u,p=0,y=u;p<y&&a(l(e[h%u][n]),i,r);++p)h--,d--;h%=u,d%=u}return d<h&&(d+=u),{start:h,end:d,loop:g,style:s.style}}function yV(s,e,t){if(!t)return[s];const{property:n,start:i,end:r}=t,a=e.length,{compare:l,between:u,normalize:h}=rI(n),{start:d,end:g,loop:p,style:y}=pV(s,e,t),v=[];let b=!1,w=null,A,S,T;const D=()=>u(i,T,A)&&l(i,T)!==0,L=()=>l(r,A)===0||u(r,T,A),B=()=>b||D(),M=()=>!b||L();for(let I=d,N=d;I<=g;++I)S=e[I%a],!S.skip&&(A=h(S[n]),A!==T&&(b=u(A,i,r),w===null&&B()&&(w=l(A,i)===0?I:N),w!==null&&M()&&(v.push(G_({start:w,end:I,loop:p,count:a,style:y})),w=null),N=I,T=A));return w!==null&&v.push(G_({start:w,end:g,loop:p,count:a,style:y})),v}function xV(s,e){const t=[],n=s.segments;for(let i=0;i<n.length;i++){const r=yV(n[i],s.points,e);r.length&&t.push(...r)}return t}function vV(s,e,t,n){let i=0,r=e-1;if(t&&!n)for(;i<e&&!s[i].skip;)i++;for(;i<e&&s[i].skip;)i++;for(i%=e,t&&(r+=i);r>i&&s[r%e].skip;)r--;return r%=e,{start:i,end:r}}function bV(s,e,t,n){const i=s.length,r=[];let a=e,l=s[e],u;for(u=e+1;u<=t;++u){const h=s[u%i];h.skip||h.stop?l.skip||(n=!1,r.push({start:e%i,end:(u-1)%i,loop:n}),e=a=h.stop?u:null):(a=u,l.skip&&(e=u)),l=h}return a!==null&&r.push({start:e%i,end:a%i,loop:n}),r}function EV(s,e){const t=s.points,n=s.options.spanGaps,i=t.length;if(!i)return[];const r=!!s._loop,{start:a,end:l}=vV(t,i,r,n);if(n===!0)return z_(s,[{start:a,end:l,loop:r}],t,e);const u=l<a?l+i:l,h=!!s._fullLoop&&a===0&&l===i-1;return z_(s,bV(t,a,u,h),t,e)}function z_(s,e,t,n){return!n||!n.setContext||!t?e:wV(s,e,t,n)}function wV(s,e,t,n){const i=s._chart.getContext(),r=$_(s.options),{_datasetIndex:a,options:{spanGaps:l}}=s,u=t.length,h=[];let d=r,g=e[0].start,p=g;function y(v,b,w,A){const S=l?-1:1;if(v!==b){for(v+=u;t[v%u].skip;)v-=S;for(;t[b%u].skip;)b+=S;v%u!==b%u&&(h.push({start:v%u,end:b%u,loop:w,style:A}),d=A,g=b%u)}}for(const v of e){g=l?g:v.start;let b=t[g%u],w;for(p=g+1;p<=v.end;p++){const A=t[p%u];w=$_(n.setContext(Ql(i,{type:"segment",p0:b,p1:A,p0DataIndex:(p-1)%u,p1DataIndex:p%u,datasetIndex:a}))),AV(w,d)&&y(g,p-1,v.loop,d),b=A,d=w}g<p-1&&y(g,p-1,v.loop,d)}return h}function $_(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function AV(s,e){if(!e)return!1;const t=[],n=function(i,r){return Eb(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(s,n)!==JSON.stringify(e,n)}function $2(s,e,t){return s.options.clip?s[t]:e[t]}function TV(s,e){const{xScale:t,yScale:n}=s;return t&&n?{left:$2(t,e,"left"),right:$2(t,e,"right"),top:$2(n,e,"top"),bottom:$2(n,e,"bottom")}:e}function SV(s,e){const t=e._clip;if(t.disabled)return!1;const n=TV(e,s.chartArea);return{left:t.left===!1?0:n.left-(t.left===!0?0:t.left),right:t.right===!1?s.width:n.right+(t.right===!0?0:t.right),top:t.top===!1?0:n.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?s.height:n.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class _V{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],a=t.duration;r.forEach(l=>l({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=YC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let a=r.length-1,l=!1,u;for(;a>=0;--a)u=r[a],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(e),l=!0):(r[a]=r[r.length-1],r.pop());l&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Cr=new _V;const V_="transparent",RV={boolean(s,e,t){return t>.5?e:s},color(s,e,t){const n=O_(s||V_),i=n.valid&&O_(e||V_);return i&&i.valid?i.mix(n,t).hexString():e},number(s,e,t){return s+(e-s)*t}};class kV{constructor(e,t,n,i){const r=t[n];i=H2([e.to,i,r,e.from]);const a=H2([e.from,r,i]);this._active=!0,this._fn=e.fn||RV[e.type||typeof a],this._easing=jf[e.easing]||jf.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,a=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=H2([e.to,t,i,e.from]),this._from=H2([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,a=this._loop,l=this._to;let u;if(this._active=r!==l&&(a||t<n),!this._active){this._target[i]=l,this._notify(!0);return}if(t<0){this._target[i]=r;return}u=t/n%2,u=a&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[i]=this._fn(r,l,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class aI{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ct(e))return;const t=Object.keys(Jt.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!ct(r))return;const a={};for(const l of t)a[l]=r[l];(Cn(r.properties)&&r.properties||[i]).forEach(l=>{(l===i||!n.has(l))&&n.set(l,a)})})}_animateOptions(e,t){const n=t.options,i=DV(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&LV(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),a=Object.keys(t),l=Date.now();let u;for(u=a.length-1;u>=0;--u){const h=a[u];if(h.charAt(0)==="$")continue;if(h==="options"){i.push(...this._animateOptions(e,t));continue}const d=t[h];let g=r[h];const p=n.get(h);if(g)if(p&&g.active()){g.update(p,d,l);continue}else g.cancel();if(!p||!p.duration){e[h]=d;continue}r[h]=g=new kV(p,e,h,d),i.push(g)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const n=this._createAnimations(e,t);if(n.length)return Cr.add(this._chart,n),!0}}function LV(s,e){const t=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const r=s[n[i]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function DV(s,e){if(!e)return;let t=s.options;if(!t){s.options=e;return}return t.$shared&&(s.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Y_(s,e){const t=s&&s.options||{},n=t.reverse,i=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:n?r:i,end:n?i:r}}function CV(s,e,t){if(t===!1)return!1;const n=Y_(s,t),i=Y_(e,t);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function IV(s){let e,t,n,i;return ct(s)?(e=s.top,t=s.right,n=s.bottom,i=s.left):e=t=n=i=s,{top:e,right:t,bottom:n,left:i,disabled:s===!1}}function oI(s,e){const t=[],n=s._getSortedDatasetMetas(e);let i,r;for(i=0,r=n.length;i<r;++i)t.push(n[i].index);return t}function K_(s,e,t,n={}){const i=s.keys,r=n.mode==="single";let a,l,u,h;if(e===null)return;let d=!1;for(a=0,l=i.length;a<l;++a){if(u=+i[a],u===t){if(d=!0,n.all)continue;break}h=s.values[u],ei(h)&&(r||e===0||ah(e)===ah(h))&&(e+=h)}return!d&&!n.all?0:e}function OV(s,e){const{iScale:t,vScale:n}=e,i=t.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",a=Object.keys(s),l=new Array(a.length);let u,h,d;for(u=0,h=a.length;u<h;++u)d=a[u],l[u]={[i]:d,[r]:s[d]};return l}function Vx(s,e){const t=s&&s.options.stacked;return t||t===void 0&&e.stack!==void 0}function MV(s,e,t){return`${s.id}.${e.id}.${t.stack||t.type}`}function PV(s){const{min:e,max:t,minDefined:n,maxDefined:i}=s.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function NV(s,e,t){const n=s[e]||(s[e]={});return n[t]||(n[t]={})}function j_(s,e,t,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const r=s[i.index];if(t&&r>0||!t&&r<0)return i.index}return null}function q_(s,e){const{chart:t,_cachedMeta:n}=s,i=t._stacks||(t._stacks={}),{iScale:r,vScale:a,index:l}=n,u=r.axis,h=a.axis,d=MV(r,a,n),g=e.length;let p;for(let y=0;y<g;++y){const v=e[y],{[u]:b,[h]:w}=v,A=v._stacks||(v._stacks={});p=A[h]=NV(i,d,b),p[l]=w,p._top=j_(p,a,!0,n.type),p._bottom=j_(p,a,!1,n.type);const S=p._visualValues||(p._visualValues={});S[l]=w}}function Yx(s,e){const t=s.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function BV(s,e){return Ql(s,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function FV(s,e,t){return Ql(s,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ef(s,e){const t=s.controller.index,n=s.vScale&&s.vScale.axis;if(n){e=e||s._parsed;for(const i of e){const r=i._stacks;if(!r||r[n]===void 0||r[n][t]===void 0)return;delete r[n][t],r[n]._visualValues!==void 0&&r[n]._visualValues[t]!==void 0&&delete r[n]._visualValues[t]}}}const Kx=s=>s==="reset"||s==="none",Q_=(s,e)=>e?s:Object.assign({},s),UV=(s,e,t)=>s&&!e.hidden&&e._stacked&&{keys:oI(t,!0),values:null};class Wf{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Vx(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ef(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(g,p,y,v)=>g==="x"?p:g==="r"?v:y,r=t.xAxisID=st(n.xAxisID,Yx(e,"x")),a=t.yAxisID=st(n.yAxisID,Yx(e,"y")),l=t.rAxisID=st(n.rAxisID,Yx(e,"r")),u=t.indexAxis,h=t.iAxisID=i(u,r,a,l),d=t.vAxisID=i(u,a,r,l);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(h),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&D_(this._data,this),e._stacked&&Ef(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(ct(t)){const i=this._cachedMeta;this._data=OV(t,i)}else if(n!==t){if(n){D_(n,this);const i=this._cachedMeta;Ef(i),i._parsed=[]}t&&Object.isExtensible(t)&&p7(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=Vx(t.vScale,t),t.stack!==n.stack&&(i=!0,Ef(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(q_(this,t._parsed),t._stacked=Vx(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:a}=n,l=r.axis;let u=e===0&&t===i.length?!0:n._sorted,h=e>0&&n._parsed[e-1],d,g,p;if(this._parsing===!1)n._parsed=i,n._sorted=!0,p=i;else{Cn(i[e])?p=this.parseArrayData(n,i,e,t):ct(i[e])?p=this.parseObjectData(n,i,e,t):p=this.parsePrimitiveData(n,i,e,t);const y=()=>g[l]===null||h&&g[l]<h[l];for(d=0;d<t;++d)n._parsed[d+e]=g=p[d],u&&(y()&&(u=!1),h=g);n._sorted=u}a&&q_(this,p)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:a}=e,l=r.axis,u=a.axis,h=r.getLabels(),d=r===a,g=new Array(i);let p,y,v;for(p=0,y=i;p<y;++p)v=p+n,g[p]={[l]:d||r.parse(h[v],v),[u]:a.parse(t[v],v)};return g}parseArrayData(e,t,n,i){const{xScale:r,yScale:a}=e,l=new Array(i);let u,h,d,g;for(u=0,h=i;u<h;++u)d=u+n,g=t[d],l[u]={x:r.parse(g[0],d),y:a.parse(g[1],d)};return l}parseObjectData(e,t,n,i){const{xScale:r,yScale:a}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,h=new Array(i);let d,g,p,y;for(d=0,g=i;d<g;++d)p=d+n,y=t[p],h[d]={x:r.parse(Wg(y,l),p),y:a.parse(Wg(y,u),p)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,a=t[e.axis],l={keys:oI(i,!0),values:t._stacks[e.axis]._visualValues};return K_(l,a,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let a=r===null?NaN:r;const l=i&&n._stacks[t.axis];i&&l&&(i.values=l,a=K_(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,a=i.length,l=this._getOtherScale(e),u=UV(t,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:g}=PV(l);let p,y;function v(){y=i[p];const b=y[l.axis];return!ei(y[e.axis])||d>b||g<b}for(p=0;p<a&&!(!v()&&(this.updateRangeFromParsed(h,e,y,u),r));++p);if(r){for(p=a-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(h,e,y,u);break}}return h}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,a;for(i=0,r=t.length;i<r;++i)a=t[i][e.axis],ei(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=IV(st(this.options.clip,CV(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,a=[],l=this._drawStart||0,u=this._drawCount||i.length-l,h=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(e,r,l,u),d=l;d<l+u;++d){const g=i[d];g.hidden||(g.active&&h?a.push(g):g.draw(e,r))}for(d=0;d<a.length;++d)a[d].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];r=a.$context||(a.$context=FV(this.getContext(),e,a)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=BV(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const i=t==="active",r=this._cachedDataOpts,a=e+"-"+t,l=r[a],u=this.enableOptionSharing&&Xg(n);if(l)return Q_(l,u);const h=this.chart.config,d=h.datasetElementScopeKeys(this._type,e),g=i?[`${e}Hover`,"hover",e,""]:[e,""],p=h.getOptionScopes(this.getDataset(),d),y=Object.keys(Jt.elements[e]),v=()=>this.getContext(n,i,t),b=h.resolveNamedOptions(p,y,v,g);return b.$shared&&(b.$shared=u,r[a]=Object.freeze(Q_(b,u))),b}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,a=`animation-${t}`,l=r[a];if(l)return l;let u;if(i.options.animation!==!1){const d=this.chart.config,g=d.datasetAnimationScopeKeys(this._type,t),p=d.getOptionScopes(this.getDataset(),g);u=d.createResolver(p,this.getContext(e,n,t))}const h=new aI(i,u&&u.animations);return u&&u._cacheable&&(r[a]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Kx(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),a=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:a}}updateElement(e,t,n,i){Kx(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!Kx(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[l,u,h]of this._syncList)this[l](u,h);this._syncList=[];const i=n.length,r=t.length,a=Math.min(r,i);a&&this.parse(0,a),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t,n=!0){const i=this._cachedMeta,r=i.data,a=e+t;let l;const u=h=>{for(h.length+=t,l=h.length-1;l>=a;l--)h[l]=h[l-t]};for(u(r),l=e;l<a;++l)r[l]=new this.dataElementType;this._parsing&&u(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&Ef(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}F(Wf,"defaults",{}),F(Wf,"datasetElementType",null),F(Wf,"dataElementType",null);class yg extends Wf{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,a=this.chart._animationsDisabled;let{start:l,count:u}=b7(t,i,a);this._drawStart=l,this._drawCount=u,E7(t)&&(l=0,u=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:h},e),this.updateElements(i,l,u,e)}updateElements(e,t,n,i){const r=i==="reset",{iScale:a,vScale:l,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:d,includeOptions:g}=this._getSharedOptions(t,i),p=a.axis,y=l.axis,{spanGaps:v,segment:b}=this.options,w=bd(v)?v:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||r||i==="none",S=t+n,T=e.length;let D=t>0&&this.getParsed(t-1);for(let L=0;L<T;++L){const B=e[L],M=A?B:{};if(L<t||L>=S){M.skip=!0;continue}const I=this.getParsed(L),N=_t(I[y]),P=M[p]=a.getPixelForValue(I[p],L),z=M[y]=r||N?l.getBasePixel():l.getPixelForValue(u?this.applyStack(l,I,u):I[y],L);M.skip=isNaN(P)||isNaN(z)||N,M.stop=L>0&&Math.abs(I[p]-D[p])>w,b&&(M.parsed=I,M.raw=h.data[L]),g&&(M.options=d||this.resolveDataElementOptions(L,B.active?"active":i)),A||this.updateElement(B,L,M,i),D=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}F(yg,"id","line"),F(yg,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),F(yg,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Wo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Lb{constructor(e){F(this,"options");this.options=e||{}}static override(e){Object.assign(Lb.prototype,e)}init(){}formats(){return Wo()}parse(){return Wo()}format(){return Wo()}add(){return Wo()}diff(){return Wo()}startOf(){return Wo()}endOf(){return Wo()}}var lI={_date:Lb};function HV(s,e,t,n){const{controller:i,data:r,_sorted:a}=s,l=i._cachedMeta.iScale,u=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&a&&r.length){const h=l._reversePixels?g7:dl;if(n){if(i._sharedOptions){const d=r[0],g=typeof d.getRange=="function"&&d.getRange(e);if(g){const p=h(r,e,t-g),y=h(r,e,t+g);return{lo:p.lo,hi:y.hi}}}}else{const d=h(r,e,t);if(u){const{vScale:g}=i._cachedMeta,{_parsed:p}=s,y=p.slice(0,d.lo+1).reverse().findIndex(b=>!_t(b[g.axis]));d.lo-=Math.max(0,y);const v=p.slice(d.hi).findIndex(b=>!_t(b[g.axis]));d.hi+=Math.max(0,v)}return d}}return{lo:0,hi:r.length-1}}function Im(s,e,t,n,i){const r=s.getSortedVisibleDatasetMetas(),a=t[e];for(let l=0,u=r.length;l<u;++l){const{index:h,data:d}=r[l],{lo:g,hi:p}=HV(r[l],e,a,i);for(let y=g;y<=p;++y){const v=d[y];v.skip||n(v,h,y)}}}function GV(s){const e=s.indexOf("x")!==-1,t=s.indexOf("y")!==-1;return function(n,i){const r=e?Math.abs(n.x-i.x):0,a=t?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function jx(s,e,t,n,i){const r=[];return!i&&!s.isPointInArea(e)||Im(s,t,e,function(l,u,h){!i&&!Ed(l,s.chartArea,0)||l.inRange(e.x,e.y,n)&&r.push({element:l,datasetIndex:u,index:h})},!0),r}function zV(s,e,t,n){let i=[];function r(a,l,u){const{startAngle:h,endAngle:d}=a.getProps(["startAngle","endAngle"],n),{angle:g}=h7(a,{x:e.x,y:e.y});$C(g,h,d)&&i.push({element:a,datasetIndex:l,index:u})}return Im(s,t,e,r),i}function $V(s,e,t,n,i,r){let a=[];const l=GV(t);let u=Number.POSITIVE_INFINITY;function h(d,g,p){const y=d.inRange(e.x,e.y,i);if(n&&!y)return;const v=d.getCenterPoint(i);if(!(!!r||s.isPointInArea(v))&&!y)return;const w=l(e,v);w<u?(a=[{element:d,datasetIndex:g,index:p}],u=w):w===u&&a.push({element:d,datasetIndex:g,index:p})}return Im(s,t,e,h),a}function qx(s,e,t,n,i,r){return!r&&!s.isPointInArea(e)?[]:t==="r"&&!n?zV(s,e,t,i):$V(s,e,t,n,i,r)}function W_(s,e,t,n,i){const r=[],a=t==="x"?"inXRange":"inYRange";let l=!1;return Im(s,t,e,(u,h,d)=>{u[a]&&u[a](e[t],i)&&(r.push({element:u,datasetIndex:h,index:d}),l=l||u.inRange(e.x,e.y,i))}),n&&!l?[]:r}var VV={modes:{index(s,e,t,n){const i=el(e,s),r=t.axis||"x",a=t.includeInvisible||!1,l=t.intersect?jx(s,i,r,n,a):qx(s,i,r,!1,n,a),u=[];return l.length?(s.getSortedVisibleDatasetMetas().forEach(h=>{const d=l[0].index,g=h.data[d];g&&!g.skip&&u.push({element:g,datasetIndex:h.index,index:d})}),u):[]},dataset(s,e,t,n){const i=el(e,s),r=t.axis||"xy",a=t.includeInvisible||!1;let l=t.intersect?jx(s,i,r,n,a):qx(s,i,r,!1,n,a);if(l.length>0){const u=l[0].datasetIndex,h=s.getDatasetMeta(u).data;l=[];for(let d=0;d<h.length;++d)l.push({element:h[d],datasetIndex:u,index:d})}return l},point(s,e,t,n){const i=el(e,s),r=t.axis||"xy",a=t.includeInvisible||!1;return jx(s,i,r,n,a)},nearest(s,e,t,n){const i=el(e,s),r=t.axis||"xy",a=t.includeInvisible||!1;return qx(s,i,r,t.intersect,n,a)},x(s,e,t,n){const i=el(e,s);return W_(s,i,"x",t.intersect,n)},y(s,e,t,n){const i=el(e,s);return W_(s,i,"y",t.intersect,n)}}};const cI=["left","top","right","bottom"];function wf(s,e){return s.filter(t=>t.pos===e)}function X_(s,e){return s.filter(t=>cI.indexOf(t.pos)===-1&&t.box.axis===e)}function Af(s,e){return s.sort((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function YV(s){const e=[];let t,n,i,r,a,l;for(t=0,n=(s||[]).length;t<n;++t)i=s[t],{position:r,options:{stack:a,stackWeight:l=1}}=i,e.push({index:t,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&r+a,stackWeight:l});return e}function KV(s){const e={};for(const t of s){const{stack:n,pos:i,stackWeight:r}=t;if(!n||!cI.includes(i))continue;const a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return e}function jV(s,e){const t=KV(s),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let r,a,l;for(r=0,a=s.length;r<a;++r){l=s[r];const{fullSize:u}=l.box,h=t[l.stack],d=h&&l.stackWeight/h.weight;l.horizontal?(l.width=d?d*n:u&&e.availableWidth,l.height=i):(l.width=n,l.height=d?d*i:u&&e.availableHeight)}return t}function qV(s){const e=YV(s),t=Af(e.filter(h=>h.box.fullSize),!0),n=Af(wf(e,"left"),!0),i=Af(wf(e,"right")),r=Af(wf(e,"top"),!0),a=Af(wf(e,"bottom")),l=X_(e,"x"),u=X_(e,"y");return{fullSize:t,leftAndTop:n.concat(r),rightAndBottom:i.concat(u).concat(a).concat(l),chartArea:wf(e,"chartArea"),vertical:n.concat(i).concat(u),horizontal:r.concat(a).concat(l)}}function Z_(s,e,t,n){return Math.max(s[t],e[t])+Math.max(s[n],e[n])}function uI(s,e){s.top=Math.max(s.top,e.top),s.left=Math.max(s.left,e.left),s.bottom=Math.max(s.bottom,e.bottom),s.right=Math.max(s.right,e.right)}function QV(s,e,t,n){const{pos:i,box:r}=t,a=s.maxPadding;if(!ct(i)){t.size&&(s[i]-=t.size);const g=n[t.stack]||{size:0,count:1};g.size=Math.max(g.size,t.horizontal?r.height:r.width),t.size=g.size/g.count,s[i]+=t.size}r.getPadding&&uI(a,r.getPadding());const l=Math.max(0,e.outerWidth-Z_(a,s,"left","right")),u=Math.max(0,e.outerHeight-Z_(a,s,"top","bottom")),h=l!==s.w,d=u!==s.h;return s.w=l,s.h=u,t.horizontal?{same:h,other:d}:{same:d,other:h}}function WV(s){const e=s.maxPadding;function t(n){const i=Math.max(e[n]-s[n],0);return s[n]+=i,i}s.y+=t("top"),s.x+=t("left"),t("right"),t("bottom")}function XV(s,e){const t=e.maxPadding;function n(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{r[a]=Math.max(e[a],t[a])}),r}return n(s?["left","right"]:["top","bottom"])}function Ff(s,e,t,n){const i=[];let r,a,l,u,h,d;for(r=0,a=s.length,h=0;r<a;++r){l=s[r],u=l.box,u.update(l.width||e.w,l.height||e.h,XV(l.horizontal,e));const{same:g,other:p}=QV(e,t,l,n);h|=g&&i.length,d=d||p,u.fullSize||i.push(l)}return h&&Ff(i,e,t,n)||d}function V2(s,e,t,n,i){s.top=t,s.left=e,s.right=e+n,s.bottom=t+i,s.width=n,s.height=i}function J_(s,e,t,n){const i=t.padding;let{x:r,y:a}=e;for(const l of s){const u=l.box,h=n[l.stack]||{placed:0,weight:1},d=l.stackWeight/h.weight||1;if(l.horizontal){const g=e.w*d,p=h.size||u.height;Xg(h.start)&&(a=h.start),u.fullSize?V2(u,i.left,a,t.outerWidth-i.right-i.left,p):V2(u,e.left+h.placed,a,g,p),h.start=a,h.placed+=g,a=u.bottom}else{const g=e.h*d,p=h.size||u.width;Xg(h.start)&&(r=h.start),u.fullSize?V2(u,r,i.top,p,t.outerHeight-i.bottom-i.top):V2(u,r,e.top+h.placed,p,g),h.start=r,h.placed+=g,r=u.right}}e.x=r,e.y=a}var uo={addBox(s,e){s.boxes||(s.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},s.boxes.push(e)},removeBox(s,e){const t=s.boxes?s.boxes.indexOf(e):-1;t!==-1&&s.boxes.splice(t,1)},configure(s,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(s,e,t,n){if(!s)return;const i=Ai(s.options.layout.padding),r=Math.max(e-i.width,0),a=Math.max(t-i.height,0),l=qV(s.boxes),u=l.vertical,h=l.horizontal;mt(s.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const d=u.reduce((b,w)=>w.box.options&&w.box.options.display===!1?b:b+1,0)||1,g=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/d,hBoxMaxHeight:a/2}),p=Object.assign({},i);uI(p,Ai(n));const y=Object.assign({maxPadding:p,w:r,h:a,x:i.left,y:i.top},i),v=jV(u.concat(h),g);Ff(l.fullSize,y,g,v),Ff(u,y,g,v),Ff(h,y,g,v)&&Ff(u,y,g,v),WV(y),J_(l.leftAndTop,y,g,v),y.x+=y.w,y.y+=y.h,J_(l.rightAndBottom,y,g,v),s.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},mt(l.chartArea,b=>{const w=b.box;Object.assign(w,s.chartArea),w.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class hI{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class ZV extends hI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xg="$chartjs",JV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},eR=s=>s===null||s==="";function eY(s,e){const t=s.style,n=s.getAttribute("height"),i=s.getAttribute("width");if(s[xg]={initial:{height:n,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",eR(i)){const r=H_(s,"width");r!==void 0&&(s.width=r)}if(eR(n))if(s.style.height==="")s.height=s.width/(e||2);else{const r=H_(s,"height");r!==void 0&&(s.height=r)}return s}const fI=hV?{passive:!0}:!1;function tY(s,e,t){s&&s.addEventListener(e,t,fI)}function nY(s,e,t){s&&s.canvas&&s.canvas.removeEventListener(e,t,fI)}function sY(s,e){const t=JV[s.type]||s.type,{x:n,y:i}=el(s,e);return{type:t,chart:e,native:s,x:n!==void 0?n:null,y:i!==void 0?i:null}}function tm(s,e){for(const t of s)if(t===e||t.contains(e))return!0}function iY(s,e,t){const n=s.canvas,i=new MutationObserver(r=>{let a=!1;for(const l of r)a=a||tm(l.addedNodes,n),a=a&&!tm(l.removedNodes,n);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function rY(s,e,t){const n=s.canvas,i=new MutationObserver(r=>{let a=!1;for(const l of r)a=a||tm(l.removedNodes,n),a=a&&!tm(l.addedNodes,n);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const wd=new Map;let tR=0;function dI(){const s=window.devicePixelRatio;s!==tR&&(tR=s,wd.forEach((e,t)=>{t.currentDevicePixelRatio!==s&&e()}))}function aY(s,e){wd.size||window.addEventListener("resize",dI),wd.set(s,e)}function oY(s){wd.delete(s),wd.size||window.removeEventListener("resize",dI)}function lY(s,e,t){const n=s.canvas,i=n&&kb(n);if(!i)return;const r=KC((l,u)=>{const h=i.clientWidth;t(l,u),h<i.clientWidth&&t()},window),a=new ResizeObserver(l=>{const u=l[0],h=u.contentRect.width,d=u.contentRect.height;h===0&&d===0||r(h,d)});return a.observe(i),aY(s,r),a}function Qx(s,e,t){t&&t.disconnect(),e==="resize"&&oY(s)}function cY(s,e,t){const n=s.canvas,i=KC(r=>{s.ctx!==null&&t(sY(r,s))},s);return tY(n,e,i),i}class uY extends hI{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(eY(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[xg])return!1;const n=t[xg].initial;["height","width"].forEach(r=>{const a=n[r];_t(a)?t.removeAttribute(r):t.setAttribute(r,a)});const i=n.style||{};return Object.keys(i).forEach(r=>{t.style[r]=i[r]}),t.width=t.width,delete t[xg],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),a={attach:iY,detach:rY,resize:lY}[t]||cY;i[t]=a(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:Qx,detach:Qx,resize:Qx}[t]||nY)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return uV(e,t,n,i)}isAttached(e){const t=e&&kb(e);return!!(t&&t.isConnected)}}function hY(s){return!Rb()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?ZV:uY}class bo{constructor(){F(this,"x");F(this,"y");F(this,"active",!1);F(this,"options");F(this,"$animations")}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return bd(this.x)&&bd(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(r=>{i[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),i}}F(bo,"defaults",{}),F(bo,"defaultRoutes");function fY(s,e){const t=s.options.ticks,n=dY(s),i=Math.min(t.maxTicksLimit||n,n),r=t.major.enabled?mY(e):[],a=r.length,l=r[0],u=r[a-1],h=[];if(a>i)return pY(e,h,r,a/i),h;const d=gY(r,e,i);if(a>0){let g,p;const y=a>1?Math.round((u-l)/(a-1)):null;for(Y2(e,h,d,_t(y)?0:l-y,l),g=0,p=a-1;g<p;g++)Y2(e,h,d,r[g],r[g+1]);return Y2(e,h,d,u,_t(y)?e.length:u+y),h}return Y2(e,h,d),h}function dY(s){const e=s.options.offset,t=s._tickSize(),n=s._length/t+(e?0:1),i=s._maxLength/t;return Math.floor(Math.min(n,i))}function gY(s,e,t){const n=yY(s),i=e.length/t;if(!n)return Math.max(i,1);const r=a7(n);for(let a=0,l=r.length-1;a<l;a++){const u=r[a];if(u>i)return u}return Math.max(i,1)}function mY(s){const e=[];let t,n;for(t=0,n=s.length;t<n;t++)s[t].major&&e.push(t);return e}function pY(s,e,t,n){let i=0,r=t[0],a;for(n=Math.ceil(n),a=0;a<s.length;a++)a===r&&(e.push(s[a]),i++,r=t[i*n])}function Y2(s,e,t,n,i){const r=st(n,0),a=Math.min(st(i,s.length),s.length);let l=0,u,h,d;for(t=Math.ceil(t),i&&(u=i-n,t=u/Math.floor(u/t)),d=r;d<0;)l++,d=Math.round(r+l*t);for(h=Math.max(r,0);h<a;h++)h===d&&(e.push(s[h]),l++,d=Math.round(r+l*t))}function yY(s){const e=s.length;let t,n;if(e<2)return!1;for(n=s[0],t=1;t<e;++t)if(s[t]-s[t-1]!==n)return!1;return n}const xY=s=>s==="left"?"right":s==="right"?"left":s,nR=(s,e,t)=>e==="top"||e==="left"?s[e]+t:s[e]-t,sR=(s,e)=>Math.min(e||s,s);function iR(s,e){const t=[],n=s.length/e,i=s.length;let r=0;for(;r<i;r+=n)t.push(s[Math.floor(r)]);return t}function vY(s,e,t){const n=s.ticks.length,i=Math.min(e,n-1),r=s._startPixel,a=s._endPixel,l=1e-6;let u=s.getPixelForTick(i),h;if(!(t&&(n===1?h=Math.max(u-r,a-u):e===0?h=(s.getPixelForTick(1)-u)/2:h=(u-s.getPixelForTick(i-1))/2,u+=i<e?h:-h,u<r-l||u>a+l)))return u}function bY(s,e){mt(s,t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}})}function Tf(s){return s.drawTicks?s.tickLength:0}function rR(s,e){if(!s.display)return 0;const t=us(s.font,e),n=Ai(s.padding);return(Cn(s.text)?s.text.length:1)*t.lineHeight+n.height}function EY(s,e){return Ql(s,{scale:e,type:"scale"})}function wY(s,e,t){return Ql(s,{tick:t,index:e,type:"tick"})}function AY(s,e,t){let n=jC(s);return(t&&e!=="right"||!t&&e==="right")&&(n=xY(n)),n}function TY(s,e,t,n){const{top:i,left:r,bottom:a,right:l,chart:u}=s,{chartArea:h,scales:d}=u;let g=0,p,y,v;const b=a-i,w=l-r;if(s.isHorizontal()){if(y=bs(n,r,l),ct(t)){const A=Object.keys(t)[0],S=t[A];v=d[A].getPixelForValue(S)+b-e}else t==="center"?v=(h.bottom+h.top)/2+b-e:v=nR(s,t,e);p=l-r}else{if(ct(t)){const A=Object.keys(t)[0],S=t[A];y=d[A].getPixelForValue(S)-w+e}else t==="center"?y=(h.left+h.right)/2-w+e:y=nR(s,t,e);v=bs(n,a,i),g=t==="left"?-xi:xi}return{titleX:y,titleY:v,maxWidth:p,rotation:g}}class fh extends bo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Pi(e,Number.POSITIVE_INFINITY),t=Pi(t,Number.NEGATIVE_INFINITY),n=Pi(n,Number.POSITIVE_INFINITY),i=Pi(i,Number.NEGATIVE_INFINITY),{min:Pi(e,n),max:Pi(t,i),minDefined:ei(e),maxDefined:ei(t)}}getMinMax(e){let{min:t,max:n,minDefined:i,maxDefined:r}=this.getUserBounds(),a;if(i&&r)return{min:t,max:n};const l=this.getMatchingVisibleMetas();for(let u=0,h=l.length;u<h;++u)a=l[u].controller.getMinMax(this,e),i||(t=Math.min(t,a.min)),r||(n=Math.max(n,a.max));return t=r&&t>n?n:t,n=i&&t>n?t:n,{min:Pi(t,Pi(n,t)),max:Pi(n,Pi(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Lt(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=z7(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?iR(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=fY(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Lt(this.options.afterUpdate,[this])}beforeSetDimensions(){Lt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Lt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Lt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Lt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Lt(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Lt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Lt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=sR(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let a=i,l,u,h;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),g=d.widest.width,p=d.highest.height,y=Zs(this.chart.width-g,0,this.maxWidth);l=e.offset?this.maxWidth/n:y/(n-1),g+6>l&&(l=y/(n-(e.offset?.5:1)),u=this.maxHeight-Tf(e.grid)-t.padding-rR(e.title,this.chart.options.font),h=Math.sqrt(g*g+p*p),a=u7(Math.min(Math.asin(Zs((d.highest.height+6)/l,-1,1)),Math.asin(Zs(u/h,-1,1))-Math.asin(Zs(p/h,-1,1)))),a=Math.max(i,Math.min(r,a))),this.labelRotation=a}afterCalculateLabelRotation(){Lt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Lt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const u=rR(i,t.options.font);if(l?(e.width=this.maxWidth,e.height=Tf(r)+u):(e.height=this.maxHeight,e.width=Tf(r)+u),n.display&&this.ticks.length){const{first:h,last:d,widest:g,highest:p}=this._getLabelSizes(),y=n.padding*2,v=fl(this.labelRotation),b=Math.cos(v),w=Math.sin(v);if(l){const A=n.mirror?0:w*g.width+b*p.height;e.height=Math.min(this.maxHeight,e.height+A+y)}else{const A=n.mirror?0:b*g.width+w*p.height;e.width=Math.min(this.maxWidth,e.width+A+y)}this._calculatePadding(h,d,w,b)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:a},position:l}=this.options,u=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,y=0;u?h?(p=i*e.width,y=n*t.height):(p=n*e.height,y=i*t.width):r==="start"?y=t.width:r==="end"?p=e.width:r!=="inner"&&(p=e.width/2,y=t.width/2),this.paddingLeft=Math.max((p-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((y-g+a)*this.width/(this.width-g),0)}else{let d=t.height/2,g=e.height/2;r==="start"?(d=0,g=e.height):r==="end"&&(d=t.height,g=0),this.paddingTop=d+a,this.paddingBottom=g+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Lt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)_t(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=iR(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,a=[],l=[],u=Math.floor(t/sR(t,n));let h=0,d=0,g,p,y,v,b,w,A,S,T,D,L;for(g=0;g<t;g+=u){if(v=e[g].label,b=this._resolveTickFontOptions(g),i.font=w=b.string,A=r[w]=r[w]||{data:{},gc:[]},S=b.lineHeight,T=D=0,!_t(v)&&!Cn(v))T=P_(i,A.data,A.gc,T,v),D=S;else if(Cn(v))for(p=0,y=v.length;p<y;++p)L=v[p],!_t(L)&&!Cn(L)&&(T=P_(i,A.data,A.gc,T,L),D+=S);a.push(T),l.push(D),h=Math.max(T,h),d=Math.max(D,d)}bY(r,t);const B=a.indexOf(h),M=l.indexOf(d),I=N=>({width:a[N]||0,height:l[N]||0});return{first:I(0),last:I(t-1),widest:I(B),highest:I(M),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return d7(this._alignToPixels?Qo(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=wY(this.getContext(),e,n))}return this.$context||(this.$context=EY(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=fl(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),a=e.autoSkipPadding||0,l=r?r.widest.width+a:0,u=r?r.highest.height+a:0;return this.isHorizontal()?u*n>l*i?l/n:u/i:u*i<l*n?u/n:l/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:a,border:l}=i,u=r.offset,h=this.isHorizontal(),g=this.ticks.length+(u?1:0),p=Tf(r),y=[],v=l.setContext(this.getContext()),b=v.display?v.width:0,w=b/2,A=function(G){return Qo(n,G,b)};let S,T,D,L,B,M,I,N,P,z,te,ye;if(a==="top")S=A(this.bottom),M=this.bottom-p,N=S-w,z=A(e.top)+w,ye=e.bottom;else if(a==="bottom")S=A(this.top),z=e.top,ye=A(e.bottom)-w,M=S+w,N=this.top+p;else if(a==="left")S=A(this.right),B=this.right-p,I=S-w,P=A(e.left)+w,te=e.right;else if(a==="right")S=A(this.left),P=e.left,te=A(e.right)-w,B=S+w,I=this.left+p;else if(t==="x"){if(a==="center")S=A((e.top+e.bottom)/2+.5);else if(ct(a)){const G=Object.keys(a)[0],J=a[G];S=A(this.chart.scales[G].getPixelForValue(J))}z=e.top,ye=e.bottom,M=S+w,N=M+p}else if(t==="y"){if(a==="center")S=A((e.left+e.right)/2);else if(ct(a)){const G=Object.keys(a)[0],J=a[G];S=A(this.chart.scales[G].getPixelForValue(J))}B=S-w,I=B-p,P=e.left,te=e.right}const me=st(i.ticks.maxTicksLimit,g),K=Math.max(1,Math.ceil(g/me));for(T=0;T<g;T+=K){const G=this.getContext(T),J=r.setContext(G),se=l.setContext(G),X=J.lineWidth,C=J.color,j=se.dash||[],re=se.dashOffset,le=J.tickWidth,ae=J.tickColor,ve=J.tickBorderDash||[],xe=J.tickBorderDashOffset;D=vY(this,T,u),D!==void 0&&(L=Qo(n,D,X),h?B=I=P=te=L:M=N=z=ye=L,y.push({tx1:B,ty1:M,tx2:I,ty2:N,x1:P,y1:z,x2:te,y2:ye,width:X,color:C,borderDash:j,borderDashOffset:re,tickWidth:le,tickColor:ae,tickBorderDash:ve,tickBorderDashOffset:xe}))}return this._ticksLength=g,this._borderValue=S,y}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,a=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:h,padding:d,mirror:g}=r,p=Tf(n.grid),y=p+d,v=g?-d:y,b=-fl(this.labelRotation),w=[];let A,S,T,D,L,B,M,I,N,P,z,te,ye="middle";if(i==="top")B=this.bottom-v,M=this._getXAxisLabelAlignment();else if(i==="bottom")B=this.top+v,M=this._getXAxisLabelAlignment();else if(i==="left"){const K=this._getYAxisLabelAlignment(p);M=K.textAlign,L=K.x}else if(i==="right"){const K=this._getYAxisLabelAlignment(p);M=K.textAlign,L=K.x}else if(t==="x"){if(i==="center")B=(e.top+e.bottom)/2+y;else if(ct(i)){const K=Object.keys(i)[0],G=i[K];B=this.chart.scales[K].getPixelForValue(G)+y}M=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")L=(e.left+e.right)/2-y;else if(ct(i)){const K=Object.keys(i)[0],G=i[K];L=this.chart.scales[K].getPixelForValue(G)}M=this._getYAxisLabelAlignment(p).textAlign}t==="y"&&(u==="start"?ye="top":u==="end"&&(ye="bottom"));const me=this._getLabelSizes();for(A=0,S=l.length;A<S;++A){T=l[A],D=T.label;const K=r.setContext(this.getContext(A));I=this.getPixelForTick(A)+r.labelOffset,N=this._resolveTickFontOptions(A),P=N.lineHeight,z=Cn(D)?D.length:1;const G=z/2,J=K.color,se=K.textStrokeColor,X=K.textStrokeWidth;let C=M;a?(L=I,M==="inner"&&(A===S-1?C=this.options.reverse?"left":"right":A===0?C=this.options.reverse?"right":"left":C="center"),i==="top"?h==="near"||b!==0?te=-z*P+P/2:h==="center"?te=-me.highest.height/2-G*P+P:te=-me.highest.height+P/2:h==="near"||b!==0?te=P/2:h==="center"?te=me.highest.height/2-G*P:te=me.highest.height-z*P,g&&(te*=-1),b!==0&&!K.showLabelBackdrop&&(L+=P/2*Math.sin(b))):(B=I,te=(1-z)*P/2);let j;if(K.showLabelBackdrop){const re=Ai(K.backdropPadding),le=me.heights[A],ae=me.widths[A];let ve=te-re.top,xe=0-re.left;switch(ye){case"middle":ve-=le/2;break;case"bottom":ve-=le;break}switch(M){case"center":xe-=ae/2;break;case"right":xe-=ae;break;case"inner":A===S-1?xe-=ae:A>0&&(xe-=ae/2);break}j={left:xe,top:ve,width:ae+re.width,height:le+re.height,color:K.backdropColor}}w.push({label:D,font:N,textOffset:te,options:{rotation:b,color:J,strokeColor:se,strokeWidth:X,textAlign:C,textBaseline:ye,translation:[L,B],backdrop:j}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-fl(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,a=this._getLabelSizes(),l=e+r,u=a.widest.width;let h,d;return t==="left"?i?(d=this.right+r,n==="near"?h="left":n==="center"?(h="center",d+=u/2):(h="right",d+=u)):(d=this.right-l,n==="near"?h="right":n==="center"?(h="center",d-=u/2):(h="left",d=this.left)):t==="right"?i?(d=this.left+r,n==="near"?h="right":n==="center"?(h="center",d-=u/2):(h="left",d-=u)):(d=this.left+l,n==="near"?h="left":n==="center"?(h="center",d+=u/2):(h="right",d=this.right)):h="right",{textAlign:h,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(r=>r.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,a;const l=(u,h,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(h.x,h.y),n.stroke(),n.restore())};if(t.display)for(r=0,a=i.length;r<a;++r){const u=i[r];t.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),t.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),a=n.display?r.width:0;if(!a)return;const l=i.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,d,g,p;this.isHorizontal()?(h=Qo(e,this.left,a)-a/2,d=Qo(e,this.right,l)+l/2,g=p=u):(g=Qo(e,this.top,a)-a/2,p=Qo(e,this.bottom,l)+l/2,h=d=u),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(h,g),t.lineTo(d,p),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&wb(n,i);const r=this.getLabelItems(e);for(const a of r){const l=a.options,u=a.font,h=a.label,d=a.textOffset;Jg(n,h,0,d,u,l)}i&&Ab(n)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=us(n.font),a=Ai(n.padding),l=n.align;let u=r.lineHeight/2;t==="bottom"||t==="center"||ct(t)?(u+=a.bottom,Cn(n.text)&&(u+=r.lineHeight*(n.text.length-1))):u+=a.top;const{titleX:h,titleY:d,maxWidth:g,rotation:p}=TY(this,u,t,l);Jg(e,n.text,0,0,r,{color:n.color,maxWidth:g,rotation:p,textAlign:AY(l,t,i),textBaseline:"middle",translation:[h,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=st(e.grid&&e.grid.z,-1),i=st(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==fh.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,a;for(r=0,a=t.length;r<a;++r){const l=t[r];l[n]===this.id&&(!e||l.type===e)&&i.push(l)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return us(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class K2{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;RY(t)&&(n=this.register(t));const i=this.items,r=e.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,SY(e,a,n),this.override&&Jt.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in Jt[i]&&(delete Jt[i][n],this.override&&delete Yl[n])}}function SY(s,e,t){const n=vd(Object.create(null),[t?Jt.get(t):{},Jt.get(e),s.defaults]);Jt.set(e,n),s.defaultRoutes&&_Y(e,s.defaultRoutes),s.descriptors&&Jt.describe(e,s.descriptors)}function _Y(s,e){Object.keys(e).forEach(t=>{const n=t.split("."),i=n.pop(),r=[s].concat(n).join("."),a=e[t].split("."),l=a.pop(),u=a.join(".");Jt.route(r,i,u,l)})}function RY(s){return"id"in s&&"defaults"in s}class kY{constructor(){this.controllers=new K2(Wf,"datasets",!0),this.elements=new K2(bo,"elements"),this.plugins=new K2(Object,"plugins"),this.scales=new K2(fh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(i=>{const r=n||this._getRegistryForType(i);n||r.isForType(i)||r===this.plugins&&i.id?this._exec(e,r,i):mt(i,a=>{const l=n||this._getRegistryForType(a);this._exec(e,l,a)})})}_exec(e,t,n){const i=vb(e);Lt(n["before"+i],[],n),t[e](n),Lt(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Fi=new kY;class LY{constructor(){this._init=[]}notify(e,t,n,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(r,e,t,n);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,n,i){i=i||{};for(const r of e){const a=r.plugin,l=a[n],u=[t,i,r.options];if(Lt(l,u,a)===!1&&i.cancelable)return!1}return!0}invalidate(){_t(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=st(n.options&&n.options.plugins,{}),r=DY(n);return i===!1&&!t?[]:IY(e,r,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(r,a)=>r.filter(l=>!a.some(u=>l.plugin.id===u.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function DY(s){const e={},t=[],n=Object.keys(Fi.plugins.items);for(let r=0;r<n.length;r++)t.push(Fi.getPlugin(n[r]));const i=s.plugins||[];for(let r=0;r<i.length;r++){const a=i[r];t.indexOf(a)===-1&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}function CY(s,e){return!e&&s===!1?null:s===!0?{}:s}function IY(s,{plugins:e,localIds:t},n,i){const r=[],a=s.getContext();for(const l of e){const u=l.id,h=CY(n[u],i);h!==null&&r.push({plugin:l,options:OY(s.config,{plugin:l,local:t[u]},h,a)})}return r}function OY(s,{plugin:e,local:t},n,i){const r=s.pluginScopeKeys(e),a=s.getOptionScopes(n,r);return t&&e.defaults&&a.push(e.defaults),s.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function lv(s,e){const t=Jt.datasets[s]||{};return((e.datasets||{})[s]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function MY(s,e){let t=s;return s==="_index_"?t=e:s==="_value_"&&(t=e==="x"?"y":"x"),t}function PY(s,e){return s===e?"_index_":"_value_"}function aR(s){if(s==="x"||s==="y"||s==="r")return s}function NY(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function cv(s,...e){if(aR(s))return s;for(const t of e){const n=t.axis||NY(t.position)||s.length>1&&aR(s[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function oR(s,e,t){if(t[e+"AxisID"]===s)return{axis:e}}function BY(s,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(n=>n.xAxisID===s||n.yAxisID===s);if(t.length)return oR(s,"x",t[0])||oR(s,"y",t[0])}return{}}function FY(s,e){const t=Yl[s.type]||{scales:{}},n=e.scales||{},i=lv(s.type,e),r=Object.create(null);return Object.keys(n).forEach(a=>{const l=n[a];if(!ct(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const u=cv(a,l,BY(a,s),Jt.scales[l.type]),h=PY(u,i),d=t.scales||{};r[a]=Yf(Object.create(null),[{axis:u},l,d[u],d[h]])}),s.data.datasets.forEach(a=>{const l=a.type||s.type,u=a.indexAxis||lv(l,e),d=(Yl[l]||{}).scales||{};Object.keys(d).forEach(g=>{const p=MY(g,u),y=a[p+"AxisID"]||p;r[y]=r[y]||Object.create(null),Yf(r[y],[{axis:p},n[y],d[g]])})}),Object.keys(r).forEach(a=>{const l=r[a];Yf(l,[Jt.scales[l.type],Jt.scale])}),r}function gI(s){const e=s.options||(s.options={});e.plugins=st(e.plugins,{}),e.scales=FY(s,e)}function mI(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function UY(s){return s=s||{},s.data=mI(s.data),gI(s),s}const lR=new Map,pI=new Set;function j2(s,e){let t=lR.get(s);return t||(t=e(),lR.set(s,t),pI.add(t)),t}const Sf=(s,e,t)=>{const n=Wg(e,t);n!==void 0&&s.add(n)};class HY{constructor(e){this._config=UY(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=mI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),gI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return j2(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return j2(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return j2(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return j2(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return(!i||t)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,a=this._cachedScopes(e,n),l=a.get(t);if(l)return l;const u=new Set;t.forEach(d=>{e&&(u.add(e),d.forEach(g=>Sf(u,e,g))),d.forEach(g=>Sf(u,i,g)),d.forEach(g=>Sf(u,Yl[r]||{},g)),d.forEach(g=>Sf(u,Jt,g)),d.forEach(g=>Sf(u,rv,g))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),pI.has(t)&&a.set(t,h),h}chartOptionScopes(){const{options:e,type:t}=this;return[e,Yl[t]||{},Jt.datasets[t]||{},{type:t},Jt,rv]}resolveNamedOptions(e,t,n,i=[""]){const r={$shared:!0},{resolver:a,subPrefixes:l}=cR(this._resolverCache,e,i);let u=a;if(zY(a,t)){r.$shared=!1,n=vo(n)?n():n;const h=this.createResolver(e,n,l);u=oh(a,n,h)}for(const h of t)r[h]=u[h];return r}createResolver(e,t,n=[""],i){const{resolver:r}=cR(this._resolverCache,e,n);return ct(t)?oh(r,t,void 0,i):r}}function cR(s,e,t){let n=s.get(e);n||(n=new Map,s.set(e,n));const i=t.join();let r=n.get(i);return r||(r={resolver:Tb(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},n.set(i,r)),r}const GY=s=>ct(s)&&Object.getOwnPropertyNames(s).some(e=>vo(s[e]));function zY(s,e){const{isScriptable:t,isIndexable:n}=ZC(s);for(const i of e){const r=t(i),a=n(i),l=(a||r)&&s[i];if(r&&(vo(l)||GY(l))||a&&Cn(l))return!0}return!1}var $Y="4.4.9";const VY=["top","bottom","left","right","chartArea"];function uR(s,e){return s==="top"||s==="bottom"||VY.indexOf(s)===-1&&e==="x"}function hR(s,e){return function(t,n){return t[s]===n[s]?t[e]-n[e]:t[s]-n[s]}}function fR(s){const e=s.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Lt(t&&t.onComplete,[s],e)}function YY(s){const e=s.chart,t=e.options.animation;Lt(t&&t.onProgress,[s],e)}function yI(s){return Rb()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const vg={},dR=s=>{const e=yI(s);return Object.values(vg).filter(t=>t.canvas===e).pop()};function KY(s,e,t){const n=Object.keys(s);for(const i of n){const r=+i;if(r>=e){const a=s[i];delete s[i],(t>0||r>e)&&(s[r+t]=a)}}}function jY(s,e,t,n){return!t||s.type==="mouseout"?null:n?e:s}var Ha;let Om=(Ha=class{static register(...e){Fi.add(...e),gR()}static unregister(...e){Fi.remove(...e),gR()}constructor(e,t){const n=this.config=new HY(t),i=yI(e),r=dR(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||hY(i)),this.platform.updateConfig(n);const l=this.platform.acquireContext(i,a.aspectRatio),u=l&&l.canvas,h=u&&u.height,d=u&&u.width;if(this.id=X9(),this.ctx=l,this.canvas=u,this.width=d,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new LY,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=x7(g=>this.update(g),a.resizeDelay||0),this._dataChanges=[],vg[this.id]=this,!l||!u){console.error("Failed to create chart: can't acquire context from the given item");return}Cr.listen(this,"complete",fR),Cr.listen(this,"progress",YY),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return _t(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Fi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():U_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return N_(this.canvas,this.ctx),this}stop(){return Cr.stop(this),this}resize(e,t){Cr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,t,r),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,U_(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Lt(n.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};mt(t,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((a,l)=>(a[l]=!1,a),{});let r=[];t&&(r=r.concat(Object.keys(t).map(a=>{const l=t[a],u=cv(a,l),h=u==="r",d=u==="x";return{options:l,dposition:h?"chartArea":d?"bottom":"left",dtype:h?"radialLinear":d?"category":"linear"}}))),mt(r,a=>{const l=a.options,u=l.id,h=cv(u,l),d=st(l.type,a.dtype);(l.position===void 0||uR(l.position,h)!==uR(a.dposition))&&(l.position=a.dposition),i[u]=!0;let g=null;if(u in n&&n[u].type===d)g=n[u];else{const p=Fi.getScale(d);g=new p({id:u,type:d,ctx:this.ctx,chart:this}),n[g.id]=g}g.init(l,e)}),mt(i,(a,l)=>{a||delete n[l]}),mt(n,a=>{uo.configure(this,a,a.options),uo.addBox(this,a)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((i,r)=>i.index-r.index),n>t){for(let i=t;i<n;++i)this._destroyDatasetMeta(i);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(hR("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((n,i)=>{t.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const r=t[n];let a=this.getDatasetMeta(n);const l=r.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=l,a.indexAxis=r.indexAxis||lv(l,this.options),a.order=r.order||0,a.index=n,a.label=""+r.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const u=Fi.getController(l),{datasetElementType:h,dataElementType:d}=Jt.datasets[l];Object.assign(u,{dataElementType:Fi.getElement(d),datasetElementType:h&&Fi.getElement(h)}),a.controller=new u(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){mt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,d=this.data.datasets.length;h<d;h++){const{controller:g}=this.getDatasetMeta(h),p=!i&&r.indexOf(g)===-1;g.buildOrUpdateElements(p),a=Math.max(+g.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),i||mt(r,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(hR("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){mt(this.scales,e=>{uo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!__(t,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){const a=n==="_removeElements"?-r:r;KY(e,i,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=r=>new Set(e.filter(a=>a[0]===r).map((a,l)=>l+","+a.splice(1).join(","))),i=n(0);for(let r=1;r<t;r++)if(!__(i,n(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;uo.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],mt(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,vo(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Cr.has(this)?this.attached&&!Cr.running(this)&&Cr.start(this):(this.draw(),fR({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const a=t[i];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=SV(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&wb(t,i),e.controller.draw(),i&&Ab(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Ed(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=VV.modes[t];return typeof r=="function"?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(r=>r&&r._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Ql(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!t.hidden}setDatasetVisibility(e,t){const n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),a=r.controller._resolveAnimations(void 0,i);Xg(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(r,{visible:n}),this.update(l=>l.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Cr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),N_(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete vg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(r,a)=>{t.addEventListener(this,r,a),e[r]=a},i=(r,a,l)=>{r.offsetX=a,r.offsetY=l,this._eventHandler(r)};mt(this.options.events,r=>n(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(u,h)=>{t.addEventListener(this,u,h),e[u]=h},i=(u,h)=>{e[u]&&(t.removeEventListener(this,u,h),delete e[u])},r=(u,h)=>{this.canvas&&this.resize(u,h)};let a;const l=()=>{i("attach",l),this.attached=!0,this.resize(),n("resize",r),n("detach",a)};a=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",l)},t.isAttached(this.canvas)?l():a()}unbindEvents(){mt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},mt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,a,l,u;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),l=0,u=e.length;l<u;++l){a=e[l];const h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(({datasetIndex:r,index:a})=>{const l=this.getDatasetMeta(r);if(!l)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:l.data[a],index:a}});!qg(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(u,h)=>u.filter(d=>!h.some(g=>d.datasetIndex===g.datasetIndex&&d.index===g.index)),a=r(t,e),l=n?e:r(e,t);a.length&&this.updateHoverStyle(a,i.mode,!1),l.length&&i.mode&&this.updateHoverStyle(l,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,a=t,l=this._getActiveElements(e,i,n,a),u=s7(e),h=jY(e,this._lastEvent,n,u);n&&(this._lastEvent=null,Lt(r.onHover,[e,l,this],this),u&&Lt(r.onClick,[e,l,this],this));const d=!qg(l,i);return(d||t)&&(this._active=l,this._updateHoverStyles(l,i,t)),this._lastEvent=h,d}_getActiveElements(e,t,n,i){if(e.type==="mouseout")return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}},F(Ha,"defaults",Jt),F(Ha,"instances",vg),F(Ha,"overrides",Yl),F(Ha,"registry",Fi),F(Ha,"version",$Y),F(Ha,"getChart",dR),Ha);function gR(){return mt(Om.instances,s=>s._plugins.invalidate())}function xI(s,e,t=e){s.lineCap=st(t.borderCapStyle,e.borderCapStyle),s.setLineDash(st(t.borderDash,e.borderDash)),s.lineDashOffset=st(t.borderDashOffset,e.borderDashOffset),s.lineJoin=st(t.borderJoinStyle,e.borderJoinStyle),s.lineWidth=st(t.borderWidth,e.borderWidth),s.strokeStyle=st(t.borderColor,e.borderColor)}function qY(s,e,t){s.lineTo(t.x,t.y)}function QY(s){return s.stepped?I7:s.tension||s.cubicInterpolationMode==="monotone"?O7:qY}function vI(s,e,t={}){const n=s.length,{start:i=0,end:r=n-1}=t,{start:a,end:l}=e,u=Math.max(i,a),h=Math.min(r,l),d=i<a&&r<a||i>l&&r>l;return{count:n,start:u,loop:e.loop,ilen:h<u&&!d?n+h-u:h-u}}function WY(s,e,t,n){const{points:i,options:r}=e,{count:a,start:l,loop:u,ilen:h}=vI(i,t,n),d=QY(r);let{move:g=!0,reverse:p}=n||{},y,v,b;for(y=0;y<=h;++y)v=i[(l+(p?h-y:y))%a],!v.skip&&(g?(s.moveTo(v.x,v.y),g=!1):d(s,b,v,p,r.stepped),b=v);return u&&(v=i[(l+(p?h:0))%a],d(s,b,v,p,r.stepped)),!!u}function XY(s,e,t,n){const i=e.points,{count:r,start:a,ilen:l}=vI(i,t,n),{move:u=!0,reverse:h}=n||{};let d=0,g=0,p,y,v,b,w,A;const S=D=>(a+(h?l-D:D))%r,T=()=>{b!==w&&(s.lineTo(d,w),s.lineTo(d,b),s.lineTo(d,A))};for(u&&(y=i[S(0)],s.moveTo(y.x,y.y)),p=0;p<=l;++p){if(y=i[S(p)],y.skip)continue;const D=y.x,L=y.y,B=D|0;B===v?(L<b?b=L:L>w&&(w=L),d=(g*d+D)/++g):(T(),s.lineTo(D,L),v=B,g=0,b=w=L),A=L}T()}function uv(s){const e=s.options,t=e.borderDash&&e.borderDash.length;return!s._decimated&&!s._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?XY:WY}function ZY(s){return s.stepped?fV:s.tension||s.cubicInterpolationMode==="monotone"?dV:tl}function JY(s,e,t,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,n)&&i.closePath()),xI(s,e.options),s.stroke(i)}function eK(s,e,t,n){const{segments:i,options:r}=e,a=uv(e);for(const l of i)xI(s,r,l.style),s.beginPath(),a(s,e,l,{start:t,end:t+n-1})&&s.closePath(),s.stroke()}const tK=typeof Path2D=="function";function nK(s,e,t,n){tK&&!e.options.segment?JY(s,e,t,n):eK(s,e,t,n)}class Uf extends bo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;iV(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=EV(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,a=xV(this,{property:t,start:i,end:i});if(!a.length)return;const l=[],u=ZY(n);let h,d;for(h=0,d=a.length;h<d;++h){const{start:g,end:p}=a[h],y=r[g],v=r[p];if(y===v){l.push(y);continue}const b=Math.abs((i-y[t])/(v[t]-y[t])),w=u(y,v,b,n.stepped);w[t]=e[t],l.push(w)}return l.length===1?l[0]:l}pathSegment(e,t,n){return uv(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=uv(this);let a=this._loop;t=t||0,n=n||this.points.length-t;for(const l of i)a&=r(e,this,l,{start:t,end:t+n-1});return!!a}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),nK(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}F(Uf,"id","line"),F(Uf,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),F(Uf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),F(Uf,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function mR(s,e,t,n){const i=s.options,{[t]:r}=s.getProps([t],n);return Math.abs(e-r)<i.radius+i.hitRadius}class bg extends bo{constructor(t){super();F(this,"parsed");F(this,"skip");F(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,i){const r=this.options,{x:a,y:l}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(n-l,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,n){return mR(this,t,"x",n)}inYRange(t,n){return mR(this,t,"y",n)}getCenterPoint(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const i=n&&t.borderWidth||0;return(n+i)*2}draw(t,n){const i=this.options;this.skip||i.radius<.1||!Ed(this,n,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,av(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}F(bg,"id","point"),F(bg,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),F(bg,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const pR=(s,e)=>{let{boxHeight:t=e,boxWidth:n=e}=s;return s.usePointStyle&&(t=Math.min(t,e),n=s.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(e,t)}},sK=(s,e)=>s!==null&&e!==null&&s.datasetIndex===e.datasetIndex&&s.index===e.index;class yR extends bo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Lt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(n=>e.filter(n,this.chart.data))),e.sort&&(t=t.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=us(n.font),r=i.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=pR(n,r);let h,d;t.font=i.string,this.isHorizontal()?(h=this.maxWidth,d=this._fitRows(a,r,l,u)+10):(d=this.maxHeight,h=this._fitCols(a,i,l,u)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:a,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],d=i+l;let g=e;r.textAlign="left",r.textBaseline="middle";let p=-1,y=-d;return this.legendItems.forEach((v,b)=>{const w=n+t/2+r.measureText(v.text).width;(b===0||h[h.length-1]+w+2*l>a)&&(g+=d,h[h.length-(b>0?0:1)]=0,y+=d,p++),u[b]={left:0,top:y,row:p,width:w,height:i},h[h.length-1]+=w+l}),g}_fitCols(e,t,n,i){const{ctx:r,maxHeight:a,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],d=a-e;let g=l,p=0,y=0,v=0,b=0;return this.legendItems.forEach((w,A)=>{const{itemWidth:S,itemHeight:T}=iK(n,t,r,w,i);A>0&&y+T+2*l>d&&(g+=p+l,h.push({width:p,height:y}),v+=p+l,b++,p=y=0),u[A]={left:v,top:y,col:b,width:S,height:T},p=Math.max(p,S),y+=T+l}),g+=p,h.push({width:p,height:y}),g}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,a=cu(r,this.left,this.width);if(this.isHorizontal()){let l=0,u=bs(n,this.left+i,this.right-this.lineWidths[l]);for(const h of t)l!==h.row&&(l=h.row,u=bs(n,this.left+i,this.right-this.lineWidths[l])),h.top+=this.top+e+i,h.left=a.leftForLtr(a.x(u),h.width),u+=h.width+i}else{let l=0,u=bs(n,this.top+e+i,this.bottom-this.columnSizes[l].height);for(const h of t)h.col!==l&&(l=h.col,u=bs(n,this.top+e+i,this.bottom-this.columnSizes[l].height)),h.top=u,h.left+=this.left+i,h.left=a.leftForLtr(a.x(h.left),h.width),u+=h.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;wb(e,this),this._draw(),Ab(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:a}=e,l=Jt.color,u=cu(e.rtl,this.left,this.width),h=us(a.font),{padding:d}=a,g=h.size,p=g/2;let y;this.drawTitle(),i.textAlign=u.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:v,boxHeight:b,itemHeight:w}=pR(a,g),A=function(B,M,I){if(isNaN(v)||v<=0||isNaN(b)||b<0)return;i.save();const N=st(I.lineWidth,1);if(i.fillStyle=st(I.fillStyle,l),i.lineCap=st(I.lineCap,"butt"),i.lineDashOffset=st(I.lineDashOffset,0),i.lineJoin=st(I.lineJoin,"miter"),i.lineWidth=N,i.strokeStyle=st(I.strokeStyle,l),i.setLineDash(st(I.lineDash,[])),a.usePointStyle){const P={radius:b*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:N},z=u.xPlus(B,v/2),te=M+p;WC(i,P,z,te,a.pointStyleWidth&&v)}else{const P=M+Math.max((g-b)/2,0),z=u.leftForLtr(B,v),te=Qf(I.borderRadius);i.beginPath(),Object.values(te).some(ye=>ye!==0)?ov(i,{x:z,y:P,w:v,h:b,radius:te}):i.rect(z,P,v,b),i.fill(),N!==0&&i.stroke()}i.restore()},S=function(B,M,I){Jg(i,I.text,B,M+w/2,h,{strikethrough:I.hidden,textAlign:u.textAlign(I.textAlign)})},T=this.isHorizontal(),D=this._computeTitleHeight();T?y={x:bs(r,this.left+d,this.right-n[0]),y:this.top+d+D,line:0}:y={x:this.left+d,y:bs(r,this.top+D+d,this.bottom-t[0].height),line:0},sI(this.ctx,e.textDirection);const L=w+d;this.legendItems.forEach((B,M)=>{i.strokeStyle=B.fontColor,i.fillStyle=B.fontColor;const I=i.measureText(B.text).width,N=u.textAlign(B.textAlign||(B.textAlign=a.textAlign)),P=v+p+I;let z=y.x,te=y.y;u.setWidth(this.width),T?M>0&&z+P+d>this.right&&(te=y.y+=L,y.line++,z=y.x=bs(r,this.left+d,this.right-n[y.line])):M>0&&te+L>this.bottom&&(z=y.x=z+t[y.line].width+d,y.line++,te=y.y=bs(r,this.top+D+d,this.bottom-t[y.line].height));const ye=u.x(z);if(A(ye,te,B),z=v7(N,z+v+p,T?z+P:this.right,e.rtl),S(u.x(z),te,B),T)y.x+=P+d;else if(typeof B.text!="string"){const me=h.lineHeight;y.y+=bI(B,me)+d}else y.y+=L}),iI(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=us(t.font),i=Ai(t.padding);if(!t.display)return;const r=cu(e.rtl,this.left,this.width),a=this.ctx,l=t.position,u=n.size/2,h=i.top+u;let d,g=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),d=this.top+h,g=bs(e.align,g,this.right-p);else{const v=this.columnSizes.reduce((b,w)=>Math.max(b,w.height),0);d=h+bs(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const y=bs(l,g,g+p);a.textAlign=r.textAlign(jC(l)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,Jg(a,t.text,y,d,n)}_computeTitleHeight(){const e=this.options.title,t=us(e.font),n=Ai(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(Bf(e,this.left,this.right)&&Bf(t,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Bf(e,i.left,i.left+i.width)&&Bf(t,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const t=this.options;if(!oK(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,r=sK(i,n);i&&!r&&Lt(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&Lt(t.onHover,[e,n,this],this)}else n&&Lt(t.onClick,[e,n,this],this)}}function iK(s,e,t,n,i){const r=rK(n,s,e,t),a=aK(i,n,e.lineHeight);return{itemWidth:r,itemHeight:a}}function rK(s,e,t,n){let i=s.text;return i&&typeof i!="string"&&(i=i.reduce((r,a)=>r.length>a.length?r:a)),e+t.size/2+n.measureText(i).width}function aK(s,e,t){let n=s;return typeof e.text!="string"&&(n=bI(e,t)),n}function bI(s,e){const t=s.text?s.text.length:0;return e*t}function oK(s,e){return!!((s==="mousemove"||s==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(s==="click"||s==="mouseup"))}var lK={id:"legend",_element:yR,start(s,e,t){const n=s.legend=new yR({ctx:s.ctx,options:t,chart:s});uo.configure(s,n,t),uo.addBox(s,n)},stop(s){uo.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,e,t){const n=s.legend;uo.configure(s,n,t),n.options=t},afterUpdate(s){const e=s.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(s,e){e.replay||s.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,e,t){const n=e.datasetIndex,i=t.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const e=s.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:i,color:r,useBorderRadius:a,borderRadius:l}}=s.legend.options;return s._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(t?0:void 0),d=Ai(h.borderWidth);return{text:e[u.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:h.borderColor,pointStyle:n||h.pointStyle,rotation:h.rotation,textAlign:i||h.textAlign,borderRadius:a&&(l||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};const Hf={average(s){if(!s.length)return!1;let e,t,n=new Set,i=0,r=0;for(e=0,t=s.length;e<t;++e){const l=s[e].element;if(l&&l.hasValue()){const u=l.tooltipPosition();n.add(u.x),i+=u.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((l,u)=>l+u)/n.size,y:i/r}},nearest(s,e){if(!s.length)return!1;let t=e.x,n=e.y,i=Number.POSITIVE_INFINITY,r,a,l;for(r=0,a=s.length;r<a;++r){const u=s[r].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),d=iv(e,h);d<i&&(i=d,l=u)}}if(l){const u=l.tooltipPosition();t=u.x,n=u.y}return{x:t,y:n}}};function Ni(s,e){return e&&(Cn(e)?Array.prototype.push.apply(s,e):s.push(e)),s}function Ir(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function cK(s,e){const{element:t,datasetIndex:n,index:i}=e,r=s.getDatasetMeta(n).controller,{label:a,value:l}=r.getLabelAndValue(i);return{chart:s,label:a,parsed:r.getParsed(i),raw:s.data.datasets[n].data[i],formattedValue:l,dataset:r.getDataset(),dataIndex:i,datasetIndex:n,element:t}}function xR(s,e){const t=s.chart.ctx,{body:n,footer:i,title:r}=s,{boxWidth:a,boxHeight:l}=e,u=us(e.bodyFont),h=us(e.titleFont),d=us(e.footerFont),g=r.length,p=i.length,y=n.length,v=Ai(e.padding);let b=v.height,w=0,A=n.reduce((D,L)=>D+L.before.length+L.lines.length+L.after.length,0);if(A+=s.beforeBody.length+s.afterBody.length,g&&(b+=g*h.lineHeight+(g-1)*e.titleSpacing+e.titleMarginBottom),A){const D=e.displayColors?Math.max(l,u.lineHeight):u.lineHeight;b+=y*D+(A-y)*u.lineHeight+(A-1)*e.bodySpacing}p&&(b+=e.footerMarginTop+p*d.lineHeight+(p-1)*e.footerSpacing);let S=0;const T=function(D){w=Math.max(w,t.measureText(D).width+S)};return t.save(),t.font=h.string,mt(s.title,T),t.font=u.string,mt(s.beforeBody.concat(s.afterBody),T),S=e.displayColors?a+2+e.boxPadding:0,mt(n,D=>{mt(D.before,T),mt(D.lines,T),mt(D.after,T)}),S=0,t.font=d.string,mt(s.footer,T),t.restore(),w+=v.width,{width:w,height:b}}function uK(s,e){const{y:t,height:n}=e;return t<n/2?"top":t>s.height-n/2?"bottom":"center"}function hK(s,e,t,n){const{x:i,width:r}=n,a=t.caretSize+t.caretPadding;if(s==="left"&&i+r+a>e.width||s==="right"&&i-r-a<0)return!0}function fK(s,e,t,n){const{x:i,width:r}=t,{width:a,chartArea:{left:l,right:u}}=s;let h="center";return n==="center"?h=i<=(l+u)/2?"left":"right":i<=r/2?h="left":i>=a-r/2&&(h="right"),hK(h,s,e,t)&&(h="center"),h}function vR(s,e,t){const n=t.yAlign||e.yAlign||uK(s,t);return{xAlign:t.xAlign||e.xAlign||fK(s,e,t,n),yAlign:n}}function dK(s,e){let{x:t,width:n}=s;return e==="right"?t-=n:e==="center"&&(t-=n/2),t}function gK(s,e,t){let{y:n,height:i}=s;return e==="top"?n+=t:e==="bottom"?n-=i+t:n-=i/2,n}function bR(s,e,t,n){const{caretSize:i,caretPadding:r,cornerRadius:a}=s,{xAlign:l,yAlign:u}=t,h=i+r,{topLeft:d,topRight:g,bottomLeft:p,bottomRight:y}=Qf(a);let v=dK(e,l);const b=gK(e,u,h);return u==="center"?l==="left"?v+=h:l==="right"&&(v-=h):l==="left"?v-=Math.max(d,p)+i:l==="right"&&(v+=Math.max(g,y)+i),{x:Zs(v,0,n.width-e.width),y:Zs(b,0,n.height-e.height)}}function q2(s,e,t){const n=Ai(t.padding);return e==="center"?s.x+s.width/2:e==="right"?s.x+s.width-n.right:s.x+n.left}function ER(s){return Ni([],Ir(s))}function mK(s,e,t){return Ql(s,{tooltip:e,tooltipItems:t,type:"tooltip"})}function wR(s,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?s.override(t):s}const EI={beforeTitle:Lr,title(s){if(s.length>0){const e=s[0],t=e.chart.data.labels,n=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return t[e.dataIndex]}return""},afterTitle:Lr,beforeBody:Lr,beforeLabel:Lr,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let e=s.dataset.label||"";e&&(e+=": ");const t=s.formattedValue;return _t(t)||(e+=t),e},labelColor(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Lr,afterBody:Lr,beforeFooter:Lr,footer:Lr,afterFooter:Lr};function ss(s,e,t,n){const i=s[e].call(t,n);return typeof i>"u"?EI[e].call(t,n):i}class hv extends bo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new aI(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=mK(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:n}=t,i=ss(n,"beforeTitle",this,e),r=ss(n,"title",this,e),a=ss(n,"afterTitle",this,e);let l=[];return l=Ni(l,Ir(i)),l=Ni(l,Ir(r)),l=Ni(l,Ir(a)),l}getBeforeBody(e,t){return ER(ss(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return mt(e,r=>{const a={before:[],lines:[],after:[]},l=wR(n,r);Ni(a.before,Ir(ss(l,"beforeLabel",this,r))),Ni(a.lines,ss(l,"label",this,r)),Ni(a.after,Ir(ss(l,"afterLabel",this,r))),i.push(a)}),i}getAfterBody(e,t){return ER(ss(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=ss(n,"beforeFooter",this,e),r=ss(n,"footer",this,e),a=ss(n,"afterFooter",this,e);let l=[];return l=Ni(l,Ir(i)),l=Ni(l,Ir(r)),l=Ni(l,Ir(a)),l}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],a=[];let l=[],u,h;for(u=0,h=t.length;u<h;++u)l.push(cK(this.chart,t[u]));return e.filter&&(l=l.filter((d,g,p)=>e.filter(d,g,p,n))),e.itemSort&&(l=l.sort((d,g)=>e.itemSort(d,g,n))),mt(l,d=>{const g=wR(e.callbacks,d);i.push(ss(g,"labelColor",this,d)),r.push(ss(g,"labelPointStyle",this,d)),a.push(ss(g,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,a=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const l=Hf[n.position].call(this,i,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const u=this._size=xR(this,n),h=Object.assign({},l,u),d=vR(this.chart,n,h),g=bR(n,h,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,r={opacity:1,x:g.x,y:g.y,width:u.width,height:u.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:a,cornerRadius:l}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:g}=Qf(l),{x:p,y}=e,{width:v,height:b}=t;let w,A,S,T,D,L;return r==="center"?(D=y+b/2,i==="left"?(w=p,A=w-a,T=D+a,L=D-a):(w=p+v,A=w+a,T=D-a,L=D+a),S=w):(i==="left"?A=p+Math.max(u,d)+a:i==="right"?A=p+v-Math.max(h,g)-a:A=this.caretX,r==="top"?(T=y,D=T-a,w=A-a,S=A+a):(T=y+b,D=T+a,w=A+a,S=A-a),L=T),{x1:w,x2:A,x3:S,y1:T,y2:D,y3:L}}drawTitle(e,t,n){const i=this.title,r=i.length;let a,l,u;if(r){const h=cu(n.rtl,this.x,this.width);for(e.x=q2(this,n.titleAlign,n),t.textAlign=h.textAlign(n.titleAlign),t.textBaseline="middle",a=us(n.titleFont),l=n.titleSpacing,t.fillStyle=n.titleColor,t.font=a.string,u=0;u<r;++u)t.fillText(i[u],h.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,u+1===r&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,t,n,i,r){const a=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:u,boxWidth:h}=r,d=us(r.bodyFont),g=q2(this,"left",r),p=i.x(g),y=u<d.lineHeight?(d.lineHeight-u)/2:0,v=t.y+y;if(r.usePointStyle){const b={radius:Math.min(h,u)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},w=i.leftForLtr(p,h)+h/2,A=v+u/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,av(e,b,w,A),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,av(e,b,w,A)}else{e.lineWidth=ct(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const b=i.leftForLtr(p,h),w=i.leftForLtr(i.xPlus(p,1),h-2),A=Qf(a.borderRadius);Object.values(A).some(S=>S!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,ov(e,{x:b,y:v,w:h,h:u,radius:A}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),ov(e,{x:w,y:v+1,w:h-2,h:u-2,radius:A}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(b,v,h,u),e.strokeRect(b,v,h,u),e.fillStyle=a.backgroundColor,e.fillRect(w,v+1,h-2,u-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:a,displayColors:l,boxHeight:u,boxWidth:h,boxPadding:d}=n,g=us(n.bodyFont);let p=g.lineHeight,y=0;const v=cu(n.rtl,this.x,this.width),b=function(I){t.fillText(I,v.x(e.x+y),e.y+p/2),e.y+=p+r},w=v.textAlign(a);let A,S,T,D,L,B,M;for(t.textAlign=a,t.textBaseline="middle",t.font=g.string,e.x=q2(this,w,n),t.fillStyle=n.bodyColor,mt(this.beforeBody,b),y=l&&w!=="right"?a==="center"?h/2+d:h+2+d:0,D=0,B=i.length;D<B;++D){for(A=i[D],S=this.labelTextColors[D],t.fillStyle=S,mt(A.before,b),T=A.lines,l&&T.length&&(this._drawColorBox(t,e,D,v,n),p=Math.max(g.lineHeight,u)),L=0,M=T.length;L<M;++L)b(T[L]),p=g.lineHeight;mt(A.after,b)}y=0,p=g.lineHeight,mt(this.afterBody,b),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let a,l;if(r){const u=cu(n.rtl,this.x,this.width);for(e.x=q2(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=u.textAlign(n.footerAlign),t.textBaseline="middle",a=us(n.footerFont),t.fillStyle=n.footerColor,t.font=a.string,l=0;l<r;++l)t.fillText(i[l],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:a}=this,{x:l,y:u}=e,{width:h,height:d}=n,{topLeft:g,topRight:p,bottomLeft:y,bottomRight:v}=Qf(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(l+g,u),a==="top"&&this.drawCaret(e,t,n,i),t.lineTo(l+h-p,u),t.quadraticCurveTo(l+h,u,l+h,u+p),a==="center"&&r==="right"&&this.drawCaret(e,t,n,i),t.lineTo(l+h,u+d-v),t.quadraticCurveTo(l+h,u+d,l+h-v,u+d),a==="bottom"&&this.drawCaret(e,t,n,i),t.lineTo(l+y,u+d),t.quadraticCurveTo(l,u+d,l,u+d-y),a==="center"&&r==="left"&&this.drawCaret(e,t,n,i),t.lineTo(l,u+g),t.quadraticCurveTo(l,u,l+g,u),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const a=Hf[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=xR(this,e),u=Object.assign({},a,this._size),h=vR(t,e,u),d=bR(e,u,h,t);(i._to!==d.x||r._to!==d.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=Ai(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),sI(e,t.textDirection),r.y+=a.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),iI(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map(({datasetIndex:l,index:u})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[u],index:u}}),r=!qg(n,i),a=this._positionChanged(i,t);(r||a)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],a=this._getActiveElements(e,r,t,n),l=this._positionChanged(a,e),u=t||!qg(a,r)||l;return u&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),u}_getActiveElements(e,t,n,i){const r=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,a=Hf[r.position].call(this,e,t);return a!==!1&&(n!==a.x||i!==a.y)}}F(hv,"positioners",Hf);var pK={id:"tooltip",_element:hv,positioners:Hf,afterInit(s,e,t){t&&(s.tooltip=new hv({chart:s,options:t}))},beforeUpdate(s,e,t){s.tooltip&&s.tooltip.initialize(t)},reset(s,e,t){s.tooltip&&s.tooltip.initialize(t)},afterDraw(s){const e=s.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(s.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",t)}},afterEvent(s,e){if(s.tooltip){const t=e.replay;s.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,e)=>e.bodyFont.size,boxWidth:(s,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:EI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const yK=(s,e,t,n)=>(typeof e=="string"?(t=s.push(e)-1,n.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function xK(s,e,t,n){const i=s.indexOf(e);if(i===-1)return yK(s,e,t,n);const r=s.lastIndexOf(e);return i!==r?t:i}const vK=(s,e)=>s===null?null:Zs(Math.round(s),0,e);function AR(s){const e=this.getLabels();return s>=0&&s<e.length?e[s]:s}class fv extends fh{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const n=this.getLabels();for(const{index:i,label:r}of t)n[i]===r&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(_t(e))return null;const n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:xK(n,e,st(t,e),this._addedLabels),vK(t,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=t;a++)i.push({value:a});return i}getLabelForValue(e){return AR.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}F(fv,"id","category"),F(fv,"defaults",{ticks:{callback:AR}});function bK(s,e){const t=[],{bounds:i,step:r,min:a,max:l,precision:u,count:h,maxTicks:d,maxDigits:g,includeBounds:p}=s,y=r||1,v=d-1,{min:b,max:w}=e,A=!_t(a),S=!_t(l),T=!_t(h),D=(w-b)/(g+1);let L=k_((w-b)/v/y)*y,B,M,I,N;if(L<1e-14&&!A&&!S)return[{value:b},{value:w}];N=Math.ceil(w/L)-Math.floor(b/L),N>v&&(L=k_(N*L/v/y)*y),_t(u)||(B=Math.pow(10,u),L=Math.ceil(L*B)/B),i==="ticks"?(M=Math.floor(b/L)*L,I=Math.ceil(w/L)*L):(M=b,I=w),A&&S&&r&&l7((l-a)/r,L/1e3)?(N=Math.round(Math.min((l-a)/L,d)),L=(l-a)/N,M=a,I=l):T?(M=A?a:M,I=S?l:I,N=h-1,L=(I-M)/N):(N=(I-M)/L,Kf(N,Math.round(N),L/1e3)?N=Math.round(N):N=Math.ceil(N));const P=Math.max(L_(L),L_(M));B=Math.pow(10,_t(u)?P:u),M=Math.round(M*B)/B,I=Math.round(I*B)/B;let z=0;for(A&&(p&&M!==a?(t.push({value:a}),M<a&&z++,Kf(Math.round((M+z*L)*B)/B,a,TR(a,D,s))&&z++):M<a&&z++);z<N;++z){const te=Math.round((M+z*L)*B)/B;if(S&&te>l)break;t.push({value:te})}return S&&p&&I!==l?t.length&&Kf(t[t.length-1].value,l,TR(l,D,s))?t[t.length-1].value=l:t.push({value:l}):(!S||I===l)&&t.push({value:I}),t}function TR(s,e,{horizontal:t,minRotation:n}){const i=fl(n),r=(t?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+s).length;return Math.min(e/r,a)}class EK extends fh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return _t(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const a=u=>i=t?i:u,l=u=>r=n?r:u;if(e){const u=ah(i),h=ah(r);u<0&&h<0?l(0):u>0&&h>0&&a(0)}if(i===r){let u=r===0?1:Math.abs(r*.05);l(r+u),e||a(i-u)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,a=bK(i,r);return e.bounds==="ticks"&&c7(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return qC(e,this.chart.options.locale,this.options.ticks.format)}}class dv extends EK{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ei(e)?e:0,this.max=ei(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=fl(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}F(dv,"id","linear"),F(dv,"defaults",{ticks:{callback:QC.formatters.numeric}});const Mm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},cs=Object.keys(Mm);function SR(s,e){return s-e}function _R(s,e){if(_t(e))return null;const t=s._adapter,{parser:n,round:i,isoWeekday:r}=s._parseOpts;let a=e;return typeof n=="function"&&(a=n(a)),ei(a)||(a=typeof n=="string"?t.parse(a,n):t.parse(a)),a===null?null:(i&&(a=i==="week"&&(bd(r)||r===!0)?t.startOf(a,"isoWeek",r):t.startOf(a,i)),+a)}function RR(s,e,t,n){const i=cs.length;for(let r=cs.indexOf(s);r<i-1;++r){const a=Mm[cs[r]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((t-e)/(l*a.size))<=n)return cs[r]}return cs[i-1]}function wK(s,e,t,n,i){for(let r=cs.length-1;r>=cs.indexOf(t);r--){const a=cs[r];if(Mm[a].common&&s._adapter.diff(i,n,a)>=e-1)return a}return cs[t?cs.indexOf(t):0]}function AK(s){for(let e=cs.indexOf(s)+1,t=cs.length;e<t;++e)if(Mm[cs[e]].common)return cs[e]}function kR(s,e,t){if(!t)s[e]=!0;else if(t.length){const{lo:n,hi:i}=bb(t,e),r=t[n]>=e?t[n]:t[i];s[r]=!0}}function TK(s,e,t,n){const i=s._adapter,r=+i.startOf(e[0].value,n),a=e[e.length-1].value;let l,u;for(l=r;l<=a;l=+i.add(l,1,n))u=t[l],u>=0&&(e[u].major=!0);return e}function LR(s,e,t){const n=[],i={},r=e.length;let a,l;for(a=0;a<r;++a)l=e[a],i[l]=a,n.push({value:l,major:!1});return r===0||!t?n:TK(s,n,i,t)}class Ad extends fh{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const n=e.time||(e.time={}),i=this._adapter=new lI._date(e.adapters.date);i.init(t),Yf(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:_R(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:a,maxDefined:l}=this.getUserBounds();function u(h){!a&&!isNaN(h.min)&&(i=Math.min(i,h.min)),!l&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!a||!l)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),i=ei(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=ei(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,a=this.max,l=m7(i,r,a);return this._unit=t.unit||(n.autoSkip?RR(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):wK(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:AK(this._unit),this.initOffsets(i),e.reverse&&l.reverse(),LR(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,n=0,i,r;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?n=r:n=(r-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;t=Zs(t,0,a),n=Zs(n,0,a),this._offsets={start:t,end:n,factor:1/(t+1+n)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,a=r.unit||RR(r.minUnit,t,n,this._getLabelCapacity(t)),l=st(i.ticks.stepSize,1),u=a==="week"?r.isoWeekday:!1,h=bd(u)||u===!0,d={};let g=t,p,y;if(h&&(g=+e.startOf(g,"isoWeek",u)),g=+e.startOf(g,h?"day":a),e.diff(n,t,a)>1e5*l)throw new Error(t+" and "+n+" are too far apart with stepSize of "+l+" "+a);const v=i.ticks.source==="data"&&this.getDataTimestamps();for(p=g,y=0;p<n;p=+e.add(p,l,a),y++)kR(d,p,v);return(p===n||i.bounds==="ticks"||y===1)&&kR(d,p,v),Object.keys(d).sort(SR).map(b=>+b)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,r=this._unit,a=t||i[r];return this._adapter.format(e,a)}_tickFormatFunction(e,t,n,i){const r=this.options,a=r.ticks.callback;if(a)return Lt(a,[e,t,n],this);const l=r.time.displayFormats,u=this._unit,h=this._majorUnit,d=u&&l[u],g=h&&l[h],p=n[t],y=h&&g&&p&&p.major;return this._adapter.format(e,i||(y?g:d))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=fl(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),a=Math.sin(i),l=this._resolveTickFontOptions(0).size;return{w:n*r+l*a,h:n*a+l*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,LR(this,[e],this._majorUnit),i),a=this._getLabelSize(r),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,n=i.length;t<n;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(_R(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return y7(e.sort(SR))}}F(Ad,"id","time"),F(Ad,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Q2(s,e,t){let n=0,i=s.length-1,r,a,l,u;t?(e>=s[n].pos&&e<=s[i].pos&&({lo:n,hi:i}=dl(s,"pos",e)),{pos:r,time:l}=s[n],{pos:a,time:u}=s[i]):(e>=s[n].time&&e<=s[i].time&&({lo:n,hi:i}=dl(s,"time",e)),{time:r,pos:l}=s[n],{time:a,pos:u}=s[i]);const h=a-r;return h?l+(u-l)*(e-r)/h:l}class DR extends Ad{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Q2(t,this.min),this._tableRange=Q2(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let a,l,u,h,d;for(a=0,l=e.length;a<l;++a)h=e[a],h>=t&&h<=n&&i.push(h);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(a=0,l=i.length;a<l;++a)d=i[a+1],u=i[a-1],h=i[a],Math.round((d+u)/2)!==h&&r.push({time:h,pos:a/(l-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(t)||n.length===1)&&n.push(t),n.sort((i,r)=>i-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Q2(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Q2(this._table,n*this._tableRange+this._minPos,!0)}}F(DR,"id","timeseries"),F(DR,"defaults",Ad.defaults);const wI="label";function CR(s,e){typeof s=="function"?s(e):s&&(s.current=e)}function SK(s,e){const t=s.options;t&&e&&Object.assign(t,e)}function AI(s,e){s.labels=e}function TI(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wI;const n=[];s.datasets=e.map(i=>{const r=s.datasets.find(a=>a[t]===i[t]);return!r||!i.data||n.includes(r)?{...i}:(n.push(r),Object.assign(r,i),r)})}function _K(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wI;const t={labels:[],datasets:[]};return AI(t,s.labels),TI(t,s.datasets,e),t}function RK(s,e){const{height:t=150,width:n=300,redraw:i=!1,datasetIdKey:r,type:a,data:l,options:u,plugins:h=[],fallbackContent:d,updateMode:g,...p}=s,y=Q.useRef(null),v=Q.useRef(null),b=()=>{y.current&&(v.current=new Om(y.current,{type:a,data:_K(l,r),options:u&&{...u},plugins:h}),CR(e,v.current))},w=()=>{CR(e,null),v.current&&(v.current.destroy(),v.current=null)};return Q.useEffect(()=>{!i&&v.current&&u&&SK(v.current,u)},[i,u]),Q.useEffect(()=>{!i&&v.current&&AI(v.current.config.data,l.labels)},[i,l.labels]),Q.useEffect(()=>{!i&&v.current&&l.datasets&&TI(v.current.config.data,l.datasets,r)},[i,l.datasets]),Q.useEffect(()=>{v.current&&(i?(w(),setTimeout(b)):v.current.update(g))},[i,u,l.labels,l.datasets,g]),Q.useEffect(()=>{v.current&&(w(),setTimeout(b))},[a]),Q.useEffect(()=>(b(),()=>w()),[]),Eg.createElement("canvas",{ref:y,role:"img",height:t,width:n,...p},d)}const kK=Q.forwardRef(RK);function LK(s,e){return Om.register(e),Q.forwardRef((t,n)=>Eg.createElement(kK,{...t,ref:n,type:s}))}const DK=LK("line",yg),SI=6048e5,CK=864e5,qd=6e4,Qd=36e5,IK=1e3,IR=Symbol.for("constructDateFrom");function Kt(s,e){return typeof s=="function"?s(e):s&&typeof s=="object"&&IR in s?s[IR](e):s instanceof Date?new s.constructor(e):new Date(e)}function Ge(s,e){return Kt(e||s,s)}function Pm(s,e,t){const n=Ge(s,t==null?void 0:t.in);return isNaN(e)?Kt((t==null?void 0:t.in)||s,NaN):(e&&n.setDate(n.getDate()+e),n)}function Db(s,e,t){const n=Ge(s,t==null?void 0:t.in);if(isNaN(e))return Kt(s,NaN);if(!e)return n;const i=n.getDate(),r=Kt(s,n.getTime());r.setMonth(n.getMonth()+e+1,0);const a=r.getDate();return i>=a?r:(n.setFullYear(r.getFullYear(),r.getMonth(),i),n)}function Cb(s,e,t){return Kt(s,+Ge(s)+e)}function OK(s,e,t){return Cb(s,e*Qd)}let MK={};function Wl(){return MK}function or(s,e){var l,u,h,d;const t=Wl(),n=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??t.weekStartsOn??((d=(h=t.locale)==null?void 0:h.options)==null?void 0:d.weekStartsOn)??0,i=Ge(s,e==null?void 0:e.in),r=i.getDay(),a=(r<n?7:0)+r-n;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function ch(s,e){return or(s,{...e,weekStartsOn:1})}function _I(s,e){const t=Ge(s,e==null?void 0:e.in),n=t.getFullYear(),i=Kt(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const r=ch(i),a=Kt(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const l=ch(a);return t.getTime()>=r.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}function nm(s){const e=Ge(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function Xl(s,...e){const t=Kt.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function gv(s,e){const t=Ge(s,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function RI(s,e,t){const[n,i]=Xl(t==null?void 0:t.in,s,e),r=gv(n),a=gv(i),l=+r-nm(r),u=+a-nm(a);return Math.round((l-u)/CK)}function PK(s,e){const t=_I(s,e),n=Kt(s,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),ch(n)}function NK(s,e,t){const n=Ge(s,t==null?void 0:t.in);return n.setTime(n.getTime()+e*qd),n}function BK(s,e,t){return Db(s,e*3,t)}function FK(s,e,t){return Cb(s,e*1e3)}function UK(s,e,t){return Pm(s,e*7,t)}function HK(s,e,t){return Db(s,e*12,t)}function Xf(s,e){const t=+Ge(s)-+Ge(e);return t<0?-1:t>0?1:t}function GK(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function kI(s){return!(!GK(s)&&typeof s!="number"||isNaN(+Ge(s)))}function zK(s,e,t){const[n,i]=Xl(t==null?void 0:t.in,s,e),r=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth();return r*12+a}function $K(s,e,t){const[n,i]=Xl(t==null?void 0:t.in,s,e);return n.getFullYear()-i.getFullYear()}function LI(s,e,t){const[n,i]=Xl(t==null?void 0:t.in,s,e),r=OR(n,i),a=Math.abs(RI(n,i));n.setDate(n.getDate()-r*a);const l=+(OR(n,i)===-r),u=r*(a-l);return u===0?0:u}function OR(s,e){const t=s.getFullYear()-e.getFullYear()||s.getMonth()-e.getMonth()||s.getDate()-e.getDate()||s.getHours()-e.getHours()||s.getMinutes()-e.getMinutes()||s.getSeconds()-e.getSeconds()||s.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Wd(s){return e=>{const n=(s?Math[s]:Math.trunc)(e);return n===0?0:n}}function VK(s,e,t){const[n,i]=Xl(t==null?void 0:t.in,s,e),r=(+n-+i)/Qd;return Wd(t==null?void 0:t.roundingMethod)(r)}function Ib(s,e){return+Ge(s)-+Ge(e)}function YK(s,e,t){const n=Ib(s,e)/qd;return Wd(t==null?void 0:t.roundingMethod)(n)}function DI(s,e){const t=Ge(s,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function CI(s,e){const t=Ge(s,e==null?void 0:e.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function KK(s,e){const t=Ge(s,e==null?void 0:e.in);return+DI(t,e)==+CI(t,e)}function II(s,e,t){const[n,i,r]=Xl(t==null?void 0:t.in,s,s,e),a=Xf(i,r),l=Math.abs(zK(i,r));if(l<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*l);let u=Xf(i,r)===-a;KK(n)&&l===1&&Xf(n,r)===1&&(u=!1);const h=a*(l-+u);return h===0?0:h}function jK(s,e,t){const n=II(s,e,t)/3;return Wd(t==null?void 0:t.roundingMethod)(n)}function qK(s,e,t){const n=Ib(s,e)/1e3;return Wd(t==null?void 0:t.roundingMethod)(n)}function QK(s,e,t){const n=LI(s,e,t)/7;return Wd(t==null?void 0:t.roundingMethod)(n)}function WK(s,e,t){const[n,i]=Xl(t==null?void 0:t.in,s,e),r=Xf(n,i),a=Math.abs($K(n,i));n.setFullYear(1584),i.setFullYear(1584);const l=Xf(n,i)===-r,u=r*(a-+l);return u===0?0:u}function XK(s,e){const t=Ge(s,e==null?void 0:e.in),n=t.getMonth(),i=n-n%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function ZK(s,e){const t=Ge(s,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function JK(s,e){const t=Ge(s,e==null?void 0:e.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function OI(s,e){const t=Ge(s,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function ej(s,e){const t=Ge(s,e==null?void 0:e.in);return t.setMinutes(59,59,999),t}function tj(s,e){var l,u;const t=Wl(),n=t.weekStartsOn??((u=(l=t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??0,i=Ge(s,e==null?void 0:e.in),r=i.getDay(),a=(r<n?-7:0)+6-(r-n);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function nj(s,e){const t=Ge(s,e==null?void 0:e.in);return t.setSeconds(59,999),t}function sj(s,e){const t=Ge(s,e==null?void 0:e.in),n=t.getMonth(),i=n-n%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function ij(s,e){const t=Ge(s,e==null?void 0:e.in);return t.setMilliseconds(999),t}const rj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},aj=(s,e,t)=>{let n;const i=rj[s];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Wx(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const oj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},lj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uj={date:Wx({formats:oj,defaultWidth:"full"}),time:Wx({formats:lj,defaultWidth:"full"}),dateTime:Wx({formats:cj,defaultWidth:"full"})},hj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fj=(s,e,t,n)=>hj[s];function _f(s){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let i;if(n==="formatting"&&s.formattingValues){const a=s.defaultFormattingWidth||s.defaultWidth,l=t!=null&&t.width?String(t.width):a;i=s.formattingValues[l]||s.formattingValues[a]}else{const a=s.defaultWidth,l=t!=null&&t.width?String(t.width):s.defaultWidth;i=s.values[l]||s.values[a]}const r=s.argumentCallback?s.argumentCallback(e):e;return i[r]}}const dj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vj=(s,e)=>{const t=Number(s),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},bj={ordinalNumber:vj,era:_f({values:dj,defaultWidth:"wide"}),quarter:_f({values:gj,defaultWidth:"wide",argumentCallback:s=>s-1}),month:_f({values:mj,defaultWidth:"wide"}),day:_f({values:pj,defaultWidth:"wide"}),dayPeriod:_f({values:yj,defaultWidth:"wide",formattingValues:xj,defaultFormattingWidth:"wide"})};function Rf(s){return(e,t={})=>{const n=t.width,i=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],r=e.match(i);if(!r)return null;const a=r[0],l=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],u=Array.isArray(l)?wj(l,g=>g.test(a)):Ej(l,g=>g.test(a));let h;h=s.valueCallback?s.valueCallback(u):u,h=t.valueCallback?t.valueCallback(h):h;const d=e.slice(a.length);return{value:h,rest:d}}}function Ej(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function wj(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function Aj(s){return(e,t={})=>{const n=e.match(s.matchPattern);if(!n)return null;const i=n[0],r=e.match(s.parsePattern);if(!r)return null;let a=s.valueCallback?s.valueCallback(r[0]):r[0];a=t.valueCallback?t.valueCallback(a):a;const l=e.slice(i.length);return{value:a,rest:l}}}const Tj=/^(\d+)(th|st|nd|rd)?/i,Sj=/\d+/i,_j={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Rj={any:[/^b/i,/^(a|c)/i]},kj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Lj={any:[/1/i,/2/i,/3/i,/4/i]},Dj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ij={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Oj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Pj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nj={ordinalNumber:Aj({matchPattern:Tj,parsePattern:Sj,valueCallback:s=>parseInt(s,10)}),era:Rf({matchPatterns:_j,defaultMatchWidth:"wide",parsePatterns:Rj,defaultParseWidth:"any"}),quarter:Rf({matchPatterns:kj,defaultMatchWidth:"wide",parsePatterns:Lj,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Rf({matchPatterns:Dj,defaultMatchWidth:"wide",parsePatterns:Cj,defaultParseWidth:"any"}),day:Rf({matchPatterns:Ij,defaultMatchWidth:"wide",parsePatterns:Oj,defaultParseWidth:"any"}),dayPeriod:Rf({matchPatterns:Mj,defaultMatchWidth:"any",parsePatterns:Pj,defaultParseWidth:"any"})},MI={code:"en-US",formatDistance:aj,formatLong:uj,formatRelative:fj,localize:bj,match:Nj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Bj(s,e){const t=Ge(s,e==null?void 0:e.in);return RI(t,OI(t))+1}function PI(s,e){const t=Ge(s,e==null?void 0:e.in),n=+ch(t)-+PK(t);return Math.round(n/SI)+1}function Ob(s,e){var d,g,p,y;const t=Ge(s,e==null?void 0:e.in),n=t.getFullYear(),i=Wl(),r=(e==null?void 0:e.firstWeekContainsDate)??((g=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(p=i.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,a=Kt((e==null?void 0:e.in)||s,0);a.setFullYear(n+1,0,r),a.setHours(0,0,0,0);const l=or(a,e),u=Kt((e==null?void 0:e.in)||s,0);u.setFullYear(n,0,r),u.setHours(0,0,0,0);const h=or(u,e);return+t>=+l?n+1:+t>=+h?n:n-1}function Fj(s,e){var l,u,h,d;const t=Wl(),n=(e==null?void 0:e.firstWeekContainsDate)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(h=t.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,i=Ob(s,e),r=Kt((e==null?void 0:e.in)||s,0);return r.setFullYear(i,0,n),r.setHours(0,0,0,0),or(r,e)}function NI(s,e){const t=Ge(s,e==null?void 0:e.in),n=+or(t,e)-+Fj(t,e);return Math.round(n/SI)+1}function gt(s,e){const t=s<0?"-":"",n=Math.abs(s).toString().padStart(e,"0");return t+n}const Ua={y(s,e){const t=s.getFullYear(),n=t>0?t:1-t;return gt(e==="yy"?n%100:n,e.length)},M(s,e){const t=s.getMonth();return e==="M"?String(t+1):gt(t+1,2)},d(s,e){return gt(s.getDate(),e.length)},a(s,e){const t=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(s,e){return gt(s.getHours()%12||12,e.length)},H(s,e){return gt(s.getHours(),e.length)},m(s,e){return gt(s.getMinutes(),e.length)},s(s,e){return gt(s.getSeconds(),e.length)},S(s,e){const t=e.length,n=s.getMilliseconds(),i=Math.trunc(n*Math.pow(10,t-3));return gt(i,e.length)}},Vc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},MR={G:function(s,e,t){const n=s.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(s,e,t){if(e==="yo"){const n=s.getFullYear(),i=n>0?n:1-n;return t.ordinalNumber(i,{unit:"year"})}return Ua.y(s,e)},Y:function(s,e,t,n){const i=Ob(s,n),r=i>0?i:1-i;if(e==="YY"){const a=r%100;return gt(a,2)}return e==="Yo"?t.ordinalNumber(r,{unit:"year"}):gt(r,e.length)},R:function(s,e){const t=_I(s);return gt(t,e.length)},u:function(s,e){const t=s.getFullYear();return gt(t,e.length)},Q:function(s,e,t){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return gt(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,e,t){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return gt(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,e,t){const n=s.getMonth();switch(e){case"M":case"MM":return Ua.M(s,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(s,e,t){const n=s.getMonth();switch(e){case"L":return String(n+1);case"LL":return gt(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(s,e,t,n){const i=NI(s,n);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):gt(i,e.length)},I:function(s,e,t){const n=PI(s);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):gt(n,e.length)},d:function(s,e,t){return e==="do"?t.ordinalNumber(s.getDate(),{unit:"date"}):Ua.d(s,e)},D:function(s,e,t){const n=Bj(s);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):gt(n,e.length)},E:function(s,e,t){const n=s.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(s,e,t,n){const i=s.getDay(),r=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return gt(r,2);case"eo":return t.ordinalNumber(r,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(s,e,t,n){const i=s.getDay(),r=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return gt(r,e.length);case"co":return t.ordinalNumber(r,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(s,e,t){const n=s.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return gt(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(s,e,t){const i=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(s,e,t){const n=s.getHours();let i;switch(n===12?i=Vc.noon:n===0?i=Vc.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(s,e,t){const n=s.getHours();let i;switch(n>=17?i=Vc.evening:n>=12?i=Vc.afternoon:n>=4?i=Vc.morning:i=Vc.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(s,e,t){if(e==="ho"){let n=s.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Ua.h(s,e)},H:function(s,e,t){return e==="Ho"?t.ordinalNumber(s.getHours(),{unit:"hour"}):Ua.H(s,e)},K:function(s,e,t){const n=s.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):gt(n,e.length)},k:function(s,e,t){let n=s.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):gt(n,e.length)},m:function(s,e,t){return e==="mo"?t.ordinalNumber(s.getMinutes(),{unit:"minute"}):Ua.m(s,e)},s:function(s,e,t){return e==="so"?t.ordinalNumber(s.getSeconds(),{unit:"second"}):Ua.s(s,e)},S:function(s,e){return Ua.S(s,e)},X:function(s,e,t){const n=s.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return NR(n);case"XXXX":case"XX":return nl(n);case"XXXXX":case"XXX":default:return nl(n,":")}},x:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"x":return NR(n);case"xxxx":case"xx":return nl(n);case"xxxxx":case"xxx":default:return nl(n,":")}},O:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+PR(n,":");case"OOOO":default:return"GMT"+nl(n,":")}},z:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+PR(n,":");case"zzzz":default:return"GMT"+nl(n,":")}},t:function(s,e,t){const n=Math.trunc(+s/1e3);return gt(n,e.length)},T:function(s,e,t){return gt(+s,e.length)}};function PR(s,e=""){const t=s>0?"-":"+",n=Math.abs(s),i=Math.trunc(n/60),r=n%60;return r===0?t+String(i):t+String(i)+e+gt(r,2)}function NR(s,e){return s%60===0?(s>0?"-":"+")+gt(Math.abs(s)/60,2):nl(s,e)}function nl(s,e=""){const t=s>0?"-":"+",n=Math.abs(s),i=gt(Math.trunc(n/60),2),r=gt(n%60,2);return t+i+e+r}const BR=(s,e)=>{switch(s){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},BI=(s,e)=>{switch(s){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Uj=(s,e)=>{const t=s.match(/(P+)(p+)?/)||[],n=t[1],i=t[2];if(!i)return BR(s,e);let r;switch(n){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",BR(n,e)).replace("{{time}}",BI(i,e))},mv={p:BI,P:Uj},Hj=/^D+$/,Gj=/^Y+$/,zj=["D","DD","YY","YYYY"];function FI(s){return Hj.test(s)}function UI(s){return Gj.test(s)}function pv(s,e,t){const n=$j(s,e,t);if(console.warn(n),zj.includes(s))throw new RangeError(n)}function $j(s,e,t){const n=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Vj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Yj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Kj=/^'([^]*?)'?$/,jj=/''/g,qj=/[a-zA-Z]/;function Qj(s,e,t){var d,g,p,y,v,b,w,A;const n=Wl(),i=(t==null?void 0:t.locale)??n.locale??MI,r=(t==null?void 0:t.firstWeekContainsDate)??((g=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??n.firstWeekContainsDate??((y=(p=n.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((b=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??n.weekStartsOn??((A=(w=n.locale)==null?void 0:w.options)==null?void 0:A.weekStartsOn)??0,l=Ge(s,t==null?void 0:t.in);if(!kI(l))throw new RangeError("Invalid time value");let u=e.match(Yj).map(S=>{const T=S[0];if(T==="p"||T==="P"){const D=mv[T];return D(S,i.formatLong)}return S}).join("").match(Vj).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const T=S[0];if(T==="'")return{isToken:!1,value:Wj(S)};if(MR[T])return{isToken:!0,value:S};if(T.match(qj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(u=i.localize.preprocessor(l,u));const h={firstWeekContainsDate:r,weekStartsOn:a,locale:i};return u.map(S=>{if(!S.isToken)return S.value;const T=S.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&UI(T)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&FI(T))&&pv(T,e,String(s));const D=MR[T[0]];return D(l,T,i.localize,h)}).join("")}function Wj(s){const e=s.match(Kj);return e?e[1].replace(jj,"'"):s}function Xj(){return Object.assign({},Wl())}function Zj(s,e){const t=Ge(s,e==null?void 0:e.in).getDay();return t===0?7:t}function Jj(s,e){const t=eq(e)?new e(0):Kt(e,0);return t.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),t.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),t}function eq(s){var e;return typeof s=="function"&&((e=s.prototype)==null?void 0:e.constructor)===s}const tq=10;class HI{constructor(){F(this,"subPriority",0)}validate(e,t){return!0}}class nq extends HI{constructor(e,t,n,i,r){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=i,r&&(this.subPriority=r)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class sq extends HI{constructor(t,n){super();F(this,"priority",tq);F(this,"subPriority",-1);this.context=t||(i=>Kt(n,i))}set(t,n){return n.timestampIsSet?t:Kt(t,Jj(t,this.context))}}class ut{run(e,t,n,i){const r=this.parse(e,t,n,i);return r?{setter:new nq(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}validate(e,t,n){return!0}}class iq extends ut{constructor(){super(...arguments);F(this,"priority",140);F(this,"incompatibleTokens",["R","u","t","T"])}parse(t,n,i){switch(n){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,n,i){return n.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const en={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Zi={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function tn(s,e){return s&&{value:e(s.value),rest:s.rest}}function Ft(s,e){const t=e.match(s);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Ji(s,e){const t=e.match(s);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,r=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:n*(i*Qd+r*qd+a*IK),rest:e.slice(t[0].length)}}function GI(s){return Ft(en.anyDigitsSigned,s)}function jt(s,e){switch(s){case 1:return Ft(en.singleDigit,e);case 2:return Ft(en.twoDigits,e);case 3:return Ft(en.threeDigits,e);case 4:return Ft(en.fourDigits,e);default:return Ft(new RegExp("^\\d{1,"+s+"}"),e)}}function sm(s,e){switch(s){case 1:return Ft(en.singleDigitSigned,e);case 2:return Ft(en.twoDigitsSigned,e);case 3:return Ft(en.threeDigitsSigned,e);case 4:return Ft(en.fourDigitsSigned,e);default:return Ft(new RegExp("^-?\\d{1,"+s+"}"),e)}}function Mb(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function zI(s,e){const t=e>0,n=t?e:1-e;let i;if(n<=50)i=s||100;else{const r=n+50,a=Math.trunc(r/100)*100,l=s>=r%100;i=s+a-(l?100:0)}return t?i:1-i}function $I(s){return s%400===0||s%4===0&&s%100!==0}class rq extends ut{constructor(){super(...arguments);F(this,"priority",130);F(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,n,i){const r=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return tn(jt(4,t),r);case"yo":return tn(i.ordinalNumber(t,{unit:"year"}),r);default:return tn(jt(n.length,t),r)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,i){const r=t.getFullYear();if(i.isTwoDigitYear){const l=zI(i.year,r);return t.setFullYear(l,0,1),t.setHours(0,0,0,0),t}const a=!("era"in n)||n.era===1?i.year:1-i.year;return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}}class aq extends ut{constructor(){super(...arguments);F(this,"priority",130);F(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,n,i){const r=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return tn(jt(4,t),r);case"Yo":return tn(i.ordinalNumber(t,{unit:"year"}),r);default:return tn(jt(n.length,t),r)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,i,r){const a=Ob(t,r);if(i.isTwoDigitYear){const u=zI(i.year,a);return t.setFullYear(u,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),or(t,r)}const l=!("era"in n)||n.era===1?i.year:1-i.year;return t.setFullYear(l,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),or(t,r)}}class oq extends ut{constructor(){super(...arguments);F(this,"priority",130);F(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,n){return sm(n==="R"?4:n.length,t)}set(t,n,i){const r=Kt(t,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),ch(r)}}class lq extends ut{constructor(){super(...arguments);F(this,"priority",130);F(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,n){return sm(n==="u"?4:n.length,t)}set(t,n,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class cq extends ut{constructor(){super(...arguments);F(this,"priority",120);F(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"Q":case"QQ":return jt(n.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class uq extends ut{constructor(){super(...arguments);F(this,"priority",120);F(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"q":case"qq":return jt(n.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class hq extends ut{constructor(){super(...arguments);F(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);F(this,"priority",110)}parse(t,n,i){const r=a=>a-1;switch(n){case"M":return tn(Ft(en.month,t),r);case"MM":return tn(jt(2,t),r);case"Mo":return tn(i.ordinalNumber(t,{unit:"month"}),r);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class fq extends ut{constructor(){super(...arguments);F(this,"priority",110);F(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,n,i){const r=a=>a-1;switch(n){case"L":return tn(Ft(en.month,t),r);case"LL":return tn(jt(2,t),r);case"Lo":return tn(i.ordinalNumber(t,{unit:"month"}),r);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function dq(s,e,t){const n=Ge(s,t==null?void 0:t.in),i=NI(n,t)-e;return n.setDate(n.getDate()-i*7),Ge(n,t==null?void 0:t.in)}class gq extends ut{constructor(){super(...arguments);F(this,"priority",100);F(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,n,i){switch(n){case"w":return Ft(en.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return jt(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,i,r){return or(dq(t,i,r),r)}}function mq(s,e,t){const n=Ge(s,t==null?void 0:t.in),i=PI(n,t)-e;return n.setDate(n.getDate()-i*7),n}class pq extends ut{constructor(){super(...arguments);F(this,"priority",100);F(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,n,i){switch(n){case"I":return Ft(en.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return jt(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,i){return ch(mq(t,i))}}const yq=[31,28,31,30,31,30,31,31,30,31,30,31],xq=[31,29,31,30,31,30,31,31,30,31,30,31];class vq extends ut{constructor(){super(...arguments);F(this,"priority",90);F(this,"subPriority",1);F(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"d":return Ft(en.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return jt(n.length,t)}}validate(t,n){const i=t.getFullYear(),r=$I(i),a=t.getMonth();return r?n>=1&&n<=xq[a]:n>=1&&n<=yq[a]}set(t,n,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class bq extends ut{constructor(){super(...arguments);F(this,"priority",90);F(this,"subpriority",1);F(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,n,i){switch(n){case"D":case"DD":return Ft(en.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return jt(n.length,t)}}validate(t,n){const i=t.getFullYear();return $I(i)?n>=1&&n<=366:n>=1&&n<=365}set(t,n,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function Pb(s,e,t){var g,p,y,v;const n=Wl(),i=(t==null?void 0:t.weekStartsOn)??((p=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((v=(y=n.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,r=Ge(s,t==null?void 0:t.in),a=r.getDay(),u=(e%7+7)%7,h=7-i,d=e<0||e>6?e-(a+h)%7:(u+h)%7-(a+h)%7;return Pm(r,d,t)}class Eq extends ut{constructor(){super(...arguments);F(this,"priority",90);F(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,r){return t=Pb(t,i,r),t.setHours(0,0,0,0),t}}class wq extends ut{constructor(){super(...arguments);F(this,"priority",90);F(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,n,i,r){const a=l=>{const u=Math.floor((l-1)/7)*7;return(l+r.weekStartsOn+6)%7+u};switch(n){case"e":case"ee":return tn(jt(n.length,t),a);case"eo":return tn(i.ordinalNumber(t,{unit:"day"}),a);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,r){return t=Pb(t,i,r),t.setHours(0,0,0,0),t}}class Aq extends ut{constructor(){super(...arguments);F(this,"priority",90);F(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,n,i,r){const a=l=>{const u=Math.floor((l-1)/7)*7;return(l+r.weekStartsOn+6)%7+u};switch(n){case"c":case"cc":return tn(jt(n.length,t),a);case"co":return tn(i.ordinalNumber(t,{unit:"day"}),a);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,r){return t=Pb(t,i,r),t.setHours(0,0,0,0),t}}function Tq(s,e,t){const n=Ge(s,t==null?void 0:t.in),i=Zj(n,t),r=e-i;return Pm(n,r,t)}class Sq extends ut{constructor(){super(...arguments);F(this,"priority",90);F(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,n,i){const r=a=>a===0?7:a;switch(n){case"i":case"ii":return jt(n.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return tn(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return tn(i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return tn(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiii":default:return tn(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r)}}validate(t,n){return n>=1&&n<=7}set(t,n,i){return t=Tq(t,i),t.setHours(0,0,0,0),t}}class _q extends ut{constructor(){super(...arguments);F(this,"priority",80);F(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,n,i){switch(n){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(Mb(i),0,0,0),t}}class Rq extends ut{constructor(){super(...arguments);F(this,"priority",80);F(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,n,i){switch(n){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(Mb(i),0,0,0),t}}class kq extends ut{constructor(){super(...arguments);F(this,"priority",80);F(this,"incompatibleTokens",["a","b","t","T"])}parse(t,n,i){switch(n){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(Mb(i),0,0,0),t}}class Lq extends ut{constructor(){super(...arguments);F(this,"priority",70);F(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,n,i){switch(n){case"h":return Ft(en.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return jt(n.length,t)}}validate(t,n){return n>=1&&n<=12}set(t,n,i){const r=t.getHours()>=12;return r&&i<12?t.setHours(i+12,0,0,0):!r&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class Dq extends ut{constructor(){super(...arguments);F(this,"priority",70);F(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,n,i){switch(n){case"H":return Ft(en.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return jt(n.length,t)}}validate(t,n){return n>=0&&n<=23}set(t,n,i){return t.setHours(i,0,0,0),t}}class Cq extends ut{constructor(){super(...arguments);F(this,"priority",70);F(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,n,i){switch(n){case"K":return Ft(en.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return jt(n.length,t)}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class Iq extends ut{constructor(){super(...arguments);F(this,"priority",70);F(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,n,i){switch(n){case"k":return Ft(en.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return jt(n.length,t)}}validate(t,n){return n>=1&&n<=24}set(t,n,i){const r=i<=24?i%24:i;return t.setHours(r,0,0,0),t}}class Oq extends ut{constructor(){super(...arguments);F(this,"priority",60);F(this,"incompatibleTokens",["t","T"])}parse(t,n,i){switch(n){case"m":return Ft(en.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return jt(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,i){return t.setMinutes(i,0,0),t}}class Mq extends ut{constructor(){super(...arguments);F(this,"priority",50);F(this,"incompatibleTokens",["t","T"])}parse(t,n,i){switch(n){case"s":return Ft(en.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return jt(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,i){return t.setSeconds(i,0),t}}class Pq extends ut{constructor(){super(...arguments);F(this,"priority",30);F(this,"incompatibleTokens",["t","T"])}parse(t,n){const i=r=>Math.trunc(r*Math.pow(10,-n.length+3));return tn(jt(n.length,t),i)}set(t,n,i){return t.setMilliseconds(i),t}}class Nq extends ut{constructor(){super(...arguments);F(this,"priority",10);F(this,"incompatibleTokens",["t","T","x"])}parse(t,n){switch(n){case"X":return Ji(Zi.basicOptionalMinutes,t);case"XX":return Ji(Zi.basic,t);case"XXXX":return Ji(Zi.basicOptionalSeconds,t);case"XXXXX":return Ji(Zi.extendedOptionalSeconds,t);case"XXX":default:return Ji(Zi.extended,t)}}set(t,n,i){return n.timestampIsSet?t:Kt(t,t.getTime()-nm(t)-i)}}class Bq extends ut{constructor(){super(...arguments);F(this,"priority",10);F(this,"incompatibleTokens",["t","T","X"])}parse(t,n){switch(n){case"x":return Ji(Zi.basicOptionalMinutes,t);case"xx":return Ji(Zi.basic,t);case"xxxx":return Ji(Zi.basicOptionalSeconds,t);case"xxxxx":return Ji(Zi.extendedOptionalSeconds,t);case"xxx":default:return Ji(Zi.extended,t)}}set(t,n,i){return n.timestampIsSet?t:Kt(t,t.getTime()-nm(t)-i)}}class Fq extends ut{constructor(){super(...arguments);F(this,"priority",40);F(this,"incompatibleTokens","*")}parse(t){return GI(t)}set(t,n,i){return[Kt(t,i*1e3),{timestampIsSet:!0}]}}class Uq extends ut{constructor(){super(...arguments);F(this,"priority",20);F(this,"incompatibleTokens","*")}parse(t){return GI(t)}set(t,n,i){return[Kt(t,i),{timestampIsSet:!0}]}}const Hq={G:new iq,y:new rq,Y:new aq,R:new oq,u:new lq,Q:new cq,q:new uq,M:new hq,L:new fq,w:new gq,I:new pq,d:new vq,D:new bq,E:new Eq,e:new wq,c:new Aq,i:new Sq,a:new _q,b:new Rq,B:new kq,h:new Lq,H:new Dq,K:new Cq,k:new Iq,m:new Oq,s:new Mq,S:new Pq,X:new Nq,x:new Bq,t:new Fq,T:new Uq},Gq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$q=/^'([^]*?)'?$/,Vq=/''/g,Yq=/\S/,Kq=/[a-zA-Z]/;function jq(s,e,t,n){var w,A,S,T,D,L,B,M;const i=()=>Kt((n==null?void 0:n.in)||t,NaN),r=Xj(),a=(n==null?void 0:n.locale)??r.locale??MI,l=(n==null?void 0:n.firstWeekContainsDate)??((A=(w=n==null?void 0:n.locale)==null?void 0:w.options)==null?void 0:A.firstWeekContainsDate)??r.firstWeekContainsDate??((T=(S=r.locale)==null?void 0:S.options)==null?void 0:T.firstWeekContainsDate)??1,u=(n==null?void 0:n.weekStartsOn)??((L=(D=n==null?void 0:n.locale)==null?void 0:D.options)==null?void 0:L.weekStartsOn)??r.weekStartsOn??((M=(B=r.locale)==null?void 0:B.options)==null?void 0:M.weekStartsOn)??0;if(!e)return s?i():Ge(t,n==null?void 0:n.in);const h={firstWeekContainsDate:l,weekStartsOn:u,locale:a},d=[new sq(n==null?void 0:n.in,t)],g=e.match(zq).map(I=>{const N=I[0];if(N in mv){const P=mv[N];return P(I,a.formatLong)}return I}).join("").match(Gq),p=[];for(let I of g){!(n!=null&&n.useAdditionalWeekYearTokens)&&UI(I)&&pv(I,e,s),!(n!=null&&n.useAdditionalDayOfYearTokens)&&FI(I)&&pv(I,e,s);const N=I[0],P=Hq[N];if(P){const{incompatibleTokens:z}=P;if(Array.isArray(z)){const ye=p.find(me=>z.includes(me.token)||me.token===N);if(ye)throw new RangeError(`The format string mustn't contain \`${ye.fullToken}\` and \`${I}\` at the same time`)}else if(P.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${I}\` and any other token at the same time`);p.push({token:N,fullToken:I});const te=P.run(s,I,a.match,h);if(!te)return i();d.push(te.setter),s=te.rest}else{if(N.match(Kq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(I==="''"?I="'":N==="'"&&(I=qq(I)),s.indexOf(I)===0)s=s.slice(I.length);else return i()}}if(s.length>0&&Yq.test(s))return i();const y=d.map(I=>I.priority).sort((I,N)=>N-I).filter((I,N,P)=>P.indexOf(I)===N).map(I=>d.filter(N=>N.priority===I).sort((N,P)=>P.subPriority-N.subPriority)).map(I=>I[0]);let v=Ge(t,n==null?void 0:n.in);if(isNaN(+v))return i();const b={};for(const I of y){if(!I.validate(v,h))return i();const N=I.set(v,b,h);Array.isArray(N)?(v=N[0],Object.assign(b,N[1])):v=N}return v}function qq(s){return s.match($q)[1].replace(Vq,"'")}function Qq(s,e){const t=Ge(s,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function Wq(s,e){const t=Ge(s,e==null?void 0:e.in);return t.setSeconds(0,0),t}function Xq(s,e){const t=Ge(s,e==null?void 0:e.in);return t.setMilliseconds(0),t}function Zq(s,e){const t=()=>Kt(e==null?void 0:e.in,NaN),n=(e==null?void 0:e.additionalDigits)??2,i=nQ(s);let r;if(i.date){const h=sQ(i.date,n);r=iQ(h.restDateString,h.year)}if(!r||isNaN(+r))return t();const a=+r;let l=0,u;if(i.time&&(l=rQ(i.time),isNaN(l)))return t();if(i.timezone){if(u=aQ(i.timezone),isNaN(u))return t()}else{const h=new Date(a+l),d=Ge(0,e==null?void 0:e.in);return d.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),d.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),d}return Ge(a+l+u,e==null?void 0:e.in)}const W2={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Jq=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,eQ=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,tQ=/^([+-])(\d{2})(?::?(\d{2}))?$/;function nQ(s){const e={},t=s.split(W2.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],W2.timeZoneDelimiter.test(e.date)&&(e.date=s.split(W2.timeZoneDelimiter)[0],n=s.substr(e.date.length,s.length))),n){const i=W2.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function sQ(s,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=s.match(t);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,r=n[2]?parseInt(n[2]):null;return{year:r===null?i:r*100,restDateString:s.slice((n[1]||n[2]).length)}}function iQ(s,e){if(e===null)return new Date(NaN);const t=s.match(Jq);if(!t)return new Date(NaN);const n=!!t[4],i=kf(t[1]),r=kf(t[2])-1,a=kf(t[3]),l=kf(t[4]),u=kf(t[5])-1;if(n)return hQ(e,l,u)?oQ(e,l,u):new Date(NaN);{const h=new Date(0);return!cQ(e,r,a)||!uQ(e,i)?new Date(NaN):(h.setUTCFullYear(e,r,Math.max(i,a)),h)}}function kf(s){return s?parseInt(s):1}function rQ(s){const e=s.match(eQ);if(!e)return NaN;const t=Xx(e[1]),n=Xx(e[2]),i=Xx(e[3]);return fQ(t,n,i)?t*Qd+n*qd+i*1e3:NaN}function Xx(s){return s&&parseFloat(s.replace(",","."))||0}function aQ(s){if(s==="Z")return 0;const e=s.match(tQ);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return dQ(n,i)?t*(n*Qd+i*qd):NaN}function oQ(s,e,t){const n=new Date(0);n.setUTCFullYear(s,0,4);const i=n.getUTCDay()||7,r=(e-1)*7+t+1-i;return n.setUTCDate(n.getUTCDate()+r),n}const lQ=[31,null,31,30,31,30,31,31,30,31,30,31];function VI(s){return s%400===0||s%4===0&&s%100!==0}function cQ(s,e,t){return e>=0&&e<=11&&t>=1&&t<=(lQ[e]||(VI(s)?29:28))}function uQ(s,e){return e>=1&&e<=(VI(s)?366:365)}function hQ(s,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function fQ(s,e,t){return s===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&s>=0&&s<25}function dQ(s,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const gQ={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};lI._date.override({_id:"date-fns",formats:function(){return gQ},parse:function(s,e){if(s===null||typeof s>"u")return null;const t=typeof s;return t==="number"||s instanceof Date?s=Ge(s):t==="string"&&(typeof e=="string"?s=jq(s,e,new Date,this.options):s=Zq(s,this.options)),kI(s)?s.getTime():null},format:function(s,e){return Qj(s,e,this.options)},add:function(s,e,t){switch(t){case"millisecond":return Cb(s,e);case"second":return FK(s,e);case"minute":return NK(s,e);case"hour":return OK(s,e);case"day":return Pm(s,e);case"week":return UK(s,e);case"month":return Db(s,e);case"quarter":return BK(s,e);case"year":return HK(s,e);default:return s}},diff:function(s,e,t){switch(t){case"millisecond":return Ib(s,e);case"second":return qK(s,e);case"minute":return YK(s,e);case"hour":return VK(s,e);case"day":return LI(s,e);case"week":return QK(s,e);case"month":return II(s,e);case"quarter":return jK(s,e);case"year":return WK(s,e);default:return 0}},startOf:function(s,e,t){switch(e){case"second":return Xq(s);case"minute":return Wq(s);case"hour":return Qq(s);case"day":return gv(s);case"week":return or(s);case"isoWeek":return or(s,{weekStartsOn:+t});case"month":return ZK(s);case"quarter":return XK(s);case"year":return OI(s);default:return s}},endOf:function(s,e){switch(e){case"second":return ij(s);case"minute":return nj(s);case"hour":return ej(s);case"day":return DI(s);case"week":return tj(s);case"month":return CI(s);case"quarter":return sj(s);case"year":return JK(s);default:return s}}});Om.register(fv,dv,bg,Uf,pK,lK,Ad);const X2=({coinId:s})=>{const{ref:e,inView:t}=R9({triggerOnce:!0}),[n,i]=Q.useState(null),[r,a]=Q.useState(!1);return Q.useEffect(()=>{let l;return t&&!n&&!r&&(l=setTimeout(()=>{a(!0),fetch(`https://api.coingecko.com/api/v3/coins/${s}/market_chart?vs_currency=usd&days=7`).then(u=>u.json()).then(u=>{const h=u.prices.map(([d,g])=>({x:d,y:g}));i({datasets:[{label:`${s.toUpperCase()} / USDT`,data:h,borderColor:"#0ff",borderWidth:2,pointBackgroundColor:"#0ff",tension:.8,pointRadius:0}]})}).finally(()=>a(!1))},500)),()=>clearTimeout(l)},[t,n,r,s]),he.jsx("div",{ref:e,className:"my-12 px-4",children:he.jsxs(k9,{children:[r&&he.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-30 bg-black/60",children:he.jsx("h1",{className:"neon-red flicker text-[30px] text-center",children:"LOADING..."})}),!r&&n&&he.jsx(DK,{data:n,options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"day"},ticks:{color:"#0ff"},grid:{color:"rgba(0, 255, 255, 0.1)"}},y:{ticks:{color:"#0ff"},grid:{color:"rgba(0, 255, 255, 0.1)"}}},plugins:{legend:{labels:{color:"#0ff",font:{weight:"bold"}}}}}})]})})};function mQ(){return he.jsxs("div",{className:"min-h-screen bg-black mt-[80px] text-white px-4 py-10",children:[he.jsx("h1",{className:"text-4xl text-center font-bold mb-12 text-neon",children:"The Blockchain Ticker"}),he.jsx(X2,{coinId:"bitcoin"}),he.jsx(X2,{coinId:"ethereum"}),he.jsx(X2,{coinId:"solana"}),he.jsx(X2,{coinId:"dogecoin"})]})}const FR=["function initializeSystem(config) {","  console.log('[SYSTEM] Booting in neon mode...');","  for (let i = 0; i < config.modules.length; i++) {","    const status = loadModule(config.modules[i]);","    if (!status.success) throw new Error('Module failed: ' + config.modules[i]);","  }","  console.log('[SYSTEM] All modules loaded.');","}","","while (network.isConnected() && retries < MAX_RETRIES) {","  try {","    sendHeartbeatPacket();","    await delay(1000);","  } catch (err) {","    console.warn('Heartbeat failed, retrying...');","    retries++;","  }","}","","if (auth.isValid(token)) {","  session = createSession(user);","  grantAccess(session);","} else {","  logSecurityEvent('Invalid token: ' + token);","  denyAccess();","}","","const neonUI = await import('@neon/ui-core');","neonUI.mount('#main-display', { theme: 'cyberpunk', animate: true });","","fetch('/api/system/data', { headers: { 'Authorization': token } })","  .then(response => response.json())","  .then(systemData => {","    renderDashboard(systemData);","    console.log('[DATA] Dashboard rendered');","  })","  .catch(error => console.error('[ERROR] Data fetch failed:', error));","",">>> SYSTEM READY <<<"],UR=s=>Array.from({length:s},()=>FR[Math.floor(Math.random()*FR.length)]),pQ=()=>{const[s,e]=Q.useState(!0),t=[...UR(40),...UR(40)];return Q.useEffect(()=>{const n=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(n)},[]),s?he.jsxs("div",{className:"fixed inset-0 bg-black z-50 font-mono flex flex-col justify-center px-20",children:[he.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none pl-[40px]",children:he.jsx("div",{className:"code-stream animate-marquee h-[200%]",children:he.jsx("div",{className:"pl-16 text-red-500 neon-red text-left text-2xl font-bold leading-relaxed whitespace-pre",children:t.map((n,i)=>he.jsx("p",{children:n},i))})})}),he.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10",children:he.jsx("h1",{className:"neon-red flicker text-[30px] ...",children:"LOADING..."})})]}):null};function yQ(){return he.jsxs(he.Fragment,{children:[he.jsx(pQ,{}),he.jsxs(CN,{children:[he.jsx(GN,{}),he.jsxs(lN,{children:[he.jsx(Lf,{path:"/",element:he.jsx(E9,{})}),he.jsx(Lf,{path:"/LiveStream",element:he.jsx(I5,{})}),he.jsx(Lf,{path:"/CryptoMarket",element:he.jsx(mQ,{})}),he.jsx(Lf,{path:"/BlackjackTable",element:he.jsx(g9,{})})]})]})]})}xP.createRoot(document.getElementById("root")).render(he.jsx(Q.StrictMode,{children:he.jsx(yQ,{})}));
